{
    "value":  [
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\_layout.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027apiConfig\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  15,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  15,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027apiFetch\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  16,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  16,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  17,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  17,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027notification\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  50,
                                           "column":  82,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  50,
                                           "endColumn":  94
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027response\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  55,
                                           "column":  86,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  55,
                                           "endColumn":  94
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  5,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import { Stack } from \"expo-router\";\r\nimport { useFonts } from \"expo-font\";\r\nimport { Text, Platform } from \"react-native\";\r\nimport { useEffect } from \"react\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\nimport { ThemeProvider, useTheme } from \"../theme\";\r\nimport { ToastProvider } from \"../components/ToastProvider\";\r\n\r\nimport NetworkStatusProvider from \"../components/NetworkStatusProvider\";\r\nimport BottomNavigation from \"../components/BottomNavigation\";\r\nimport ErrorBoundary from \"../components/ErrorBoundary\";\r\nimport * as Notifications from \u0027expo-notifications\u0027;\r\nimport { getFCMToken, registerFCMTokenWithBackend } from \u0027../utils/fcm\u0027;\r\nimport { NavigationProvider } from \"../context/NavigationContext\";\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport apiFetch from \"../utils/apiFetch\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { PersistQueryClientProvider } from \u0027@tanstack/react-query-persist-client\u0027;\r\nimport { queryClient, persister } from \u0027../utils/queryClient\u0027;\r\n\r\n// Configure how notifications are displayed when app is in foreground\r\nNotifications.setNotificationHandler({\r\n  handleNotification: async () =\u003e ({\r\n    shouldShowAlert: true,\r\n    shouldPlaySound: true,\r\n    shouldSetBadge: true,\r\n  }),\r\n});\r\n\r\n// separate component so we can use useTheme inside ThemeProvider\r\nfunction Inner() {\r\n  const { styles } = useTheme();\r\n\r\n  // Setup push notifications\r\n  useEffect(() =\u003e {\r\n    let notificationSubscription;\r\n    let responseSubscription;\r\n\r\n    const setupNotifications = async () =\u003e {\r\n      if (Platform.OS === \u0027web\u0027) return;\r\n\r\n      try {\r\n        // Get and register FCM token\r\n        const token = await getFCMToken();\r\n        if (token) {\r\n          await registerFCMTokenWithBackend(token);\r\n        }\r\n\r\n        // Listen for foreground notifications\r\n        notificationSubscription = Notifications.addNotificationReceivedListener(notification =\u003e {\r\n          // Handle foreground notification\r\n        });\r\n\r\n        // Listen for notification taps (when user clicks notification)\r\n        responseSubscription = Notifications.addNotificationResponseReceivedListener(response =\u003e {\r\n          // You can add navigation logic here if needed\r\n          // e.g., navigate to news page when news notification is tapped\r\n        });\r\n      } catch (error) {\r\n        // Don\u0027t throw - app should work even if notifications fail\r\n      }\r\n    };\r\n\r\n    setupNotifications();\r\n\r\n    // Cleanup subscriptions on unmount\r\n    return () =\u003e {\r\n      notificationSubscription?.remove();\r\n      responseSubscription?.remove();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    \u003cSafeAreaView style={styles.safeArea}\u003e\r\n      \u003cToastProvider\u003e\r\n        \u003cNetworkStatusProvider\u003e\r\n          \u003cNavigationProvider\u003e\r\n            \u003cStack\r\n              screenOptions={{\r\n                headerShown: false,\r\n                animationEnabled: false, // Disable animations\r\n                animation: \u0027none\u0027, // Ensure no animation\r\n                // Enable gesture navigation\r\n                gestureEnabled: true,\r\n                gestureDirection: \u0027horizontal\u0027,\r\n                // Detach inactive screens for better memory usage\r\n                detachInactiveScreens: true,\r\n              }}\r\n            /\u003e\r\n            \u003cBottomNavigation /\u003e\r\n          \u003c/NavigationProvider\u003e\r\n        \u003c/NetworkStatusProvider\u003e\r\n      \u003c/ToastProvider\u003e\r\n    \u003c/SafeAreaView\u003e\r\n  );\r\n}\r\n\r\nexport default function RootLayout() {\r\n  const [fontsLoaded] = useFonts({\r\n    // DMSans - Primary font family\r\n    \u0027DMSans-Regular\u0027: require(\"../assets/fonts/DMSans-Regular.ttf\"),\r\n    \u0027DMSans-Medium\u0027: require(\"../assets/fonts/DMSans-Medium.ttf\"),\r\n    \u0027DMSans-SemiBold\u0027: require(\"../assets/fonts/DMSans-SemiBold.ttf\"),\r\n    \u0027DMSans-Bold\u0027: require(\"../assets/fonts/DMSans-Bold.ttf\"),\r\n  });\r\n\r\n  useEffect(() =\u003e {\r\n    if (fontsLoaded) {\r\n      Text.defaultProps = {\r\n        ...(Text.defaultProps || {}),\r\n        style: {\r\n          ...(Text.defaultProps?.style || {}),\r\n          fontFamily: \"DMSans-Regular\",\r\n        },\r\n      };\r\n    }\r\n  }, [fontsLoaded]);\r\n\r\n  if (!fontsLoaded) return null;\r\n\r\n  return (\r\n    \u003cPersistQueryClientProvider\r\n      client={queryClient}\r\n      persistOptions={{ persister }}\r\n    \u003e\r\n      \u003cThemeProvider\u003e\r\n        \u003cErrorBoundary\u003e\r\n          \u003cInner /\u003e\r\n        \u003c/ErrorBoundary\u003e\r\n      \u003c/ThemeProvider\u003e\r\n    \u003c/PersistQueryClientProvider\u003e\r\n  );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027StyleSheet\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  12,
                                           "column":  3,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  12,
                                           "endColumn":  13
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Platform\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  13,
                                           "column":  3,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  13,
                                           "endColumn":  11
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  19,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  19,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027apiFetch\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027name\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  118,
                                           "column":  31,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  118,
                                           "endColumn":  35
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  6,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  ScrollView,\r\n  Pressable,\r\n  TextInput,\r\n  Alert,\r\n  RefreshControl,\r\n  ActivityIndicator,\r\n  Modal,\r\n  StyleSheet,\r\n  Platform,\r\n\r\n} from \"react-native\";\r\n\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\n\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../theme\";\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport apiFetch from \"../utils/apiFetch\";\r\nimport { useToast } from \"../components/ToastProvider\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport Header from \"../components/Header\";\r\n\r\nexport default function AdminScreen() {\r\n  const router = useRouter();\r\n  const { styles, colors } = useTheme();\r\n  const { showToast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [roleFilter, setRoleFilter] = useState(\"all\");\r\n  const [sortBy, setSortBy] = useState(\"createdAt\");\r\n  const [sortOrder, setSortOrder] = useState(\"desc\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const pageSize = 20;\r\n  const [showUserModal, setShowUserModal] = useState(false);\r\n  const [modalMode, setModalMode] = useState(\"add\"); // \"add\" or \"edit\"\r\n  const [editingUser, setEditingUser] = useState(null);\r\n  const [userForm, setUserForm] = useState({\r\n    name: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    role: \"student\",\r\n    guardianName: \"\",\r\n    guardianPhone: \"\",\r\n    designation: \"\",\r\n    admissionDate: \"\",\r\n    joiningDate: \"\"\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [touched, setTouched] = useState({});\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const availableRoles = [\"student\", \"teacher\", \"class teacher\", \"staff\", \"admin\", \"super admin\"];\r\n\r\n  // Check Auth \u0026 Admin\r\n  const { data: userData, isLoading: userLoading, error: userError } = useApiQuery(\r\n    [\u0027currentUser\u0027],\r\n    `${apiConfig.baseUrl}/auth/me`\r\n  );\r\n  const user = userData?.user;\r\n  const isAdmin = user?.role === \u0027admin\u0027 || user?.role === \u0027super admin\u0027;\r\n\r\n  // Fetch Users\r\n  const { data: usersData, isLoading: loading, error: usersError, refetch } = useApiQuery(\r\n    [\u0027users\u0027, currentPage, searchQuery, roleFilter, sortBy, sortOrder],\r\n    `${apiConfig.baseUrl}/users?page=${currentPage}\u0026limit=${pageSize}\u0026search=${searchQuery}\u0026role=${roleFilter}\u0026sortBy=${sortBy}\u0026order=${sortOrder}`,\r\n    {\r\n      enabled: !!isAdmin, // Only fetch if admin check passes\r\n      keepPreviousData: true,\r\n    }\r\n  );\r\n\r\n  const users = usersData?.data || [];\r\n  const totalPages = usersData?.pagination?.pages || 1;\r\n\r\n  // Mutations\r\n  const createUserMutation = useApiMutation({\r\n    mutationFn: createApiMutationFn(apiConfig.url(apiConfig.endpoints.users.create), \u0027POST\u0027),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027users\u0027] });\r\n      showToast(\"User created successfully\", \"success\");\r\n      setUserForm({ name: \"\", phone: \"\", email: \"\", password: \"\", role: \"student\" });\r\n      setShowUserModal(false);\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \"Failed to create user\", \"error\")\r\n  });\r\n\r\n  const updateUserMutation = useApiMutation({\r\n    mutationFn: (data) =\u003e createApiMutationFn(apiConfig.url(apiConfig.endpoints.users.update(data._id)), \u0027PUT\u0027)(data),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027users\u0027] });\r\n      showToast(\"User updated successfully\", \"success\");\r\n      setShowUserModal(false);\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \"Failed to update user\", \"error\")\r\n  });\r\n\r\n  const deleteUserMutation = useApiMutation({\r\n    mutationFn: (id) =\u003e createApiMutationFn(apiConfig.url(apiConfig.endpoints.users.delete(id)), \u0027DELETE\u0027)(),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027users\u0027] });\r\n      showToast(\"User deleted successfully\", \"success\");\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \"Failed to delete user\", \"error\")\r\n  });\r\n\r\n  const updateUserRole = (userId, newRole) =\u003e {\r\n    updateUserMutation.mutate({ _id: userId, role: newRole });\r\n  };\r\n\r\n  const deleteUser = (userId, name) =\u003e {\r\n    deleteUserMutation.mutate(userId);\r\n  };\r\n\r\n  const onRefresh = async () =\u003e {\r\n    setRefreshing(true);\r\n    await refetch();\r\n    setRefreshing(false);\r\n  };\r\n\r\n  const handlePageChange = (newPage) =\u003e {\r\n    if (newPage \u003e= 1 \u0026\u0026 newPage \u003c= totalPages) {\r\n      setCurrentPage(newPage);\r\n    }\r\n  };\r\n\r\n  const getRoleColor = (role) =\u003e {\r\n    switch (role) {\r\n      case \"super admin\":\r\n        return colors.roleSuperAdmin;\r\n      case \"admin\":\r\n        return colors.roleAdmin;\r\n      case \"staff\":\r\n        return colors.roleStaff;\r\n      case \"class teacher\":\r\n      case \"teacher\":\r\n        return colors.roleClassTeacher;\r\n      case \"student\":\r\n        return colors.roleStudent;\r\n      default:\r\n        return colors.textSecondary;\r\n    }\r\n  };\r\n\r\n  const handleChange = (field, value) =\u003e {\r\n    setUserForm(prev =\u003e ({ ...prev, [field]: value }));\r\n    if (errors[field]) {\r\n      setErrors(prev =\u003e ({ ...prev, [field]: null }));\r\n    }\r\n  };\r\n\r\n  const handleBlur = (field) =\u003e {\r\n    setTouched(prev =\u003e ({ ...prev, [field]: true }));\r\n    validateField(field);\r\n  };\r\n\r\n  const validateField = (field) =\u003e {\r\n    let newErrors = { ...errors };\r\n    if (field === \u0027name\u0027 \u0026\u0026 !userForm.name) newErrors.name = \"Name is required\";\r\n    if (field === \u0027phone\u0027 \u0026\u0026 !userForm.phone) newErrors.phone = \"Phone is required\";\r\n    if (field === \u0027password\u0027 \u0026\u0026 !userForm.password) newErrors.password = \"Password is required\";\r\n    setErrors(newErrors);\r\n  };\r\n\r\n  const isFormValid = () =\u003e {\r\n    return userForm.name \u0026\u0026 userForm.phone \u0026\u0026 userForm.password;\r\n  };\r\n\r\n  const saving = createUserMutation.isPending || updateUserMutation.isPending;\r\n\r\n\r\n  const createUser = () =\u003e {\r\n    if (!userForm.name || !userForm.phone || !userForm.password) {\r\n      showToast(\"Please fill in all required fields\", \"error\");\r\n      return;\r\n    }\r\n    createUserMutation.mutate(userForm);\r\n  };\r\n\r\n  return (\r\n    \u003cView style={styles.container}\u003e\r\n      \u003cScrollView\r\n        style={{ flex: 1 }}\r\n        contentContainerStyle={{ paddingBottom: 100 }}\r\n        refreshControl={\r\n          \u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} tintColor={colors.primary} /\u003e\r\n        }\r\n        showsVerticalScrollIndicator={false}\r\n      \u003e\r\n        \u003cView style={{ paddingHorizontal: 20, paddingTop: 20 }}\u003e\r\n          {/* Minimal Header */}\r\n          \u003cHeader title=\"Admin\" subtitle=\"Manage users and permissions\" /\u003e\r\n\r\n          {/* Admin Actions - Organized by Category */}\r\n          \u003cView style={{ gap: 24 }}\u003e\r\n            {/* Academic Management Section - Super Admin Only */}\r\n            {user?.role === \u0027super admin\u0027 \u0026\u0026 (\r\n              \u003cView\u003e\r\n                \u003cText style={styles.sectionTitle}\u003e\r\n                  Academic Management\r\n                \u003c/Text\u003e\r\n                \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12 }}\u003e\r\n                  \u003cMenuCard\r\n                    title=\"Academic Year\"\r\n                    icon=\"calendar-today\"\r\n                    color={colors.primary}\r\n                    onPress={() =\u003e router.push(\"/admin/academic-year\")}\r\n                  /\u003e\r\n                  \u003cMenuCard\r\n                    title=\"Subjects\"\r\n                    icon=\"menu-book\"\r\n                    color=\"#673AB7\"\r\n                    onPress={() =\u003e router.push(\"/admin/subjects\")}\r\n                  /\u003e\r\n                \u003c/View\u003e\r\n              \u003c/View\u003e\r\n            )}\r\n\r\n            {/* Teaching Management Section - Admin \u0026 Super Admin */}\r\n            \u003cView\u003e\r\n              \u003cText style={styles.sectionTitle}\u003e\r\n                Teaching Management\r\n              \u003c/Text\u003e\r\n              \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12 }}\u003e\r\n                \u003cMenuCard\r\n                  title=\"Teacher Subjects\"\r\n                  icon=\"assignment-ind\"\r\n                  color=\"#4CAF50\"\r\n                  onPress={() =\u003e router.push(\"/admin/teacher-subjects\")}\r\n                /\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Class Operations Section */}\r\n            \u003cView\u003e\r\n              \u003cText style={styles.sectionTitle}\u003e\r\n                Class Operations\r\n              \u003c/Text\u003e\r\n              \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12 }}\u003e\r\n                \u003cMenuCard\r\n                  title=\"Timetable\"\r\n                  icon=\"schedule\"\r\n                  color=\"#9C27B0\"\r\n                  onPress={() =\u003e router.push(\"/admin/timetable\")}\r\n                /\u003e\r\n                \u003cMenuCard\r\n                  title=\"Exams\"\r\n                  icon=\"event\"\r\n                  color=\"#E91E63\"\r\n                  onPress={() =\u003e router.push(\"/admin/exam-schedule\")}\r\n                /\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Financial Section */}\r\n            \u003cView\u003e\r\n              \u003cText style={styles.sectionTitle}\u003e\r\n                Financial\r\n              \u003c/Text\u003e\r\n              \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12 }}\u003e\r\n                \u003cMenuCard\r\n                  title=\"Fees\"\r\n                  icon=\"attach-money\"\r\n                  color=\"#FF5722\"\r\n                  onPress={() =\u003e router.push(\"/admin/fees\")}\r\n                /\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Communication \u0026 Requests Section */}\r\n            \u003cView\u003e\r\n              \u003cText style={styles.sectionTitle}\u003e\r\n                Communication\r\n              \u003c/Text\u003e\r\n              \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12 }}\u003e\r\n                \u003cMenuCard\r\n                  title=\"Complaints\"\r\n                  icon=\"feedback\"\r\n                  color=\"#607D8B\"\r\n                  onPress={() =\u003e router.push(\"/admin/complaints\")}\r\n                /\u003e\r\n                \u003cMenuCard\r\n                  title=\"Broadcast\"\r\n                  icon=\"campaign\"\r\n                  color=\"#3F51B5\"\r\n                  onPress={() =\u003e router.push(\"/admin/send-notification\")}\r\n                /\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Reports Section */}\r\n            \u003cView\u003e\r\n              \u003cText style={styles.sectionTitle}\u003e\r\n                Reports\r\n              \u003c/Text\u003e\r\n              \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12 }}\u003e\r\n                \u003cMenuCard\r\n                  title=\"History\"\r\n                  icon=\"history\"\r\n                  color=\"#795548\"\r\n                  onPress={() =\u003e router.push(\"/history\")}\r\n                /\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n          \u003c/View\u003e\r\n\r\n          {/* User Management Section */}\r\n          \u003cView style={{ marginTop: 32 }}\u003e\r\n            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n              \u003cText style={styles.sectionTitle}\u003e\r\n                User Management\r\n              \u003c/Text\u003e\r\n              \u003cPressable\r\n                onPress={() =\u003e {\r\n                  setModalMode(\"add\");\r\n                  setUserForm({ name: \"\", phone: \"\", email: \"\", password: \"\", role: \"student\" });\r\n                  setShowUserModal(true);\r\n                }}\r\n                style={({ pressed }) =\u003e ({\r\n                  flexDirection: \"row\",\r\n                  alignItems: \"center\",\r\n                  backgroundColor: colors.primary,\r\n                  paddingHorizontal: 16,\r\n                  paddingVertical: 8,\r\n                  borderRadius: 20,\r\n                  opacity: pressed ? 0.9 : 1,\r\n                  shadowColor: colors.primary,\r\n                  shadowOffset: { width: 0, height: 4 },\r\n                  shadowOpacity: 0.3,\r\n                  shadowRadius: 8,\r\n                  elevation: 4,\r\n                })}\r\n              \u003e\r\n                \u003cMaterialIcons name=\"add\" size={20} color=\"#fff\" style={{ marginRight: 4 }} /\u003e\r\n                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                  Add User\r\n                \u003c/Text\u003e\r\n              \u003c/Pressable\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Search Bar */}\r\n            \u003cView style={{ marginBottom: 20 }}\u003e\r\n              \u003cView style={[styles.input, {\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n                paddingHorizontal: 16,\r\n                height: 56,\r\n                borderRadius: 16\r\n              }]}\u003e\r\n                \u003cMaterialIcons name=\"search\" size={24} color={colors.textSecondary} /\u003e\r\n                \u003cTextInput\r\n                  style={{\r\n                    flex: 1,\r\n                    marginLeft: 12,\r\n                    fontSize: 16,\r\n                    color: colors.textPrimary,\r\n                    fontFamily: \"DMSans-Regular\",\r\n                    height: \"100%\",\r\n                  }}\r\n                  placeholder=\"Search users...\"\r\n                  placeholderTextColor={colors.textSecondary}\r\n                  value={searchQuery}\r\n                  onChangeText={(text) =\u003e {\r\n                    setSearchQuery(text);\r\n                    setCurrentPage(1);\r\n                  }}\r\n                /\u003e\r\n                {searchQuery.length \u003e 0 \u0026\u0026 (\r\n                  \u003cPressable onPress={() =\u003e setSearchQuery(\"\")}\u003e\r\n                    \u003cMaterialIcons name=\"close\" size={20} color={colors.textSecondary} /\u003e\r\n                  \u003c/Pressable\u003e\r\n                )}\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Filters and Sort */}\r\n            \u003cView style={{ marginBottom: 20 }}\u003e\r\n              \u003cScrollView horizontal showsHorizontalScrollIndicator={false} contentContainerStyle={{ gap: 10, paddingRight: 20 }}\u003e\r\n                {/* Role Filter */}\r\n                {[\"all\", \"student\", \"teacher\", \"admin\", \"staff\"].map((role) =\u003e (\r\n                  \u003cPressable\r\n                    key={role}\r\n                    onPress={() =\u003e {\r\n                      setRoleFilter(role);\r\n                      setCurrentPage(1);\r\n                    }}\r\n                    style={{\r\n                      paddingHorizontal: 16,\r\n                      paddingVertical: 8,\r\n                      backgroundColor: roleFilter === role ? colors.primary : colors.cardBackground,\r\n                      borderRadius: 20,\r\n                      borderWidth: 1,\r\n                      borderColor: roleFilter === role ? colors.primary : colors.border,\r\n                      elevation: roleFilter === role ? 4 : 0,\r\n                      shadowColor: roleFilter === role ? colors.primary : \"#000\",\r\n                      shadowOffset: { width: 0, height: 2 },\r\n                      shadowOpacity: roleFilter === role ? 0.3 : 0,\r\n                      shadowRadius: 4,\r\n                    }}\r\n                  \u003e\r\n                    \u003cText style={{\r\n                      color: roleFilter === role ? \"#fff\" : colors.textSecondary,\r\n                      fontFamily: roleFilter === role ? \"DMSans-Bold\" : \"DMSans-Medium\",\r\n                      textTransform: \"capitalize\",\r\n                      fontSize: 14\r\n                    }}\u003e\r\n                      {role === \"all\" ? \"All Roles\" : role}\r\n                    \u003c/Text\u003e\r\n                  \u003c/Pressable\u003e\r\n                ))}\r\n              \u003c/ScrollView\u003e\r\n\r\n              \u003cView style={{ flexDirection: \"row\", marginTop: 16, gap: 12 }}\u003e\r\n                {/* Sort By */}\r\n                \u003cPressable\r\n                  onPress={() =\u003e setSortBy(sortBy === \"createdAt\" ? \"name\" : \"createdAt\")}\r\n                  style={{\r\n                    flexDirection: \"row\",\r\n                    alignItems: \"center\",\r\n                    paddingHorizontal: 14,\r\n                    paddingVertical: 8,\r\n                    backgroundColor: colors.cardBackground,\r\n                    borderRadius: 12,\r\n                    borderWidth: 1,\r\n                    borderColor: colors.border,\r\n                  }}\r\n                \u003e\r\n                  \u003cMaterialIcons name=\"sort\" size={18} color={colors.textSecondary} style={{ marginRight: 6 }} /\u003e\r\n                  \u003cText style={{ color: colors.textSecondary, fontSize: 13, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                    Sort: {sortBy === \"createdAt\" ? \"Date\" : \"Name\"}\r\n                  \u003c/Text\u003e\r\n                \u003c/Pressable\u003e\r\n\r\n                {/* Sort Order */}\r\n                \u003cPressable\r\n                  onPress={() =\u003e setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\")}\r\n                  style={{\r\n                    flexDirection: \"row\",\r\n                    alignItems: \"center\",\r\n                    paddingHorizontal: 14,\r\n                    paddingVertical: 8,\r\n                    backgroundColor: colors.cardBackground,\r\n                    borderRadius: 12,\r\n                    borderWidth: 1,\r\n                    borderColor: colors.border,\r\n                  }}\r\n                \u003e\r\n                  \u003cMaterialIcons name={sortOrder === \"asc\" ? \"arrow-upward\" : \"arrow-downward\"} size={18} color={colors.textSecondary} style={{ marginRight: 6 }} /\u003e\r\n                  \u003cText style={{ color: colors.textSecondary, fontSize: 13, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                    {sortOrder === \"asc\" ? \"Ascending\" : \"Descending\"}\r\n                  \u003c/Text\u003e\r\n                \u003c/Pressable\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Users List */}\r\n            \u003cView\u003e\r\n              {loading \u0026\u0026 users.length === 0 ? (\r\n                \u003cView style={{ padding: 40, alignItems: \u0027center\u0027 }}\u003e\r\n                  \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                  \u003cText style={{ marginTop: 16, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eLoading users...\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n              ) : userError ? (\r\n                \u003cView style={{ padding: 20, alignItems: \u0027center\u0027, backgroundColor: colors.error + \u002710\u0027, borderRadius: 12 }}\u003e\r\n                  \u003cMaterialIcons name=\"error-outline\" size={40} color={colors.error} /\u003e\r\n                  \u003cText style={{ marginTop: 8, color: colors.error, fontFamily: \"DMSans-Bold\" }}\u003eFailed to load user profile\u003c/Text\u003e\r\n                  \u003cText style={{ marginTop: 4, color: colors.textSecondary, textAlign: \u0027center\u0027 }}\u003e{userError.message}\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n              ) : !isAdmin \u0026\u0026 !userLoading ? (\r\n                \u003cView style={{ padding: 20, alignItems: \u0027center\u0027, backgroundColor: colors.warning + \u002710\u0027, borderRadius: 12 }}\u003e\r\n                  \u003cMaterialIcons name=\"warning\" size={40} color={colors.warning} /\u003e\r\n                  \u003cText style={{ marginTop: 8, color: colors.warning, fontFamily: \"DMSans-Bold\" }}\u003eAccess Denied\u003c/Text\u003e\r\n                  \u003cText style={{ marginTop: 4, color: colors.textSecondary, textAlign: \u0027center\u0027 }}\u003eYou do not have permission to view this list.\u003c/Text\u003e\r\n                  \u003cText style={{ marginTop: 4, color: colors.textSecondary, fontSize: 12 }}\u003eCurrent Role: {user?.role || \u0027Unknown\u0027}\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n              ) : usersError ? (\r\n                \u003cView style={{ padding: 20, alignItems: \u0027center\u0027, backgroundColor: colors.error + \u002710\u0027, borderRadius: 12 }}\u003e\r\n                  \u003cMaterialIcons name=\"error-outline\" size={40} color={colors.error} /\u003e\r\n                  \u003cText style={{ marginTop: 8, color: colors.error, fontFamily: \"DMSans-Bold\" }}\u003eFailed to load users\u003c/Text\u003e\r\n                  \u003cText style={{ marginTop: 4, color: colors.textSecondary, textAlign: \u0027center\u0027 }}\u003e{usersError.message}\u003c/Text\u003e\r\n                  \u003cPressable onPress={refetch} style={{ marginTop: 12, paddingHorizontal: 16, paddingVertical: 8, backgroundColor: colors.primary, borderRadius: 8 }}\u003e\r\n                    \u003cText style={{ color: \u0027#fff\u0027, fontFamily: \"DMSans-Bold\" }}\u003eRetry\u003c/Text\u003e\r\n                  \u003c/Pressable\u003e\r\n                \u003c/View\u003e\r\n              ) : (\r\n                \u003c\u003e\r\n                  {users.map((userItem) =\u003e (\r\n                    \u003cView\r\n                      key={userItem._id}\r\n                      style={[styles.cardMinimal, { marginBottom: 16, padding: 16 }]}\r\n                    \u003e\r\n                      \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}\u003e\r\n                        \u003cView style={{ flex: 1, marginRight: 12 }}\u003e\r\n                          \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 6 }}\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginRight: 8 }}\u003e\r\n                              {userItem.name}\r\n                            \u003c/Text\u003e\r\n                            \u003cView\r\n                              style={{\r\n                                backgroundColor: getRoleColor(userItem.role) + \"20\",\r\n                                paddingHorizontal: 10,\r\n                                paddingVertical: 4,\r\n                                borderRadius: 12,\r\n                              }}\r\n                            \u003e\r\n                              \u003cText\r\n                                style={{\r\n                                  fontSize: 11,\r\n                                  fontFamily: \"DMSans-Bold\",\r\n                                  color: getRoleColor(userItem.role),\r\n                                  textTransform: \"uppercase\",\r\n                                }}\r\n                              \u003e\r\n                                {userItem.role}\r\n                              \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                          \u003c/View\u003e\r\n\r\n                          \u003cView style={{ gap: 4 }}\u003e\r\n                            {userItem.email ? (\r\n                              \u003cView style={{ flexDirection: \"row\", alignItems: \"center\" }}\u003e\r\n                                \u003cMaterialIcons name=\"email\" size={14} color={colors.textSecondary} style={{ marginRight: 6 }} /\u003e\r\n                                \u003cText style={{ fontSize: 14, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                  {userItem.email}\r\n                                \u003c/Text\u003e\r\n                              \u003c/View\u003e\r\n                            ) : null}\r\n                            {userItem.phone ? (\r\n                              \u003cView style={{ flexDirection: \"row\", alignItems: \"center\" }}\u003e\r\n                                \u003cMaterialIcons name=\"phone\" size={14} color={colors.textSecondary} style={{ marginRight: 6 }} /\u003e\r\n                                \u003cText style={{ fontSize: 14, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                  {userItem.phone}\r\n                                \u003c/Text\u003e\r\n                              \u003c/View\u003e\r\n                            ) : null}\r\n                          \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 12 }}\u003e\r\n                          \u003cPressable\r\n                            onPress={() =\u003e {\r\n                              setModalMode(\"edit\");\r\n                              setEditingUser(userItem);\r\n                              setUserForm({ name: userItem.name, phone: userItem.phone, email: userItem.email, password: \"\", role: userItem.role });\r\n                              setShowUserModal(true);\r\n                            }}\r\n                            style={({ pressed }) =\u003e ({\r\n                              padding: 10,\r\n                              backgroundColor: colors.background,\r\n                              borderRadius: 12,\r\n                              opacity: pressed ? 0.7 : 1,\r\n                              borderWidth: 1,\r\n                              borderColor: colors.border\r\n                            })}\r\n                          \u003e\r\n                            \u003cMaterialIcons name=\"edit\" size={20} color={colors.textSecondary} /\u003e\r\n                          \u003c/Pressable\u003e\r\n\r\n                          \u003cPressable\r\n                            onPress={() =\u003e {\r\n                              Alert.alert(\r\n                                \"Delete User\",\r\n                                `Are you sure you want to delete ${userItem.name}?`,\r\n                                [\r\n                                  { text: \"Cancel\", style: \"cancel\" },\r\n                                  { text: \"Delete\", style: \"destructive\", onPress: () =\u003e deleteUser(userItem._id, userItem.name) },\r\n                                ]\r\n                              );\r\n                            }}\r\n                            style={({ pressed }) =\u003e ({\r\n                              padding: 10,\r\n                              backgroundColor: colors.error + \"15\",\r\n                              borderRadius: 12,\r\n                              opacity: pressed ? 0.7 : 1,\r\n                            })}\r\n                          \u003e\r\n                            \u003cMaterialIcons name=\"delete-outline\" size={20} color={colors.error} /\u003e\r\n                          \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n                      \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                  ))}\r\n\r\n                  {users.length === 0 \u0026\u0026 (\r\n                    \u003cView style={{ alignItems: \"center\", padding: 40, opacity: 0.6 }}\u003e\r\n                      \u003cMaterialIcons name=\"search-off\" size={64} color={colors.textSecondary} /\u003e\r\n                      \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                        No users found\r\n                      \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                  )}\r\n\r\n                  {/* Pagination */}\r\n                  {totalPages \u003e 1 \u0026\u0026 (\r\n                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"center\", alignItems: \"center\", marginTop: 24, gap: 16 }}\u003e\r\n                      \u003cPressable\r\n                        onPress={() =\u003e handlePageChange(currentPage - 1)}\r\n                        disabled={currentPage === 1}\r\n                        style={{\r\n                          padding: 12,\r\n                          backgroundColor: currentPage === 1 ? colors.background : colors.cardBackground,\r\n                          borderRadius: 12,\r\n                          opacity: currentPage === 1 ? 0.5 : 1,\r\n                          borderWidth: 1,\r\n                          borderColor: colors.border\r\n                        }}\r\n                      \u003e\r\n                        \u003cMaterialIcons name=\"chevron-left\" size={24} color={colors.textPrimary} /\u003e\r\n                      \u003c/Pressable\u003e\r\n\r\n                      \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                        Page {currentPage} of {totalPages}\r\n                      \u003c/Text\u003e\r\n\r\n                      \u003cPressable\r\n                        onPress={() =\u003e handlePageChange(currentPage + 1)}\r\n                        disabled={currentPage === totalPages}\r\n                        style={{\r\n                          padding: 12,\r\n                          backgroundColor: currentPage === totalPages ? colors.background : colors.cardBackground,\r\n                          borderRadius: 12,\r\n                          opacity: currentPage === totalPages ? 0.5 : 1,\r\n                          borderWidth: 1,\r\n                          borderColor: colors.border\r\n                        }}\r\n                      \u003e\r\n                        \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textPrimary} /\u003e\r\n                      \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                  )}\r\n                \u003c/\u003e\r\n              )}\r\n            \u003c/View\u003e\r\n          \u003c/View\u003e\r\n        \u003c/View\u003e\r\n      \u003c/ScrollView\u003e\r\n\r\n      {/* User Modal */}\r\n      \u003cModal\r\n        visible={showUserModal}\r\n        animationType=\"fade\"\r\n        transparent={true}\r\n        onRequestClose={() =\u003e setShowUserModal(false)}\r\n      \u003e\r\n        \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", backgroundColor: \"rgba(0,0,0,0.6)\" }}\u003e\r\n          \u003cView style={[styles.card, {\r\n            width: \"90%\",\r\n            maxWidth: 400,\r\n            maxHeight: \"90%\",\r\n            padding: 0,\r\n            overflow: \u0027hidden\u0027\r\n          }]}\u003e\r\n            \u003cView style={{ padding: 24, borderBottomWidth: 1, borderBottomColor: colors.border }}\u003e\r\n              \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}\u003e\r\n                \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                  {modalMode === \"add\" ? \"New User\" : \"Edit User\"}\r\n                \u003c/Text\u003e\r\n                \u003cPressable onPress={() =\u003e setShowUserModal(false)} style={{ padding: 4 }}\u003e\r\n                  \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                \u003c/Pressable\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView showsVerticalScrollIndicator={false} contentContainerStyle={{ padding: 24 }}\u003e\r\n              {modalMode === \"add\" \u0026\u0026 (\r\n                \u003c\u003e\r\n                  \u003cView style={{ marginBottom: 20 }}\u003e\r\n                    \u003cText style={[styles.label, { marginBottom: 8 }]}\u003eNAME\u003c/Text\u003e\r\n                    \u003cTextInput\r\n                      style={styles.input}\r\n                      placeholder=\"Enter name\"\r\n                      placeholderTextColor={colors.textSecondary}\r\n                      value={userForm.name}\r\n                      onChangeText={(text) =\u003e handleChange(\"name\", text)}\r\n                      onBlur={() =\u003e handleBlur(\"name\")}\r\n                    /\u003e\r\n                    {errors.name \u0026\u0026 touched.name \u0026\u0026 (\r\n                      \u003cText style={styles.errorText}\u003e{errors.name}\u003c/Text\u003e\r\n                    )}\r\n                  \u003c/View\u003e\r\n\r\n                  \u003cView style={{ marginBottom: 20 }}\u003e\r\n                    \u003cText style={[styles.label, { marginBottom: 8 }]}\u003ePHONE\u003c/Text\u003e\r\n                    \u003cTextInput\r\n                      style={styles.input}\r\n                      placeholder=\"Enter phone number\"\r\n                      placeholderTextColor={colors.textSecondary}\r\n                      value={userForm.phone}\r\n                      onChangeText={(text) =\u003e handleChange(\"phone\", text)}\r\n                      onBlur={() =\u003e handleBlur(\"phone\")}\r\n                      keyboardType=\"phone-pad\"\r\n                      maxLength={10}\r\n                    /\u003e\r\n                    {errors.phone \u0026\u0026 touched.phone \u0026\u0026 (\r\n                      \u003cText style={styles.errorText}\u003e{errors.phone}\u003c/Text\u003e\r\n                    )}\r\n                  \u003c/View\u003e\r\n\r\n                  \u003cView style={{ marginBottom: 20 }}\u003e\r\n                    \u003cText style={[styles.label, { marginBottom: 8 }]}\u003eEMAIL\u003c/Text\u003e\r\n                    \u003cTextInput\r\n                      style={styles.input}\r\n                      placeholder=\"Enter email (optional)\"\r\n                      placeholderTextColor={colors.textSecondary}\r\n                      value={userForm.email}\r\n                      onChangeText={(text) =\u003e handleChange(\"email\", text)}\r\n                      onBlur={() =\u003e handleBlur(\"email\")}\r\n                      keyboardType=\"email-address\"\r\n                      autoCapitalize=\"none\"\r\n                    /\u003e\r\n                    {errors.email \u0026\u0026 touched.email \u0026\u0026 (\r\n                      \u003cText style={styles.errorText}\u003e{errors.email}\u003c/Text\u003e\r\n                    )}\r\n                  \u003c/View\u003e\r\n\r\n                  \u003cView style={{ marginBottom: 24 }}\u003e\r\n                    \u003cText style={[styles.label, { marginBottom: 8 }]}\u003ePASSWORD\u003c/Text\u003e\r\n                    \u003cView style={[styles.input, { flexDirection: \"row\", alignItems: \"center\", paddingHorizontal: 16 }]}\u003e\r\n                      \u003cTextInput\r\n                        style={{\r\n                          flex: 1,\r\n                          fontSize: 16,\r\n                          color: colors.textPrimary,\r\n                          fontFamily: \"DMSans-Regular\",\r\n                          height: \"100%\"\r\n                        }}\r\n                        placeholder=\"Enter password\"\r\n                        placeholderTextColor={colors.textSecondary}\r\n                        value={userForm.password}\r\n                        onChangeText={(text) =\u003e handleChange(\"password\", text)}\r\n                        onBlur={() =\u003e handleBlur(\"password\")}\r\n                        secureTextEntry={!showPassword}\r\n                      /\u003e\r\n                      \u003cPressable\r\n                        onPress={() =\u003e setShowPassword(!showPassword)}\r\n                      \u003e\r\n                        \u003cMaterialIcons\r\n                          name={showPassword ? \"visibility-off\" : \"visibility\"}\r\n                          size={20}\r\n                          color={colors.textSecondary}\r\n                        /\u003e\r\n                      \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                    {errors.password \u0026\u0026 touched.password \u0026\u0026 (\r\n                      \u003cText style={styles.errorText}\u003e{errors.password}\u003c/Text\u003e\r\n                    )}\r\n                  \u003c/View\u003e\r\n\r\n                  {/* Role Selection */}\r\n                  \u003cView style={{ marginBottom: 24 }}\u003e\r\n                    \u003cText style={[styles.label, { marginBottom: 12 }]}\u003eROLE\u003c/Text\u003e\r\n                    \u003cScrollView horizontal showsHorizontalScrollIndicator={false} contentContainerStyle={{ gap: 8 }}\u003e\r\n                      {availableRoles.map((role) =\u003e (\r\n                        \u003cPressable\r\n                          key={role}\r\n                          onPress={() =\u003e handleChange(\"role\", role)}\r\n                          style={{\r\n                            paddingHorizontal: 16,\r\n                            paddingVertical: 10,\r\n                            backgroundColor: userForm.role === role ? colors.primary : colors.background,\r\n                            borderRadius: 12,\r\n                            borderWidth: 1,\r\n                            borderColor: userForm.role === role ? colors.primary : colors.border\r\n                          }}\r\n                        \u003e\r\n                          \u003cText style={{\r\n                            color: userForm.role === role ? \"#fff\" : colors.textPrimary,\r\n                            fontFamily: \"DMSans-Bold\",\r\n                            textTransform: \"capitalize\",\r\n                            fontSize: 14\r\n                          }}\u003e\r\n                            {role}\r\n                          \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                      ))}\r\n                    \u003c/ScrollView\u003e\r\n                  \u003c/View\u003e\r\n\r\n                  {/* Student Specific Fields */}\r\n                  {userForm.role === \"student\" \u0026\u0026 (\r\n                    \u003c\u003e\r\n                      \u003cView style={{ marginBottom: 20 }}\u003e\r\n                        \u003cText style={[styles.label, { marginBottom: 8 }]}\u003eGUARDIAN NAME\u003c/Text\u003e\r\n                        \u003cTextInput\r\n                          style={styles.input}\r\n                          placeholder=\"Enter guardian name\"\r\n                          placeholderTextColor={colors.textSecondary}\r\n                          value={userForm.guardianName}\r\n                          onChangeText={(text) =\u003e handleChange(\"guardianName\", text)}\r\n                        /\u003e\r\n                      \u003c/View\u003e\r\n                      \u003cView style={{ marginBottom: 20 }}\u003e\r\n                        \u003cText style={[styles.label, { marginBottom: 8 }]}\u003eGUARDIAN PHONE\u003c/Text\u003e\r\n                        \u003cTextInput\r\n                          style={styles.input}\r\n                          placeholder=\"Enter guardian phone\"\r\n                          placeholderTextColor={colors.textSecondary}\r\n                          value={userForm.guardianPhone}\r\n                          onChangeText={(text) =\u003e handleChange(\"guardianPhone\", text)}\r\n                          keyboardType=\"phone-pad\"\r\n                          maxLength={10}\r\n                        /\u003e\r\n                      \u003c/View\u003e\r\n                    \u003c/\u003e\r\n                  )}\r\n\r\n                  {/* Teacher Specific Fields */}\r\n                  {(userForm.role === \"class teacher\" || userForm.role === \"staff\") \u0026\u0026 (\r\n                    \u003c\u003e\r\n                      \u003cView style={{ marginBottom: 20 }}\u003e\r\n                        \u003cText style={[styles.label, { marginBottom: 8 }]}\u003eDESIGNATION\u003c/Text\u003e\r\n                        \u003cTextInput\r\n                          style={styles.input}\r\n                          placeholder=\"Enter designation\"\r\n                          placeholderTextColor={colors.textSecondary}\r\n                          value={userForm.designation}\r\n                          onChangeText={(text) =\u003e handleChange(\"designation\", text)}\r\n                        /\u003e\r\n                      \u003c/View\u003e\r\n                    \u003c/\u003e\r\n                  )}\r\n                \u003c/\u003e\r\n              )}\r\n\r\n              {modalMode === \"edit\" \u0026\u0026 (\r\n                \u003cView style={{ marginBottom: 32 }}\u003e\r\n                  \u003cText style={[styles.label, { marginBottom: 12 }]}\u003eROLE\u003c/Text\u003e\r\n                  \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 8 }}\u003e\r\n                    {availableRoles.map((role) =\u003e (\r\n                      \u003cPressable\r\n                        key={role}\r\n                        onPress={() =\u003e setUserForm({ ...userForm, role })}\r\n                        style={{\r\n                          backgroundColor: userForm.role === role ? colors.primary : colors.background,\r\n                          paddingHorizontal: 16,\r\n                          paddingVertical: 10,\r\n                          borderRadius: 12,\r\n                          borderWidth: 1,\r\n                          borderColor: userForm.role === role ? colors.primary : colors.border,\r\n                        }}\r\n                      \u003e\r\n                        \u003cText\r\n                          style={{\r\n                            fontSize: 14,\r\n                            fontFamily: \"DMSans-Bold\",\r\n                            color: userForm.role === role ? \"#fff\" : colors.textSecondary,\r\n                            textTransform: \"capitalize\",\r\n                          }}\r\n                        \u003e\r\n                          {role}\r\n                        \u003c/Text\u003e\r\n                      \u003c/Pressable\u003e\r\n                    ))}\r\n                  \u003c/View\u003e\r\n                \u003c/View\u003e\r\n              )}\r\n\r\n              {/* Action Buttons */}\r\n              \u003cView style={{ flexDirection: \"row\", gap: 16, marginTop: 12 }}\u003e\r\n                \u003cPressable\r\n                  onPress={() =\u003e setShowUserModal(false)}\r\n                  style={({ pressed }) =\u003e ({\r\n                    flex: 1,\r\n                    paddingVertical: 16,\r\n                    borderRadius: 16,\r\n                    alignItems: \"center\",\r\n                    backgroundColor: colors.background,\r\n                    borderWidth: 1,\r\n                    borderColor: colors.border,\r\n                    opacity: pressed ? 0.8 : 1,\r\n                  })}\r\n                \u003e\r\n                  \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textSecondary }}\u003e\r\n                    Cancel\r\n                  \u003c/Text\u003e\r\n                \u003c/Pressable\u003e\r\n\r\n                \u003cPressable\r\n                  onPress={modalMode === \"add\" ? createUser : () =\u003e updateUserRole(editingUser._id, userForm.role)}\r\n                  disabled={(modalMode === \"add\" \u0026\u0026 !isFormValid()) || saving}\r\n                  style={({ pressed }) =\u003e [\r\n                    styles.button,\r\n                    {\r\n                      flex: 1,\r\n                      opacity: ((modalMode === \"add\" \u0026\u0026 !isFormValid()) || saving) ? 0.5 : (pressed ? 0.9 : 1),\r\n                      marginBottom: 0 // Override default margin\r\n                    }\r\n                  ]}\r\n                \u003e\r\n                  {saving ? (\r\n                    \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e\r\n                  ) : (\r\n                    \u003cText style={styles.buttonText}\u003e\r\n                      {modalMode === \"add\" ? \"Create User\" : \"Save Changes\"}\r\n                    \u003c/Text\u003e\r\n                  )}\r\n                \u003c/Pressable\u003e\r\n              \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n          \u003c/View\u003e\r\n        \u003c/View\u003e\r\n      \u003c/Modal\u003e\r\n    \u003c/View\u003e\r\n  );\r\n}\r\n\r\n// Helper Component for Menu Cards\r\nconst MenuCard = ({ title, icon, color, onPress }) =\u003e {\r\n  const { colors } = useTheme();\r\n\r\n  return (\r\n    \u003cPressable\r\n      onPress={onPress}\r\n      style={({ pressed }) =\u003e ({\r\n        flex: 1,\r\n        minWidth: \"30%\",\r\n        backgroundColor: colors.cardBackground,\r\n        padding: 20,\r\n        borderRadius: 24,\r\n        alignItems: \"center\",\r\n        opacity: pressed ? 0.9 : 1,\r\n        shadowColor: \"#000\",\r\n        shadowOffset: { width: 0, height: 4 },\r\n        shadowOpacity: 0.05,\r\n        shadowRadius: 12,\r\n        elevation: 3,\r\n        borderWidth: 1,\r\n        borderColor: colors.border\r\n      })}\r\n    \u003e\r\n      \u003cView style={{\r\n        backgroundColor: color + \"15\",\r\n        padding: 16,\r\n        borderRadius: 20,\r\n        marginBottom: 12\r\n      }}\u003e\r\n        \u003cMaterialIcons name={icon} size={28} color={color} /\u003e\r\n      \u003c/View\u003e\r\n      \u003cText style={{\r\n        fontSize: 14,\r\n        fontFamily: \"DMSans-Bold\",\r\n        color: colors.textPrimary,\r\n        textAlign: \"center\"\r\n      }}\u003e\r\n        {title}\r\n      \u003c/Text\u003e\r\n    \u003c/Pressable\u003e\r\n  );\r\n};\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\academic-year.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027StyleSheet\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  12,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  12,
                                           "endColumn":  15
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Platform\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  13,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  13,
                                           "endColumn":  13
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  16,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  16,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  29,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  29,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  30,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  30,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027loadingYears\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  52,
                                           "column":  42,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  52,
                                           "endColumn":  54
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  6,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    TextInput,\r\n    Alert,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Modal,\r\n    StyleSheet,\r\n    Platform,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { Picker } from \"@react-native-picker/picker\";\r\nimport { useTheme } from \"../../theme\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\n\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport Header from \"../../components/Header\";\r\nimport { formatDate } from \"../../utils/date\";\r\n\r\nexport default function AcademicYearScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n    const queryClient = useQueryClient();\r\n    const [activeTab, setActiveTab] = useState(\"years\"); // \"years\" | \"reports\"\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [form, setForm] = useState({\r\n        name: \"\",\r\n        startDate: \"\",\r\n        endDate: \"\",\r\n        isActive: false\r\n    });\r\n    const [selectedYearId, setSelectedYearId] = useState(null);\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Fetch User Role\r\n    const { data: userData } = useApiQuery(\r\n        [\u0027currentUser\u0027],\r\n        `${apiConfig.baseUrl}/auth/me`\r\n    );\r\n    const userRole = userData?.role;\r\n\r\n    // Fetch Academic Years\r\n    const { data: years = [], isLoading: loadingYears, refetch: refetchYears } = useApiQuery(\r\n        [\u0027academicYears\u0027],\r\n        `${apiConfig.baseUrl}/academic-year`\r\n    );\r\n\r\n    // Fetch Reports\r\n    const { data: reportData, isLoading: reportLoading, refetch: refetchReport } = useApiQuery(\r\n        [\u0027academicYearReport\u0027, selectedYearId],\r\n        `${apiConfig.baseUrl}/academic-year/${selectedYearId}/reports`,\r\n        {\r\n            enabled: !!selectedYearId \u0026\u0026 activeTab === \"reports\",\r\n        }\r\n    );\r\n\r\n    // Set default selected year\r\n    useEffect(() =\u003e {\r\n        if (years.length \u003e 0 \u0026\u0026 !selectedYearId) {\r\n            setSelectedYearId(years[0]._id);\r\n        }\r\n    }, [years, selectedYearId]);\r\n\r\n    // Mutations\r\n    const createYearMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/academic-year`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027academicYears\u0027] });\r\n            showToast(\"Academic Year created\", \"success\");\r\n            setShowModal(false);\r\n            setForm({ name: \"\", startDate: \"\", endDate: \"\", isActive: false });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to create\", \"error\")\r\n    });\r\n\r\n    const incrementYearMutation = useApiMutation({\r\n        mutationFn: (nextYearId) =\u003e createApiMutationFn(`${apiConfig.baseUrl}/academic-year/increment`, \u0027POST\u0027)({ nextYearId }),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027academicYears\u0027] });\r\n            showToast(\"Year Incremented \u0026 Students Promoted!\", \"success\");\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to increment year\", \"error\")\r\n    });\r\n\r\n    const handleCreate = () =\u003e {\r\n        if (!form.name || !form.startDate || !form.endDate) {\r\n            showToast(\"Please fill all fields\", \"error\");\r\n            return;\r\n        }\r\n\r\n        // Validate format YYYY-YYYY\r\n        if (!/^\\d{4}-\\d{4}$/.test(form.name)) {\r\n            showToast(\"Name must be in YYYY-YYYY format\", \"error\");\r\n            return;\r\n        }\r\n\r\n        createYearMutation.mutate(form);\r\n    };\r\n\r\n    const handleIncrement = (id, name) =\u003e {\r\n        Alert.alert(\r\n            \"Activate \u0026 Promote\",\r\n            `WARNING: This will activate ${name}, promote all eligible students to the next class, and create history records for the current year. This action cannot be easily undone.`,\r\n            [\r\n                { text: \"Cancel\", style: \"cancel\" },\r\n                {\r\n                    text: \"Proceed\",\r\n                    style: \"destructive\",\r\n                    onPress: () =\u003e incrementYearMutation.mutate(id),\r\n                },\r\n            ]\r\n        );\r\n    };\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await Promise.all([refetchYears(), refetchReport()]);\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const renderYearsTab = () =\u003e (\r\n        \u003cView style={{ marginTop: 16 }}\u003e\r\n            {years.map((year) =\u003e (\r\n                \u003cView\r\n                    key={year._id}\r\n                    style={{\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 16,\r\n                        padding: 16,\r\n                        marginBottom: 12,\r\n                        flexDirection: \"row\",\r\n                        justifyContent: \"space-between\",\r\n                        alignItems: \"center\",\r\n                        borderWidth: year.isActive ? 2 : 0,\r\n                        borderColor: colors.primary\r\n                    }}\r\n                \u003e\r\n                    \u003cView\u003e\r\n                        \u003cText style={{ fontSize: 18, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                            {year.name}\r\n                        \u003c/Text\u003e\r\n                        \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginTop: 4 }}\u003e\r\n                            {formatDate(year.startDate)} - {formatDate(year.endDate)}\r\n                        \u003c/Text\u003e\r\n                        {year.isActive \u0026\u0026 (\r\n                            \u003cView style={{ backgroundColor: colors.primary + \"20\", alignSelf: \"flex-start\", paddingHorizontal: 8, paddingVertical: 2, borderRadius: 4, marginTop: 8 }}\u003e\r\n                                \u003cText style={{ color: colors.primary, fontSize: 12, fontWeight: \"600\" }}\u003eACTIVE\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        )}\r\n                    \u003c/View\u003e\r\n\r\n                    {!year.isActive \u0026\u0026 userRole === \u0027super admin\u0027 \u0026\u0026 (\r\n                        \u003cPressable\r\n                            onPress={() =\u003e handleIncrement(year._id, year.name)}\r\n                            style={{\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderWidth: 1,\r\n                                borderColor: colors.primary,\r\n                                paddingHorizontal: 12,\r\n                                paddingVertical: 8,\r\n                                borderRadius: 8\r\n                            }}\r\n                        \u003e\r\n                            \u003cText style={{ color: colors.primary, fontWeight: \"600\" }}\u003eActivate \u0026 Promote\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            ))}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderReportsTab = () =\u003e (\r\n        \u003cView style={{ marginTop: 16 }}\u003e\r\n            \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 12, marginBottom: 16 }}\u003e\r\n                \u003cPicker\r\n                    selectedValue={selectedYearId}\r\n                    onValueChange={(itemValue) =\u003e setSelectedYearId(itemValue)}\r\n                    style={{ color: colors.textPrimary }}\r\n                    dropdownIconColor={colors.textPrimary}\r\n                \u003e\r\n                    {years.map((year) =\u003e (\r\n                        \u003cPicker.Item key={year._id} label={year.name} value={year._id} /\u003e\r\n                    ))}\r\n                \u003c/Picker\u003e\r\n            \u003c/View\u003e\r\n\r\n            {reportLoading ? (\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            ) : reportData ? (\r\n                \u003cView\u003e\r\n                    {/* Student Summary */}\r\n                    \u003cView style={localStyles.card(colors)}\u003e\r\n                        \u003cText style={localStyles.cardTitle(colors)}\u003eStudent Distribution\u003c/Text\u003e\r\n                        {Object.entries(reportData.classWiseStudents || {}).map(([className, students]) =\u003e (\r\n                            \u003cView key={className} style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 8 }}\u003e\r\n                                \u003cText style={{ color: colors.textSecondary }}\u003e{className}\u003c/Text\u003e\r\n                                \u003cText style={{ color: colors.textPrimary, fontWeight: \"600\" }}\u003e{students.length}\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        ))}\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Teacher Leaves */}\r\n                    \u003cView style={localStyles.card(colors)}\u003e\r\n                        \u003cText style={localStyles.cardTitle(colors)}\u003eTeacher Leaves\u003c/Text\u003e\r\n                        {reportData.teacherLeaves \u0026\u0026 reportData.teacherLeaves.length \u003e 0 ? (\r\n                            reportData.teacherLeaves.map((leave, index) =\u003e (\r\n                                \u003cView key={index} style={{ marginBottom: 12, borderBottomWidth: 1, borderBottomColor: colors.border, paddingBottom: 8 }}\u003e\r\n                                    \u003cText style={{ color: colors.textPrimary, fontWeight: \"600\" }}\u003e{leave.applicant?.name}\u003c/Text\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, fontSize: 12 }}\u003e\r\n                                        {formatDate(leave.startDate)} - {formatDate(leave.endDate)} ({leave.leaveType})\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, fontSize: 12 }}\u003eReason: {leave.reason}\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ))\r\n                        ) : (\r\n                            \u003cText style={{ color: colors.textSecondary }}\u003eNo leaves recorded.\u003c/Text\u003e\r\n                        )}\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Teacher Attendance Summary */}\r\n                    \u003cView style={localStyles.card(colors)}\u003e\r\n                        \u003cText style={localStyles.cardTitle(colors)}\u003eTeacher Attendance Stats\u003c/Text\u003e\r\n                        {reportData.teacherAttendance \u0026\u0026 reportData.teacherAttendance.length \u003e 0 ? (\r\n                            reportData.teacherAttendance.map((record, index) =\u003e (\r\n                                \u003cView key={index} style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 4 }}\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary }}\u003e{record.user} ({record.status})\u003c/Text\u003e\r\n                                    \u003cText style={{ color: colors.textPrimary, fontWeight: \"600\" }}\u003e{record.count} days\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ))\r\n                        ) : (\r\n                            \u003cText style={{ color: colors.textSecondary }}\u003eNo attendance data.\u003c/Text\u003e\r\n                        )}\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            ) : (\r\n                \u003cText style={{ color: colors.textSecondary, textAlign: \"center\" }}\u003eSelect a year to view reports\u003c/Text\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader title=\"Academic Years\" subtitle=\"Manage \u0026 Reports\" showBack /\u003e\r\n\r\n                    {/* Tabs */}\r\n                    \u003cView style={{ flexDirection: \"row\", marginTop: 16, backgroundColor: colors.cardBackground, borderRadius: 12, padding: 4 }}\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setActiveTab(\"years\")}\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                borderRadius: 8,\r\n                                backgroundColor: activeTab === \"years\" ? colors.primary : \"transparent\"\r\n                            }}\r\n                        \u003e\r\n                            \u003cText style={{ color: activeTab === \"years\" ? \"#fff\" : colors.textSecondary, fontWeight: \"600\" }}\u003eManagement\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setActiveTab(\"reports\")}\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                borderRadius: 8,\r\n                                backgroundColor: activeTab === \"reports\" ? colors.primary : \"transparent\"\r\n                            }}\r\n                        \u003e\r\n                            \u003cText style={{ color: activeTab === \"reports\" ? \"#fff\" : colors.textSecondary, fontWeight: \"600\" }}\u003eReports\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {activeTab === \"years\" ? renderYearsTab() : renderReportsTab()}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n\r\n            {activeTab === \"years\" \u0026\u0026 (\r\n                \u003cPressable\r\n                    onPress={() =\u003e setShowModal(true)}\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        bottom: 110,\r\n                        right: 24,\r\n                        backgroundColor: colors.primary,\r\n                        width: 56,\r\n                        height: 56,\r\n                        borderRadius: 28,\r\n                        justifyContent: \"center\",\r\n                        alignItems: \"center\",\r\n                        elevation: 6,\r\n                    }}\r\n                \u003e\r\n                    \u003cMaterialIcons name=\"add\" size={28} color=\"#fff\" /\u003e\r\n                \u003c/Pressable\u003e\r\n            )}\r\n\r\n            \u003cModal visible={showModal} animationType=\"slide\" transparent\u003e\r\n                \u003cView style={{ flex: 1, justifyContent: \"center\", backgroundColor: \"rgba(0,0,0,0.5)\", padding: 20 }}\u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 24 }}\u003e\r\n                        \u003cText style={{ fontSize: 20, fontWeight: \"700\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                            New Academic Year\r\n                        \u003c/Text\u003e\r\n\r\n                        \u003cTextInput\r\n                            placeholder=\"Name (e.g. 2025-2026)\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                padding: 12,\r\n                                borderRadius: 8,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 12\r\n                            }}\r\n                            value={form.name}\r\n                            onChangeText={(t) =\u003e setForm({ ...form, name: t })}\r\n                        /\u003e\r\n\r\n                        \u003cTextInput\r\n                            placeholder=\"Start Date (DD-MM-YYYY)\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                padding: 12,\r\n                                borderRadius: 8,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 12\r\n                            }}\r\n                            value={form.startDate}\r\n                            onChangeText={(t) =\u003e setForm({ ...form, startDate: t })}\r\n                        /\u003e\r\n\r\n                        \u003cTextInput\r\n                            placeholder=\"End Date (DD-MM-YYYY)\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                padding: 12,\r\n                                borderRadius: 8,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 24\r\n                            }}\r\n                            value={form.endDate}\r\n                            onChangeText={(t) =\u003e setForm({ ...form, endDate: t })}\r\n                        /\u003e\r\n\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"flex-end\", gap: 12 }}\u003e\r\n                            \u003cPressable onPress={() =\u003e setShowModal(false)} style={{ padding: 12 }}\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontWeight: \"600\" }}\u003eCancel\u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                            \u003cPressable\r\n                                onPress={handleCreate}\r\n                                disabled={createYearMutation.isPending}\r\n                                style={{\r\n                                    backgroundColor: colors.primary,\r\n                                    paddingHorizontal: 20,\r\n                                    paddingVertical: 12,\r\n                                    borderRadius: 8,\r\n                                    opacity: createYearMutation.isPending ? 0.7 : 1,\r\n                                    minWidth: 80,\r\n                                    alignItems: \u0027center\u0027\r\n                                }}\r\n                            \u003e\r\n                                {createYearMutation.isPending ? (\r\n                                    \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e\r\n                                ) : (\r\n                                    \u003cText style={{ color: \"#fff\", fontWeight: \"600\" }}\u003eCreate\u003c/Text\u003e\r\n                                )}\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst localStyles = {\r\n    card: (colors) =\u003e ({\r\n        backgroundColor: colors.cardBackground,\r\n        borderRadius: 16,\r\n        padding: 16,\r\n        marginBottom: 12,\r\n    }),\r\n    cardTitle: (colors) =\u003e ({\r\n        fontSize: 16,\r\n        fontWeight: \"700\",\r\n        color: colors.textPrimary,\r\n        marginBottom: 12,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: colors.border,\r\n        paddingBottom: 8\r\n    })\r\n};\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\attendance.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useCallback\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  38,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  49
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Modal\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  62,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  67
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  5,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  5,
                                           "endColumn":  20
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect, useCallback } from \u0027react\u0027;\r\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity, Modal, ActivityIndicator, ScrollView, RefreshControl } from \u0027react-native\u0027;\r\nimport { useRouter } from \u0027expo-router\u0027;\r\nimport { Ionicons } from \u0027@expo/vector-icons\u0027;\r\nimport AsyncStorage from \u0027@react-native-async-storage/async-storage\u0027;\r\nimport DateTimePicker from \u0027@react-native-community/datetimepicker\u0027;\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \u0027../../hooks/useApi\u0027;\r\nimport { useQueryClient } from \u0027@tanstack/react-query\u0027;\r\nimport apiConfig from \u0027../../config/apiConfig\u0027;\r\nimport { useToast } from \u0027../../components/ToastProvider\u0027;\r\nimport { useTheme } from \u0027../../theme\u0027;\r\n\r\nimport AttendanceView from \u0027../../components/AttendanceView\u0027;\r\n\r\nexport default function AdminAttendance() {\r\n    const router = useRouter();\r\n    // ... (rest of component)\r\n    const { showToast } = useToast();\r\n    const { colors } = useTheme();\r\n    const queryClient = useQueryClient();\r\n    const [activeTab, setActiveTab] = useState(\u0027summary\u0027); // \u0027summary\u0027, \u0027student\u0027, \u0027staff\u0027, \u0027my_attendance\u0027\r\n    const [date, setDate] = useState(new Date());\r\n    const [showDatePicker, setShowDatePicker] = useState(false);\r\n    const [selectedClass, setSelectedClass] = useState(null);\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Fetch User\r\n    const { data: user } = useApiQuery(\r\n        [\u0027currentUser\u0027],\r\n        `${apiConfig.baseUrl}/auth/me`\r\n    );\r\n\r\n    // Fetch School Summary\r\n    const { data: schoolSummary, isLoading: summaryLoading, refetch: refetchSummary } = useApiQuery(\r\n        [\u0027attendanceSummary\u0027, date.toISOString().split(\u0027T\u0027)[0]],\r\n        `${apiConfig.baseUrl}/attendance/school-summary?date=${date.toISOString().split(\u0027T\u0027)[0]}`,\r\n        { enabled: activeTab === \u0027summary\u0027 }\r\n    );\r\n\r\n    // Fetch Classes\r\n    const { data: classesData = [] } = useApiQuery(\r\n        [\u0027classes\u0027],\r\n        `${apiConfig.baseUrl}/classes`,\r\n        { enabled: activeTab === \u0027student\u0027 }\r\n    );\r\n    const classes = Array.isArray(classesData) ? classesData : (classesData.data || []);\r\n\r\n    // Fetch Student Attendance\r\n    const { data: studentAttendance = [], isLoading: studentLoading, refetch: refetchStudent } = useApiQuery(\r\n        [\u0027studentAttendance\u0027, selectedClass?._id, date.toISOString().split(\u0027T\u0027)[0]],\r\n        `${apiConfig.baseUrl}/attendance/class/${selectedClass?._id}/date/${date.toISOString().split(\u0027T\u0027)[0]}`,\r\n        { enabled: activeTab === \u0027student\u0027 \u0026\u0026 !!selectedClass }\r\n    );\r\n\r\n    // Fetch Staff List\r\n    const { data: staffListResponse, isLoading: staffLoading, refetch: refetchStaff } = useApiQuery(\r\n        [\u0027staffList\u0027, date.toISOString().split(\u0027T\u0027)[0]],\r\n        `${apiConfig.baseUrl}/attendance/staff-list?date=${date.toISOString().split(\u0027T\u0027)[0]}`,\r\n        { enabled: activeTab === \u0027staff\u0027 }\r\n    );\r\n    const staffList = staffListResponse?.data || [];\r\n\r\n    // Fetch My Attendance\r\n    const { data: myAttendanceData, isLoading: myAttendanceLoading, refetch: refetchMyAttendance } = useApiQuery(\r\n        [\u0027myAttendance\u0027],\r\n        `${apiConfig.baseUrl}/attendance/my-attendance`,\r\n        { enabled: activeTab === \u0027my_attendance\u0027 }\r\n    );\r\n    const myAttendance = myAttendanceData?.attendance || [];\r\n    const mySummary = myAttendanceData?.summary || null;\r\n\r\n    const loading = summaryLoading || studentLoading || staffLoading || myAttendanceLoading;\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        if (activeTab === \u0027summary\u0027) await refetchSummary();\r\n        if (activeTab === \u0027student\u0027) await refetchStudent();\r\n        if (activeTab === \u0027staff\u0027) await refetchStaff();\r\n        if (activeTab === \u0027my_attendance\u0027) await refetchMyAttendance();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    // Local state for modifications before saving\r\n    const [localStudentAttendance, setLocalStudentAttendance] = useState([]);\r\n    const [localStaffList, setLocalStaffList] = useState([]);\r\n\r\n    useEffect(() =\u003e {\r\n        if (studentAttendance) setLocalStudentAttendance(studentAttendance);\r\n    }, [studentAttendance]);\r\n\r\n    useEffect(() =\u003e {\r\n        if (staffList) setLocalStaffList(staffList);\r\n    }, [staffList]);\r\n\r\n    // Mutations\r\n    const saveStudentAttendanceMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/attendance/mark`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\u0027Student attendance saved\u0027, \u0027success\u0027);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027studentAttendance\u0027] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027attendanceSummary\u0027] });\r\n        },\r\n        onError: () =\u003e showToast(\u0027Failed to save attendance\u0027, \u0027error\u0027)\r\n    });\r\n\r\n    const saveStaffAttendanceMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/attendance/mark-staff`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\u0027Staff attendance saved\u0027, \u0027success\u0027);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027staffList\u0027] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027attendanceSummary\u0027] });\r\n        },\r\n        onError: () =\u003e showToast(\u0027Failed to save attendance\u0027, \u0027error\u0027)\r\n    });\r\n\r\n    // --- Student Attendance Handlers ---\r\n\r\n    const toggleStudentStatus = (index) =\u003e {\r\n        const newAttendance = [...localStudentAttendance];\r\n        const currentStatus = newAttendance[index].status;\r\n        // Cycle: null -\u003e present -\u003e absent -\u003e late -\u003e excused -\u003e null\r\n        // Simplified: present -\u003e absent -\u003e late -\u003e present\r\n        let nextStatus = \u0027present\u0027;\r\n        if (currentStatus === \u0027present\u0027) nextStatus = \u0027absent\u0027;\r\n        else if (currentStatus === \u0027absent\u0027) nextStatus = \u0027late\u0027;\r\n        else if (currentStatus === \u0027late\u0027) nextStatus = \u0027excused\u0027;\r\n        else if (currentStatus === \u0027excused\u0027) nextStatus = \u0027present\u0027;\r\n\r\n        if (!currentStatus) nextStatus = \u0027present\u0027;\r\n\r\n        newAttendance[index].status = nextStatus;\r\n        setLocalStudentAttendance(newAttendance);\r\n    };\r\n\r\n    const markAllStudentsPresent = () =\u003e {\r\n        const newAttendance = localStudentAttendance.map(item =\u003e ({\r\n            ...item,\r\n            status: \u0027present\u0027\r\n        }));\r\n        setLocalStudentAttendance(newAttendance);\r\n    };\r\n\r\n    const saveStudentAttendance = () =\u003e {\r\n        if (!selectedClass) return;\r\n        const records = localStudentAttendance\r\n            .filter(item =\u003e item.status)\r\n            .map(item =\u003e ({\r\n                studentId: item.student._id,\r\n                status: item.status,\r\n                remarks: item.remarks\r\n            }));\r\n\r\n        if (records.length === 0) {\r\n            showToast(\u0027No attendance marked to save\u0027, \u0027info\u0027);\r\n            return;\r\n        }\r\n\r\n        saveStudentAttendanceMutation.mutate({\r\n            classId: selectedClass._id,\r\n            date: date.toISOString().split(\u0027T\u0027)[0],\r\n            attendanceRecords: records\r\n        });\r\n    };\r\n\r\n    // --- Staff Attendance Handlers ---\r\n\r\n    const markAllStaffPresent = () =\u003e {\r\n        const newStaffList = localStaffList.map(item =\u003e ({\r\n            ...item,\r\n            status: \u0027present\u0027\r\n        }));\r\n        setLocalStaffList(newStaffList);\r\n    };\r\n\r\n    const toggleStaffStatus = (index) =\u003e {\r\n        const newStaffList = [...localStaffList];\r\n        const currentStatus = newStaffList[index].status;\r\n        // Cycle: null -\u003e present -\u003e absent -\u003e late -\u003e null\r\n        let nextStatus = \u0027present\u0027;\r\n        if (currentStatus === \u0027present\u0027) nextStatus = \u0027absent\u0027;\r\n        else if (currentStatus === \u0027absent\u0027) nextStatus = \u0027late\u0027;\r\n        else if (currentStatus === \u0027late\u0027) nextStatus = \u0027present\u0027;\r\n\r\n        // If it was null, start with present\r\n        if (!currentStatus) nextStatus = \u0027present\u0027;\r\n\r\n        newStaffList[index].status = nextStatus;\r\n        setLocalStaffList(newStaffList);\r\n    };\r\n\r\n    const saveStaffAttendance = () =\u003e {\r\n        const records = localStaffList\r\n            .filter(item =\u003e item.status) // Only send marked records\r\n            .map(item =\u003e ({\r\n                userId: item.user._id,\r\n                status: item.status,\r\n                remarks: item.remarks\r\n            }));\r\n\r\n        if (records.length === 0) {\r\n            showToast(\u0027No attendance marked to save\u0027, \u0027info\u0027);\r\n            return;\r\n        }\r\n\r\n        saveStaffAttendanceMutation.mutate({\r\n            date: date.toISOString().split(\u0027T\u0027)[0],\r\n            attendanceRecords: records\r\n        });\r\n    };\r\n\r\n    // --- Render Helpers ---\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027present\u0027: return \u0027#4CAF50\u0027;\r\n            case \u0027absent\u0027: return \u0027#F44336\u0027;\r\n            case \u0027late\u0027: return \u0027#FF9800\u0027;\r\n            case \u0027excused\u0027: return \u0027#2196F3\u0027;\r\n            default: return \u0027#e0e0e0\u0027;\r\n        }\r\n    };\r\n\r\n    const renderStaffItem = ({ item, index }) =\u003e (\r\n        \u003cTouchableOpacity\r\n            style={styles.staffCard}\r\n            onPress={() =\u003e toggleStaffStatus(index)}\r\n        \u003e\r\n            \u003cView style={styles.staffInfo}\u003e\r\n                \u003cText style={styles.staffName}\u003e{item.user.name}\u003c/Text\u003e\r\n                \u003cText style={styles.staffRole}\u003eClass Teacher\u003c/Text\u003e\r\n            \u003c/View\u003e\r\n            \u003cView style={[styles.statusIndicator, { backgroundColor: getStatusColor(item.status) }]}\u003e\r\n                \u003cText style={styles.statusText}\u003e{item.status ? item.status.toUpperCase() : \u0027MARK\u0027}\u003c/Text\u003e\r\n            \u003c/View\u003e\r\n        \u003c/TouchableOpacity\u003e\r\n    );\r\n\r\n\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cView style={styles.header}\u003e\r\n                \u003cTouchableOpacity onPress={() =\u003e router.back()} style={styles.backButton}\u003e\r\n                    \u003cIonicons name=\"arrow-back\" size={24} color=\"#333\" /\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cText style={styles.headerTitle}\u003eAttendance Management\u003c/Text\u003e\r\n                \u003cView style={{ width: 24 }} /\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cView style={styles.tabContainer}\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.tab, activeTab === \u0027summary\u0027 \u0026\u0026 { borderBottomColor: colors.primary }]}\r\n                    onPress={() =\u003e setActiveTab(\u0027summary\u0027)}\r\n                \u003e\r\n                    \u003cText style={[styles.tabText, activeTab === \u0027summary\u0027 \u0026\u0026 { color: colors.primary, fontWeight: \u0027bold\u0027 }]}\u003eSummary\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.tab, activeTab === \u0027student\u0027 \u0026\u0026 { borderBottomColor: colors.primary }]}\r\n                    onPress={() =\u003e setActiveTab(\u0027student\u0027)}\r\n                \u003e\r\n                    \u003cText style={[styles.tabText, activeTab === \u0027student\u0027 \u0026\u0026 { color: colors.primary, fontWeight: \u0027bold\u0027 }]}\u003eStudent\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.tab, activeTab === \u0027staff\u0027 \u0026\u0026 { borderBottomColor: colors.primary }]}\r\n                    onPress={() =\u003e setActiveTab(\u0027staff\u0027)}\r\n                \u003e\r\n                    \u003cText style={[styles.tabText, activeTab === \u0027staff\u0027 \u0026\u0026 { color: colors.primary, fontWeight: \u0027bold\u0027 }]}\u003eStaff\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                {user?.role !== \u0027super admin\u0027 \u0026\u0026 (\r\n                    \u003cTouchableOpacity\r\n                        style={[styles.tab, activeTab === \u0027my_attendance\u0027 \u0026\u0026 { borderBottomColor: colors.primary }]}\r\n                        onPress={() =\u003e setActiveTab(\u0027my_attendance\u0027)}\r\n                    \u003e\r\n                        \u003cText style={[styles.tabText, activeTab === \u0027my_attendance\u0027 \u0026\u0026 { color: colors.primary, fontWeight: \u0027bold\u0027 }]}\u003eMy Log\u003c/Text\u003e\r\n                    \u003c/TouchableOpacity\u003e\r\n                )}\r\n            \u003c/View\u003e\r\n\r\n            {/* Date Picker for Student/Staff/Summary tabs */}\r\n            {activeTab !== \u0027my_attendance\u0027 \u0026\u0026 (\r\n                \u003cView style={styles.dateBar}\u003e\r\n                    \u003cTouchableOpacity onPress={() =\u003e setShowDatePicker(true)} style={[styles.dateSelector, { backgroundColor: colors.primary + \u002715\u0027 }]}\u003e\r\n                        \u003cIonicons name=\"calendar\" size={20} color={colors.primary} /\u003e\r\n                        \u003cText style={[styles.dateText, { color: colors.primary }]}\u003e{date.toDateString()}\u003c/Text\u003e\r\n                    \u003c/TouchableOpacity\u003e\r\n                    {showDatePicker \u0026\u0026 (\r\n                        \u003cDateTimePicker\r\n                            value={date}\r\n                            mode=\"date\"\r\n                            display=\"default\"\r\n                            onChange={(event, selectedDate) =\u003e {\r\n                                setShowDatePicker(false);\r\n                                if (selectedDate) setDate(selectedDate);\r\n                            }}\r\n                        /\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            )}\r\n\r\n            {loading ? (\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} style={styles.loader} /\u003e\r\n            ) : (\r\n                \u003cView style={{ flex: 1 }}\u003e\r\n                    {activeTab === \u0027summary\u0027 \u0026\u0026 schoolSummary \u0026\u0026 (\r\n                        \u003cScrollView style={{ flex: 1, padding: 16 }} refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} /\u003e}\u003e\r\n                            {/* Summary Cards */}\r\n                            \u003cView style={{ flexDirection: \u0027row\u0027, gap: 12, marginBottom: 24 }}\u003e\r\n                                \u003cView style={[styles.summaryCardSmall, { backgroundColor: \u0027#E3F2FD\u0027 }]}\u003e\r\n                                    \u003cText style={[styles.summaryValue, { color: \u0027#1976D2\u0027 }]}\u003e{schoolSummary?.students?.present || 0}/{schoolSummary?.students?.total || 0}\u003c/Text\u003e\r\n                                    \u003cText style={styles.summaryLabel}\u003eStudent Attendance\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cView style={[styles.summaryCardSmall, { backgroundColor: \u0027#E8F5E9\u0027 }]}\u003e\r\n                                    \u003cText style={[styles.summaryValue, { color: \u0027#388E3C\u0027 }]}\u003e{schoolSummary?.teachers?.present || 0}/{schoolSummary?.teachers?.total || 0}\u003c/Text\u003e\r\n                                    \u003cText style={styles.summaryLabel}\u003eTeacher Attendance\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Absent List */}\r\n                            \u003cText style={styles.sectionTitle}\u003eAbsent Today\u003c/Text\u003e\r\n                            {(schoolSummary?.absentList || []).length === 0 ? (\r\n                                \u003cText style={styles.emptyText}\u003eNo one marked absent yet.\u003c/Text\u003e\r\n                            ) : (\r\n                                schoolSummary.absentList.map((item) =\u003e (\r\n                                    \u003cView key={item._id} style={styles.absentRow}\u003e\r\n                                        \u003cView\u003e\r\n                                            \u003cText style={styles.absentName}\u003e{item.name}\u003c/Text\u003e\r\n                                            \u003cText style={styles.absentRole}\u003e{item.role} â€¢ {item.className}\u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                        \u003cView style={styles.absentTag}\u003e\r\n                                            \u003cText style={styles.absentTagText}\u003eAbsent\u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                ))\r\n                            )}\r\n                        \u003c/ScrollView\u003e\r\n                    )}\r\n\r\n                    {activeTab === \u0027student\u0027 \u0026\u0026 (\r\n                        \u003cView style={{ flex: 1 }}\u003e\r\n                            \u003cView style={{ padding: 16, paddingBottom: 0 }}\u003e\r\n                                \u003cText style={styles.sectionTitle}\u003eSelect Class\u003c/Text\u003e\r\n                                \u003cScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.classScroll}\u003e\r\n                                    {classes.map((cls) =\u003e (\r\n                                        \u003cTouchableOpacity\r\n                                            key={cls._id}\r\n                                            style={[styles.classChip, selectedClass?._id === cls._id \u0026\u0026 { backgroundColor: colors.primary, borderColor: colors.primary }]}\r\n                                            onPress={() =\u003e setSelectedClass(cls)}\r\n                                        \u003e\r\n                                            \u003cText style={[styles.classChipText, selectedClass?._id === cls._id \u0026\u0026 styles.activeClassChipText]}\u003e\r\n                                                {cls.name} {cls.section}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                    ))}\r\n                                \u003c/ScrollView\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {selectedClass \u0026\u0026 (\r\n                                \u003c\u003e\r\n                                    \u003cView style={styles.actionHeader}\u003e\r\n                                        \u003cTouchableOpacity onPress={markAllStudentsPresent} style={styles.textButton}\u003e\r\n                                            \u003cText style={[styles.textButtonText, { color: colors.primary }]}\u003eMark All Present\u003c/Text\u003e\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                    \u003c/View\u003e\r\n                                    \u003cFlatList\r\n                                        style={{ flex: 1 }}\r\n                                        data={localStudentAttendance}\r\n                                        keyExtractor={(item) =\u003e item.student._id}\r\n                                        renderItem={({ item, index }) =\u003e (\r\n                                            \u003cTouchableOpacity\r\n                                                style={styles.studentRow}\r\n                                                onPress={() =\u003e toggleStudentStatus(index)}\r\n                                            \u003e\r\n                                                \u003cText style={styles.studentName}\u003e{item.student.name}\u003c/Text\u003e\r\n                                                \u003cView style={[styles.miniStatus, { backgroundColor: getStatusColor(item.status) }]}\u003e\r\n                                                    \u003cText style={styles.miniStatusText}\u003e{item.status ? item.status.toUpperCase() : \u0027MARK\u0027}\u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                            \u003c/TouchableOpacity\u003e\r\n                                        )}\r\n                                        ListEmptyComponent={\u003cText style={styles.emptyText}\u003eNo students found.\u003c/Text\u003e}\r\n                                        contentContainerStyle={{ paddingHorizontal: 16, paddingBottom: 100 }}\r\n                                    /\u003e\r\n                                    \u003cView style={styles.footer}\u003e\r\n                                        \u003cTouchableOpacity\r\n                                            style={[styles.saveButton, { backgroundColor: colors.primary }]}\r\n                                            onPress={saveStudentAttendance}\r\n                                            disabled={saveStudentAttendanceMutation.isPending}\r\n                                        \u003e\r\n                                            {saveStudentAttendanceMutation.isPending ? (\r\n                                                \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                            ) : (\r\n                                                \u003cText style={styles.saveButtonText}\u003eSave Student Attendance\u003c/Text\u003e\r\n                                            )}\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/\u003e\r\n                            )}\r\n                        \u003c/View\u003e\r\n                    )}\r\n\r\n                    {activeTab === \u0027staff\u0027 \u0026\u0026 (\r\n                        \u003cView style={{ flex: 1 }}\u003e\r\n                            \u003cView style={styles.actionHeader}\u003e\r\n                                \u003cTouchableOpacity onPress={markAllStaffPresent} style={styles.textButton}\u003e\r\n                                    \u003cText style={[styles.textButtonText, { color: colors.primary }]}\u003eMark All Present\u003c/Text\u003e\r\n                                \u003c/TouchableOpacity\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cFlatList\r\n                                style={{ flex: 1 }}\r\n                                data={localStaffList}\r\n                                renderItem={renderStaffItem}\r\n                                keyExtractor={(item) =\u003e item.user._id}\r\n                                contentContainerStyle={styles.listContent}\r\n                                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} /\u003e}\r\n                            /\u003e\r\n                            \u003cView style={styles.footer}\u003e\r\n                                \u003cTouchableOpacity\r\n                                    style={[styles.saveButton, { backgroundColor: colors.primary }]}\r\n                                    onPress={saveStaffAttendance}\r\n                                    disabled={saveStaffAttendanceMutation.isPending}\r\n                                \u003e\r\n                                    {saveStaffAttendanceMutation.isPending ? (\r\n                                        \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                    ) : (\r\n                                        \u003cText style={styles.saveButtonText}\u003eSave Attendance\u003c/Text\u003e\r\n                                    )}\r\n                                \u003c/TouchableOpacity\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n\r\n                    {activeTab === \u0027my_attendance\u0027 \u0026\u0026 (\r\n                        \u003cAttendanceView\r\n                            attendanceHistory={myAttendance}\r\n                            summary={mySummary}\r\n                            loading={loading}\r\n                            refreshing={refreshing}\r\n                            onRefresh={onRefresh}\r\n                            title=\"My Attendance Log\"\r\n                            subtitle=\"Track your admin attendance\"\r\n                        /\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: \u0027#f5f5f5\u0027 },\r\n    header: { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, justifyContent: \u0027space-between\u0027, padding: 16, backgroundColor: \u0027#fff\u0027, elevation: 2 },\r\n    headerTitle: { fontSize: 18, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    backButton: { padding: 4 },\r\n    tabContainer: { flexDirection: \u0027row\u0027, backgroundColor: \u0027#fff\u0027, paddingHorizontal: 16, paddingBottom: 12, borderBottomWidth: 1, borderBottomColor: \u0027#eee\u0027 },\r\n    tab: { flex: 1, paddingVertical: 10, alignItems: \u0027center\u0027, borderBottomWidth: 2, borderBottomColor: \u0027transparent\u0027 },\r\n    tabText: { fontSize: 16, color: \u0027#666\u0027, fontWeight: \u0027500\u0027 },\r\n    dateBar: { flexDirection: \u0027row\u0027, justifyContent: \u0027center\u0027, padding: 12, backgroundColor: \u0027#fff\u0027, borderBottomWidth: 1, borderBottomColor: \u0027#eee\u0027 },\r\n    dateSelector: { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, paddingHorizontal: 16, paddingVertical: 8, borderRadius: 20 },\r\n    dateText: { marginLeft: 8, fontWeight: \u0027600\u0027 },\r\n    loader: { marginTop: 20 },\r\n    listContent: { padding: 16, paddingBottom: 100 },\r\n    staffCard: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027center\u0027, backgroundColor: \u0027#fff\u0027, padding: 16, borderRadius: 12, marginBottom: 12, elevation: 1 },\r\n    staffInfo: { flex: 1 },\r\n    staffName: { fontSize: 16, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    staffRole: { fontSize: 12, color: \u0027#666\u0027 },\r\n    statusIndicator: { paddingHorizontal: 12, paddingVertical: 6, borderRadius: 12, minWidth: 80, alignItems: \u0027center\u0027 },\r\n    statusText: { color: \u0027#fff\u0027, fontWeight: \u0027bold\u0027, fontSize: 12 },\r\n    footer: { padding: 16, paddingBottom: 110, backgroundColor: \u0027#fff\u0027, borderTopWidth: 1, borderTopColor: \u0027#eee\u0027 },\r\n    saveButton: { padding: 16, borderRadius: 12, alignItems: \u0027center\u0027 },\r\n    saveButtonText: { color: \u0027#fff\u0027, fontWeight: \u0027bold\u0027, fontSize: 16 },\r\n    summaryCard: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-around\u0027, backgroundColor: \u0027#fff\u0027, margin: 16, padding: 16, borderRadius: 12, elevation: 2 },\r\n    summaryItem: { alignItems: \u0027center\u0027 },\r\n    summaryValue: { fontSize: 20, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    summaryLabel: { fontSize: 12, color: \u0027#666\u0027 },\r\n    historyCard: { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, backgroundColor: \u0027#fff\u0027, padding: 16, borderRadius: 12, marginBottom: 12, elevation: 1 },\r\n    historyStatus: { width: 40, height: 40, borderRadius: 20, justifyContent: \u0027center\u0027, alignItems: \u0027center\u0027, marginRight: 16 },\r\n    historyStatusText: { color: \u0027#fff\u0027, fontWeight: \u0027bold\u0027, fontSize: 18 },\r\n    historyInfo: { flex: 1 },\r\n    historyDate: { fontSize: 16, fontWeight: \u0027600\u0027, color: \u0027#333\u0027 },\r\n    historyTime: { fontSize: 12, color: \u0027#666\u0027 },\r\n    historyRemarks: { fontSize: 12, color: \u0027#666\u0027, fontStyle: \u0027italic\u0027 },\r\n    sectionTitle: { fontSize: 16, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027, marginBottom: 12 },\r\n    classScroll: { maxHeight: 50, marginBottom: 16 },\r\n    classChip: { paddingHorizontal: 16, paddingVertical: 8, backgroundColor: \u0027#fff\u0027, borderRadius: 20, marginRight: 8, borderWidth: 1, borderColor: \u0027#ddd\u0027 },\r\n    classChipText: { color: \u0027#666\u0027 },\r\n    activeClassChipText: { color: \u0027#fff\u0027, fontWeight: \u0027bold\u0027 },\r\n    studentRow: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027center\u0027, paddingVertical: 12, borderBottomWidth: 1, borderBottomColor: \u0027#eee\u0027 },\r\n    studentName: { fontSize: 16, color: \u0027#333\u0027 },\r\n    miniStatus: { paddingHorizontal: 8, paddingVertical: 4, borderRadius: 8 },\r\n    miniStatusText: { color: \u0027#fff\u0027, fontSize: 10, fontWeight: \u0027bold\u0027 },\r\n    emptyText: { textAlign: \u0027center\u0027, marginTop: 20, color: \u0027#666\u0027 },\r\n    summaryCardSmall: { flex: 1, padding: 16, borderRadius: 12, alignItems: \u0027center\u0027, justifyContent: \u0027center\u0027 },\r\n    absentRow: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027center\u0027, paddingVertical: 12, borderBottomWidth: 1, borderBottomColor: \u0027#eee\u0027 },\r\n    absentName: { fontSize: 16, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    absentRole: { fontSize: 12, color: \u0027#666\u0027 },\r\n    absentTag: { backgroundColor: \u0027#FFEBEE\u0027, paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 },\r\n    absentTagText: { color: \u0027#D32F2F\u0027, fontSize: 10, fontWeight: \u0027bold\u0027 },\r\n    actionHeader: { flexDirection: \u0027row\u0027, justifyContent: \u0027flex-end\u0027, paddingHorizontal: 16, paddingBottom: 8 },\r\n    textButton: { padding: 8 },\r\n    textButtonText: { fontWeight: \u0027bold\u0027 },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\classes.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027StyleSheet\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  15
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  15,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  15,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  26,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  26,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027loading\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  49,
                                           "column":  40,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  49,
                                           "endColumn":  47
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  5,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    TextInput,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Modal,\r\n    StyleSheet,\r\n    Alert,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport AppHeader from \"../../components/Header\";\r\n\r\nexport default function ClassesScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n    const queryClient = useQueryClient();\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalMode, setModalMode] = useState(\"create\"); // \"create\" or \"edit\"\r\n    const [editingClassId, setEditingClassId] = useState(null);\r\n    const [deletingId, setDeletingId] = useState(null);\r\n\r\n    const [form, setForm] = useState({\r\n        name: \"\",\r\n        section: \"\",\r\n        branch: \"Main\",\r\n        classTeacher: \"\"\r\n    });\r\n\r\n    // Fetch User\r\n    const { data: user } = useApiQuery(\r\n        [\u0027currentUser\u0027],\r\n        `${apiConfig.baseUrl}/auth/me`\r\n    );\r\n\r\n    // Fetch Data (Classes, Years, Teachers)\r\n    const { data: initData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027adminClassesInit\u0027],\r\n        `${apiConfig.baseUrl}/classes/admin/init`\r\n    );\r\n\r\n    const classes = initData?.classes || [];\r\n    const teachers = initData?.teachers || [];\r\n\r\n    // Mutations\r\n    const createClassMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/classes`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminClassesInit\u0027] });\r\n            showToast(\"Class created\", \"success\");\r\n            setShowModal(false);\r\n            setForm({ ...form, name: \"\", section: \"\" });\r\n            setModalMode(\"create\");\r\n            setEditingClassId(null);\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to create\", \"error\")\r\n    });\r\n\r\n    const updateClassMutation = useApiMutation({\r\n        mutationFn: (data) =\u003e createApiMutationFn(`${apiConfig.baseUrl}/classes/${data._id}`, \u0027PUT\u0027)(data),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminClassesInit\u0027] });\r\n            showToast(\"Class updated\", \"success\");\r\n            setShowModal(false);\r\n            setForm({ ...form, name: \"\", section: \"\" });\r\n            setModalMode(\"create\");\r\n            setEditingClassId(null);\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to update\", \"error\")\r\n    });\r\n\r\n    const deleteClassMutation = useApiMutation({\r\n        mutationFn: (id) =\u003e createApiMutationFn(`${apiConfig.baseUrl}/classes/${id}`, \u0027DELETE\u0027)(),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminClassesInit\u0027] });\r\n            showToast(\"Class deleted\", \"success\");\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to delete\", \"error\")\r\n    });\r\n\r\n    const handleSubmit = () =\u003e {\r\n        if (!form.name) {\r\n            showToast(\"Name is required\", \"error\");\r\n            return;\r\n        }\r\n\r\n        if (modalMode === \"create\") {\r\n            createClassMutation.mutate(form);\r\n        } else {\r\n            updateClassMutation.mutate({ ...form, _id: editingClassId });\r\n        }\r\n    };\r\n\r\n    const handleEdit = (cls) =\u003e {\r\n        setForm({\r\n            name: cls.name,\r\n            section: cls.section || \"\",\r\n            branch: cls.branch,\r\n            classTeacher: cls.classTeacher?._id || cls.classTeacher || \"\"\r\n        });\r\n        setModalMode(\"edit\");\r\n        setEditingClassId(cls._id);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleDelete = (classId, className) =\u003e {\r\n        Alert.alert(\r\n            \"Delete Class\",\r\n            `Are you sure you want to delete ${className}?`,\r\n            [\r\n                { text: \"Cancel\", style: \"cancel\" },\r\n                {\r\n                    text: \"Delete\",\r\n                    style: \"destructive\",\r\n                    onPress: () =\u003e {\r\n                        setDeletingId(classId);\r\n                        deleteClassMutation.mutate(classId, {\r\n                            onSettled: () =\u003e setDeletingId(null)\r\n                        });\r\n                    }\r\n                }\r\n            ]\r\n        );\r\n    };\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader title=\"Classes\" subtitle=\"Manage classes and sections\" showBack /\u003e\r\n\r\n                    \u003cView style={{ marginTop: 16 }}\u003e\r\n                        {classes.map((cls) =\u003e (\r\n                            \u003cPressable\r\n                                key={cls._id}\r\n                                onPress={() =\u003e {\r\n                                    // Navigate to teacher\u0027s class view\r\n                                    router.push(`/teacher/class/${cls._id}`);\r\n                                }}\r\n                                style={({ pressed }) =\u003e ({\r\n                                    backgroundColor: colors.cardBackground,\r\n                                    borderRadius: 16,\r\n                                    padding: 16,\r\n                                    marginBottom: 12,\r\n                                    flexDirection: \"row\",\r\n                                    justifyContent: \"space-between\",\r\n                                    alignItems: \"center\",\r\n                                    opacity: pressed ? 0.9 : 1,\r\n                                    shadowColor: \"#000\",\r\n                                    shadowOffset: { width: 0, height: 1 },\r\n                                    shadowOpacity: 0.05,\r\n                                    shadowRadius: 4,\r\n                                    elevation: 1,\r\n                                })}\r\n                            \u003e\r\n                                \u003cView\u003e\r\n                                    \u003cText style={{ fontSize: 18, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                                        {cls.name} {cls.section ? `- ${cls.section}` : \"\"}\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginTop: 4 }}\u003e\r\n                                        {cls.branch}\r\n                                    \u003c/Text\u003e\r\n                                    {cls.classTeacher \u0026\u0026 (\r\n                                        \u003cText style={{ fontSize: 13, color: colors.primary, marginTop: 4, fontWeight: \"500\" }}\u003e\r\n                                            Teacher: {cls.classTeacher.name}\r\n                                        \u003c/Text\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                                \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, gap: 8 }}\u003e\r\n                                    {user?.role === \u0027super admin\u0027 \u0026\u0026 (\r\n                                        \u003c\u003e\r\n                                            \u003cPressable\r\n                                                onPress={(e) =\u003e {\r\n                                                    e.stopPropagation();\r\n                                                    handleEdit(cls);\r\n                                                }}\r\n                                                style={{ padding: 8 }}\r\n                                            \u003e\r\n                                                \u003cMaterialIcons name=\"edit\" size={20} color={colors.textSecondary} /\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                            {deletingId === cls._id ? (\r\n                                                \u003cView style={{ padding: 8 }}\u003e\r\n                                                    \u003cActivityIndicator size=\"small\" color={colors.error} /\u003e\r\n                                                \u003c/View\u003e\r\n                                            ) : (\r\n                                                \u003cPressable\r\n                                                    onPress={(e) =\u003e {\r\n                                                        e.stopPropagation();\r\n                                                        handleDelete(cls._id, cls.name);\r\n                                                    }}\r\n                                                    style={{ padding: 8 }}\r\n                                                \u003e\r\n                                                    \u003cMaterialIcons name=\"delete\" size={20} color={colors.error} /\u003e\r\n                                                \u003c/Pressable\u003e\r\n                                            )}\r\n                                        \u003c/\u003e\r\n                                    )}\r\n                                    \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/Pressable\u003e\r\n                        ))}\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n\r\n            {user?.role === \u0027super admin\u0027 \u0026\u0026 (\r\n                \u003cPressable\r\n                    onPress={() =\u003e {\r\n                        setModalMode(\"create\");\r\n                        setForm({ ...form, name: \"\", section: \"\" });\r\n                        setShowModal(true);\r\n                    }}\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        bottom: 110,\r\n                        right: 24,\r\n                        backgroundColor: colors.primary,\r\n                        width: 56,\r\n                        height: 56,\r\n                        borderRadius: 28,\r\n                        justifyContent: \"center\",\r\n                        alignItems: \"center\",\r\n                        elevation: 6,\r\n                    }}\r\n                \u003e\r\n                    \u003cMaterialIcons name=\"add\" size={28} color=\"#fff\" /\u003e\r\n                \u003c/Pressable\u003e\r\n            )}\r\n\r\n            \u003cModal visible={showModal} animationType=\"slide\" transparent\u003e\r\n                \u003cView style={{ flex: 1, justifyContent: \"center\", backgroundColor: \"rgba(0,0,0,0.5)\", padding: 20 }}\u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 24 }}\u003e\r\n                        \u003cText style={{ fontSize: 20, fontWeight: \"700\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                            {modalMode === \"create\" ? \"New Class\" : \"Edit Class\"}\r\n                        \u003c/Text\u003e\r\n\r\n                        \u003cTextInput\r\n                            placeholder=\"Class Name (e.g. 1st Standard)\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                padding: 12,\r\n                                borderRadius: 8,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 12\r\n                            }}\r\n                            value={form.name}\r\n                            onChangeText={(t) =\u003e setForm({ ...form, name: t })}\r\n                        /\u003e\r\n\r\n                        \u003cTextInput\r\n                            placeholder=\"Section (Optional, e.g. A)\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                padding: 12,\r\n                                borderRadius: 8,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 12\r\n                            }}\r\n                            value={form.section}\r\n                            onChangeText={(t) =\u003e setForm({ ...form, section: t })}\r\n                        /\u003e\r\n\r\n\r\n\r\n                        {/* Simple Dropdown for Teacher */}\r\n                        \u003cView style={{ marginBottom: 24 }}\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, marginBottom: 4, fontSize: 12 }}\u003eClass Teacher (Optional)\u003c/Text\u003e\r\n                            \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                                {teachers.map(teacher =\u003e (\r\n                                    \u003cPressable\r\n                                        key={teacher._id}\r\n                                        onPress={() =\u003e setForm({ ...form, classTeacher: teacher._id })}\r\n                                        style={{\r\n                                            paddingHorizontal: 12,\r\n                                            paddingVertical: 8,\r\n                                            backgroundColor: form.classTeacher === teacher._id ? colors.primary : colors.background,\r\n                                            borderRadius: 8,\r\n                                            marginRight: 8,\r\n                                            borderWidth: 1,\r\n                                            borderColor: form.classTeacher === teacher._id ? colors.primary : colors.border\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cText style={{ color: form.classTeacher === teacher._id ? \u0027#fff\u0027 : colors.textPrimary }}\u003e\r\n                                            {teacher.name}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                ))}\r\n                            \u003c/ScrollView\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"flex-end\", gap: 12 }}\u003e\r\n                            \u003cPressable onPress={() =\u003e setShowModal(false)} style={{ padding: 12 }}\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontWeight: \"600\" }}\u003eCancel\u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                            \u003cPressable\r\n                                onPress={handleSubmit}\r\n                                disabled={createClassMutation.isPending || updateClassMutation.isPending}\r\n                                style={{\r\n                                    backgroundColor: colors.primary,\r\n                                    opacity: (createClassMutation.isPending || updateClassMutation.isPending) ? 0.5 : 1,\r\n                                    paddingHorizontal: 20,\r\n                                    paddingVertical: 12,\r\n                                    borderRadius: 8,\r\n                                    flexDirection: \"row\",\r\n                                    alignItems: \"center\",\r\n                                    gap: 8\r\n                                }}\r\n                            \u003e\r\n                                {(createClassMutation.isPending || updateClassMutation.isPending) \u0026\u0026 \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e}\r\n                                \u003cText style={{ color: \"#fff\", fontWeight: \"600\" }}\u003e\r\n                                    {(createClassMutation.isPending || updateClassMutation.isPending) ? \"Saving...\" : (modalMode === \"create\" ? \"Create\" : \"Update\")}\r\n                                \u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View \u003e\r\n                \u003c/View \u003e\r\n            \u003c/Modal \u003e\r\n        \u003c/View \u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\complaints.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  15,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  15,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  26,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  26,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Pressable,\r\n    Modal,\r\n    TextInput,\r\n    KeyboardAvoidingView,\r\n    Platform\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport Header from \"../../components/Header\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nexport default function AdminComplaintsScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const queryClient = useQueryClient();\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [filter, setFilter] = useState(\"All\");\r\n\r\n    // Resolve Modal\r\n    const [selectedComplaint, setSelectedComplaint] = useState(null);\r\n    const [response, setResponse] = useState(\"\");\r\n    const [status, setStatus] = useState(\"Resolved\");\r\n\r\n    // Fetch Complaints\r\n    const { data: complaints = [], isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027adminComplaints\u0027],\r\n        `${apiConfig.baseUrl}/complaints/all`\r\n    );\r\n\r\n    // Update Status Mutation\r\n    const updateStatusMutation = useApiMutation({\r\n        mutationFn: (data) =\u003e createApiMutationFn(`${apiConfig.baseUrl}/complaints/${data.id}/status`, \u0027PUT\u0027)(data.body),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminComplaints\u0027] });\r\n            showToast(\"Complaint updated\", \"success\");\r\n            setSelectedComplaint(null);\r\n            setResponse(\"\");\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to update status\", \"error\")\r\n    });\r\n\r\n    const handleUpdateStatus = () =\u003e {\r\n        if (!selectedComplaint) return;\r\n\r\n        updateStatusMutation.mutate({\r\n            id: selectedComplaint._id,\r\n            body: {\r\n                status,\r\n                adminResponse: response\r\n            }\r\n        });\r\n    };\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027Resolved\u0027: return \u0027#4CAF50\u0027;\r\n            case \u0027In Progress\u0027: return \u0027#FF9800\u0027;\r\n            case \u0027Rejected\u0027: return \u0027#F44336\u0027;\r\n            default: return \u0027#9E9E9E\u0027;\r\n        }\r\n    };\r\n\r\n    const filteredComplaints = filter === \"All\"\r\n        ? complaints\r\n        : complaints.filter(c =\u003e c.status === filter);\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                \u003cHeader title=\"Complaints\" subtitle=\"Manage Issues\" showBack /\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cView style={{ paddingHorizontal: 16, marginBottom: 16 }}\u003e\r\n                \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                    \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                        {[\u0027All\u0027, \u0027Pending\u0027, \u0027In Progress\u0027, \u0027Resolved\u0027].map(f =\u003e (\r\n                            \u003cPressable\r\n                                key={f}\r\n                                onPress={() =\u003e setFilter(f)}\r\n                                style={{\r\n                                    paddingHorizontal: 16,\r\n                                    paddingVertical: 8,\r\n                                    backgroundColor: filter === f ? colors.primary : colors.cardBackground,\r\n                                    borderRadius: 20,\r\n                                    borderWidth: 1,\r\n                                    borderColor: filter === f ? colors.primary : colors.textSecondary + \"20\"\r\n                                }}\r\n                            \u003e\r\n                                \u003cText style={{ color: filter === f ? \"#fff\" : colors.textPrimary }}\u003e\r\n                                    {f}\r\n                                \u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                        ))}\r\n                    \u003c/View\u003e\r\n                \u003c/ScrollView\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ padding: 16, paddingBottom: 100 }}\r\n            \u003e\r\n                {filteredComplaints.length === 0 ? (\r\n                    \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                        \u003cMaterialIcons name=\"check-circle\" size={48} color={colors.textSecondary} /\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginTop: 16 }}\u003eNo complaints found\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                ) : (\r\n                    filteredComplaints.map((complaint) =\u003e (\r\n                        \u003cPressable\r\n                            key={complaint._id}\r\n                            onPress={() =\u003e {\r\n                                setSelectedComplaint(complaint);\r\n                                setStatus(complaint.status);\r\n                                setResponse(complaint.adminResponse || \"\");\r\n                            }}\r\n                            style={{\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 16,\r\n                                marginBottom: 12,\r\n                                borderLeftWidth: 4,\r\n                                borderLeftColor: getStatusColor(complaint.status),\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: { width: 0, height: 1 },\r\n                                shadowOpacity: 0.05,\r\n                                shadowRadius: 2,\r\n                                elevation: 1,\r\n                            }}\r\n                        \u003e\r\n                            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 8 }}\u003e\r\n                                \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, flex: 1 }}\u003e\r\n                                    {complaint.title}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: getStatusColor(complaint.status), fontFamily: \"DMSans-Bold\" }}\u003e\r\n                                    {complaint.status}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cText style={{ color: colors.textSecondary, fontSize: 13, marginBottom: 8 }} numberOfLines={2}\u003e\r\n                                {complaint.description}\r\n                            \u003c/Text\u003e\r\n\r\n                            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                    {complaint.student?.name} â€¢ {complaint.category}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                    {new Date(complaint.createdAt).toLocaleDateString()}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/Pressable\u003e\r\n                    ))\r\n                )}\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* Resolve Modal */}\r\n            \u003cModal\r\n                visible={!!selectedComplaint}\r\n                animationType=\"slide\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e setSelectedComplaint(null)}\r\n            \u003e\r\n                \u003cKeyboardAvoidingView\r\n                    behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n                    style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}\r\n                \u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderTopLeftRadius: 24, borderTopRightRadius: 24, padding: 24 }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 20 }}\u003e\r\n                            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                Update Status\r\n                            \u003c/Text\u003e\r\n                            \u003cPressable onPress={() =\u003e setSelectedComplaint(null)}\u003e\r\n                                \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        {selectedComplaint \u0026\u0026 (\r\n                            \u003cView style={{ marginBottom: 20 }}\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontSize: 13 }}\u003e{selectedComplaint.student?.name} reported:\u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 16, color: colors.textPrimary, fontFamily: \"DMSans-Medium\", marginTop: 4 }}\u003e\r\n                                    {selectedComplaint.title}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, marginTop: 4 }}\u003e\r\n                                    {selectedComplaint.description}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        )}\r\n\r\n                        \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eSet Status\u003c/Text\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 8, marginBottom: 20 }}\u003e\r\n                            {[\u0027In Progress\u0027, \u0027Resolved\u0027, \u0027Rejected\u0027].map(s =\u003e (\r\n                                \u003cPressable\r\n                                    key={s}\r\n                                    onPress={() =\u003e setStatus(s)}\r\n                                    style={{\r\n                                        paddingHorizontal: 12,\r\n                                        paddingVertical: 8,\r\n                                        backgroundColor: status === s ? getStatusColor(s) : colors.background,\r\n                                        borderRadius: 8,\r\n                                        borderWidth: 1,\r\n                                        borderColor: status === s ? getStatusColor(s) : colors.textSecondary + \"20\"\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cText style={{ color: status === s ? \"#fff\" : colors.textPrimary, fontSize: 12, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                                        {s}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eResponse / Remarks\u003c/Text\u003e\r\n                        \u003cTextInput\r\n                            value={response}\r\n                            onChangeText={setResponse}\r\n                            placeholder=\"Add a response...\"\r\n                            placeholderTextColor={colors.textSecondary + \"80\"}\r\n                            multiline\r\n                            style={{\r\n                                borderWidth: 1,\r\n                                borderColor: colors.textSecondary + \"40\",\r\n                                borderRadius: 12,\r\n                                padding: 12,\r\n                                color: colors.textPrimary,\r\n                                fontSize: 16,\r\n                                marginBottom: 24,\r\n                                backgroundColor: colors.background,\r\n                                minHeight: 80,\r\n                                textAlignVertical: \"top\"\r\n                            }}\r\n                        /\u003e\r\n\r\n                        \u003cPressable\r\n                            onPress={handleUpdateStatus}\r\n                            disabled={updateStatusMutation.isPending}\r\n                            style={{\r\n                                backgroundColor: colors.primary,\r\n                                padding: 16,\r\n                                borderRadius: 16,\r\n                                alignItems: \"center\",\r\n                                opacity: updateStatusMutation.isPending ? 0.7 : 1\r\n                            }}\r\n                        \u003e\r\n                            {updateStatusMutation.isPending ? (\r\n                                \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                            ) : (\r\n                                \u003cText style={{ color: \"#fff\", fontSize: 16, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                                    Update Complaint\r\n                                \u003c/Text\u003e\r\n                            )}\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/KeyboardAvoidingView\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\exam-schedule.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  13,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  13,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  24,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  24,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    TextInput,\r\n    Modal,\r\n    Platform,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport Header from \"../../components/Header\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport DateTimePicker from \u0027@react-native-community/datetimepicker\u0027;\r\n\r\nexport default function AdminExamScheduleScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const queryClient = useQueryClient();\r\n    const [selectedClassId, setSelectedClassId] = useState(null);\r\n\r\n    // Edit Date State\r\n    const [editingExam, setEditingExam] = useState(null);\r\n    const [showDatePicker, setShowDatePicker] = useState(false);\r\n    const [newDate, setNewDate] = useState(new Date());\r\n    const [newRoom, setNewRoom] = useState(\"\");\r\n\r\n    // Fetch Classes\r\n    const { data: classesData, isLoading: classesLoading } = useApiQuery(\r\n        [\u0027adminClassesInit\u0027],\r\n        `${apiConfig.baseUrl}/classes/admin/init`\r\n    );\r\n    const classes = classesData?.classes || [];\r\n\r\n    // Set initial selected class\r\n    useEffect(() =\u003e {\r\n        if (classes.length \u003e 0 \u0026\u0026 !selectedClassId) {\r\n            setSelectedClassId(classes[0]._id);\r\n        }\r\n    }, [classes, selectedClassId]);\r\n\r\n    // Fetch Exams for Selected Class\r\n    const { data: exams = [], isLoading: examsLoading } = useApiQuery(\r\n        [\u0027adminExamSchedule\u0027, selectedClassId],\r\n        `${apiConfig.baseUrl}/exams/schedule/class/${selectedClassId}`,\r\n        { enabled: !!selectedClassId }\r\n    );\r\n\r\n    const loading = classesLoading || (!!selectedClassId \u0026\u0026 examsLoading);\r\n\r\n    // Update Exam Mutation\r\n    const updateExamMutation = useApiMutation({\r\n        mutationFn: (data) =\u003e createApiMutationFn(`${apiConfig.baseUrl}/exams/${data.id}`, \u0027PUT\u0027)(data.body),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminExamSchedule\u0027, selectedClassId] });\r\n            showToast(\"Exam date updated\", \"success\");\r\n            setEditingExam(null);\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to update date\", \"error\")\r\n    });\r\n\r\n    const handleDateChange = (event, selectedDate) =\u003e {\r\n        setShowDatePicker(Platform.OS === \u0027ios\u0027);\r\n        if (selectedDate) {\r\n            setNewDate(selectedDate);\r\n        }\r\n    };\r\n\r\n    const saveNewDate = () =\u003e {\r\n        if (!editingExam) return;\r\n\r\n        updateExamMutation.mutate({\r\n            id: editingExam._id,\r\n            body: {\r\n                date: newDate,\r\n                room: newRoom\r\n            }\r\n        });\r\n    };\r\n\r\n    if (loading \u0026\u0026 classes.length === 0) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                \u003cHeader title=\"Exam Schedules\" subtitle=\"Manage Dates\" showBack /\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cView style={{ paddingHorizontal: 16, marginBottom: 16 }}\u003e\r\n                \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eSelect Class\u003c/Text\u003e\r\n                \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                    \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                        {classes.map(cls =\u003e (\r\n                            \u003cPressable\r\n                                key={cls._id}\r\n                                onPress={() =\u003e setSelectedClassId(cls._id)}\r\n                                style={{\r\n                                    paddingHorizontal: 16,\r\n                                    paddingVertical: 8,\r\n                                    backgroundColor: selectedClassId === cls._id ? colors.primary : colors.cardBackground,\r\n                                    borderRadius: 20,\r\n                                    borderWidth: 1,\r\n                                    borderColor: selectedClassId === cls._id ? colors.primary : colors.textSecondary + \"20\"\r\n                                }}\r\n                            \u003e\r\n                                \u003cText style={{ color: selectedClassId === cls._id ? \"#fff\" : colors.textPrimary }}\u003e\r\n                                    {cls.name} {cls.section}\r\n                                \u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                        ))}\r\n                    \u003c/View\u003e\r\n                \u003c/ScrollView\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView contentContainerStyle={{ padding: 16, paddingBottom: 100 }}\u003e\r\n                {loading ? (\r\n                    \u003cActivityIndicator color={colors.primary} style={{ marginTop: 40 }} /\u003e\r\n                ) : exams.length === 0 ? (\r\n                    \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                        \u003cMaterialIcons name=\"event-busy\" size={48} color={colors.textSecondary} /\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginTop: 16 }}\u003eNo exams found for this class\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                ) : (\r\n                    exams.map((exam) =\u003e (\r\n                        \u003cView\r\n                            key={exam._id}\r\n                            style={{\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 16,\r\n                                marginBottom: 12,\r\n                                flexDirection: \"row\",\r\n                                justifyContent: \"space-between\",\r\n                                alignItems: \"center\"\r\n                            }}\r\n                        \u003e\r\n                            \u003cView style={{ flex: 1 }}\u003e\r\n                                \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                    {exam.subject?.name}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontSize: 13 }}\u003e\r\n                                    {exam.name} â€¢ {exam.type}\r\n                                \u003c/Text\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", marginTop: 6, gap: 6 }}\u003e\r\n                                    \u003cMaterialIcons name=\"calendar-today\" size={14} color={colors.primary} /\u003e\r\n                                    \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                        {new Date(exam.date).toLocaleDateString()}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                {exam.room \u0026\u0026 (\r\n                                    \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", marginTop: 4, gap: 6 }}\u003e\r\n                                        \u003cMaterialIcons name=\"meeting-room\" size={14} color={colors.textSecondary} /\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, fontSize: 13, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                            {exam.room}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cPressable\r\n                                onPress={() =\u003e {\r\n                                    setEditingExam(exam);\r\n                                    setNewDate(new Date(exam.date));\r\n                                    setNewRoom(exam.room || \"\");\r\n                                    setShowDatePicker(true);\r\n                                }}\r\n                                style={{\r\n                                    padding: 8,\r\n                                    backgroundColor: colors.primary + \"15\",\r\n                                    borderRadius: 8\r\n                                }}\r\n                            \u003e\r\n                                \u003cMaterialIcons name=\"edit\" size={20} color={colors.primary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n                    ))\r\n                )}\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* Date Picker Modal */}\r\n            {editingExam \u0026\u0026 (\r\n                \u003cModal\r\n                    transparent={true}\r\n                    visible={!!editingExam}\r\n                    animationType=\"fade\"\r\n                    onRequestClose={() =\u003e setEditingExam(null)}\r\n                \u003e\r\n                    \u003cView style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                        \u003cView style={{ backgroundColor: colors.cardBackground, width: \"85%\", borderRadius: 16, padding: 20 }}\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                                Reschedule Exam\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, marginBottom: 20 }}\u003e\r\n                                {editingExam.subject?.name} - {editingExam.name}\r\n                            \u003c/Text\u003e\r\n\r\n                            \u003cView style={{ marginBottom: 20 }}\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontSize: 14 }}\u003eDate\u003c/Text\u003e\r\n                                \u003cView style={{ alignItems: \"center\" }}\u003e\r\n                                    {showDatePicker \u0026\u0026 (\r\n                                        \u003cDateTimePicker\r\n                                            value={newDate}\r\n                                            mode=\"date\"\r\n                                            display=\"default\"\r\n                                            onChange={handleDateChange}\r\n                                            minimumDate={new Date()}\r\n                                        /\u003e\r\n                                    )}\r\n                                    {Platform.OS === \u0027android\u0027 \u0026\u0026 (\r\n                                        \u003cPressable\r\n                                            onPress={() =\u003e setShowDatePicker(true)}\r\n                                            style={{\r\n                                                flexDirection: \"row\",\r\n                                                alignItems: \"center\",\r\n                                                padding: 12,\r\n                                                borderWidth: 1,\r\n                                                borderColor: colors.textSecondary + \"40\",\r\n                                                borderRadius: 8,\r\n                                                width: \"100%\",\r\n                                                justifyContent: \"center\"\r\n                                            }}\r\n                                        \u003e\r\n                                            \u003cMaterialIcons name=\"calendar-today\" size={20} color={colors.primary} style={{ marginRight: 8 }} /\u003e\r\n                                            \u003cText style={{ color: colors.textPrimary, fontSize: 16 }}\u003e\r\n                                                {newDate.toLocaleDateString()}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{ marginBottom: 24 }}\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontSize: 14 }}\u003eRoom Number\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    value={newRoom}\r\n                                    onChangeText={setNewRoom}\r\n                                    placeholder=\"e.g. Room 101\"\r\n                                    placeholderTextColor={colors.textSecondary + \"80\"}\r\n                                    style={{\r\n                                        borderWidth: 1,\r\n                                        borderColor: colors.textSecondary + \"40\",\r\n                                        borderRadius: 8,\r\n                                        padding: 12,\r\n                                        color: colors.textPrimary,\r\n                                        fontSize: 16,\r\n                                        fontFamily: \"DMSans-Medium\"\r\n                                    }}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 12 }}\u003e\r\n                                \u003cPressable\r\n                                    onPress={() =\u003e setEditingExam(null)}\r\n                                    style={{ flex: 1, padding: 12, alignItems: \"center\", borderRadius: 10, backgroundColor: colors.background }}\r\n                                \u003e\r\n                                    \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Bold\" }}\u003eCancel\u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n                                \u003cPressable\r\n                                    onPress={saveNewDate}\r\n                                    disabled={updateExamMutation.isPending}\r\n                                    style={{ flex: 1, padding: 12, alignItems: \"center\", borderRadius: 10, backgroundColor: colors.primary }}\r\n                                \u003e\r\n                                    {updateExamMutation.isPending ? (\r\n                                        \u003cActivityIndicator color=\"#fff\" size=\"small\" /\u003e\r\n                                    ) : (\r\n                                        \u003cText style={{ color: \"#fff\", fontFamily: \"DMSans-Bold\" }}\u003eSave\u003c/Text\u003e\r\n                                    )}\r\n                                \u003c/Pressable\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/Modal\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\fees.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Modal\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  9,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  9,
                                           "endColumn":  10
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Alert\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  10,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  10,
                                           "endColumn":  10
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  26,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  26,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027studentsLoading\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  75,
                                           "column":  51,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  75,
                                           "endColumn":  66
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027refetchFeeDetails\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  83,
                                           "column":  40,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  83,
                                           "endColumn":  57
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027savingStructure\u0027 is not defined.",
                                           "line":  876,
                                           "column":  51,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  876,
                                           "endColumn":  66
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027savingStructure\u0027 is not defined.",
                                           "line":  887,
                                           "column":  54,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  887,
                                           "endColumn":  69
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027savingStructure\u0027 is not defined.",
                                           "line":  890,
                                           "column":  42,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  890,
                                           "endColumn":  57
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027loadingStudents\u0027 is not defined.",
                                           "line":  938,
                                           "column":  30,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  938,
                                           "endColumn":  45
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  4,
                      "fatalErrorCount":  0,
                      "warningCount":  6,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    TextInput,\r\n    Modal,\r\n    Alert,\r\n    FlatList,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport apiFetch from \"../../utils/apiFetch\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport Header from \"../../components/Header\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nexport default function AdminFeesScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [activeTab, setActiveTab] = useState(\"dashboard\"); // dashboard, collect, structure, students\r\n    const queryClient = useQueryClient();\r\n\r\n\r\n    // Collect Fees State\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [selectedStudent, setSelectedStudent] = useState(null);\r\n    const [paymentAmount, setPaymentAmount] = useState(\"\");\r\n    const [bookNumber, setBookNumber] = useState(\"\");\r\n    const [manualReceiptNumber, setManualReceiptNumber] = useState(\"\");\r\n    const [paymentMethod, setPaymentMethod] = useState(\"cash\");\r\n    const [remarks, setRemarks] = useState(\"\");\r\n\r\n    // Fee Structure State\r\n    const [selectedClassId, setSelectedClassId] = useState(null);\r\n    const [selectedYearId, setSelectedYearId] = useState(null);\r\n    const [newComponent, setNewComponent] = useState({ name: \"\", amount: \"\" });\r\n\r\n    // Specific Student Fee State\r\n    const [structureType, setStructureType] = useState(\u0027class_default\u0027); // \u0027class_default\u0027, \u0027student_specific\u0027\r\n    const [studentSearchQuery, setStudentSearchQuery] = useState(\"\");\r\n    const [studentSearchResults, setStudentSearchResults] = useState([]);\r\n    const [selectedStudents, setSelectedStudents] = useState([]);\r\n\r\n    // Fetch Analytics\r\n    const { data: analytics = { collectedToday: 0, collectedThisMonth: 0, totalCollected: 0 }, isLoading: analyticsLoading } = useApiQuery(\r\n        [\u0027feeAnalytics\u0027],\r\n        `${apiConfig.baseUrl}/fees/analytics`\r\n    );\r\n\r\n    // Fetch Classes and Years\r\n    const { data: initData, isLoading: initLoading } = useApiQuery(\r\n        [\u0027adminClassesInit\u0027],\r\n        `${apiConfig.baseUrl}/classes/admin/init`\r\n    );\r\n    const classes = initData?.classes || [];\r\n    const academicYears = initData?.academicYears || [];\r\n\r\n    useEffect(() =\u003e {\r\n        if (academicYears.length \u003e 0 \u0026\u0026 !selectedYearId) {\r\n            setSelectedYearId(academicYears[0]._id);\r\n        }\r\n    }, [academicYears, selectedYearId]);\r\n\r\n    // Fetch All Students\r\n    const { data: allStudentsResponse, isLoading: studentsLoading } = useApiQuery(\r\n        [\u0027allStudents\u0027],\r\n        `${apiConfig.baseUrl}/users?role=student\u0026limit=100`,\r\n        { enabled: activeTab === \u0027students\u0027 }\r\n    );\r\n    const allStudents = allStudentsResponse?.data || [];\r\n\r\n    // Fetch Fee Details for Selected Student\r\n    const { data: feeDetails, refetch: refetchFeeDetails } = useApiQuery(\r\n        [\u0027feeDetails\u0027, selectedStudent?._id],\r\n        `${apiConfig.baseUrl}/fees/student/${selectedStudent?._id}`,\r\n        { enabled: !!selectedStudent }\r\n    );\r\n\r\n    // Fetch Fee Structure for Selected Class\r\n    const { data: structureData } = useApiQuery(\r\n        [\u0027feeStructure\u0027, selectedClassId],\r\n        `${apiConfig.baseUrl}/fees/structure/class/${selectedClassId}`,\r\n        { enabled: !!selectedClassId }\r\n    );\r\n    const [structureComponents, setStructureComponents] = useState([]);\r\n\r\n    useEffect(() =\u003e {\r\n        if (structureData?.components) {\r\n            setStructureComponents(structureData.components);\r\n        } else {\r\n            setStructureComponents([]);\r\n        }\r\n    }, [structureData]);\r\n\r\n    const loading = analyticsLoading || initLoading;\r\n\r\n    // Mutations\r\n    const paymentMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/fees/payment`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Payment recorded successfully\", \"success\");\r\n            setSelectedStudent(null);\r\n            setPaymentAmount(\"\");\r\n            setBookNumber(\"\");\r\n            setManualReceiptNumber(\"\");\r\n            setRemarks(\"\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027feeAnalytics\u0027] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027feeDetails\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Payment failed\", \"error\")\r\n    });\r\n\r\n    const saveStructureMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/fees/structure`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Fee structure saved\", \"success\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027feeStructure\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to save structure\", \"error\")\r\n    });\r\n\r\n\r\n\r\n    const searchStudent = async (query, setResults, classId = null) =\u003e {\r\n        if (!query.trim()) return;\r\n        try {\r\n            const token = await AsyncStorage.getItem(\"@auth_token\");\r\n            let url = `${apiConfig.baseUrl}/users/search?query=${query}\u0026role=student`;\r\n            if (classId) {\r\n                url += `\u0026classId=${classId}`;\r\n            }\r\n            const response = await apiFetch(url, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setResults(data);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            showToast(\"Error searching student\", \"error\");\r\n        }\r\n    };\r\n\r\n    const selectStudent = (student) =\u003e {\r\n        setSelectedStudent(student);\r\n        setSearchResults([]);\r\n        setSearchQuery(\"\");\r\n    };\r\n\r\n    const handlePayment = () =\u003e {\r\n        if (!paymentAmount || isNaN(paymentAmount) || Number(paymentAmount) \u003c= 0) {\r\n            showToast(\"Invalid amount\", \"error\");\r\n            return;\r\n        }\r\n\r\n        paymentMutation.mutate({\r\n            studentId: selectedStudent._id,\r\n            amount: Number(paymentAmount),\r\n            bookNumber,\r\n            manualReceiptNumber,\r\n            paymentMethod,\r\n            remarks\r\n        });\r\n    };\r\n\r\n\r\n\r\n    const addComponent = () =\u003e {\r\n        if (!newComponent.name || !newComponent.amount) {\r\n            showToast(\"Please fill name and amount\", \"error\");\r\n            return;\r\n        }\r\n        setStructureComponents([...structureComponents, { ...newComponent, amount: Number(newComponent.amount) }]);\r\n        setNewComponent({ name: \"\", amount: \"\" });\r\n    };\r\n\r\n    const removeComponent = (index) =\u003e {\r\n        const updated = [...structureComponents];\r\n        updated.splice(index, 1);\r\n        setStructureComponents(updated);\r\n    };\r\n\r\n    const saveStructure = () =\u003e {\r\n        if (!selectedClassId || !selectedYearId) {\r\n            showToast(\"Select class and academic year\", \"error\");\r\n            return;\r\n        }\r\n        if (structureComponents.length === 0) {\r\n            showToast(\"Add at least one fee component\", \"error\");\r\n            return;\r\n        }\r\n        if (structureType === \u0027student_specific\u0027 \u0026\u0026 selectedStudents.length === 0) {\r\n            showToast(\"Select at least one student\", \"error\");\r\n            return;\r\n        }\r\n\r\n        saveStructureMutation.mutate({\r\n            classId: selectedClassId,\r\n            academicYearId: selectedYearId,\r\n            components: structureComponents,\r\n            paymentSchedule: [], // Can be added later\r\n            type: structureType,\r\n            students: structureType === \u0027student_specific\u0027 ? selectedStudents.map(s =\u003e s._id) : []\r\n        });\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                \u003cHeader title=\"Fees Management\" subtitle=\"Track and collect fees\" showBack /\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Tabs - Segmented Control */}\r\n            \u003cView style={{ paddingHorizontal: 16, marginBottom: 24 }}\u003e\r\n                \u003cView style={{\r\n                    flexDirection: \"row\",\r\n                    backgroundColor: colors.cardBackground,\r\n                    borderRadius: 16,\r\n                    padding: 4\r\n                }}\u003e\r\n                    {[\u0027dashboard\u0027, \u0027collect\u0027, \u0027structure\u0027, \u0027students\u0027].map(tab =\u003e (\r\n                        \u003cPressable\r\n                            key={tab}\r\n                            onPress={() =\u003e setActiveTab(tab)}\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === tab ? colors.background : \"transparent\",\r\n                                borderRadius: 12,\r\n                                shadowColor: activeTab === tab ? \"#000\" : \"transparent\",\r\n                                shadowOffset: { width: 0, height: 2 },\r\n                                shadowOpacity: activeTab === tab ? 0.1 : 0,\r\n                                shadowRadius: 4,\r\n                                elevation: activeTab === tab ? 2 : 0\r\n                            }}\r\n                        \u003e\r\n                            \u003cText style={{\r\n                                color: activeTab === tab ? colors.primary : colors.textSecondary,\r\n                                fontFamily: activeTab === tab ? \"DMSans-Bold\" : \"DMSans-Medium\",\r\n                                textTransform: \"capitalize\",\r\n                                fontSize: 13\r\n                            }}\u003e\r\n                                {tab}\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    ))}\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView contentContainerStyle={{ paddingBottom: 100 }}\u003e\r\n                {activeTab === \u0027dashboard\u0027 \u0026\u0026 (\r\n                    \u003cView style={{ padding: 16 }}\u003e\r\n                        {/* Hero Card */}\r\n                        \u003cView style={{\r\n                            backgroundColor: colors.primary,\r\n                            borderRadius: 24,\r\n                            padding: 24,\r\n                            marginBottom: 20,\r\n                            shadowColor: colors.primary,\r\n                            shadowOffset: { width: 0, height: 8 },\r\n                            shadowOpacity: 0.3,\r\n                            shadowRadius: 16,\r\n                            elevation: 8\r\n                        }}\u003e\r\n                            \u003cText style={{ color: \"rgba(255,255,255,0.8)\", fontSize: 14, fontFamily: \"DMSans-Medium\", marginBottom: 8 }}\u003eTotal Collected (All Time)\u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 36, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                â‚¹{analytics.totalCollected.toLocaleString()}\r\n                            \u003c/Text\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", marginTop: 16, backgroundColor: \"rgba(255,255,255,0.2)\", alignSelf: \"flex-start\", paddingHorizontal: 12, paddingVertical: 6, borderRadius: 20 }}\u003e\r\n                                \u003cMaterialIcons name=\"trending-up\" size={16} color=\"#fff\" style={{ marginRight: 6 }} /\u003e\r\n                                \u003cText style={{ color: \"#fff\", fontFamily: \"DMSans-Bold\", fontSize: 12 }}\u003eUpdated just now\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        {/* Stats Grid */}\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 16 }}\u003e\r\n                            \u003cView style={{\r\n                                flex: 1,\r\n                                backgroundColor: colors.cardBackground,\r\n                                padding: 20,\r\n                                borderRadius: 20,\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: { width: 0, height: 2 },\r\n                                shadowOpacity: 0.05,\r\n                                shadowRadius: 8,\r\n                                elevation: 2\r\n                            }}\u003e\r\n                                \u003cView style={{ width: 40, height: 40, borderRadius: 12, backgroundColor: colors.success + \"15\", justifyContent: \"center\", alignItems: \"center\", marginBottom: 12 }}\u003e\r\n                                    \u003cMaterialIcons name=\"today\" size={20} color={colors.success} /\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontSize: 13, fontFamily: \"DMSans-Medium\" }}\u003eCollected Today\u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 22, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 4 }}\u003e\r\n                                    â‚¹{analytics.collectedToday.toLocaleString()}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{\r\n                                flex: 1,\r\n                                backgroundColor: colors.cardBackground,\r\n                                padding: 20,\r\n                                borderRadius: 20,\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: { width: 0, height: 2 },\r\n                                shadowOpacity: 0.05,\r\n                                shadowRadius: 8,\r\n                                elevation: 2\r\n                            }}\u003e\r\n                                \u003cView style={{ width: 40, height: 40, borderRadius: 12, backgroundColor: colors.secondary + \"15\", justifyContent: \"center\", alignItems: \"center\", marginBottom: 12 }}\u003e\r\n                                    \u003cMaterialIcons name=\"calendar-today\" size={20} color={colors.secondary} /\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontSize: 13, fontFamily: \"DMSans-Medium\" }}\u003eThis Month\u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 22, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 4 }}\u003e\r\n                                    â‚¹{analytics.collectedThisMonth.toLocaleString()}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                )}\r\n\r\n                {activeTab === \u0027collect\u0027 \u0026\u0026 (\r\n                    \u003cView style={{ padding: 16 }}\u003e\r\n                        {!selectedStudent ? (\r\n                            \u003cView style={{ marginTop: 20 }}\u003e\r\n                                \u003cView style={{ alignItems: \"center\", marginBottom: 32 }}\u003e\r\n                                    \u003cView style={{ width: 64, height: 64, backgroundColor: colors.primary + \"15\", borderRadius: 32, justifyContent: \"center\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n                                        \u003cMaterialIcons name=\"person-search\" size={32} color={colors.primary} /\u003e\r\n                                    \u003c/View\u003e\r\n                                    \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 8 }}\u003eFind Student\u003c/Text\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, textAlign: \"center\", maxWidth: \"80%\" }}\u003e\r\n                                        Search by name or phone number to collect fees\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n\r\n                                \u003cView style={{ flexDirection: \"row\", gap: 12, marginBottom: 24 }}\u003e\r\n                                    \u003cTextInput\r\n                                        value={searchQuery}\r\n                                        onChangeText={setSearchQuery}\r\n                                        placeholder=\"Enter student name...\"\r\n                                        placeholderTextColor={colors.textSecondary}\r\n                                        style={{\r\n                                            flex: 1,\r\n                                            backgroundColor: colors.cardBackground,\r\n                                            padding: 16,\r\n                                            borderRadius: 16,\r\n                                            color: colors.textPrimary,\r\n                                            fontSize: 16,\r\n                                            fontFamily: \"DMSans-Medium\",\r\n                                            shadowColor: \"#000\",\r\n                                            shadowOffset: { width: 0, height: 2 },\r\n                                            shadowOpacity: 0.05,\r\n                                            shadowRadius: 8,\r\n                                            elevation: 2\r\n                                        }}\r\n                                    /\u003e\r\n                                    \u003cPressable\r\n                                        onPress={() =\u003e searchStudent(searchQuery, setSearchResults)}\r\n                                        style={{\r\n                                            backgroundColor: colors.primary,\r\n                                            width: 56,\r\n                                            borderRadius: 16,\r\n                                            justifyContent: \"center\",\r\n                                            alignItems: \"center\",\r\n                                            shadowColor: colors.primary,\r\n                                            shadowOffset: { width: 0, height: 4 },\r\n                                            shadowOpacity: 0.3,\r\n                                            shadowRadius: 8,\r\n                                            elevation: 4\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cMaterialIcons name=\"search\" size={28} color=\"#fff\" /\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                \u003c/View\u003e\r\n\r\n                                {searchResults.length \u003e 0 \u0026\u0026 (\r\n                                    \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 20, padding: 8 }}\u003e\r\n                                        {searchResults.map((student, index) =\u003e (\r\n                                            \u003cPressable\r\n                                                key={student._id}\r\n                                                onPress={() =\u003e selectStudent(student)}\r\n                                                style={{\r\n                                                    padding: 16,\r\n                                                    borderRadius: 12,\r\n                                                    marginBottom: index === searchResults.length - 1 ? 0 : 8,\r\n                                                    flexDirection: \"row\",\r\n                                                    alignItems: \"center\",\r\n                                                    justifyContent: \"space-between\",\r\n                                                    backgroundColor: colors.background\r\n                                                }}\r\n                                            \u003e\r\n                                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                                                    \u003cView style={{ width: 40, height: 40, borderRadius: 20, backgroundColor: colors.primary + \"10\", justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                                                        \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.primary, fontSize: 16 }}\u003e\r\n                                                            {student.name.charAt(0)}\r\n                                                        \u003c/Text\u003e\r\n                                                    \u003c/View\u003e\r\n                                                    \u003cView\u003e\r\n                                                        \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary, fontSize: 16 }}\u003e{student.name}\u003c/Text\u003e\r\n                                                        \u003cText style={{ color: colors.textSecondary, fontSize: 13 }}\u003e{student.phone}\u003c/Text\u003e\r\n                                                    \u003c/View\u003e\r\n                                                \u003c/View\u003e\r\n                                                \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                        ))}\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n                        ) : (\r\n                            \u003cView\u003e\r\n                                \u003cPressable\r\n                                    onPress={() =\u003e setSelectedStudent(null)}\r\n                                    style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 20, alignSelf: \"flex-start\" }}\r\n                                \u003e\r\n                                    \u003cView style={{ width: 32, height: 32, borderRadius: 10, backgroundColor: colors.cardBackground, justifyContent: \"center\", alignItems: \"center\", marginRight: 8 }}\u003e\r\n                                        \u003cMaterialIcons name=\"arrow-back\" size={20} color={colors.textPrimary} /\u003e\r\n                                    \u003c/View\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eBack to Search\u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n\r\n                                {/* Student Profile Card */}\r\n                                \u003cView style={{\r\n                                    backgroundColor: colors.cardBackground,\r\n                                    padding: 24,\r\n                                    borderRadius: 24,\r\n                                    marginBottom: 24,\r\n                                    alignItems: \"center\"\r\n                                }}\u003e\r\n                                    \u003cView style={{ width: 80, height: 80, borderRadius: 40, backgroundColor: colors.primary + \"15\", justifyContent: \"center\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n                                        \u003cText style={{ fontSize: 32, fontFamily: \"DMSans-Bold\", color: colors.primary }}\u003e{selectedStudent.name.charAt(0)}\u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                    \u003cText style={{ fontSize: 22, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e{selectedStudent.name}\u003c/Text\u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 24 }}\u003e\r\n                                        \u003cView style={{ paddingHorizontal: 10, paddingVertical: 4, backgroundColor: colors.background, borderRadius: 8, marginRight: 8 }}\u003e\r\n                                            \u003cText style={{ color: colors.textSecondary, fontSize: 13, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                {feeDetails?.feeStructure ? \"Fee Structure Assigned\" : \"No Structure\"}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary }}\u003eâ€¢ {selectedStudent.phone}\u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    \u003cView style={{ flexDirection: \"row\", width: \"100%\", gap: 12 }}\u003e\r\n                                        \u003cView style={{ flex: 1, backgroundColor: colors.background, padding: 16, borderRadius: 16, alignItems: \"center\" }}\u003e\r\n                                            \u003cText style={{ color: colors.textSecondary, fontSize: 12, marginBottom: 4 }}\u003eTotal Fees\u003c/Text\u003e\r\n                                            \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary, fontSize: 18 }}\u003eâ‚¹{feeDetails?.totalFees || 0}\u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                        \u003cView style={{ flex: 1, backgroundColor: colors.success + \"10\", padding: 16, borderRadius: 16, alignItems: \"center\" }}\u003e\r\n                                            \u003cText style={{ color: colors.success, fontSize: 12, marginBottom: 4 }}\u003ePaid\u003c/Text\u003e\r\n                                            \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.success, fontSize: 18 }}\u003eâ‚¹{feeDetails?.paidAmount || 0}\u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                        \u003cView style={{ flex: 1, backgroundColor: colors.error + \"10\", padding: 16, borderRadius: 16, alignItems: \"center\" }}\u003e\r\n                                            \u003cText style={{ color: colors.error, fontSize: 12, marginBottom: 4 }}\u003ePending\u003c/Text\u003e\r\n                                            \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.error, fontSize: 18 }}\u003eâ‚¹{feeDetails?.pendingAmount || 0}\u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n\r\n                                \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 16 }}\u003eRecord New Payment\u003c/Text\u003e\r\n\r\n                                \u003cView style={{ backgroundColor: colors.cardBackground, padding: 20, borderRadius: 24 }}\u003e\r\n                                    \u003cView style={{ marginBottom: 20 }}\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eAmount\u003c/Text\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", backgroundColor: colors.background, borderRadius: 16, paddingHorizontal: 16 }}\u003e\r\n                                            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginRight: 8 }}\u003eâ‚¹\u003c/Text\u003e\r\n                                            \u003cTextInput\r\n                                                value={paymentAmount}\r\n                                                onChangeText={setPaymentAmount}\r\n                                                keyboardType=\"numeric\"\r\n                                                placeholder=\"0\"\r\n                                                placeholderTextColor={colors.textSecondary}\r\n                                                style={{\r\n                                                    flex: 1,\r\n                                                    paddingVertical: 16,\r\n                                                    fontSize: 20,\r\n                                                    fontFamily: \"DMSans-Bold\",\r\n                                                    color: colors.textPrimary\r\n                                                }}\r\n                                            /\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    \u003cView style={{ flexDirection: \"row\", gap: 12, marginBottom: 20 }}\u003e\r\n                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                            \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eReceipt No.\u003c/Text\u003e\r\n                                            \u003cTextInput\r\n                                                value={manualReceiptNumber}\r\n                                                onChangeText={setManualReceiptNumber}\r\n                                                placeholder=\"Optional\"\r\n                                                placeholderTextColor={colors.textSecondary}\r\n                                                style={{\r\n                                                    backgroundColor: colors.background,\r\n                                                    padding: 14,\r\n                                                    borderRadius: 12,\r\n                                                    color: colors.textPrimary,\r\n                                                    fontFamily: \"DMSans-Medium\"\r\n                                                }}\r\n                                            /\u003e\r\n                                        \u003c/View\u003e\r\n                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                            \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eBook No.\u003c/Text\u003e\r\n                                            \u003cTextInput\r\n                                                value={bookNumber}\r\n                                                onChangeText={setBookNumber}\r\n                                                placeholder=\"Optional\"\r\n                                                placeholderTextColor={colors.textSecondary}\r\n                                                style={{\r\n                                                    backgroundColor: colors.background,\r\n                                                    padding: 14,\r\n                                                    borderRadius: 12,\r\n                                                    color: colors.textPrimary,\r\n                                                    fontFamily: \"DMSans-Medium\"\r\n                                                }}\r\n                                            /\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    \u003cView style={{ marginBottom: 24 }}\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, marginBottom: 12, fontFamily: \"DMSans-Medium\" }}\u003ePayment Method\u003c/Text\u003e\r\n                                        \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                                            \u003cView style={{ flexDirection: \"row\", gap: 10 }}\u003e\r\n                                                {[\u0027cash\u0027, \u0027online\u0027, \u0027cheque\u0027, \u0027card\u0027].map(method =\u003e (\r\n                                                    \u003cPressable\r\n                                                        key={method}\r\n                                                        onPress={() =\u003e setPaymentMethod(method)}\r\n                                                        style={{\r\n                                                            paddingHorizontal: 16,\r\n                                                            paddingVertical: 10,\r\n                                                            backgroundColor: paymentMethod === method ? colors.primary : colors.background,\r\n                                                            borderRadius: 12,\r\n                                                            borderWidth: 1,\r\n                                                            borderColor: paymentMethod === method ? colors.primary : colors.textSecondary + \"10\"\r\n                                                        }}\r\n                                                    \u003e\r\n                                                        \u003cText style={{\r\n                                                            color: paymentMethod === method ? \"#fff\" : colors.textPrimary,\r\n                                                            textTransform: \"capitalize\",\r\n                                                            fontFamily: \"DMSans-Medium\"\r\n                                                        }}\u003e\r\n                                                            {method}\r\n                                                        \u003c/Text\u003e\r\n                                                    \u003c/Pressable\u003e\r\n                                                ))}\r\n                                            \u003c/View\u003e\r\n                                        \u003c/ScrollView\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    \u003cView style={{ marginBottom: 32 }}\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eRemarks\u003c/Text\u003e\r\n                                        \u003cTextInput\r\n                                            value={remarks}\r\n                                            onChangeText={setRemarks}\r\n                                            placeholder=\"Add a note (optional)\"\r\n                                            placeholderTextColor={colors.textSecondary}\r\n                                            style={{\r\n                                                backgroundColor: colors.background,\r\n                                                padding: 14,\r\n                                                borderRadius: 12,\r\n                                                color: colors.textPrimary,\r\n                                                fontFamily: \"DMSans-Medium\"\r\n                                            }}\r\n                                        /\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    \u003cPressable\r\n                                        onPress={handlePayment}\r\n                                        disabled={paymentMutation.isPending}\r\n                                        style={{\r\n                                            backgroundColor: colors.primary,\r\n                                            padding: 18,\r\n                                            borderRadius: 16,\r\n                                            alignItems: \"center\",\r\n                                            shadowColor: colors.primary,\r\n                                            shadowOffset: { width: 0, height: 4 },\r\n                                            shadowOpacity: 0.3,\r\n                                            shadowRadius: 8,\r\n                                            elevation: 4,\r\n                                            opacity: paymentMutation.isPending ? 0.7 : 1\r\n                                        }}\r\n                                    \u003e\r\n                                        {paymentMutation.isPending ? (\r\n                                            \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                        ) : (\r\n                                            \u003cText style={{ color: \"#fff\", fontSize: 18, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                                                Pay â‚¹{paymentAmount || \"0\"}\r\n                                            \u003c/Text\u003e\r\n                                        )}\r\n                                    \u003c/Pressable\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n                        )}\r\n                    \u003c/View\u003e\r\n                )}\r\n\r\n                {\r\n                    activeTab === \u0027structure\u0027 \u0026\u0026 (\r\n                        \u003cView style={{ padding: 16 }}\u003e\r\n                            {/* 1. Context Header (Sticky-like) */}\r\n                            \u003cView style={{ marginBottom: 24 }}\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eSelect Class \u0026 Year\u003c/Text\u003e\r\n                                \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                        {classes.map(cls =\u003e (\r\n                                            \u003cPressable\r\n                                                key={cls._id}\r\n                                                onPress={() =\u003e setSelectedClassId(cls._id)}\r\n                                                style={{\r\n                                                    paddingHorizontal: 16,\r\n                                                    paddingVertical: 8,\r\n                                                    backgroundColor: selectedClassId === cls._id ? colors.primary : colors.cardBackground,\r\n                                                    borderRadius: 20,\r\n                                                    borderWidth: 1,\r\n                                                    borderColor: selectedClassId === cls._id ? colors.primary : colors.textSecondary + \"20\"\r\n                                                }}\r\n                                            \u003e\r\n                                                \u003cText style={{ color: selectedClassId === cls._id ? \"#fff\" : colors.textPrimary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                    {cls.name} {cls.section}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                        ))}\r\n                                    \u003c/View\u003e\r\n                                \u003c/ScrollView\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {selectedClassId ? (\r\n                                \u003cView\u003e\r\n                                    {/* 2. Target Selection (Segmented Control) */}\r\n                                    \u003cView style={{\r\n                                        flexDirection: \"row\",\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 12,\r\n                                        padding: 4,\r\n                                        marginBottom: 24\r\n                                    }}\u003e\r\n                                        \u003cPressable\r\n                                            onPress={() =\u003e setStructureType(\u0027class_default\u0027)}\r\n                                            style={{\r\n                                                flex: 1,\r\n                                                paddingVertical: 10,\r\n                                                alignItems: \"center\",\r\n                                                backgroundColor: structureType === \u0027class_default\u0027 ? colors.background : \"transparent\",\r\n                                                borderRadius: 10,\r\n                                                shadowColor: structureType === \u0027class_default\u0027 ? \"#000\" : \"transparent\",\r\n                                                shadowOffset: { width: 0, height: 2 },\r\n                                                shadowOpacity: structureType === \u0027class_default\u0027 ? 0.1 : 0,\r\n                                                shadowRadius: 4,\r\n                                                elevation: structureType === \u0027class_default\u0027 ? 2 : 0\r\n                                            }}\r\n                                        \u003e\r\n                                            \u003cText style={{\r\n                                                color: structureType === \u0027class_default\u0027 ? colors.primary : colors.textSecondary,\r\n                                                fontFamily: \"DMSans-Bold\"\r\n                                            }}\u003eClass Default\u003c/Text\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                        \u003cPressable\r\n                                            onPress={() =\u003e setStructureType(\u0027student_specific\u0027)}\r\n                                            style={{\r\n                                                flex: 1,\r\n                                                paddingVertical: 10,\r\n                                                alignItems: \"center\",\r\n                                                backgroundColor: structureType === \u0027student_specific\u0027 ? colors.background : \"transparent\",\r\n                                                borderRadius: 10,\r\n                                                shadowColor: structureType === \u0027student_specific\u0027 ? \"#000\" : \"transparent\",\r\n                                                shadowOffset: { width: 0, height: 2 },\r\n                                                shadowOpacity: structureType === \u0027student_specific\u0027 ? 0.1 : 0,\r\n                                                shadowRadius: 4,\r\n                                                elevation: structureType === \u0027student_specific\u0027 ? 2 : 0\r\n                                            }}\r\n                                        \u003e\r\n                                            \u003cText style={{\r\n                                                color: structureType === \u0027student_specific\u0027 ? colors.primary : colors.textSecondary,\r\n                                                fontFamily: \"DMSans-Bold\"\r\n                                            }}\u003eSpecific Student\u003c/Text\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    {/* 3. Student Selection (Conditional) */}\r\n                                    {structureType === \u0027student_specific\u0027 \u0026\u0026 (\r\n                                        \u003cView style={{ marginBottom: 24 }}\u003e\r\n                                            \u003cView style={{ flexDirection: \"row\", gap: 10, marginBottom: 12 }}\u003e\r\n                                                \u003cTextInput\r\n                                                    value={studentSearchQuery}\r\n                                                    onChangeText={setStudentSearchQuery}\r\n                                                    placeholder=\"Search student...\"\r\n                                                    placeholderTextColor={colors.textSecondary}\r\n                                                    style={{\r\n                                                        flex: 1,\r\n                                                        backgroundColor: colors.cardBackground,\r\n                                                        padding: 12,\r\n                                                        borderRadius: 12,\r\n                                                        color: colors.textPrimary,\r\n                                                        fontFamily: \"DMSans-Medium\"\r\n                                                    }}\r\n                                                /\u003e\r\n                                                \u003cPressable\r\n                                                    onPress={() =\u003e searchStudent(studentSearchQuery, setStudentSearchResults, selectedClassId)}\r\n                                                    style={{\r\n                                                        backgroundColor: colors.primary,\r\n                                                        width: 48,\r\n                                                        height: 48,\r\n                                                        borderRadius: 12,\r\n                                                        justifyContent: \"center\",\r\n                                                        alignItems: \"center\"\r\n                                                    }}\r\n                                                \u003e\r\n                                                    \u003cMaterialIcons name=\"search\" size={24} color=\"#fff\" /\u003e\r\n                                                \u003c/Pressable\u003e\r\n                                            \u003c/View\u003e\r\n\r\n                                            {/* Search Results */}\r\n                                            {studentSearchResults.length \u003e 0 \u0026\u0026 (\r\n                                                \u003cView style={{ maxHeight: 150, backgroundColor: colors.cardBackground, borderRadius: 12, marginBottom: 12, padding: 8 }}\u003e\r\n                                                    \u003cScrollView nestedScrollEnabled\u003e\r\n                                                        {studentSearchResults.map(student =\u003e (\r\n                                                            \u003cPressable\r\n                                                                key={student._id}\r\n                                                                onPress={() =\u003e {\r\n                                                                    if (!selectedStudents.find(s =\u003e s._id === student._id)) {\r\n                                                                        setSelectedStudents([...selectedStudents, student]);\r\n                                                                    }\r\n                                                                    setStudentSearchResults([]);\r\n                                                                    setStudentSearchQuery(\"\");\r\n                                                                }}\r\n                                                                style={{ padding: 12, borderBottomWidth: 1, borderBottomColor: colors.textSecondary + \"10\" }}\r\n                                                            \u003e\r\n                                                                \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Medium\" }}\u003e{student.name}\u003c/Text\u003e\r\n                                                                \u003cText style={{ color: colors.textSecondary, fontSize: 12 }}\u003e{student.phone}\u003c/Text\u003e\r\n                                                            \u003c/Pressable\u003e\r\n                                                        ))}\r\n                                                    \u003c/ScrollView\u003e\r\n                                                \u003c/View\u003e\r\n                                            )}\r\n\r\n                                            {/* Selected Students Chips */}\r\n                                            {selectedStudents.length \u003e 0 \u0026\u0026 (\r\n                                                \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 8 }}\u003e\r\n                                                    {selectedStudents.map((student, index) =\u003e (\r\n                                                        \u003cView key={student._id} style={{\r\n                                                            flexDirection: \"row\",\r\n                                                            alignItems: \"center\",\r\n                                                            backgroundColor: colors.primary + \"15\",\r\n                                                            paddingHorizontal: 12,\r\n                                                            paddingVertical: 8,\r\n                                                            borderRadius: 20,\r\n                                                            borderWidth: 1,\r\n                                                            borderColor: colors.primary + \"30\"\r\n                                                        }}\u003e\r\n                                                            \u003cText style={{ color: colors.primary, marginRight: 6, fontFamily: \"DMSans-Medium\" }}\u003e{student.name}\u003c/Text\u003e\r\n                                                            \u003cPressable onPress={() =\u003e {\r\n                                                                const newSelected = [...selectedStudents];\r\n                                                                newSelected.splice(index, 1);\r\n                                                                setSelectedStudents(newSelected);\r\n                                                            }}\u003e\r\n                                                                \u003cMaterialIcons name=\"close\" size={16} color={colors.primary} /\u003e\r\n                                                            \u003c/Pressable\u003e\r\n                                                        \u003c/View\u003e\r\n                                                    ))}\r\n                                                \u003c/View\u003e\r\n                                            )}\r\n                                        \u003c/View\u003e\r\n                                    )}\r\n\r\n                                    {/* 4. Fee Components (The Core) */}\r\n                                    \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 20, marginBottom: 24 }}\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n                                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003eFee Breakdown\u003c/Text\u003e\r\n                                            \u003cView style={{ backgroundColor: colors.success + \"20\", paddingHorizontal: 10, paddingVertical: 4, borderRadius: 8 }}\u003e\r\n                                                \u003cText style={{ color: colors.success, fontFamily: \"DMSans-Bold\", fontSize: 12 }}\u003e\r\n                                                    {structureComponents.length} Items\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        \u003c/View\u003e\r\n\r\n                                        {structureComponents.length === 0 ? (\r\n                                            \u003cView style={{ alignItems: \"center\", paddingVertical: 20 }}\u003e\r\n                                                \u003cText style={{ color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eNo fee components added yet.\u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        ) : (\r\n                                            \u003cView\u003e\r\n                                                {structureComponents.map((comp, index) =\u003e (\r\n                                                    \u003cView key={index} style={{\r\n                                                        flexDirection: \"row\",\r\n                                                        justifyContent: \"space-between\",\r\n                                                        alignItems: \"center\",\r\n                                                        paddingVertical: 12,\r\n                                                        borderBottomWidth: index === structureComponents.length - 1 ? 0 : 1,\r\n                                                        borderBottomColor: colors.textSecondary + \"10\"\r\n                                                    }}\u003e\r\n                                                        \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Medium\", fontSize: 16 }}\u003e{comp.name}\u003c/Text\u003e\r\n                                                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                                                            \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Bold\", fontSize: 16 }}\u003eâ‚¹{comp.amount}\u003c/Text\u003e\r\n                                                            \u003cPressable onPress={() =\u003e removeComponent(index)} hitSlop={10}\u003e\r\n                                                                \u003cMaterialIcons name=\"remove-circle-outline\" size={20} color={colors.error} /\u003e\r\n                                                            \u003c/Pressable\u003e\r\n                                                        \u003c/View\u003e\r\n                                                    \u003c/View\u003e\r\n                                                ))}\r\n\r\n                                                \u003cView style={{ marginTop: 16, paddingTop: 16, borderTopWidth: 1, borderTopColor: colors.textSecondary + \"20\", flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}\u003e\r\n                                                    \u003cText style={{ color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eTotal Amount\u003c/Text\u003e\r\n                                                    \u003cText style={{ color: colors.primary, fontFamily: \"DMSans-Bold\", fontSize: 20 }}\u003e\r\n                                                        â‚¹{structureComponents.reduce((sum, item) =\u003e sum + Number(item.amount), 0)}\r\n                                                    \u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                            \u003c/View\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n\r\n                                    {/* 5. Adding Components (Action) */}\r\n                                    \u003cView style={{ marginBottom: 32 }}\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, marginBottom: 12, fontFamily: \"DMSans-Medium\" }}\u003eAdd New Component\u003c/Text\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", gap: 12 }}\u003e\r\n                                            \u003cTextInput\r\n                                                value={newComponent.name}\r\n                                                onChangeText={(t) =\u003e setNewComponent({ ...newComponent, name: t })}\r\n                                                placeholder=\"Name (e.g. Tuition)\"\r\n                                                placeholderTextColor={colors.textSecondary}\r\n                                                style={{\r\n                                                    flex: 2,\r\n                                                    backgroundColor: colors.cardBackground,\r\n                                                    padding: 16,\r\n                                                    borderRadius: 12,\r\n                                                    color: colors.textPrimary,\r\n                                                    fontFamily: \"DMSans-Medium\"\r\n                                                }}\r\n                                            /\u003e\r\n                                            \u003cTextInput\r\n                                                value={newComponent.amount}\r\n                                                onChangeText={(t) =\u003e setNewComponent({ ...newComponent, amount: t })}\r\n                                                placeholder=\"Amount\"\r\n                                                keyboardType=\"numeric\"\r\n                                                placeholderTextColor={colors.textSecondary}\r\n                                                style={{\r\n                                                    flex: 1,\r\n                                                    backgroundColor: colors.cardBackground,\r\n                                                    padding: 16,\r\n                                                    borderRadius: 12,\r\n                                                    color: colors.textPrimary,\r\n                                                    fontFamily: \"DMSans-Medium\"\r\n                                                }}\r\n                                            /\u003e\r\n                                            \u003cPressable\r\n                                                onPress={addComponent}\r\n                                                style={{\r\n                                                    backgroundColor: colors.secondary,\r\n                                                    width: 56,\r\n                                                    borderRadius: 12,\r\n                                                    justifyContent: \"center\",\r\n                                                    alignItems: \"center\"\r\n                                                }}\r\n                                            \u003e\r\n                                                \u003cMaterialIcons name=\"add\" size={28} color=\"#fff\" /\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    {/* 6. Save Action */}\r\n                                    \u003cPressable\r\n                                        onPress={saveStructure}\r\n                                        disabled={savingStructure}\r\n                                        style={{\r\n                                            backgroundColor: colors.primary,\r\n                                            padding: 18,\r\n                                            borderRadius: 16,\r\n                                            alignItems: \"center\",\r\n                                            shadowColor: colors.primary,\r\n                                            shadowOffset: { width: 0, height: 4 },\r\n                                            shadowOpacity: 0.3,\r\n                                            shadowRadius: 8,\r\n                                            elevation: 4,\r\n                                            opacity: savingStructure ? 0.7 : 1\r\n                                        }}\r\n                                    \u003e\r\n                                        {savingStructure ? (\r\n                                            \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                        ) : (\r\n                                            \u003cText style={{ color: \"#fff\", fontFamily: \"DMSans-Bold\", fontSize: 18 }}\u003eSave Fee Structure\u003c/Text\u003e\r\n                                        )}\r\n                                    \u003c/Pressable\u003e\r\n                                \u003c/View\u003e\r\n                            ) : (\r\n                                \u003cView style={{ alignItems: \"center\", marginTop: 40 }}\u003e\r\n                                    \u003cMaterialIcons name=\"class\" size={48} color={colors.textSecondary + \"40\"} /\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontFamily: \"DMSans-Medium\" }}\u003eSelect a class to manage fees\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            )}\r\n                        \u003c/View\u003e\r\n                    )\r\n                }\r\n\r\n                {\r\n                    activeTab === \u0027students\u0027 \u0026\u0026 (\r\n                        \u003cView style={{ padding: 16 }}\u003e\r\n                            {/* Search Header */}\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 12, marginBottom: 16 }}\u003e\r\n                                \u003cTextInput\r\n                                    value={studentSearchQuery}\r\n                                    onChangeText={setStudentSearchQuery}\r\n                                    placeholder=\"Search students...\"\r\n                                    placeholderTextColor={colors.textSecondary}\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        padding: 12,\r\n                                        borderRadius: 12,\r\n                                        color: colors.textPrimary,\r\n                                        fontFamily: \"DMSans-Medium\"\r\n                                    }}\r\n                                /\u003e\r\n                                \u003cView style={{\r\n                                    backgroundColor: colors.primary,\r\n                                    width: 48,\r\n                                    height: 48,\r\n                                    borderRadius: 12,\r\n                                    justifyContent: \"center\",\r\n                                    alignItems: \"center\"\r\n                                }}\u003e\r\n                                    \u003cMaterialIcons name=\"search\" size={24} color=\"#fff\" /\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {loadingStudents ? (\r\n                                \u003cActivityIndicator size=\"large\" color={colors.primary} style={{ marginTop: 40 }} /\u003e\r\n                            ) : (\r\n                                \u003cFlatList\r\n                                    data={allStudents.filter(s =\u003e s.name.toLowerCase().includes(studentSearchQuery.toLowerCase()))}\r\n                                    scrollEnabled={false}\r\n                                    keyExtractor={(item) =\u003e item._id}\r\n                                    contentContainerStyle={{ paddingBottom: 20 }}\r\n                                    renderItem={({ item }) =\u003e (\r\n                                        \u003cPressable\r\n                                            onPress={() =\u003e {\r\n                                                setSelectedStudent(item);\r\n                                                setActiveTab(\u0027collect\u0027);\r\n                                            }}\r\n                                            style={{\r\n                                                backgroundColor: colors.cardBackground,\r\n                                                padding: 16,\r\n                                                borderRadius: 16,\r\n                                                marginBottom: 12,\r\n                                                flexDirection: \"row\",\r\n                                                alignItems: \"center\",\r\n                                                justifyContent: \"space-between\",\r\n                                                shadowColor: \"#000\",\r\n                                                shadowOffset: { width: 0, height: 2 },\r\n                                                shadowOpacity: 0.05,\r\n                                                shadowRadius: 8,\r\n                                                elevation: 2\r\n                                            }}\r\n                                        \u003e\r\n                                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                                                \u003cView style={{ width: 48, height: 48, borderRadius: 24, backgroundColor: colors.primary + \"10\", justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                                                    \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.primary, fontSize: 18 }}\u003e\r\n                                                        {item.name.charAt(0)}\r\n                                                    \u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                                \u003cView\u003e\r\n                                                    \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary, fontSize: 16 }}\u003e{item.name}\u003c/Text\u003e\r\n                                                    \u003cText style={{ color: colors.textSecondary, fontSize: 13 }}\u003e{item.phone}\u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                            \u003c/View\u003e\r\n                                            \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                    )}\r\n                                    ListEmptyComponent={() =\u003e (\r\n                                        \u003cView style={{ alignItems: \"center\", marginTop: 40 }}\u003e\r\n                                            \u003cMaterialIcons name=\"person-off\" size={48} color={colors.textSecondary + \"40\"} /\u003e\r\n                                            \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontFamily: \"DMSans-Medium\" }}\u003eNo students found\u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                    )}\r\n                                /\u003e\r\n                            )}\r\n                        \u003c/View\u003e\r\n                    )\r\n                }\r\n\r\n            \u003c/ScrollView \u003e\r\n        \u003c/View \u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\leaves.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useCallback\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  38,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  49
                                       },
                                       {
                                           "ruleId":  "no-dupe-keys",
                                           "severity":  2,
                                           "message":  "Duplicate key \u0027dateText\u0027.",
                                           "line":  627,
                                           "column":  5,
                                           "nodeType":  "ObjectExpression",
                                           "messageId":  "unexpected",
                                           "endLine":  627,
                                           "endColumn":  13
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect, useCallback } from \u0027react\u0027;\r\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity, Modal, TextInput, RefreshControl, ActivityIndicator, ScrollView, Switch, SectionList } from \u0027react-native\u0027;\r\nimport { useRouter } from \u0027expo-router\u0027;\r\nimport { Ionicons } from \u0027@expo/vector-icons\u0027;\r\nimport DateTimePicker from \u0027@react-native-community/datetimepicker\u0027;\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \u0027../../hooks/useApi\u0027;\r\nimport apiConfig from \u0027../../config/apiConfig\u0027;\r\nimport { useQueryClient } from \u0027@tanstack/react-query\u0027;\r\nimport { useToast } from \u0027../../components/ToastProvider\u0027;\r\n\r\nexport default function AdminLeaves() {\r\n    const router = useRouter();\r\n    const { showToast } = useToast();\r\n    const queryClient = useQueryClient();\r\n    const [activeTab, setActiveTab] = useState(\u0027requests\u0027); // \u0027requests\u0027, \u0027my_leaves\u0027, \u0027daily\u0027\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Action Modal State\r\n    const [actionModalVisible, setActionModalVisible] = useState(false);\r\n    const [selectedRequest, setSelectedRequest] = useState(null);\r\n    const [actionType, setActionType] = useState(\u0027\u0027); // \u0027approved\u0027 or \u0027rejected\u0027\r\n    const [actionReason, setActionReason] = useState(\u0027\u0027);\r\n    const [rejectionReason, setRejectionReason] = useState(\u0027\u0027);\r\n    const [rejectionComments, setRejectionComments] = useState(\u0027\u0027);\r\n\r\n    // Apply Leave Modal State\r\n    const [applyModalVisible, setApplyModalVisible] = useState(false);\r\n    const [startDate, setStartDate] = useState(new Date());\r\n    const [endDate, setEndDate] = useState(new Date());\r\n    const [reason, setReason] = useState(\u0027\u0027);\r\n    const [showStartPicker, setShowStartPicker] = useState(false);\r\n    const [showEndPicker, setShowEndPicker] = useState(false);\r\n    const [isHalfDay, setIsHalfDay] = useState(false);\r\n    const [halfDaySlot, setHalfDaySlot] = useState(\u0027morning\u0027);\r\n\r\n    // Fetch Requests\r\n    const { data: requestsData, isLoading: requestsLoading, refetch: refetchRequests } = useApiQuery(\r\n        [\u0027adminLeaveRequests\u0027],\r\n        `${apiConfig.baseUrl}/leaves/pending`,\r\n        { enabled: activeTab === \u0027requests\u0027 }\r\n    );\r\n\r\n    const requests = React.useMemo(() =\u003e {\r\n        if (!requestsData?.data) return [];\r\n        const data = requestsData.data;\r\n        const studentRequests = data.filter(r =\u003e r.applicantRole === \u0027student\u0027);\r\n        const teacherRequests = data.filter(r =\u003e r.applicantRole === \u0027teacher\u0027);\r\n        const adminRequests = data.filter(r =\u003e r.applicantRole === \u0027admin\u0027);\r\n\r\n        const sections = [];\r\n        if (studentRequests.length \u003e 0) sections.push({ title: \u0027Student Requests\u0027, data: studentRequests });\r\n        if (teacherRequests.length \u003e 0) sections.push({ title: \u0027Teacher Requests\u0027, data: teacherRequests });\r\n        if (adminRequests.length \u003e 0) sections.push({ title: \u0027Admin Requests\u0027, data: adminRequests });\r\n        return sections;\r\n    }, [requestsData]);\r\n\r\n    // Fetch My Leaves\r\n    const { data: myLeavesData, isLoading: myLeavesLoading, refetch: refetchMyLeaves } = useApiQuery(\r\n        [\u0027myLeaves\u0027],\r\n        `${apiConfig.baseUrl}/leaves/my-leaves`,\r\n        { enabled: activeTab === \u0027my_leaves\u0027 }\r\n    );\r\n    const myLeaves = myLeavesData?.data || [];\r\n\r\n    // Fetch Leave Balance\r\n    const { data: balanceData, refetch: refetchBalance } = useApiQuery(\r\n        [\u0027leaveBalance\u0027],\r\n        `${apiConfig.baseUrl}/leaves/balance`,\r\n        { enabled: activeTab === \u0027my_leaves\u0027 }\r\n    );\r\n    const leaveBalance = balanceData?.data;\r\n\r\n    // Fetch Daily Stats\r\n    const { data: dailyStatsData, isLoading: dailyStatsLoading, refetch: refetchDailyStats } = useApiQuery(\r\n        [\u0027dailyLeaveStats\u0027],\r\n        `${apiConfig.baseUrl}/leaves/daily-stats`,\r\n        { enabled: activeTab === \u0027daily\u0027 }\r\n    );\r\n    const dailyStats = dailyStatsData?.data || [];\r\n\r\n    const loading = (activeTab === \u0027requests\u0027 \u0026\u0026 requestsLoading) ||\r\n        (activeTab === \u0027my_leaves\u0027 \u0026\u0026 myLeavesLoading) ||\r\n        (activeTab === \u0027daily\u0027 \u0026\u0026 dailyStatsLoading);\r\n\r\n    // Mutations\r\n    const actionMutation = useApiMutation({\r\n        mutationFn: (data) =\u003e createApiMutationFn(`${apiConfig.baseUrl}/leaves/${data.id}/action`, \u0027PUT\u0027)(data.body),\r\n        onSuccess: () =\u003e {\r\n            showToast(`Leave ${actionType} successfully`, \u0027success\u0027);\r\n            setActionModalVisible(false);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminLeaveRequests\u0027] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027dailyLeaveStats\u0027] }); // Status change might affect daily stats\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \u0027Error updating status\u0027, \u0027error\u0027)\r\n    });\r\n\r\n    const applyLeaveMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/leaves/apply`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\u0027Leave applied successfully\u0027, \u0027success\u0027);\r\n            setApplyModalVisible(false);\r\n            setReason(\u0027\u0027);\r\n            setIsHalfDay(false);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027myLeaves\u0027] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027leaveBalance\u0027] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminLeaveRequests\u0027] }); // If admin applies, it might show up in requests depending on logic, but good to invalidate\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \u0027Error applying leave\u0027, \u0027error\u0027)\r\n    });\r\n\r\n\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        if (activeTab === \u0027requests\u0027) await refetchRequests();\r\n        else if (activeTab === \u0027my_leaves\u0027) {\r\n            await Promise.all([refetchMyLeaves(), refetchBalance()]);\r\n        } else if (activeTab === \u0027daily\u0027) await refetchDailyStats();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    // --- Action Handlers ---\r\n\r\n    const openActionModal = (request, type) =\u003e {\r\n        setSelectedRequest(request);\r\n        setActionType(type);\r\n        setActionReason(\u0027\u0027);\r\n        setRejectionReason(\u0027\u0027);\r\n        setRejectionComments(\u0027\u0027);\r\n        setActionModalVisible(true);\r\n    };\r\n\r\n    const handleAction = () =\u003e {\r\n        if (actionType === \u0027rejected\u0027 \u0026\u0026 (!rejectionReason || !rejectionComments)) {\r\n            showToast(\u0027Rejection reason and comments are required\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        actionMutation.mutate({\r\n            id: selectedRequest._id,\r\n            body: {\r\n                status: actionType,\r\n                reason: actionReason,\r\n                rejectionReason: actionType === \u0027rejected\u0027 ? rejectionReason : undefined,\r\n                rejectionComments: actionType === \u0027rejected\u0027 ? rejectionComments : undefined\r\n            }\r\n        });\r\n    };\r\n\r\n    // --- Apply Leave Handlers ---\r\n\r\n    const handleApplyLeave = () =\u003e {\r\n        if (!reason.trim()) {\r\n            showToast(\u0027Please enter a reason\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        if (!isHalfDay \u0026\u0026 endDate \u003c startDate) {\r\n            showToast(\u0027End date cannot be before start date\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        let finalEndDate = endDate;\r\n        if (isHalfDay) finalEndDate = startDate;\r\n\r\n        applyLeaveMutation.mutate({\r\n            startDate: startDate.toISOString().split(\u0027T\u0027)[0],\r\n            endDate: finalEndDate.toISOString().split(\u0027T\u0027)[0],\r\n            reason,\r\n            leaveType: isHalfDay ? \u0027half\u0027 : \u0027full\u0027,\r\n            halfDaySlot: isHalfDay ? halfDaySlot : undefined\r\n        });\r\n    };\r\n\r\n    // --- Render Items ---\r\n\r\n    const formatDate = (dateString) =\u003e {\r\n        if (!dateString) return \u0027\u0027;\r\n        return new Date(dateString).toLocaleDateString(\u0027en-GB\u0027, { day: \u00272-digit\u0027, month: \u0027short\u0027 });\r\n    };\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027approved\u0027: return \u0027#4CAF50\u0027;\r\n            case \u0027rejected\u0027: return \u0027#F44336\u0027;\r\n            default: return \u0027#FF9800\u0027;\r\n        }\r\n    };\r\n\r\n    const renderRequestItem = ({ item }) =\u003e (\r\n        \u003cView style={styles.card}\u003e\r\n            \u003cView style={styles.cardHeader}\u003e\r\n                \u003cView\u003e\r\n                    \u003cText style={styles.studentName}\u003e{item.applicant?.name || \u0027Unknown\u0027}\u003c/Text\u003e\r\n                    \u003cText style={styles.classInfo}\u003e\r\n                        {item.applicantRole === \u0027student\u0027 ? `Class: ${item.class?.name || \u0027\u0027} ${item.class?.section || \u0027\u0027}` : (item.applicantRole || \u0027Unknown\u0027).toUpperCase()}\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n                \u003cView style={styles.dateContainer}\u003e\r\n                    \u003cText style={styles.dateText}\u003e\r\n                        {formatDate(item.startDate)}\r\n                        {item.leaveType === \u0027full\u0027 \u0026\u0026 item.startDate !== item.endDate \u0026\u0026 ` - ${formatDate(item.endDate)}`}\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={styles.leaveTypeBadge}\u003e\r\n                        {item.leaveType === \u0027half\u0027 ? `Half Day (${item.halfDaySlot})` : \u0027Full Day\u0027}\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cText style={styles.reasonLabel}\u003eReason:\u003c/Text\u003e\r\n            \u003cText style={styles.reasonText}\u003e{item.reason}\u003c/Text\u003e\r\n\r\n            \u003cView style={styles.actionButtons}\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.actionButton, styles.rejectButton]}\r\n                    onPress={() =\u003e openActionModal(item, \u0027rejected\u0027)}\r\n                \u003e\r\n                    \u003cText style={styles.actionButtonText}\u003eReject\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.actionButton, styles.approveButton]}\r\n                    onPress={() =\u003e openActionModal(item, \u0027approved\u0027)}\r\n                \u003e\r\n                    \u003cText style={styles.actionButtonText}\u003eApprove\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n            \u003c/View\u003e\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderMyLeaveItem = ({ item }) =\u003e (\r\n        \u003cView style={styles.card}\u003e\r\n            \u003cView style={styles.cardHeader}\u003e\r\n                \u003cView\u003e\r\n                    \u003cText style={styles.dateText}\u003e\r\n                        {formatDate(item.startDate)}\r\n                        {item.leaveType === \u0027full\u0027 \u0026\u0026 item.startDate !== item.endDate \u0026\u0026 ` - ${formatDate(item.endDate)}`}\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={styles.leaveTypeBadge}\u003e\r\n                        {item.leaveType === \u0027half\u0027 ? `Half Day (${item.halfDaySlot})` : \u0027Full Day\u0027}\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n                \u003cView style={[styles.statusBadge, { backgroundColor: getStatusColor(item.status) }]}\u003e\r\n                    \u003cText style={styles.statusText}\u003e{item.status.toUpperCase()}\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n            \u003cText style={styles.reasonLabel}\u003eReason:\u003c/Text\u003e\r\n            \u003cText style={styles.reasonText}\u003e{item.reason}\u003c/Text\u003e\r\n            {item.status === \u0027rejected\u0027 \u0026\u0026 (\r\n                \u003cView style={styles.rejectionBox}\u003e\r\n                    \u003cText style={styles.rejectionTitle}\u003eRejection Details:\u003c/Text\u003e\r\n                    \u003cText style={styles.rejectionText}\u003e\u003cText style={{ fontWeight: \u0027bold\u0027 }}\u003eReason:\u003c/Text\u003e {item.rejectionReason}\u003c/Text\u003e\r\n                    \u003cText style={styles.rejectionText}\u003e\u003cText style={{ fontWeight: \u0027bold\u0027 }}\u003eComments:\u003c/Text\u003e {item.rejectionComments}\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderDailyItem = ({ item }) =\u003e (\r\n        \u003cView style={styles.card}\u003e\r\n            \u003cView style={styles.cardHeader}\u003e\r\n                \u003cView\u003e\r\n                    \u003cText style={styles.studentName}\u003e{item.applicant?.name || \u0027Unknown\u0027}\u003c/Text\u003e\r\n                    \u003cText style={styles.classInfo}\u003e\r\n                        {item.applicantRole === \u0027student\u0027 ? `Class: ${item.class?.name || \u0027\u0027} ${item.class?.section || \u0027\u0027}` : (item.applicantRole || \u0027Unknown\u0027).toUpperCase()}\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n                \u003cView style={[styles.statusBadge, { backgroundColor: \u0027#4CAF50\u0027 }]}\u003e\r\n                    \u003cText style={styles.statusText}\u003eON LEAVE\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n            \u003cText style={styles.dateText}\u003e\r\n                Until: {formatDate(item.endDate)} ({item.leaveType === \u0027half\u0027 ? \u0027Half Day\u0027 : \u0027Full Day\u0027})\r\n            \u003c/Text\u003e\r\n            \u003cText style={styles.reasonLabel}\u003eReason:\u003c/Text\u003e\r\n            \u003cText style={styles.reasonText}\u003e{item.reason}\u003c/Text\u003e\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cView style={styles.header}\u003e\r\n                \u003cTouchableOpacity onPress={() =\u003e router.back()} style={styles.backButton}\u003e\r\n                    \u003cIonicons name=\"arrow-back\" size={24} color=\"#333\" /\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cText style={styles.headerTitle}\u003eLeave Management\u003c/Text\u003e\r\n                \u003cView style={{ width: 24 }} /\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cView style={styles.tabContainer}\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.tab, activeTab === \u0027requests\u0027 \u0026\u0026 styles.activeTab]}\r\n                    onPress={() =\u003e setActiveTab(\u0027requests\u0027)}\r\n                \u003e\r\n                    \u003cText style={[styles.tabText, activeTab === \u0027requests\u0027 \u0026\u0026 styles.activeTabText]}\u003eRequests\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.tab, activeTab === \u0027my_leaves\u0027 \u0026\u0026 styles.activeTab]}\r\n                    onPress={() =\u003e setActiveTab(\u0027my_leaves\u0027)}\r\n                \u003e\r\n                    \u003cText style={[styles.tabText, activeTab === \u0027my_leaves\u0027 \u0026\u0026 styles.activeTabText]}\u003eMy Leaves\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.tab, activeTab === \u0027daily\u0027 \u0026\u0026 styles.activeTab]}\r\n                    onPress={() =\u003e setActiveTab(\u0027daily\u0027)}\r\n                \u003e\r\n                    \u003cText style={[styles.tabText, activeTab === \u0027daily\u0027 \u0026\u0026 styles.activeTabText]}\u003eDaily Stats\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n            \u003c/View\u003e\r\n\r\n            {activeTab === \u0027my_leaves\u0027 \u0026\u0026 leaveBalance \u0026\u0026 (\r\n                \u003cView style={styles.balanceCard}\u003e\r\n                    \u003cView style={styles.balanceItem}\u003e\r\n                        \u003cText style={styles.balanceLabel}\u003eTotal\u003c/Text\u003e\r\n                        \u003cText style={styles.balanceValue}\u003e{leaveBalance.total}\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                    \u003cView style={styles.balanceDivider} /\u003e\r\n                    \u003cView style={styles.balanceItem}\u003e\r\n                        \u003cText style={styles.balanceLabel}\u003eUsed\u003c/Text\u003e\r\n                        \u003cText style={styles.balanceValue}\u003e{leaveBalance.used}\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                    \u003cView style={styles.balanceDivider} /\u003e\r\n                    \u003cView style={styles.balanceItem}\u003e\r\n                        \u003cText style={styles.balanceLabel}\u003eRemaining\u003c/Text\u003e\r\n                        \u003cText style={[styles.balanceValue, { color: \u0027#4CAF50\u0027 }]}\u003e{leaveBalance.remaining}\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n\r\n            {loading ? (\r\n                \u003cActivityIndicator size=\"large\" color=\"#2F6CD4\" style={styles.loader} /\u003e\r\n            ) : (\r\n                \u003c\u003e\r\n                    {activeTab === \u0027requests\u0027 ? (\r\n                        \u003cSectionList\r\n                            sections={requests}\r\n                            renderItem={renderRequestItem}\r\n                            renderSectionHeader={({ section: { title } }) =\u003e (\r\n                                \u003cText style={styles.sectionHeader}\u003e{title}\u003c/Text\u003e\r\n                            )}\r\n                            keyExtractor={(item) =\u003e item._id}\r\n                            contentContainerStyle={styles.listContent}\r\n                            refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} /\u003e}\r\n                            ListEmptyComponent={\u003cText style={styles.emptyText}\u003eNo pending requests.\u003c/Text\u003e}\r\n                        /\u003e\r\n                    ) : (\r\n                        \u003cFlatList\r\n                            data={activeTab === \u0027my_leaves\u0027 ? myLeaves : dailyStats}\r\n                            renderItem={activeTab === \u0027my_leaves\u0027 ? renderMyLeaveItem : renderDailyItem}\r\n                            keyExtractor={(item) =\u003e item._id}\r\n                            contentContainerStyle={styles.listContent}\r\n                            refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} /\u003e}\r\n                            ListEmptyComponent={\u003cText style={styles.emptyText}\u003eNo records found.\u003c/Text\u003e}\r\n                        /\u003e\r\n                    )}\r\n                \u003c/\u003e\r\n            )}\r\n\r\n            {activeTab === \u0027my_leaves\u0027 \u0026\u0026 (\r\n                \u003cTouchableOpacity style={styles.fab} onPress={() =\u003e setApplyModalVisible(true)}\u003e\r\n                    \u003cIonicons name=\"add\" size={24} color=\"#fff\" /\u003e\r\n                    \u003cText style={styles.fabText}\u003eApply Leave\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n            )}\r\n\r\n            {/* Action Modal */}\r\n            \u003cModal\r\n                visible={actionModalVisible}\r\n                animationType=\"fade\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e setActionModalVisible(false)}\r\n            \u003e\r\n                \u003cView style={styles.modalContainer}\u003e\r\n                    \u003cView style={styles.modalContent}\u003e\r\n                        \u003cText style={styles.modalTitle}\u003e\r\n                            {actionType === \u0027approved\u0027 ? \u0027Approve Leave\u0027 : \u0027Reject Leave\u0027}\r\n                        \u003c/Text\u003e\r\n\r\n                        {actionType === \u0027rejected\u0027 \u0026\u0026 (\r\n                            \u003c\u003e\r\n                                \u003cText style={styles.label}\u003eRejection Reason *\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={styles.input}\r\n                                    placeholder=\"e.g., Exam Period, Staff Shortage\"\r\n                                    value={rejectionReason}\r\n                                    onChangeText={setRejectionReason}\r\n                                /\u003e\r\n                                \u003cText style={styles.label}\u003eComments *\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={[styles.input, styles.textArea]}\r\n                                    placeholder=\"Add detailed comments...\"\r\n                                    value={rejectionComments}\r\n                                    onChangeText={setRejectionComments}\r\n                                    multiline\r\n                                    numberOfLines={3}\r\n                                /\u003e\r\n                            \u003c/\u003e\r\n                        )}\r\n\r\n                        {actionType === \u0027approved\u0027 \u0026\u0026 (\r\n                            \u003c\u003e\r\n                                \u003cText style={styles.label}\u003eNote (Optional)\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={[styles.input, styles.textArea]}\r\n                                    placeholder=\"Add a note...\"\r\n                                    value={actionReason}\r\n                                    onChangeText={setActionReason}\r\n                                    multiline\r\n                                    numberOfLines={3}\r\n                                /\u003e\r\n                            \u003c/\u003e\r\n                        )}\r\n\r\n                        \u003cView style={styles.modalButtons}\u003e\r\n                            \u003cTouchableOpacity\r\n                                style={[styles.button, styles.cancelButton]}\r\n                                onPress={() =\u003e setActionModalVisible(false)}\r\n                            \u003e\r\n                                \u003cText style={styles.cancelButtonText}\u003eCancel\u003c/Text\u003e\r\n                            \u003c/TouchableOpacity\u003e\r\n                            \u003cTouchableOpacity\r\n                                style={[styles.button, actionType === \u0027approved\u0027 ? styles.approveButton : styles.rejectButton]}\r\n                                onPress={handleAction}\r\n                                disabled={actionMutation.isPending}\r\n                            \u003e\r\n                                {actionMutation.isPending ? (\r\n                                    \u003cActivityIndicator color=\"#fff\" size=\"small\" /\u003e\r\n                                ) : (\r\n                                    \u003cText style={styles.submitButtonText}\u003e\r\n                                        {actionType === \u0027approved\u0027 ? \u0027Approve\u0027 : \u0027Reject\u0027}\r\n                                    \u003c/Text\u003e\r\n                                )}\r\n                            \u003c/TouchableOpacity\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n\r\n            {/* Apply Leave Modal */}\r\n            \u003cModal\r\n                visible={applyModalVisible}\r\n                animationType=\"slide\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e setApplyModalVisible(false)}\r\n            \u003e\r\n                \u003cView style={styles.modalContainer}\u003e\r\n                    \u003cView style={styles.modalContent}\u003e\r\n                        \u003cView style={styles.modalHeader}\u003e\r\n                            \u003cText style={styles.modalTitle}\u003eApply for Leave\u003c/Text\u003e\r\n                            \u003cTouchableOpacity onPress={() =\u003e setApplyModalVisible(false)}\u003e\r\n                                \u003cIonicons name=\"close\" size={24} color=\"#333\" /\u003e\r\n                            \u003c/TouchableOpacity\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cScrollView\u003e\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eLeave Type\u003c/Text\u003e\r\n                                \u003cView style={styles.row}\u003e\r\n                                    \u003cText style={styles.valueText}\u003e{isHalfDay ? \u0027Half Day\u0027 : \u0027Full Day\u0027}\u003c/Text\u003e\r\n                                    \u003cSwitch\r\n                                        value={isHalfDay}\r\n                                        onValueChange={setIsHalfDay}\r\n                                        trackColor={{ false: \"#767577\", true: \"#81b0ff\" }}\r\n                                        thumbColor={isHalfDay ? \"#2F6CD4\" : \"#f4f3f4\"}\r\n                                    /\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {isHalfDay \u0026\u0026 (\r\n                                \u003cView style={styles.inputGroup}\u003e\r\n                                    \u003cText style={styles.label}\u003eSlot\u003c/Text\u003e\r\n                                    \u003cView style={styles.slotContainer}\u003e\r\n                                        \u003cTouchableOpacity\r\n                                            style={[styles.slotButton, halfDaySlot === \u0027morning\u0027 \u0026\u0026 styles.activeSlot]}\r\n                                            onPress={() =\u003e setHalfDaySlot(\u0027morning\u0027)}\r\n                                        \u003e\r\n                                            \u003cText style={[styles.slotText, halfDaySlot === \u0027morning\u0027 \u0026\u0026 styles.activeSlotText]}\u003eMorning\u003c/Text\u003e\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                        \u003cTouchableOpacity\r\n                                            style={[styles.slotButton, halfDaySlot === \u0027afternoon\u0027 \u0026\u0026 styles.activeSlot]}\r\n                                            onPress={() =\u003e setHalfDaySlot(\u0027afternoon\u0027)}\r\n                                        \u003e\r\n                                            \u003cText style={[styles.slotText, halfDaySlot === \u0027afternoon\u0027 \u0026\u0026 styles.activeSlotText]}\u003eAfternoon\u003c/Text\u003e\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                            )}\r\n\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eStart Date\u003c/Text\u003e\r\n                                \u003cTouchableOpacity\r\n                                    style={styles.dateButton}\r\n                                    onPress={() =\u003e setShowStartPicker(true)}\r\n                                \u003e\r\n                                    \u003cText style={styles.dateText}\u003e{formatDate(startDate.toISOString())}\u003c/Text\u003e\r\n                                    \u003cIonicons name=\"calendar-outline\" size={20} color=\"#666\" /\u003e\r\n                                \u003c/TouchableOpacity\u003e\r\n                                {showStartPicker \u0026\u0026 (\r\n                                    \u003cDateTimePicker\r\n                                        value={startDate}\r\n                                        mode=\"date\"\r\n                                        display=\"default\"\r\n                                        minimumDate={new Date()}\r\n                                        onChange={(event, selectedDate) =\u003e {\r\n                                            setShowStartPicker(false);\r\n                                            if (selectedDate) {\r\n                                                setStartDate(selectedDate);\r\n                                                if (selectedDate \u003e endDate) setEndDate(selectedDate);\r\n                                            }\r\n                                        }}\r\n                                    /\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            {!isHalfDay \u0026\u0026 (\r\n                                \u003cView style={styles.inputGroup}\u003e\r\n                                    \u003cText style={styles.label}\u003eEnd Date\u003c/Text\u003e\r\n                                    \u003cTouchableOpacity\r\n                                        style={styles.dateButton}\r\n                                        onPress={() =\u003e setShowEndPicker(true)}\r\n                                    \u003e\r\n                                        \u003cText style={styles.dateText}\u003e{formatDate(endDate.toISOString())}\u003c/Text\u003e\r\n                                        \u003cIonicons name=\"calendar-outline\" size={20} color=\"#666\" /\u003e\r\n                                    \u003c/TouchableOpacity\u003e\r\n                                    {showEndPicker \u0026\u0026 (\r\n                                        \u003cDateTimePicker\r\n                                            value={endDate}\r\n                                            mode=\"date\"\r\n                                            display=\"default\"\r\n                                            minimumDate={startDate}\r\n                                            onChange={(event, selectedDate) =\u003e {\r\n                                                setShowEndPicker(false);\r\n                                                if (selectedDate) setEndDate(selectedDate);\r\n                                            }}\r\n                                        /\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                            )}\r\n\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eReason\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={[styles.input, styles.textArea]}\r\n                                    placeholder=\"Enter reason for leave...\"\r\n                                    value={reason}\r\n                                    onChangeText={setReason}\r\n                                    multiline\r\n                                    numberOfLines={4}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cTouchableOpacity\r\n                                style={styles.submitButton}\r\n                                onPress={handleApplyLeave}\r\n                                disabled={applyLeaveMutation.isPending}\r\n                            \u003e\r\n                                {applyLeaveMutation.isPending ? (\r\n                                    \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                ) : (\r\n                                    \u003cText style={styles.submitButtonText}\u003eSubmit Application\u003c/Text\u003e\r\n                                )}\r\n                            \u003c/TouchableOpacity\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: \u0027#f5f5f5\u0027 },\r\n    header: { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, justifyContent: \u0027space-between\u0027, padding: 16, backgroundColor: \u0027#fff\u0027, elevation: 2 },\r\n    headerTitle: { fontSize: 18, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    backButton: { padding: 4 },\r\n    tabContainer: { flexDirection: \u0027row\u0027, backgroundColor: \u0027#fff\u0027, paddingHorizontal: 16, paddingBottom: 12, borderBottomWidth: 1, borderBottomColor: \u0027#eee\u0027 },\r\n    tab: { flex: 1, paddingVertical: 10, alignItems: \u0027center\u0027, borderBottomWidth: 2, borderBottomColor: \u0027transparent\u0027 },\r\n    activeTab: { borderBottomColor: \u0027#2F6CD4\u0027 },\r\n    tabText: { fontSize: 16, color: \u0027#666\u0027, fontWeight: \u0027500\u0027 },\r\n    activeTabText: { color: \u0027#2F6CD4\u0027, fontWeight: \u0027bold\u0027 },\r\n    loader: { marginTop: 20 },\r\n    listContent: { padding: 16, paddingBottom: 80 },\r\n    card: { backgroundColor: \u0027#fff\u0027, borderRadius: 12, padding: 16, marginBottom: 12, elevation: 2 },\r\n    cardHeader: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027flex-start\u0027, marginBottom: 8 },\r\n    studentName: { fontSize: 16, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    classInfo: { fontSize: 14, color: \u0027#666\u0027 },\r\n    dateContainer: { alignItems: \u0027flex-end\u0027 },\r\n    dateText: { fontSize: 14, color: \u0027#333\u0027, fontWeight: \u0027500\u0027 },\r\n    leaveTypeBadge: { fontSize: 12, color: \u0027#666\u0027, marginTop: 2, fontStyle: \u0027italic\u0027 },\r\n    statusBadge: { paddingHorizontal: 8, paddingVertical: 4, borderRadius: 12 },\r\n    statusText: { color: \u0027#fff\u0027, fontSize: 12, fontWeight: \u0027bold\u0027 },\r\n    reasonLabel: { fontSize: 14, color: \u0027#666\u0027, marginTop: 8, marginBottom: 2 },\r\n    reasonText: { fontSize: 14, color: \u0027#333\u0027, marginBottom: 12 },\r\n    actionButtons: { flexDirection: \u0027row\u0027, justifyContent: \u0027flex-end\u0027, marginTop: 8, borderTopWidth: 1, borderTopColor: \u0027#eee\u0027, paddingTop: 12 },\r\n    actionButton: { paddingHorizontal: 16, paddingVertical: 8, borderRadius: 20, marginLeft: 12 },\r\n    approveButton: { backgroundColor: \u0027#4CAF50\u0027 },\r\n    rejectButton: { backgroundColor: \u0027#F44336\u0027 },\r\n    actionButtonText: { color: \u0027#fff\u0027, fontWeight: \u0027600\u0027, fontSize: 14 },\r\n    emptyText: { textAlign: \u0027center\u0027, marginTop: 40, color: \u0027#666\u0027, fontSize: 16 },\r\n    fab: { position: \u0027absolute\u0027, bottom: 100, right: 20, backgroundColor: \u0027#2F6CD4\u0027, flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, paddingVertical: 12, paddingHorizontal: 20, borderRadius: 30, elevation: 4 },\r\n    fabText: { color: \u0027#fff\u0027, fontWeight: \u0027bold\u0027, marginLeft: 8 },\r\n    balanceCard: { flexDirection: \u0027row\u0027, backgroundColor: \u0027#fff\u0027, margin: 16, marginBottom: 0, padding: 16, borderRadius: 12, elevation: 2, justifyContent: \u0027space-around\u0027 },\r\n    balanceItem: { alignItems: \u0027center\u0027 },\r\n    balanceLabel: { fontSize: 12, color: \u0027#666\u0027, marginBottom: 4 },\r\n    balanceValue: { fontSize: 20, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    balanceDivider: { width: 1, backgroundColor: \u0027#eee\u0027 },\r\n    modalContainer: { flex: 1, backgroundColor: \u0027rgba(0,0,0,0.5)\u0027, justifyContent: \u0027center\u0027, padding: 20 },\r\n    modalContent: { backgroundColor: \u0027#fff\u0027, borderRadius: 16, padding: 20, maxHeight: \u002790%\u0027 },\r\n    modalHeader: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027center\u0027, marginBottom: 20 },\r\n    modalTitle: { fontSize: 20, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027, marginBottom: 10 },\r\n    label: { fontSize: 14, color: \u0027#666\u0027, marginBottom: 6, fontWeight: \u0027500\u0027, marginTop: 10 },\r\n    input: { backgroundColor: \u0027#f9f9f9\u0027, borderWidth: 1, borderColor: \u0027#ddd\u0027, borderRadius: 8, padding: 12, fontSize: 16 },\r\n    textArea: { height: 80, textAlignVertical: \u0027top\u0027 },\r\n    modalButtons: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, marginTop: 20 },\r\n    button: { flex: 1, padding: 14, borderRadius: 8, alignItems: \u0027center\u0027 },\r\n    cancelButton: { backgroundColor: \u0027#f5f5f5\u0027, marginRight: 10 },\r\n    cancelButtonText: { color: \u0027#666\u0027, fontWeight: \u0027600\u0027, fontSize: 16 },\r\n    submitButtonText: { color: \u0027#fff\u0027, fontWeight: \u0027600\u0027, fontSize: 16 },\r\n    inputGroup: { marginBottom: 20 },\r\n    row: { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, justifyContent: \u0027space-between\u0027, backgroundColor: \u0027#f9f9f9\u0027, padding: 12, borderRadius: 8, borderWidth: 1, borderColor: \u0027#ddd\u0027 },\r\n    valueText: { fontSize: 16, color: \u0027#333\u0027 },\r\n    slotContainer: { flexDirection: \u0027row\u0027, gap: 12 },\r\n    slotButton: { flex: 1, padding: 12, borderRadius: 8, borderWidth: 1, borderColor: \u0027#ddd\u0027, alignItems: \u0027center\u0027, backgroundColor: \u0027#f9f9f9\u0027 },\r\n    activeSlot: { borderColor: \u0027#2F6CD4\u0027, backgroundColor: \u0027#EDE7F6\u0027 },\r\n    slotText: { color: \u0027#666\u0027, fontWeight: \u0027500\u0027 },\r\n    activeSlotText: { color: \u0027#2F6CD4\u0027, fontWeight: \u0027bold\u0027 },\r\n    dateButton: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027center\u0027, backgroundColor: \u0027#f9f9f9\u0027, borderWidth: 1, borderColor: \u0027#ddd\u0027, borderRadius: 8, padding: 12 },\r\n    dateText: { fontSize: 16, color: \u0027#333\u0027 },\r\n    submitButton: { backgroundColor: \u0027#2F6CD4\u0027, padding: 16, borderRadius: 12, alignItems: \u0027center\u0027, marginTop: 10, marginBottom: 20 },\r\n    sectionHeader: { fontSize: 14, fontWeight: \u0027bold\u0027, color: \u0027#666\u0027, backgroundColor: \u0027#f5f5f5\u0027, paddingVertical: 8, paddingHorizontal: 4, marginTop: 10, textTransform: \u0027uppercase\u0027 },\r\n    rejectionBox: { marginTop: 12, padding: 10, backgroundColor: \u0027#FFEBEE\u0027, borderRadius: 8, borderLeftWidth: 3, borderLeftColor: \u0027#F44336\u0027 },\r\n    rejectionTitle: { fontSize: 12, fontWeight: \u0027bold\u0027, color: \u0027#D32F2F\u0027, marginBottom: 4 },\r\n    rejectionText: { fontSize: 12, color: \u0027#D32F2F\u0027, marginBottom: 2 },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\performance.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027BarChart\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  17,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  17,
                                           "endColumn":  18
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027PieChart\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  17,
                                           "column":  20,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  17,
                                           "endColumn":  28
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027width\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  19,
                                           "column":  9,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  19,
                                           "endColumn":  14
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  31,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  31,
                                           "endColumn":  17
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Dimensions,\r\n    TouchableOpacity,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport AppHeader from \"../../components/Header\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { BarChart, PieChart } from \"react-native-chart-kit\";\r\n\r\nconst { width } = Dimensions.get(\u0027window\u0027);\r\n\r\nconst EXAM_COLORS = {\r\n    \u0027FA1\u0027: \u0027#4CAF50\u0027,\r\n    \u0027FA2\u0027: \u0027#2196F3\u0027,\r\n    \u0027SA1\u0027: \u0027#FF9800\u0027,\r\n    \u0027FA3\u0027: \u0027#9C27B0\u0027,\r\n    \u0027FA4\u0027: \u0027#E91E63\u0027,\r\n    \u0027SA2\u0027: \u0027#F44336\u0027\r\n};\r\n\r\nexport default function AdminPerformanceScreen() {\r\n    const router = useRouter();\r\n    const { colors } = useTheme();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [activeTab, setActiveTab] = useState(\u0027overview\u0027); // \u0027overview\u0027 | \u0027classes\u0027 | \u0027subjects\u0027\r\n\r\n    // Fetch school-wide performance data\r\n    const { data: performanceData, isLoading, refetch } = useApiQuery(\r\n        [\u0027schoolPerformance\u0027],\r\n        `${apiConfig.baseUrl}/exams/performance/school`\r\n    );\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getGradeColor = (percentage) =\u003e {\r\n        if (percentage \u003e= 90) return colors.success;\r\n        if (percentage \u003e= 75) return \u0027#2196F3\u0027;\r\n        if (percentage \u003e= 60) return \u0027#FF9800\u0027;\r\n        if (percentage \u003e= 40) return \u0027#FF5722\u0027;\r\n        return colors.error;\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \u0027center\u0027, alignItems: \u0027center\u0027 }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    if (!performanceData) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \u0027center\u0027, alignItems: \u0027center\u0027, padding: 20 }}\u003e\r\n                \u003cMaterialIcons name=\"info-outline\" size={64} color={colors.textSecondary} /\u003e\r\n                \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, textAlign: \u0027center\u0027 }}\u003e\r\n                    No performance data available\r\n                \u003c/Text\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    const { examwisePerformance = [], classwiseSummary = [], subjectwiseSummary = [] } = performanceData;\r\n\r\n    // Calculate school average\r\n    const completedExams = examwisePerformance.filter(e =\u003e e.marksEntered \u003e 0);\r\n    const schoolAvg = completedExams.length \u003e 0\r\n        ? (completedExams.reduce((sum, e) =\u003e sum + e.avgPercentage, 0) / completedExams.length).toFixed(1)\r\n        : 0;\r\n\r\n    const renderOverview = () =\u003e (\r\n        \u003cView\u003e\r\n            {/* School Average Card */}\r\n            \u003cView style={{\r\n                backgroundColor: colors.primary,\r\n                borderRadius: 20,\r\n                padding: 28,\r\n                marginTop: 20,\r\n                elevation: 4\r\n            }}\u003e\r\n                \u003cText style={{ fontSize: 16, color: \"#fff\", opacity: 0.9, fontFamily: \"DMSans-Medium\", textAlign: \"center\" }}\u003e\r\n                    School-wide Average\r\n                \u003c/Text\u003e\r\n                \u003cText style={{ fontSize: 64, fontFamily: \"DMSans-Bold\", color: \"#fff\", marginTop: 12, textAlign: \"center\" }}\u003e\r\n                    {schoolAvg}%\r\n                \u003c/Text\u003e\r\n                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Regular\", color: \"#fff\", marginTop: 4, textAlign: \"center\", opacity: 0.8 }}\u003e\r\n                    Across all assessments\r\n                \u003c/Text\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Quick Stats */}\r\n            \u003cView style={{\r\n                flexDirection: \"row\",\r\n                gap: 12,\r\n                marginTop: 20\r\n            }}\u003e\r\n                \u003cView style={{\r\n                    flex: 1,\r\n                    backgroundColor: colors.cardBackground,\r\n                    borderRadius: 16,\r\n                    padding: 16,\r\n                    alignItems: \"center\"\r\n                }}\u003e\r\n                    \u003cMaterialIcons name=\"school\" size={32} color={colors.primary} /\u003e\r\n                    \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 8 }}\u003e\r\n                        {classwiseSummary.length}\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                        Classes\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n                \u003cView style={{\r\n                    flex: 1,\r\n                    backgroundColor: colors.cardBackground,\r\n                    borderRadius: 16,\r\n                    padding: 16,\r\n                    alignItems: \"center\"\r\n                }}\u003e\r\n                    \u003cMaterialIcons name=\"book\" size={32} color={colors.success} /\u003e\r\n                    \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 8 }}\u003e\r\n                        {subjectwiseSummary.length}\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                        Subjects\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n                \u003cView style={{\r\n                    flex: 1,\r\n                    backgroundColor: colors.cardBackground,\r\n                    borderRadius: 16,\r\n                    padding: 16,\r\n                    alignItems: \"center\"\r\n                }}\u003e\r\n                    \u003cMaterialIcons name=\"assessment\" size={32} color={EXAM_COLORS.FA1} /\u003e\r\n                    \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 8 }}\u003e\r\n                        {completedExams.length}\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                        Completed\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Exam-wise Performance */}\r\n            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 28, marginBottom: 12 }}\u003e\r\n                Assessment Performance\r\n            \u003c/Text\u003e\r\n\r\n            {examwisePerformance.map((exam) =\u003e (\r\n                \u003cView\r\n                    key={exam.examType}\r\n                    style={{\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 16,\r\n                        padding: 18,\r\n                        marginBottom: 12,\r\n                        borderLeftWidth: 5,\r\n                        borderLeftColor: EXAM_COLORS[exam.examType]\r\n                    }}\r\n                \u003e\r\n                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}\u003e\r\n                        \u003cView style={{ flex: 1 }}\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                {exam.examType}\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\", marginTop: 2 }}\u003e\r\n                                {exam.examsCount} exam{exam.examsCount !== 1 ? \u0027s\u0027 : \u0027\u0027} â€¢ {exam.marksEntered} mark entries\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cText style={{\r\n                            fontSize: 28,\r\n                            fontFamily: \"DMSans-Bold\",\r\n                            color: getGradeColor(exam.avgPercentage)\r\n                        }}\u003e\r\n                            {exam.avgPercentage.toFixed(1)}%\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            ))}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderClasses = () =\u003e (\r\n        \u003cView\u003e\r\n            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 20, marginBottom: 12 }}\u003e\r\n                Class-wise Performance\r\n            \u003c/Text\u003e\r\n\r\n            {classwiseSummary\r\n                .sort((a, b) =\u003e b.avgPercentage - a.avgPercentage)\r\n                .map((cls, idx) =\u003e (\r\n                    \u003cView\r\n                        key={cls.classId}\r\n                        style={{\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 16,\r\n                            padding: 18,\r\n                            marginBottom: 12,\r\n                            flexDirection: \"row\",\r\n                            justifyContent: \"space-between\",\r\n                            alignItems: \"center\"\r\n                        }}\r\n                    \u003e\r\n                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", flex: 1 }}\u003e\r\n                            \u003cView style={{\r\n                                width: 40,\r\n                                height: 40,\r\n                                borderRadius: 20,\r\n                                backgroundColor: idx \u003c 3 ? colors.primary + \u002720\u0027 : colors.textSecondary + \u002710\u0027,\r\n                                alignItems: \u0027center\u0027,\r\n                                justifyContent: \u0027center\u0027,\r\n                                marginRight: 12\r\n                            }}\u003e\r\n                                \u003cText style={{\r\n                                    fontSize: 16,\r\n                                    fontFamily: \"DMSans-Bold\",\r\n                                    color: idx \u003c 3 ? colors.primary : colors.textSecondary\r\n                                }}\u003e\r\n                                    #{idx + 1}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flex: 1 }}\u003e\r\n                                \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                    {cls.className}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    {cls.examsCount} exam{cls.examsCount !== 1 ? \u0027s\u0027 : \u0027\u0027} completed\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cText style={{\r\n                            fontSize: 24,\r\n                            fontFamily: \"DMSans-Bold\",\r\n                            color: getGradeColor(cls.avgPercentage)\r\n                        }}\u003e\r\n                            {cls.avgPercentage}%\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                ))}\r\n\r\n            {classwiseSummary.length === 0 \u0026\u0026 (\r\n                \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                    \u003cMaterialIcons name=\"school\" size={64} color={colors.textSecondary} /\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                        No class data available\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderSubjects = () =\u003e (\r\n        \u003cView\u003e\r\n            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 20, marginBottom: 12 }}\u003e\r\n                Subject-wise Performance\r\n            \u003c/Text\u003e\r\n\r\n            {subjectwiseSummary\r\n                .sort((a, b) =\u003e b.avgPercentage - a.avgPercentage)\r\n                .map((subj, idx) =\u003e (\r\n                    \u003cView\r\n                        key={subj.subjectId}\r\n                        style={{\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 16,\r\n                            padding: 18,\r\n                            marginBottom: 12,\r\n                            flexDirection: \"row\",\r\n                            justifyContent: \"space-between\",\r\n                            alignItems: \"center\"\r\n                        }}\r\n                    \u003e\r\n                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", flex: 1 }}\u003e\r\n                            \u003cView style={{\r\n                                width: 40,\r\n                                height: 40,\r\n                                borderRadius: 20,\r\n                                backgroundColor: idx \u003c 3 ? colors.success + \u002720\u0027 : colors.textSecondary + \u002710\u0027,\r\n                                alignItems: \u0027center\u0027,\r\n                                justifyContent: \u0027center\u0027,\r\n                                marginRight: 12\r\n                            }}\u003e\r\n                                \u003cText style={{\r\n                                    fontSize: 16,\r\n                                    fontFamily: \"DMSans-Bold\",\r\n                                    color: idx \u003c 3 ? colors.success : colors.textSecondary\r\n                                }}\u003e\r\n                                    #{idx + 1}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flex: 1 }}\u003e\r\n                                \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                    {subj.subjectName}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    {subj.examsCount} exam{subj.examsCount !== 1 ? \u0027s\u0027 : \u0027\u0027} completed\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cText style={{\r\n                            fontSize: 24,\r\n                            fontFamily: \"DMSans-Bold\",\r\n                            color: getGradeColor(subj.avgPercentage)\r\n                        }}\u003e\r\n                            {subj.avgPercentage}%\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                ))}\r\n\r\n            {subjectwiseSummary.length === 0 \u0026\u0026 (\r\n                \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                    \u003cMaterialIcons name=\"book\" size={64} color={colors.textSecondary} /\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                        No subject data available\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title=\"School Performance\"\r\n                        subtitle=\"Comprehensive analytics dashboard\"\r\n                        showBack\r\n                    /\u003e\r\n\r\n                    {/* Tabs */}\r\n                    \u003cView style={{\r\n                        flexDirection: \"row\",\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 12,\r\n                        padding: 4,\r\n                        marginTop: 20\r\n                    }}\u003e\r\n                        \u003cTouchableOpacity\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \u0027overview\u0027 ? colors.primary : \u0027transparent\u0027,\r\n                                borderRadius: 10\r\n                            }}\r\n                            onPress={() =\u003e setActiveTab(\u0027overview\u0027)}\r\n                        \u003e\r\n                            \u003cText style={{\r\n                                fontFamily: \"DMSans-Bold\",\r\n                                fontSize: 13,\r\n                                color: activeTab === \u0027overview\u0027 ? \"#fff\" : colors.textSecondary\r\n                            }}\u003e\r\n                                Overview\r\n                            \u003c/Text\u003e\r\n                        \u003c/TouchableOpacity\u003e\r\n                        \u003cTouchableOpacity\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \u0027classes\u0027 ? colors.primary : \u0027transparent\u0027,\r\n                                borderRadius: 10\r\n                            }}\r\n                            onPress={() =\u003e setActiveTab(\u0027classes\u0027)}\r\n                        \u003e\r\n                            \u003cText style={{\r\n                                fontFamily: \"DMSans-Bold\",\r\n                                fontSize: 13,\r\n                                color: activeTab === \u0027classes\u0027 ? \"#fff\" : colors.textSecondary\r\n                            }}\u003e\r\n                                Classes\r\n                            \u003c/Text\u003e\r\n                        \u003c/TouchableOpacity\u003e\r\n                        \u003cTouchableOpacity\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \u0027subjects\u0027 ? colors.primary : \u0027transparent\u0027,\r\n                                borderRadius: 10\r\n                            }}\r\n                            onPress={() =\u003e setActiveTab(\u0027subjects\u0027)}\r\n                        \u003e\r\n                            \u003cText style={{\r\n                                fontFamily: \"DMSans-Bold\",\r\n                                fontSize: 13,\r\n                                color: activeTab === \u0027subjects\u0027 ? \"#fff\" : colors.textSecondary\r\n                            }}\u003e\r\n                                Subjects\r\n                            \u003c/Text\u003e\r\n                        \u003c/TouchableOpacity\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Tab Content */}\r\n                    {activeTab === \u0027overview\u0027 \u0026\u0026 renderOverview()}\r\n                    {activeTab === \u0027classes\u0027 \u0026\u0026 renderClasses()}\r\n                    {activeTab === \u0027subjects\u0027 \u0026\u0026 renderSubjects()}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\send-notification.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Alert\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  9,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  9,
                                           "endColumn":  10
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  12,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  12,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  21,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  21,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027useToast\u0027 is not defined.",
                                           "line":  22,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  22,
                                           "endColumn":  35
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    TextInput,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    Alert\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport Header from \"../../components/Header\";\r\n\r\nexport default function SendNotificationScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [title, setTitle] = useState(\"\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [type, setType] = useState(\"General\");\r\n    const [target, setTarget] = useState(\"all\"); // \u0027all\u0027, \u0027class\u0027, \u0027user\u0027\r\n    const [selectedClass, setSelectedClass] = useState(null);\r\n\r\n    // Fetch Classes\r\n    const { data: classes = [] } = useApiQuery(\r\n        [\u0027adminClasses\u0027],\r\n        `${apiConfig.baseUrl}/classes`,\r\n        { enabled: target === \u0027class\u0027 }\r\n    );\r\n\r\n    // Send Notification Mutation\r\n    const sendNotificationMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/notifications/send`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Notification sent successfully\", \"success\");\r\n            router.back();\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to send notification\", \"error\")\r\n    });\r\n\r\n    const handleSend = () =\u003e {\r\n        if (!title.trim() || !message.trim()) {\r\n            showToast(\"Please enter title and message\", \"error\");\r\n            return;\r\n        }\r\n\r\n        if (target === \u0027class\u0027 \u0026\u0026 !selectedClass) {\r\n            showToast(\"Please select a class\", \"error\");\r\n            return;\r\n        }\r\n\r\n        sendNotificationMutation.mutate({\r\n            title,\r\n            message,\r\n            type,\r\n            target,\r\n            targetId: target === \u0027class\u0027 ? selectedClass : null\r\n        });\r\n    };\r\n\r\n    const notificationTypes = [\u0027General\u0027, \u0027Homework\u0027, \u0027Exam\u0027, \u0027Fee\u0027, \u0027Emergency\u0027, \u0027Event\u0027];\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                \u003cHeader title=\"Send Notification\" subtitle=\"Broadcast updates\" showBack /\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView contentContainerStyle={{ padding: 16, paddingBottom: 100 }}\u003e\r\n\r\n                {/* Title */}\r\n                \u003cView style={{ marginBottom: 20 }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eTitle\u003c/Text\u003e\r\n                    \u003cTextInput\r\n                        value={title}\r\n                        onChangeText={setTitle}\r\n                        placeholder=\"e.g. School Closed Tomorrow\"\r\n                        placeholderTextColor={colors.textSecondary + \"80\"}\r\n                        style={{\r\n                            borderWidth: 1,\r\n                            borderColor: colors.textSecondary + \"40\",\r\n                            borderRadius: 12,\r\n                            padding: 16,\r\n                            color: colors.textPrimary,\r\n                            fontSize: 16,\r\n                            backgroundColor: colors.cardBackground\r\n                        }}\r\n                    /\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Message */}\r\n                \u003cView style={{ marginBottom: 20 }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eMessage\u003c/Text\u003e\r\n                    \u003cTextInput\r\n                        value={message}\r\n                        onChangeText={setMessage}\r\n                        placeholder=\"Type your message here...\"\r\n                        placeholderTextColor={colors.textSecondary + \"80\"}\r\n                        multiline\r\n                        style={{\r\n                            borderWidth: 1,\r\n                            borderColor: colors.textSecondary + \"40\",\r\n                            borderRadius: 12,\r\n                            padding: 16,\r\n                            color: colors.textPrimary,\r\n                            fontSize: 16,\r\n                            backgroundColor: colors.cardBackground,\r\n                            minHeight: 100,\r\n                            textAlignVertical: \"top\"\r\n                        }}\r\n                    /\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Type Selection */}\r\n                \u003cView style={{ marginBottom: 24 }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginBottom: 12 }}\u003eType\u003c/Text\u003e\r\n                    \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                            {notificationTypes.map(t =\u003e (\r\n                                \u003cPressable\r\n                                    key={t}\r\n                                    onPress={() =\u003e setType(t)}\r\n                                    style={{\r\n                                        paddingHorizontal: 16,\r\n                                        paddingVertical: 10,\r\n                                        backgroundColor: type === t ? colors.primary : colors.cardBackground,\r\n                                        borderRadius: 20,\r\n                                        borderWidth: 1,\r\n                                        borderColor: type === t ? colors.primary : colors.textSecondary + \"20\"\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cText style={{ color: type === t ? \"#fff\" : colors.textPrimary, fontWeight: \"600\" }}\u003e\r\n                                        {t}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    \u003c/ScrollView\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Target Selection */}\r\n                \u003cView style={{ marginBottom: 24 }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginBottom: 12 }}\u003eTarget Audience\u003c/Text\u003e\r\n                    \u003cView style={{ flexDirection: \"row\", gap: 12 }}\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setTarget(\u0027all\u0027)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: 16,\r\n                                backgroundColor: target === \u0027all\u0027 ? colors.primary + \"15\" : colors.cardBackground,\r\n                                borderWidth: 1,\r\n                                borderColor: target === \u0027all\u0027 ? colors.primary : colors.textSecondary + \"20\",\r\n                                borderRadius: 12,\r\n                                alignItems: \"center\"\r\n                            }}\r\n                        \u003e\r\n                            \u003cMaterialIcons name=\"public\" size={24} color={target === \u0027all\u0027 ? colors.primary : colors.textSecondary} /\u003e\r\n                            \u003cText style={{ marginTop: 8, color: target === \u0027all\u0027 ? colors.primary : colors.textPrimary, fontWeight: \"600\" }}\u003e\r\n                                Everyone\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setTarget(\u0027class\u0027)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: 16,\r\n                                backgroundColor: target === \u0027class\u0027 ? colors.primary + \"15\" : colors.cardBackground,\r\n                                borderWidth: 1,\r\n                                borderColor: target === \u0027class\u0027 ? colors.primary : colors.textSecondary + \"20\",\r\n                                borderRadius: 12,\r\n                                alignItems: \"center\"\r\n                            }}\r\n                        \u003e\r\n                            \u003cMaterialIcons name=\"class\" size={24} color={target === \u0027class\u0027 ? colors.primary : colors.textSecondary} /\u003e\r\n                            \u003cText style={{ marginTop: 8, color: target === \u0027class\u0027 ? colors.primary : colors.textPrimary, fontWeight: \"600\" }}\u003e\r\n                                Specific Class\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setTarget(\u0027teacher\u0027)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: 16,\r\n                                backgroundColor: target === \u0027teacher\u0027 ? colors.primary + \"15\" : colors.cardBackground,\r\n                                borderWidth: 1,\r\n                                borderColor: target === \u0027teacher\u0027 ? colors.primary : colors.textSecondary + \"20\",\r\n                                borderRadius: 12,\r\n                                alignItems: \"center\"\r\n                            }}\r\n                        \u003e\r\n                            \u003cMaterialIcons name=\"school\" size={24} color={target === \u0027teacher\u0027 ? colors.primary : colors.textSecondary} /\u003e\r\n                            \u003cText style={{ marginTop: 8, color: target === \u0027teacher\u0027 ? colors.primary : colors.textPrimary, fontWeight: \"600\" }}\u003e\r\n                                Teachers\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setTarget(\u0027staff\u0027)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: 16,\r\n                                backgroundColor: target === \u0027staff\u0027 ? colors.primary + \"15\" : colors.cardBackground,\r\n                                borderWidth: 1,\r\n                                borderColor: target === \u0027staff\u0027 ? colors.primary : colors.textSecondary + \"20\",\r\n                                borderRadius: 12,\r\n                                alignItems: \"center\"\r\n                            }}\r\n                        \u003e\r\n                            \u003cMaterialIcons name=\"badge\" size={24} color={target === \u0027staff\u0027 ? colors.primary : colors.textSecondary} /\u003e\r\n                            \u003cText style={{ marginTop: 8, color: target === \u0027staff\u0027 ? colors.primary : colors.textPrimary, fontWeight: \"600\" }}\u003e\r\n                                Staff\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Class Dropdown (if target is class) */}\r\n                {target === \u0027class\u0027 \u0026\u0026 (\r\n                    \u003cView style={{ marginBottom: 24 }}\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eSelect Class\u003c/Text\u003e\r\n                        \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                {classes.map(cls =\u003e (\r\n                                    \u003cPressable\r\n                                        key={cls._id}\r\n                                        onPress={() =\u003e setSelectedClass(cls._id)}\r\n                                        style={{\r\n                                            paddingHorizontal: 16,\r\n                                            paddingVertical: 10,\r\n                                            backgroundColor: selectedClass === cls._id ? colors.primary : colors.cardBackground,\r\n                                            borderRadius: 12,\r\n                                            borderWidth: 1,\r\n                                            borderColor: selectedClass === cls._id ? colors.primary : colors.textSecondary + \"20\"\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cText style={{ color: selectedClass === cls._id ? \"#fff\" : colors.textPrimary }}\u003e\r\n                                            {cls.name}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                ))}\r\n                            \u003c/View\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n                )}\r\n\r\n                {/* Send Button */}\r\n                \u003cPressable\r\n                    onPress={handleSend}\r\n                    disabled={sendNotificationMutation.isPending}\r\n                    style={{\r\n                        backgroundColor: colors.primary,\r\n                        padding: 18,\r\n                        borderRadius: 16,\r\n                        alignItems: \"center\",\r\n                        marginTop: 12,\r\n                        opacity: sendNotificationMutation.isPending ? 0.7 : 1,\r\n                        shadowColor: colors.primary,\r\n                        shadowOffset: { width: 0, height: 4 },\r\n                        shadowOpacity: 0.2,\r\n                        shadowRadius: 8,\r\n                        elevation: 4\r\n                    }}\r\n                \u003e\r\n                    {sendNotificationMutation.isPending ? (\r\n                        \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                    ) : (\r\n                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                            \u003cMaterialIcons name=\"send\" size={20} color=\"#fff\" /\u003e\r\n                            \u003cText style={{ color: \"#fff\", fontSize: 18, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                                Send Notification\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/Pressable\u003e\r\n\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\subjects.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  16,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  16,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  26,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  26,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027useToast\u0027 is not defined.",
                                           "line":  27,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  27,
                                           "endColumn":  35
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    TextInput,\r\n    Alert,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Modal,\r\n    KeyboardAvoidingView,\r\n    Platform\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport AppHeader from \"../../components/Header\";\r\n\r\nexport default function ManageSubjectsScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const queryClient = useQueryClient();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Create/Edit Modal\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalMode, setModalMode] = useState(\"add\"); // \"add\" | \"edit\"\r\n    const [editingSubject, setEditingSubject] = useState(null);\r\n    const [form, setForm] = useState({ name: \"\", code: \"\", type: \"Theory\" });\r\n\r\n    // Details Modal\r\n    const [showDetailsModal, setShowDetailsModal] = useState(false);\r\n    const [selectedSubject, setSelectedSubject] = useState(null);\r\n\r\n    // Fetch Subjects\r\n    const { data: subjects = [], isLoading: loading, refetch: refetchSubjects } = useApiQuery(\r\n        [\u0027adminSubjects\u0027],\r\n        `${apiConfig.baseUrl}/subjects`\r\n    );\r\n\r\n    // Fetch Usage Details\r\n    const { data: usageDetails = [], isLoading: loadingDetails } = useApiQuery(\r\n        [\u0027subjectUsage\u0027, selectedSubject?._id],\r\n        `${apiConfig.baseUrl}/subjects/${selectedSubject?._id}/usage`,\r\n        { enabled: !!selectedSubject \u0026\u0026 showDetailsModal }\r\n    );\r\n\r\n    // Mutations\r\n    const saveSubjectMutation = useApiMutation({\r\n        mutationFn: (data) =\u003e {\r\n            const url = modalMode === \"add\"\r\n                ? `${apiConfig.baseUrl}/subjects`\r\n                : `${apiConfig.baseUrl}/subjects/${editingSubject._id}`;\r\n            const method = modalMode === \"add\" ? \"POST\" : \"PUT\";\r\n            return createApiMutationFn(url, method)(data);\r\n        },\r\n        onSuccess: () =\u003e {\r\n            showToast(`Subject ${modalMode === \"add\" ? \"created\" : \"updated\"}`, \"success\");\r\n            setShowModal(false);\r\n            setForm({ name: \"\", code: \"\", type: \"Theory\" });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminSubjects\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to save\", \"error\")\r\n    });\r\n\r\n    const deleteSubjectMutation = useApiMutation({\r\n        mutationFn: (id) =\u003e createApiMutationFn(`${apiConfig.baseUrl}/subjects/${id}`, \u0027DELETE\u0027)(),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Subject deleted\", \"success\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027adminSubjects\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to delete\", \"error\")\r\n    });\r\n\r\n    const handleSave = () =\u003e {\r\n        if (!form.name) {\r\n            showToast(\"Subject name is required\", \"error\");\r\n            return;\r\n        }\r\n        saveSubjectMutation.mutate(form);\r\n    };\r\n\r\n    const handleDelete = (id, name) =\u003e {\r\n        Alert.alert(\r\n            \"Delete Subject\",\r\n            `Are you sure you want to delete ${name}?`,\r\n            [\r\n                { text: \"Cancel\", style: \"cancel\" },\r\n                {\r\n                    text: \"Delete\",\r\n                    style: \"destructive\",\r\n                    onPress: () =\u003e deleteSubjectMutation.mutate(id)\r\n                }\r\n            ]\r\n        );\r\n    };\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetchSubjects();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const filteredSubjects = subjects.filter(s =\u003e\r\n        s.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        (s.code \u0026\u0026 s.code.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    );\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                \u003cAppHeader title=\"Manage Subjects\" subtitle=\"Master List\" showBack /\u003e\r\n\r\n                {/* Search */}\r\n                \u003cView style={{\r\n                    flexDirection: \"row\",\r\n                    alignItems: \"center\",\r\n                    backgroundColor: colors.cardBackground,\r\n                    borderRadius: 12,\r\n                    paddingHorizontal: 16,\r\n                    height: 50,\r\n                    marginTop: 16,\r\n                    borderWidth: 1,\r\n                    borderColor: colors.border\r\n                }}\u003e\r\n                    \u003cMaterialIcons name=\"search\" size={22} color={colors.textSecondary} /\u003e\r\n                    \u003cTextInput\r\n                        style={{ flex: 1, marginLeft: 12, fontSize: 16, color: colors.textPrimary }}\r\n                        placeholder=\"Search subjects...\"\r\n                        placeholderTextColor={colors.textSecondary}\r\n                        value={searchQuery}\r\n                        onChangeText={setSearchQuery}\r\n                    /\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ padding: 16, paddingBottom: 100 }}\r\n            \u003e\r\n                {loading ? (\r\n                    \u003cActivityIndicator size=\"large\" color={colors.primary} style={{ marginTop: 40 }} /\u003e\r\n                ) : filteredSubjects.length === 0 ? (\r\n                    \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                        \u003cMaterialIcons name=\"menu-book\" size={48} color={colors.textSecondary} /\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginTop: 16 }}\u003eNo subjects found\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                ) : (\r\n                    filteredSubjects.map((subject) =\u003e (\r\n                        \u003cPressable\r\n                            key={subject._id}\r\n                            onPress={() =\u003e {\r\n                                setSelectedSubject(subject);\r\n                                setShowDetailsModal(true);\r\n                            }}\r\n                            style={({ pressed }) =\u003e ({\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 16,\r\n                                marginBottom: 12,\r\n                                flexDirection: \"row\",\r\n                                justifyContent: \"space-between\",\r\n                                alignItems: \"center\",\r\n                                opacity: pressed ? 0.9 : 1,\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: { width: 0, height: 1 },\r\n                                shadowOpacity: 0.05,\r\n                                shadowRadius: 2,\r\n                                elevation: 1\r\n                            })}\r\n                        \u003e\r\n                            \u003cView\u003e\r\n                                \u003cText style={{ fontSize: 16, fontWeight: \"600\", color: colors.textPrimary }}\u003e\r\n                                    {subject.name}\r\n                                \u003c/Text\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", gap: 8, marginTop: 4 }}\u003e\r\n                                    {subject.code \u0026\u0026 (\r\n                                        \u003cText style={{ fontSize: 12, color: colors.textSecondary, backgroundColor: colors.background, paddingHorizontal: 6, paddingVertical: 2, borderRadius: 4 }}\u003e\r\n                                            {subject.code}\r\n                                        \u003c/Text\u003e\r\n                                    )}\r\n                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, backgroundColor: colors.background, paddingHorizontal: 6, paddingVertical: 2, borderRadius: 4 }}\u003e\r\n                                        {subject.type}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                \u003cPressable\r\n                                    onPress={(e) =\u003e {\r\n                                        e.stopPropagation();\r\n                                        setModalMode(\"edit\");\r\n                                        setEditingSubject(subject);\r\n                                        setForm({ name: subject.name, code: subject.code || \"\", type: subject.type });\r\n                                        setShowModal(true);\r\n                                    }}\r\n                                    style={{ padding: 8, backgroundColor: colors.background, borderRadius: 8 }}\r\n                                \u003e\r\n                                    \u003cMaterialIcons name=\"edit\" size={18} color={colors.textSecondary} /\u003e\r\n                                \u003c/Pressable\u003e\r\n                                \u003cPressable\r\n                                    onPress={(e) =\u003e {\r\n                                        e.stopPropagation();\r\n                                        handleDelete(subject._id, subject.name);\r\n                                    }}\r\n                                    style={{ padding: 8, backgroundColor: colors.error + \"15\", borderRadius: 8 }}\r\n                                \u003e\r\n                                    \u003cMaterialIcons name=\"delete-outline\" size={18} color={colors.error} /\u003e\r\n                                \u003c/Pressable\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/Pressable\u003e\r\n                    ))\r\n                )}\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* FAB */}\r\n            \u003cPressable\r\n                onPress={() =\u003e {\r\n                    setModalMode(\"add\");\r\n                    setForm({ name: \"\", code: \"\", type: \"Theory\" });\r\n                    setShowModal(true);\r\n                }}\r\n                style={{\r\n                    position: \"absolute\",\r\n                    bottom: 110,\r\n                    right: 24,\r\n                    backgroundColor: colors.primary,\r\n                    width: 56,\r\n                    height: 56,\r\n                    borderRadius: 28,\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                    elevation: 6,\r\n                    shadowColor: colors.primary,\r\n                    shadowOffset: { width: 0, height: 4 },\r\n                    shadowOpacity: 0.3,\r\n                    shadowRadius: 8\r\n                }}\r\n            \u003e\r\n                \u003cMaterialIcons name=\"add\" size={28} color=\"#fff\" /\u003e\r\n            \u003c/Pressable\u003e\r\n\r\n            {/* Create/Edit Modal */}\r\n            \u003cModal visible={showModal} animationType=\"slide\" transparent onRequestClose={() =\u003e setShowModal(false)}\u003e\r\n                \u003cKeyboardAvoidingView behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"} style={{ flex: 1, justifyContent: \"flex-end\", backgroundColor: \"rgba(0,0,0,0.5)\" }}\u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderTopLeftRadius: 24, borderTopRightRadius: 24, padding: 24 }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 24 }}\u003e\r\n                            \u003cText style={{ fontSize: 20, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                                {modalMode === \"add\" ? \"New Subject\" : \"Edit Subject\"}\r\n                            \u003c/Text\u003e\r\n                            \u003cPressable onPress={() =\u003e setShowModal(false)}\u003e\r\n                                \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 8 }}\u003eNAME\u003c/Text\u003e\r\n                        \u003cTextInput\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                borderRadius: 12,\r\n                                padding: 12,\r\n                                fontSize: 16,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 16\r\n                            }}\r\n                            placeholder=\"e.g. Mathematics\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            value={form.name}\r\n                            onChangeText={(t) =\u003e setForm({ ...form, name: t })}\r\n                        /\u003e\r\n\r\n                        \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 8 }}\u003eCODE (Optional)\u003c/Text\u003e\r\n                        \u003cTextInput\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                borderRadius: 12,\r\n                                padding: 12,\r\n                                fontSize: 16,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 16\r\n                            }}\r\n                            placeholder=\"e.g. MATH101\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            value={form.code}\r\n                            onChangeText={(t) =\u003e setForm({ ...form, code: t })}\r\n                            autoCapitalize=\"characters\"\r\n                        /\u003e\r\n\r\n                        \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 8 }}\u003eTYPE\u003c/Text\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 8, marginBottom: 24 }}\u003e\r\n                            {[\"Theory\", \"Practical\", \"Other\"].map((type) =\u003e (\r\n                                \u003cPressable\r\n                                    key={type}\r\n                                    onPress={() =\u003e setForm({ ...form, type })}\r\n                                    style={{\r\n                                        paddingHorizontal: 16,\r\n                                        paddingVertical: 8,\r\n                                        backgroundColor: form.type === type ? colors.primary : colors.background,\r\n                                        borderRadius: 20,\r\n                                        borderWidth: 1,\r\n                                        borderColor: form.type === type ? colors.primary : colors.border\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cText style={{ color: form.type === type ? \"#fff\" : colors.textSecondary, fontWeight: \"600\" }}\u003e{type}\u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cPressable\r\n                            onPress={handleSave}\r\n                            disabled={saveSubjectMutation.isPending}\r\n                            style={{\r\n                                backgroundColor: colors.primary,\r\n                                padding: 16,\r\n                                borderRadius: 16,\r\n                                alignItems: \"center\",\r\n                                opacity: saveSubjectMutation.isPending ? 0.7 : 1\r\n                            }}\r\n                        \u003e\r\n                            {saveSubjectMutation.isPending ? (\r\n                                \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                            ) : (\r\n                                \u003cText style={{ color: \"#fff\", fontSize: 16, fontWeight: \"600\" }}\u003e\r\n                                    {modalMode === \"add\" ? \"Create Subject\" : \"Save Changes\"}\r\n                                \u003c/Text\u003e\r\n                            )}\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View \u003e\r\n                \u003c/KeyboardAvoidingView \u003e\r\n            \u003c/Modal \u003e\r\n\r\n            {/* Details Modal */}\r\n            \u003c Modal visible={showDetailsModal} animationType=\"slide\" transparent onRequestClose={() =\u003e setShowDetailsModal(false)\r\n            }\u003e\r\n                \u003cView style={{ flex: 1, justifyContent: \"flex-end\", backgroundColor: \"rgba(0,0,0,0.5)\" }}\u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderTopLeftRadius: 24, borderTopRightRadius: 24, padding: 24, maxHeight: \"80%\" }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n                            \u003cView\u003e\r\n                                \u003cText style={{ fontSize: 20, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                                    {selectedSubject?.name}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontSize: 14 }}\u003eUsage Details\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cPressable onPress={() =\u003e setShowDetailsModal(false)}\u003e\r\n                                \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        {loadingDetails ? (\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} style={{ marginVertical: 40 }} /\u003e\r\n                        ) : usageDetails.length === 0 ? (\r\n                            \u003cView style={{ padding: 20, alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ color: colors.textSecondary }}\u003eNot used in any classes yet.\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        ) : (\r\n                            \u003cScrollView\u003e\r\n                                {usageDetails.map((usage, index) =\u003e (\r\n                                    \u003cView key={index} style={{ marginBottom: 16, padding: 12, backgroundColor: colors.background, borderRadius: 12 }}\u003e\r\n                                        \u003cText style={{ fontSize: 16, fontWeight: \"600\", color: colors.textPrimary }}\u003e\r\n                                            {usage.class?.name} {usage.class?.section ? `(${usage.class.section})` : \"\"}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginBottom: 8 }}\u003e\r\n                                            {usage.class?.branch}\r\n                                        \u003c/Text\u003e\r\n\r\n                                        \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 4 }}\u003eTEACHERS\u003c/Text\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 6 }}\u003e\r\n                                            {usage.teachers \u0026\u0026 usage.teachers.length \u003e 0 ? (\r\n                                                usage.teachers.map(t =\u003e (\r\n                                                    \u003cView key={t._id} style={{ backgroundColor: colors.cardBackground, paddingHorizontal: 8, paddingVertical: 4, borderRadius: 6, borderWidth: 1, borderColor: colors.border }}\u003e\r\n                                                        \u003cText style={{ fontSize: 12, color: colors.textPrimary }}\u003e{t.name}\u003c/Text\u003e\r\n                                                    \u003c/View\u003e\r\n                                                ))\r\n                                            ) : (\r\n                                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontStyle: \"italic\" }}\u003eNo teachers assigned\u003c/Text\u003e\r\n                                            )}\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                ))}\r\n                            \u003c/ScrollView\u003e\r\n                        )}\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal \u003e\r\n        \u003c/View \u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\teacher-subjects.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  13,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  13,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027useToast\u0027 is not defined.",
                                           "line":  24,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  24,
                                           "endColumn":  35
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027variables\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  62,
                                           "column":  30,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  62,
                                           "endColumn":  39
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027error\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  70,
                                           "column":  19,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  70,
                                           "endColumn":  24
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027error\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  88,
                                           "column":  19,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  88,
                                           "endColumn":  24
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  7,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    TextInput,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Modal,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport AppHeader from \"../../components/Header\";\r\n\r\nexport default function TeacherSubjectsScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const queryClient = useQueryClient();\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [selectedTeacher, setSelectedTeacher] = useState(null);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [selectedSubjects, setSelectedSubjects] = useState([]);\r\n\r\n    // Auth check is handled by _layout.jsx generally, but we can keep role check if needed or rely on backend\r\n    // For now assuming auth is fine as per other refactors\r\n\r\n    // Fetch Data\r\n    const { data, isLoading: loading, refetch: refetchData } = useApiQuery(\r\n        [\u0027teacherSubjectMatrix\u0027],\r\n        `${apiConfig.baseUrl}/teachers/admin/teacher-subject-matrix`\r\n    );\r\n\r\n    const teachers = data?.teachers || [];\r\n    const subjects = data?.subjects || [];\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetchData();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    // Mutations\r\n    const assignSubjectsMutation = useApiMutation({\r\n        mutationFn: async ({ teacherId, subjectIds }) =\u003e {\r\n            // We need to handle multiple assignments. The backend seems to take one at a time based on original code loop.\r\n            // Or we can check if there is a bulk endpoint. The original code looped.\r\n            // Let\u0027s loop here in the mutation function or use Promise.all\r\n            const promises = subjectIds.map(subjectId =\u003e\r\n                createApiMutationFn(`${apiConfig.baseUrl}/teachers/subjects/${subjectId}/assign`, \u0027POST\u0027)({ teacherId })\r\n            );\r\n            return Promise.all(promises);\r\n        },\r\n        onSuccess: (results, variables) =\u003e {\r\n            const successCount = results.length; // Assuming all promises resolved if we are here (Promise.all rejects on first error, maybe use allSettled if we want partial success)\r\n            // Actually createApiMutationFn throws on error, so if we get here, all succeeded.\r\n            showToast(`Successfully assigned ${successCount} subject(s) to ${selectedTeacher.name}`, \"success\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027teacherSubjectMatrix\u0027] });\r\n            setSelectedSubjects([]);\r\n            setShowModal(false);\r\n        },\r\n        onError: (error) =\u003e showToast(\"Error assigning subjects\", \"error\")\r\n    });\r\n\r\n    const removeSubjectMutation = useApiMutation({\r\n        mutationFn: ({ subjectId, teacherId }) =\u003e\r\n            createApiMutationFn(`${apiConfig.baseUrl}/teachers/subjects/${subjectId}/teachers/${teacherId}`, \u0027DELETE\u0027)(),\r\n        onSuccess: (data, variables) =\u003e {\r\n            // Find teacher name for the message\r\n            const teacher = teachers.find(t =\u003e t._id === variables.teacherId);\r\n            const teacherName = teacher ? teacher.name : \"Teacher\";\r\n\r\n            // Find subject name\r\n            const subject = subjects.find(s =\u003e s._id === variables.subjectId);\r\n            const subjectName = subject ? subject.name : \"Subject\";\r\n\r\n            showToast(`Removed ${teacherName} from ${subjectName}`, \"success\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027teacherSubjectMatrix\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(\"Failed to remove teacher from subject\", \"error\")\r\n    });\r\n\r\n    const filteredTeachers = teachers.filter(teacher =\u003e\r\n        teacher.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        teacher.email?.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    const handleAssignMultipleSubjects = () =\u003e {\r\n        if (selectedSubjects.length === 0) {\r\n            showToast(\"Please select at least one subject\", \"error\");\r\n            return;\r\n        }\r\n\r\n        assignSubjectsMutation.mutate({\r\n            teacherId: selectedTeacher._id,\r\n            subjectIds: selectedSubjects\r\n        });\r\n    };\r\n\r\n    const handleRemoveSubject = (subjectId, teacherId) =\u003e {\r\n        removeSubjectMutation.mutate({ subjectId, teacherId });\r\n    };\r\n\r\n    const toggleSubjectSelection = (subjectId) =\u003e {\r\n        setSelectedSubjects(prev =\u003e {\r\n            if (prev.includes(subjectId)) {\r\n                return prev.filter(id =\u003e id !== subjectId);\r\n            } else {\r\n                return [...prev, subjectId];\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title=\"Teacher-Subject Assignments\"\r\n                        subtitle=\"Manage which teachers teach which subjects\"\r\n                    /\u003e\r\n\r\n                    {/* Search Bar */}\r\n                    \u003cView style={{\r\n                        flexDirection: \"row\",\r\n                        alignItems: \"center\",\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 12,\r\n                        paddingHorizontal: 16,\r\n                        height: 50,\r\n                        marginTop: 16,\r\n                        marginBottom: 20,\r\n                        shadowColor: \"#000\",\r\n                        shadowOffset: { width: 0, height: 2 },\r\n                        shadowOpacity: 0.05,\r\n                        shadowRadius: 8,\r\n                        elevation: 2,\r\n                    }}\u003e\r\n                        \u003cMaterialIcons name=\"search\" size={22} color={colors.textSecondary} /\u003e\r\n                        \u003cTextInput\r\n                            style={{\r\n                                flex: 1,\r\n                                marginLeft: 12,\r\n                                fontSize: 16,\r\n                                color: colors.textPrimary,\r\n                                height: \"100%\",\r\n                            }}\r\n                            placeholder=\"Search teachers...\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            value={searchQuery}\r\n                            onChangeText={setSearchQuery}\r\n                        /\u003e\r\n                        {searchQuery.length \u003e 0 \u0026\u0026 (\r\n                            \u003cPressable onPress={() =\u003e setSearchQuery(\"\")}\u003e\r\n                                \u003cMaterialIcons name=\"close\" size={20} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        )}\r\n                    \u003c/View\u003e\r\n\r\n                    {loading ? (\r\n                        \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", marginTop: 100 }}\u003e\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003c\u003e\r\n                            {/* Teachers List */}\r\n                            {filteredTeachers.length === 0 ? (\r\n                                \u003cView style={{ alignItems: \"center\", marginTop: 60, opacity: 0.6 }}\u003e\r\n                                    \u003cMaterialIcons name=\"search-off\" size={56} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{\r\n                                        color: colors.textSecondary,\r\n                                        marginTop: 20,\r\n                                        fontSize: 16,\r\n                                        fontFamily: \"DMSans-Medium\"\r\n                                    }}\u003e\r\n                                        No teachers found\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ) : (\r\n                                filteredTeachers.map((teacher) =\u003e (\r\n                                    \u003cView\r\n                                        key={teacher._id}\r\n                                        style={{\r\n                                            backgroundColor: colors.cardBackground,\r\n                                            borderRadius: 16,\r\n                                            padding: 16,\r\n                                            marginBottom: 16,\r\n                                            shadowColor: \"#000\",\r\n                                            shadowOffset: { width: 0, height: 2 },\r\n                                            shadowOpacity: 0.05,\r\n                                            shadowRadius: 6,\r\n                                            elevation: 2,\r\n                                        }}\r\n                                    \u003e\r\n                                        {/* Teacher Header */}\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"flex-start\", marginBottom: 12 }}\u003e\r\n                                            \u003cView style={{ flex: 1 }}\u003e\r\n                                                \u003cText style={{\r\n                                                    fontSize: 18,\r\n                                                    fontFamily: \"DMSans-Bold\",\r\n                                                    color: colors.textPrimary\r\n                                                }}\u003e\r\n                                                    {teacher.name}\r\n                                                \u003c/Text\u003e\r\n                                                {teacher.email \u0026\u0026 (\r\n                                                    \u003cText style={{\r\n                                                        fontSize: 13,\r\n                                                        color: colors.textSecondary,\r\n                                                        fontFamily: \"DMSans-Regular\",\r\n                                                        marginTop: 2\r\n                                                    }}\u003e\r\n                                                        {teacher.email}\r\n                                                    \u003c/Text\u003e\r\n                                                )}\r\n                                                \u003cView style={{\r\n                                                    backgroundColor: colors.primary + \"15\",\r\n                                                    alignSelf: \"flex-start\",\r\n                                                    paddingHorizontal: 8,\r\n                                                    paddingVertical: 2,\r\n                                                    borderRadius: 4,\r\n                                                    marginTop: 6\r\n                                                }}\u003e\r\n                                                    \u003cText style={{\r\n                                                        fontSize: 11,\r\n                                                        color: colors.primary,\r\n                                                        fontFamily: \"DMSans-Bold\",\r\n                                                        textTransform: \"uppercase\"\r\n                                                    }}\u003e\r\n                                                        {teacher.role}\r\n                                                    \u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                            \u003c/View\u003e\r\n\r\n                                            \u003cPressable\r\n                                                onPress={() =\u003e {\r\n                                                    setSelectedTeacher(teacher);\r\n                                                    setSelectedSubjects([]);\r\n                                                    setShowModal(true);\r\n                                                }}\r\n                                                style={({ pressed }) =\u003e ({\r\n                                                    backgroundColor: colors.primary,\r\n                                                    paddingHorizontal: 14,\r\n                                                    paddingVertical: 8,\r\n                                                    borderRadius: 8,\r\n                                                    opacity: pressed ? 0.8 : 1\r\n                                                })}\r\n                                            \u003e\r\n                                                \u003cText style={{\r\n                                                    color: \"#fff\",\r\n                                                    fontSize: 13,\r\n                                                    fontFamily: \"DMSans-Bold\"\r\n                                                }}\u003e\r\n                                                    Assign\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                        \u003c/View\u003e\r\n\r\n                                        {/* Assigned Subjects */}\r\n                                        {teacher.subjects \u0026\u0026 teacher.subjects.length \u003e 0 ? (\r\n                                            \u003c\u003e\r\n                                                \u003cText style={{\r\n                                                    fontSize: 12,\r\n                                                    fontFamily: \"DMSans-Bold\",\r\n                                                    color: colors.textSecondary,\r\n                                                    marginBottom: 8,\r\n                                                    textTransform: \"uppercase\"\r\n                                                }}\u003e\r\n                                                    Assigned Subjects ({teacher.subjects.length})\r\n                                                \u003c/Text\u003e\r\n                                                {teacher.subjects.map((subject) =\u003e (\r\n                                                    \u003cView\r\n                                                        key={subject._id}\r\n                                                        style={{\r\n                                                            flexDirection: \"row\",\r\n                                                            justifyContent: \"space-between\",\r\n                                                            alignItems: \"center\",\r\n                                                            backgroundColor: colors.background,\r\n                                                            borderRadius: 8,\r\n                                                            padding: 10,\r\n                                                            marginBottom: 6\r\n                                                        }}\r\n                                                    \u003e\r\n                                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                                            \u003cText style={{\r\n                                                                fontSize: 15,\r\n                                                                fontFamily: \"DMSans-SemiBold\",\r\n                                                                color: colors.textPrimary\r\n                                                            }}\u003e\r\n                                                                {subject.name}\r\n                                                            \u003c/Text\u003e\r\n                                                            \u003cText style={{\r\n                                                                fontSize: 12,\r\n                                                                color: colors.textSecondary,\r\n                                                                fontFamily: \"DMSans-Regular\",\r\n                                                                marginTop: 2\r\n                                                            }}\u003e\r\n                                                                {subject.class.name} {subject.class.section ? `- ${subject.class.section}` : \"\"}\r\n                                                            \u003c/Text\u003e\r\n                                                        \u003c/View\u003e\r\n                                                        \u003cPressable\r\n                                                            onPress={() =\u003e handleRemoveSubject(subject._id, teacher._id)}\r\n                                                            style={({ pressed }) =\u003e ({\r\n                                                                padding: 6,\r\n                                                                backgroundColor: colors.error + \"15\",\r\n                                                                borderRadius: 6,\r\n                                                                opacity: pressed ? 0.7 : 1\r\n                                                            })}\r\n                                                        \u003e\r\n                                                            \u003cMaterialIcons name=\"close\" size={18} color={colors.error} /\u003e\r\n                                                        \u003c/Pressable\u003e\r\n                                                    \u003c/View\u003e\r\n                                                ))}\r\n                                            \u003c/\u003e\r\n                                        ) : (\r\n                                            \u003cText style={{\r\n                                                fontSize: 13,\r\n                                                color: colors.textSecondary,\r\n                                                fontStyle: \"italic\",\r\n                                                fontFamily: \"DMSans-Regular\"\r\n                                            }}\u003e\r\n                                                No subjects assigned yet\r\n                                            \u003c/Text\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n                                ))\r\n                            )}\r\n                        \u003c/\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* Assign Subject Modal */}\r\n            \u003cModal\r\n                visible={showModal}\r\n                animationType=\"fade\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e {\r\n                    setShowModal(false);\r\n                    setSelectedSubjects([]);\r\n                }}\r\n            \u003e\r\n                \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", backgroundColor: \"rgba(0,0,0,0.6)\" }}\u003e\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 20,\r\n                        padding: 24,\r\n                        width: \"90%\",\r\n                        maxWidth: 500,\r\n                        maxHeight: \"80%\",\r\n                    }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 12 }}\u003e\r\n                            \u003cView style={{ flex: 1 }}\u003e\r\n                                \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                    Assign Subjects\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 14, color: colors.textSecondary, fontFamily: \"DMSans-Regular\", marginTop: 2 }}\u003e\r\n                                    {selectedTeacher?.name}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cPressable onPress={() =\u003e {\r\n                                setShowModal(false);\r\n                                setSelectedSubjects([]);\r\n                            }}\u003e\r\n                                \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        {/* Selection Counter */}\r\n                        {selectedSubjects.length \u003e 0 \u0026\u0026 (\r\n                            \u003cView style={{\r\n                                backgroundColor: colors.primary + \"15\",\r\n                                padding: 10,\r\n                                borderRadius: 8,\r\n                                marginBottom: 12,\r\n                                flexDirection: \"row\",\r\n                                alignItems: \"center\",\r\n                                justifyContent: \"space-between\"\r\n                            }}\u003e\r\n                                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-SemiBold\", color: colors.primary }}\u003e\r\n                                    {selectedSubjects.length} subject{selectedSubjects.length !== 1 ? \u0027s\u0027 : \u0027\u0027} selected\r\n                                \u003c/Text\u003e\r\n                                \u003cPressable onPress={() =\u003e setSelectedSubjects([])}\u003e\r\n                                    \u003cText style={{ fontSize: 13, fontFamily: \"DMSans-Bold\", color: colors.primary }}\u003e\r\n                                        Clear All\r\n                                    \u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n                            \u003c/View\u003e\r\n                        )}\r\n\r\n                        \u003cScrollView showsVerticalScrollIndicator={false} style={{ maxHeight: \"70%\" }}\u003e\r\n                            {subjects.map((subject) =\u003e {\r\n                                const isAssigned = subject.teachers.some(t =\u003e t._id === selectedTeacher?._id);\r\n                                const isSelected = selectedSubjects.includes(subject._id);\r\n\r\n                                return (\r\n                                    \u003cPressable\r\n                                        key={subject._id}\r\n                                        onPress={() =\u003e {\r\n                                            if (!isAssigned) {\r\n                                                toggleSubjectSelection(subject._id);\r\n                                            }\r\n                                        }}\r\n                                        disabled={isAssigned || assignSubjectsMutation.isPending}\r\n                                        style={({ pressed }) =\u003e ({\r\n                                            backgroundColor: isAssigned ? colors.success + \"10\" : isSelected ? colors.primary + \"15\" : colors.background,\r\n                                            borderRadius: 12,\r\n                                            padding: 14,\r\n                                            marginBottom: 10,\r\n                                            opacity: (isAssigned || assignSubjectsMutation.isPending) ? 0.6 : (pressed ? 0.9 : 1),\r\n                                            borderWidth: isAssigned ? 1 : isSelected ? 2 : 0,\r\n                                            borderColor: isAssigned ? colors.success : isSelected ? colors.primary : \"transparent\"\r\n                                        })}\r\n                                    \u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}\u003e\r\n                                            \u003cView style={{ flex: 1, marginRight: 12 }}\u003e\r\n                                                \u003cText style={{\r\n                                                    fontSize: 16,\r\n                                                    fontFamily: \"DMSans-SemiBold\",\r\n                                                    color: colors.textPrimary\r\n                                                }}\u003e\r\n                                                    {subject.name}\r\n                                                \u003c/Text\u003e\r\n                                                \u003cText style={{\r\n                                                    fontSize: 13,\r\n                                                    color: colors.textSecondary,\r\n                                                    fontFamily: \"DMSans-Regular\",\r\n                                                    marginTop: 2\r\n                                                }}\u003e\r\n                                                    {subject.class.name} {subject.class.section ? `- ${subject.class.section}` : \"\"}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                            {isAssigned ? (\r\n                                                \u003cView style={{\r\n                                                    backgroundColor: colors.success + \"20\",\r\n                                                    padding: 6,\r\n                                                    borderRadius: 20,\r\n                                                    flexDirection: \"row\",\r\n                                                    alignItems: \"center\",\r\n                                                    paddingHorizontal: 10\r\n                                                }}\u003e\r\n                                                    \u003cMaterialIcons name=\"check-circle\" size={18} color={colors.success} /\u003e\r\n                                                    \u003cText style={{\r\n                                                        fontSize: 11,\r\n                                                        fontFamily: \"DMSans-Bold\",\r\n                                                        color: colors.success,\r\n                                                        marginLeft: 4\r\n                                                    }}\u003e\r\n                                                        Assigned\r\n                                                    \u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                            ) : (\r\n                                                \u003cView style={{\r\n                                                    width: 24,\r\n                                                    height: 24,\r\n                                                    borderRadius: 6,\r\n                                                    borderWidth: 2,\r\n                                                    borderColor: isSelected ? colors.primary : colors.textSecondary + \"40\",\r\n                                                    backgroundColor: isSelected ? colors.primary : \"transparent\",\r\n                                                    justifyContent: \"center\",\r\n                                                    alignItems: \"center\"\r\n                                                }}\u003e\r\n                                                    {isSelected \u0026\u0026 (\r\n                                                        \u003cMaterialIcons name=\"check\" size={18} color=\"#fff\" /\u003e\r\n                                                    )}\r\n                                                \u003c/View\u003e\r\n                                            )}\r\n                                        \u003c/View\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                );\r\n                            })}\r\n                        \u003c/ScrollView\u003e\r\n\r\n                        {/* Assign Button */}\r\n                        \u003cPressable\r\n                            onPress={handleAssignMultipleSubjects}\r\n                            disabled={assignSubjectsMutation.isPending || selectedSubjects.length === 0}\r\n                            style={({ pressed }) =\u003e ({\r\n                                backgroundColor: selectedSubjects.length \u003e 0 ? colors.primary : colors.textSecondary + \"30\",\r\n                                padding: 16,\r\n                                borderRadius: 12,\r\n                                marginTop: 16,\r\n                                opacity: pressed ? 0.8 : 1,\r\n                                flexDirection: \"row\",\r\n                                justifyContent: \"center\",\r\n                                alignItems: \"center\"\r\n                            })}\r\n                        \u003e\r\n                            {assignSubjectsMutation.isPending ? (\r\n                                \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e\r\n                            ) : (\r\n                                \u003c\u003e\r\n                                    \u003cMaterialIcons name=\"check\" size={20} color=\"#fff\" style={{ marginRight: 8 }} /\u003e\r\n                                    \u003cText style={{\r\n                                        color: \"#fff\",\r\n                                        fontSize: 16,\r\n                                        fontFamily: \"DMSans-Bold\"\r\n                                    }}\u003e\r\n                                        Assign {selectedSubjects.length \u003e 0 ? `(${selectedSubjects.length})` : \u0027Selected\u0027}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/\u003e\r\n                            )}\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\admin\\timetable.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  13,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  13,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  26,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  26,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  27,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  27,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027loadingClasses\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  50,
                                           "column":  43,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  50,
                                           "endColumn":  57
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027error\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  104,
                                           "column":  19,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  104,
                                           "endColumn":  24
                                       },
                                       {
                                           "ruleId":  "no-dupe-keys",
                                           "severity":  2,
                                           "message":  "Duplicate key \u0027startTime\u0027.",
                                           "line":  163,
                                           "column":  13,
                                           "nodeType":  "ObjectExpression",
                                           "messageId":  "unexpected",
                                           "endLine":  163,
                                           "endColumn":  22
                                       },
                                       {
                                           "ruleId":  "no-dupe-keys",
                                           "severity":  2,
                                           "message":  "Duplicate key \u0027endTime\u0027.",
                                           "line":  164,
                                           "column":  13,
                                           "nodeType":  "ObjectExpression",
                                           "messageId":  "unexpected",
                                           "endLine":  164,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027index\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  171,
                                           "column":  19,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  171,
                                           "endColumn":  24
                                       },
                                       {
                                           "ruleId":  "react/no-unescaped-entities",
                                           "severity":  2,
                                           "message":  "`\u0027` can be escaped with `\u0026apos;`, `\u0026lsquo;`, `\u0026#39;`, `\u0026rsquo;`.",
                                           "line":  281,
                                           "column":  62,
                                           "nodeType":  "JSXText",
                                           "messageId":  "unescapedEntityAlts",
                                           "suggestions":  [
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026apos;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             12968,
                                                                                             13025
                                                                                         ],
                                                                               "text":  "\u0026apos;s Schedule\r\n                                            "
                                                                           },
                                                                   "desc":  "Replace with `\u0026apos;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026lsquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             12968,
                                                                                             13025
                                                                                         ],
                                                                               "text":  "\u0026lsquo;s Schedule\r\n                                            "
                                                                           },
                                                                   "desc":  "Replace with `\u0026lsquo;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026#39;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             12968,
                                                                                             13025
                                                                                         ],
                                                                               "text":  "\u0026#39;s Schedule\r\n                                            "
                                                                           },
                                                                   "desc":  "Replace with `\u0026#39;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026rsquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             12968,
                                                                                             13025
                                                                                         ],
                                                                               "text":  "\u0026rsquo;s Schedule\r\n                                            "
                                                                           },
                                                                   "desc":  "Replace with `\u0026rsquo;`."
                                                               }
                                                           ]
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  3,
                      "fatalErrorCount":  0,
                      "warningCount":  6,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    TextInput,\r\n    Modal,\r\n    Alert,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport Header from \"../../components/Header\";\r\nimport ModernTimePicker from \"../../components/ModernTimePicker\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\n\r\nconst DAYS = [\u0027Monday\u0027, \u0027Tuesday\u0027, \u0027Wednesday\u0027, \u0027Thursday\u0027, \u0027Friday\u0027, \u0027Saturday\u0027];\r\n\r\nexport default function AdminTimetableScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const queryClient = useQueryClient();\r\n    const [selectedClassId, setSelectedClassId] = useState(null);\r\n\r\n    // Timetable State\r\n    const [schedule, setSchedule] = useState({}); // { Monday: [periods], ... }\r\n    const [selectedDay, setSelectedDay] = useState(\u0027Monday\u0027);\r\n\r\n    // Modal State\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [editingPeriod, setEditingPeriod] = useState(null); // null = new, obj = edit\r\n    const [tempPeriod, setTempPeriod] = useState({\r\n        periodNumber: \"\",\r\n        startTime: new Date(),\r\n        endTime: new Date(),\r\n        subject: \"\",\r\n        teacher: \"\"\r\n    });\r\n    const [showTimePicker, setShowTimePicker] = useState({ show: false, mode: \u0027start\u0027 }); // mode: \u0027start\u0027 | \u0027end\u0027\r\n\r\n    // Fetch Classes\r\n    const { data: classesData, isLoading: loadingClasses } = useApiQuery(\r\n        [\u0027adminClassesInit\u0027],\r\n        `${apiConfig.baseUrl}/classes/admin/init`\r\n    );\r\n    const classes = classesData?.classes || [];\r\n\r\n    // Fetch Class Details (Subjects \u0026 Teachers)\r\n    const { data: classDetails } = useApiQuery(\r\n        [\u0027classDetails\u0027, selectedClassId],\r\n        `${apiConfig.baseUrl}/classes/${selectedClassId}/full-details`,\r\n        { enabled: !!selectedClassId }\r\n    );\r\n    const subjects = classDetails?.subjects || [];\r\n\r\n    // Fetch Existing Timetable\r\n    const { data: timetableData, isLoading: loadingTimetable } = useApiQuery(\r\n        [\u0027timetable\u0027, selectedClassId],\r\n        `${apiConfig.baseUrl}/timetable/class/${selectedClassId}`,\r\n        {\r\n            enabled: !!selectedClassId,\r\n            // When data is fetched, update local schedule state\r\n            // Note: React Query\u0027s data is immutable, so we should use it directly or copy it to state if we need to edit it locally before saving.\r\n            // Since we are editing locally and then saving, we\u0027ll sync state in useEffect when data changes.\r\n        }\r\n    );\r\n\r\n    useEffect(() =\u003e {\r\n        if (timetableData) {\r\n            const scheduleMap = {};\r\n            DAYS.forEach(day =\u003e scheduleMap[day] = []);\r\n\r\n            timetableData.schedule.forEach(daySchedule =\u003e {\r\n                scheduleMap[daySchedule.day] = daySchedule.periods.map(p =\u003e ({\r\n                    ...p,\r\n                    subject: p.subject?._id || p.subject, // Handle populated vs unpopulated\r\n                    teacher: p.teacher?._id || p.teacher\r\n                }));\r\n            });\r\n            setSchedule(scheduleMap);\r\n        } else if (selectedClassId \u0026\u0026 !loadingTimetable) {\r\n            // Initialize empty schedule if no data found or just switched class\r\n            const emptySchedule = {};\r\n            DAYS.forEach(day =\u003e emptySchedule[day] = []);\r\n            setSchedule(emptySchedule);\r\n        }\r\n    }, [timetableData, selectedClassId, loadingTimetable]);\r\n\r\n    // Save Timetable Mutation\r\n    const saveTimetableMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/timetable`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Timetable saved successfully\", \"success\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027timetable\u0027, selectedClassId] });\r\n        },\r\n        onError: (error) =\u003e showToast(\"Failed to save timetable\", \"error\")\r\n    });\r\n\r\n    const handleSaveTimetable = () =\u003e {\r\n        if (!selectedClassId) return;\r\n\r\n        // Convert schedule object back to array format\r\n        const scheduleArray = Object.keys(schedule).map(day =\u003e ({\r\n            day,\r\n            periods: schedule[day]\r\n        })).filter(day =\u003e day.periods.length \u003e 0);\r\n\r\n        saveTimetableMutation.mutate({\r\n            classId: selectedClassId,\r\n            schedule: scheduleArray,\r\n            breaks: [] // Can add breaks later\r\n        });\r\n    };\r\n\r\n    const openPeriodModal = (period = null) =\u003e {\r\n        if (period) {\r\n            setEditingPeriod(period);\r\n            // Parse times for picker\r\n            // Assuming time format \"HH:mm AM/PM\" or similar, need to parse to Date object\r\n            // For simplicity, let\u0027s just use current date with parsed time or default\r\n            setTempPeriod({\r\n                ...period,\r\n                startTime: new Date(), // TODO: Parse actual time string\r\n                endTime: new Date()\r\n            });\r\n        } else {\r\n            setEditingPeriod(null);\r\n            setTempPeriod({\r\n                periodNumber: (schedule[selectedDay]?.length || 0) + 1,\r\n                startTime: new Date(),\r\n                endTime: new Date(),\r\n                subject: \"\",\r\n                teacher: \"\"\r\n            });\r\n        }\r\n        setModalVisible(true);\r\n    };\r\n\r\n    const savePeriod = () =\u003e {\r\n        if (!tempPeriod.subject || !tempPeriod.teacher) {\r\n            Alert.alert(\"Error\", \"Please select a subject and teacher\");\r\n            return;\r\n        }\r\n\r\n        const formatTime = (date) =\u003e {\r\n            return date.toLocaleTimeString([], { hour: \u00272-digit\u0027, minute: \u00272-digit\u0027 });\r\n        };\r\n\r\n        const newPeriod = {\r\n            periodNumber: Number(tempPeriod.periodNumber),\r\n            subject: tempPeriod.subject,\r\n            teacher: tempPeriod.teacher,\r\n            startTime: formatTime(tempPeriod.startTime),\r\n            endTime: formatTime(tempPeriod.endTime),\r\n            startTime: formatTime(tempPeriod.startTime),\r\n            endTime: formatTime(tempPeriod.endTime)\r\n        };\r\n\r\n        const updatedDaySchedule = [...(schedule[selectedDay] || [])];\r\n\r\n        if (editingPeriod) {\r\n            // Update existing\r\n            const index = updatedDaySchedule.findIndex(p =\u003e p.periodNumber === editingPeriod.periodNumber); // Identify by period number? Or index?\r\n            // Better to use index from map, but for now let\u0027s just push/replace\r\n            // Actually, let\u0027s just replace based on periodNumber if unique, or just use array index if passed\r\n            // Simplified: Remove old, add new, sort\r\n            const filtered = updatedDaySchedule.filter(p =\u003e p !== editingPeriod);\r\n            filtered.push(newPeriod);\r\n            filtered.sort((a, b) =\u003e a.periodNumber - b.periodNumber);\r\n            setSchedule({ ...schedule, [selectedDay]: filtered });\r\n        } else {\r\n            // Add new\r\n            updatedDaySchedule.push(newPeriod);\r\n            updatedDaySchedule.sort((a, b) =\u003e a.periodNumber - b.periodNumber);\r\n            setSchedule({ ...schedule, [selectedDay]: updatedDaySchedule });\r\n        }\r\n\r\n        setModalVisible(false);\r\n    };\r\n\r\n    const deletePeriod = (period) =\u003e {\r\n        const updatedDaySchedule = schedule[selectedDay].filter(p =\u003e p !== period);\r\n        setSchedule({ ...schedule, [selectedDay]: updatedDaySchedule });\r\n    };\r\n\r\n    const onTimeConfirm = (selectedDate) =\u003e {\r\n        const mode = showTimePicker.mode;\r\n\r\n        if (selectedDate) {\r\n            if (mode === \u0027start\u0027) {\r\n                setTempPeriod({ ...tempPeriod, startTime: selectedDate });\r\n            } else {\r\n                setTempPeriod({ ...tempPeriod, endTime: selectedDate });\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView contentContainerStyle={{ paddingBottom: 100 }}\u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader title=\"Manage Timetable\" subtitle=\"Set class schedules\" showBack /\u003e\r\n\r\n                    {/* Class Selector */}\r\n                    \u003cView style={{ marginTop: 20 }}\u003e\r\n                        \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                            Select Class\r\n                        \u003c/Text\u003e\r\n                        \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 10 }}\u003e\r\n                                {classes.map((cls) =\u003e (\r\n                                    \u003cPressable\r\n                                        key={cls._id}\r\n                                        onPress={() =\u003e setSelectedClassId(cls._id)}\r\n                                        style={{\r\n                                            paddingHorizontal: 20,\r\n                                            paddingVertical: 10,\r\n                                            backgroundColor: selectedClassId === cls._id ? colors.primary : colors.cardBackground,\r\n                                            borderRadius: 20,\r\n                                            borderWidth: 1,\r\n                                            borderColor: selectedClassId === cls._id ? colors.primary : colors.textSecondary + \"20\"\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cText style={{\r\n                                            color: selectedClassId === cls._id ? \"#fff\" : colors.textPrimary,\r\n                                            fontFamily: selectedClassId === cls._id ? \"DMSans-Bold\" : \"DMSans-Medium\"\r\n                                        }}\u003e\r\n                                            {cls.name} {cls.section}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                ))}\r\n                            \u003c/View\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {selectedClassId \u0026\u0026 (\r\n                        \u003c\u003e\r\n                            {/* Day Tabs */}\r\n                            \u003cView style={{ marginTop: 24 }}\u003e\r\n                                \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                        {DAYS.map((day) =\u003e (\r\n                                            \u003cPressable\r\n                                                key={day}\r\n                                                onPress={() =\u003e setSelectedDay(day)}\r\n                                                style={{\r\n                                                    paddingHorizontal: 16,\r\n                                                    paddingVertical: 8,\r\n                                                    backgroundColor: selectedDay === day ? colors.secondary : \"transparent\",\r\n                                                    borderRadius: 12,\r\n                                                }}\r\n                                            \u003e\r\n                                                \u003cText style={{\r\n                                                    color: selectedDay === day ? \"#fff\" : colors.textSecondary,\r\n                                                    fontFamily: \"DMSans-Bold\"\r\n                                                }}\u003e\r\n                                                    {day.slice(0, 3)}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                        ))}\r\n                                    \u003c/View\u003e\r\n                                \u003c/ScrollView\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Schedule Editor */}\r\n                            \u003cView style={{ marginTop: 20 }}\u003e\r\n                                {loadingTimetable ? (\r\n                                    \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                                ) : (\r\n                                    \u003cView\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n                                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                                {selectedDay}\u0027s Schedule\r\n                                            \u003c/Text\u003e\r\n                                            \u003cPressable\r\n                                                onPress={() =\u003e openPeriodModal()}\r\n                                                style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\r\n                                            \u003e\r\n                                                \u003cMaterialIcons name=\"add\" size={20} color={colors.primary} /\u003e\r\n                                                \u003cText style={{ color: colors.primary, fontFamily: \"DMSans-Bold\" }}\u003eAdd Period\u003c/Text\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                        \u003c/View\u003e\r\n\r\n                                        {(!schedule[selectedDay] || schedule[selectedDay].length === 0) ? (\r\n                                            \u003cView style={{ padding: 20, alignItems: \"center\", backgroundColor: colors.cardBackground, borderRadius: 12 }}\u003e\r\n                                                \u003cText style={{ color: colors.textSecondary }}\u003eNo periods added for this day\u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        ) : (\r\n                                            schedule[selectedDay].map((period, index) =\u003e {\r\n                                                const subject = subjects.find(s =\u003e s._id === period.subject);\r\n                                                const teacher = subject?.teachers?.find(t =\u003e t._id === period.teacher);\r\n\r\n                                                return (\r\n                                                    \u003cView\r\n                                                        key={index}\r\n                                                        style={{\r\n                                                            backgroundColor: colors.cardBackground,\r\n                                                            padding: 16,\r\n                                                            borderRadius: 12,\r\n                                                            marginBottom: 12,\r\n                                                            flexDirection: \"row\",\r\n                                                            alignItems: \"center\",\r\n                                                            gap: 12\r\n                                                        }}\r\n                                                    \u003e\r\n                                                        \u003cView style={{\r\n                                                            width: 40, height: 40,\r\n                                                            borderRadius: 20,\r\n                                                            backgroundColor: colors.background,\r\n                                                            alignItems: \"center\",\r\n                                                            justifyContent: \"center\"\r\n                                                        }}\u003e\r\n                                                            \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e{period.periodNumber}\u003c/Text\u003e\r\n                                                        \u003c/View\u003e\r\n\r\n                                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                                            \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary, fontSize: 16 }}\u003e\r\n                                                                {subject?.name || \"Unknown Subject\"}\r\n                                                            \u003c/Text\u003e\r\n                                                            \u003cText style={{ color: colors.textSecondary, fontSize: 12 }}\u003e\r\n                                                                {period.startTime} - {period.endTime} â€¢ {teacher?.name || \"No Teacher\"}\r\n                                                            \u003c/Text\u003e\r\n                                                        \u003c/View\u003e\r\n\r\n                                                        \u003cPressable onPress={() =\u003e deletePeriod(period)}\u003e\r\n                                                            \u003cMaterialIcons name=\"delete-outline\" size={24} color={colors.error} /\u003e\r\n                                                        \u003c/Pressable\u003e\r\n                                                    \u003c/View\u003e\r\n                                                );\r\n                                            })\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Save Button */}\r\n                            \u003cPressable\r\n                                onPress={handleSaveTimetable}\r\n                                disabled={saveTimetableMutation.isPending}\r\n                                style={{\r\n                                    backgroundColor: colors.primary,\r\n                                    borderRadius: 12,\r\n                                    padding: 16,\r\n                                    marginTop: 32,\r\n                                    alignItems: \"center\",\r\n                                    opacity: saveTimetableMutation.isPending ? 0.7 : 1\r\n                                }}\r\n                            \u003e\r\n                                {saveTimetableMutation.isPending ? (\r\n                                    \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                ) : (\r\n                                    \u003cText style={{ color: \"#fff\", fontFamily: \"DMSans-Bold\", fontSize: 16 }}\u003e\r\n                                        Save Timetable\r\n                                    \u003c/Text\u003e\r\n                                )}\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* Add/Edit Period Modal */}\r\n            \u003cModal\r\n                visible={modalVisible}\r\n                transparent={true}\r\n                animationType=\"slide\"\r\n                onRequestClose={() =\u003e setModalVisible(false)}\r\n            \u003e\r\n                \u003cPressable\r\n                    style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}\r\n                    onPress={() =\u003e setModalVisible(false)}\r\n                \u003e\r\n                    \u003cPressable\r\n                        style={{ backgroundColor: colors.cardBackground, borderTopLeftRadius: 24, borderTopRightRadius: 24, padding: 24, maxHeight: \"80%\" }}\r\n                        onPress={(e) =\u003e e.stopPropagation()}\r\n                    \u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 20 }}\u003e\r\n                            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                {editingPeriod ? \"Edit Period\" : \"Add Period\"}\r\n                            \u003c/Text\u003e\r\n                            \u003cPressable onPress={() =\u003e setModalVisible(false)} hitSlop={10}\u003e\r\n                                \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cScrollView\u003e\r\n                            {/* Period Number */}\r\n                            \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003ePeriod Number\u003c/Text\u003e\r\n                            \u003cTextInput\r\n                                value={String(tempPeriod.periodNumber)}\r\n                                onChangeText={(t) =\u003e setTempPeriod({ ...tempPeriod, periodNumber: t })}\r\n                                keyboardType=\"numeric\"\r\n                                style={{\r\n                                    backgroundColor: colors.background,\r\n                                    padding: 12,\r\n                                    borderRadius: 10,\r\n                                    color: colors.textPrimary,\r\n                                    marginBottom: 16\r\n                                }}\r\n                            /\u003e\r\n\r\n                            {/* Time */}\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 16, marginBottom: 16 }}\u003e\r\n                                \u003cView style={{ flex: 1 }}\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eStart Time\u003c/Text\u003e\r\n                                    \u003cPressable\r\n                                        onPress={() =\u003e setShowTimePicker({ show: true, mode: \u0027start\u0027 })}\r\n                                        style={{ backgroundColor: colors.background, padding: 12, borderRadius: 10 }}\r\n                                    \u003e\r\n                                        \u003cText style={{ color: colors.textPrimary }}\u003e\r\n                                            {tempPeriod.startTime.toLocaleTimeString([], { hour: \u00272-digit\u0027, minute: \u00272-digit\u0027 })}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cView style={{ flex: 1 }}\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eEnd Time\u003c/Text\u003e\r\n                                    \u003cPressable\r\n                                        onPress={() =\u003e setShowTimePicker({ show: true, mode: \u0027end\u0027 })}\r\n                                        style={{ backgroundColor: colors.background, padding: 12, borderRadius: 10 }}\r\n                                    \u003e\r\n                                        \u003cText style={{ color: colors.textPrimary }}\u003e\r\n                                            {tempPeriod.endTime.toLocaleTimeString([], { hour: \u00272-digit\u0027, minute: \u00272-digit\u0027 })}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Subject */}\r\n                            \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eSubject\u003c/Text\u003e\r\n                            \u003cScrollView horizontal showsHorizontalScrollIndicator={false} style={{ marginBottom: 16 }}\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                    {subjects.map(sub =\u003e (\r\n                                        \u003cPressable\r\n                                            key={sub._id}\r\n                                            onPress={() =\u003e setTempPeriod({ ...tempPeriod, subject: sub._id, teacher: \"\" })} // Reset teacher on subject change\r\n                                            style={{\r\n                                                paddingHorizontal: 16,\r\n                                                paddingVertical: 8,\r\n                                                backgroundColor: tempPeriod.subject === sub._id ? colors.primary : colors.background,\r\n                                                borderRadius: 20,\r\n                                                borderWidth: 1,\r\n                                                borderColor: tempPeriod.subject === sub._id ? colors.primary : colors.textSecondary + \"20\"\r\n                                            }}\r\n                                        \u003e\r\n                                            \u003cText style={{ color: tempPeriod.subject === sub._id ? \"#fff\" : colors.textPrimary }}\u003e\r\n                                                {sub.name}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                    ))}\r\n                                \u003c/View\u003e\r\n                            \u003c/ScrollView\u003e\r\n\r\n                            {/* Teacher */}\r\n                            {tempPeriod.subject \u0026\u0026 (\r\n                                \u003c\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eTeacher\u003c/Text\u003e\r\n                                    \u003cScrollView horizontal showsHorizontalScrollIndicator={false} style={{ marginBottom: 16 }}\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                            {subjects.find(s =\u003e s._id === tempPeriod.subject)?.teachers?.map(t =\u003e (\r\n                                                \u003cPressable\r\n                                                    key={t._id}\r\n                                                    onPress={() =\u003e setTempPeriod({ ...tempPeriod, teacher: t._id })}\r\n                                                    style={{\r\n                                                        paddingHorizontal: 16,\r\n                                                        paddingVertical: 8,\r\n                                                        backgroundColor: tempPeriod.teacher === t._id ? colors.secondary : colors.background,\r\n                                                        borderRadius: 20,\r\n                                                        borderWidth: 1,\r\n                                                        borderColor: tempPeriod.teacher === t._id ? colors.secondary : colors.textSecondary + \"20\"\r\n                                                    }}\r\n                                                \u003e\r\n                                                    \u003cText style={{ color: tempPeriod.teacher === t._id ? \"#fff\" : colors.textPrimary }}\u003e\r\n                                                        {t.name}\r\n                                                    \u003c/Text\u003e\r\n                                                \u003c/Pressable\u003e\r\n                                            ))}\r\n                                        \u003c/View\u003e\r\n                                    \u003c/ScrollView\u003e\r\n                                \u003c/\u003e\r\n                            )}\r\n\r\n\r\n\r\n                            \u003cPressable\r\n                                onPress={savePeriod}\r\n                                style={{\r\n                                    backgroundColor: colors.primary,\r\n                                    padding: 16,\r\n                                    borderRadius: 12,\r\n                                    alignItems: \"center\",\r\n                                    marginBottom: 20\r\n                                }}\r\n                            \u003e\r\n                                \u003cText style={{ color: \"#fff\", fontFamily: \"DMSans-Bold\", fontSize: 16 }}\u003e\r\n                                    {editingPeriod ? \"Update Period\" : \"Add Period\"}\r\n                                \u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/Pressable\u003e\r\n                \u003c/Pressable\u003e\r\n            \u003c/Modal\u003e\r\n\r\n            \u003cModernTimePicker\r\n                visible={showTimePicker.show}\r\n                onClose={() =\u003e setShowTimePicker({ ...showTimePicker, show: false })}\r\n                onConfirm={onTimeConfirm}\r\n                value={showTimePicker.mode === \u0027start\u0027 ? tempPeriod.startTime : tempPeriod.endTime}\r\n                title={showTimePicker.mode === \u0027start\u0027 ? \"Select Start Time\" : \"Select End Time\"}\r\n            /\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\complaints\\index.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027StyleSheet\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  15
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    FlatList,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    StyleSheet,\r\n    RefreshControl\r\n} from \"react-native\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useTheme } from \"../../theme\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport Header from \"../../components/Header\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nexport default function ComplaintsScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [activeTab, setActiveTab] = useState(\"my_complaints\"); // \u0027my_complaints\u0027, \u0027inbox\u0027\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [userRole, setUserRole] = useState(null);\r\n\r\n    useEffect(() =\u003e {\r\n        checkUserRole();\r\n    }, []);\r\n\r\n\r\n\r\n    const checkUserRole = async () =\u003e {\r\n        const role = await AsyncStorage.getItem(\"userRole\");\r\n        setUserRole(role);\r\n        // If student, force \u0027my_complaints\u0027\r\n        if (role === \u0027student\u0027) {\r\n            setActiveTab(\u0027my_complaints\u0027);\r\n        } else {\r\n            // Default to inbox for teachers/admins as that\u0027s their primary work\r\n            setActiveTab(\u0027inbox\u0027);\r\n        }\r\n    };\r\n\r\n    const { data: complaintsData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027complaints\u0027, activeTab],\r\n        `${apiConfig.baseUrl}${activeTab === \u0027inbox\u0027 ? \u0027/complaints/inbox\u0027 : \u0027/complaints/my-complaints\u0027}`,\r\n        { enabled: !!userRole }\r\n    );\r\n\r\n    const complaints = complaintsData || [];\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027Resolved\u0027: return colors.success;\r\n            case \u0027Rejected\u0027: return colors.error;\r\n            case \u0027In Progress\u0027: return colors.warning;\r\n            default: return colors.textSecondary;\r\n        }\r\n    };\r\n\r\n    const renderComplaintItem = ({ item }) =\u003e (\r\n        \u003cPressable\r\n            style={({ pressed }) =\u003e [\r\n                styles.cardMinimal,\r\n                {\r\n                    marginBottom: 12,\r\n                    opacity: pressed ? 0.9 : 1,\r\n                }\r\n            ]}\r\n            onPress={() =\u003e {\r\n                // Navigate to details (to be implemented or just expand)\r\n                // For now, maybe just show alert or expand\r\n                // router.push(`/complaints/${item._id}`);\r\n            }}\r\n        \u003e\r\n            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 12 }}\u003e\r\n                \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                    \u003cView style={{\r\n                        paddingHorizontal: 10,\r\n                        paddingVertical: 4,\r\n                        backgroundColor: colors.primary + \"15\",\r\n                        borderRadius: 8\r\n                    }}\u003e\r\n                        \u003cText style={{ color: colors.primary, fontSize: 11, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                            {item.category}\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                    \u003cView style={{\r\n                        paddingHorizontal: 10,\r\n                        paddingVertical: 4,\r\n                        backgroundColor: getStatusColor(item.status) + \"15\",\r\n                        borderRadius: 8\r\n                    }}\u003e\r\n                        \u003cText style={{ color: getStatusColor(item.status), fontSize: 11, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                            {item.status}\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n                \u003cText style={{ color: colors.textSecondary, fontSize: 12, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                    {new Date(item.createdAt).toLocaleDateString()}\r\n                \u003c/Text\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 6 }}\u003e\r\n                {item.title}\r\n            \u003c/Text\u003e\r\n            \u003cText style={{ color: colors.textSecondary, fontFamily: \"DMSans-Regular\", fontSize: 14, lineHeight: 20 }} numberOfLines={2}\u003e\r\n                {item.description}\r\n            \u003c/Text\u003e\r\n\r\n            {activeTab === \u0027inbox\u0027 \u0026\u0026 item.raisedBy \u0026\u0026 (\r\n                \u003cView style={{ marginTop: 12, paddingTop: 12, borderTopWidth: 1, borderTopColor: colors.border }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, fontSize: 12, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                        Raised by: \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e{item.raisedBy.name}\u003c/Text\u003e ({item.raisedBy.role})\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n            {activeTab === \u0027my_complaints\u0027 \u0026\u0026 item.visibility \u0026\u0026 (\r\n                \u003cView style={{ marginTop: 12, paddingTop: 12, borderTopWidth: 1, borderTopColor: colors.border }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, fontSize: 12, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                        Sent to: \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                            {item.visibility === \u0027teacher\u0027 ? \u0027Class Teacher\u0027 : item.visibility === \u0027super_admin\u0027 ? \u0027Management\u0027 : \u0027Headmaster\u0027}\r\n                        \u003c/Text\u003e\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n        \u003c/Pressable\u003e\r\n    );\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cView style={{ paddingHorizontal: 20, paddingTop: 20, paddingBottom: 10 }}\u003e\r\n                \u003cHeader title=\"Complaints\" subtitle=\"Feedback \u0026 Issues\" showBack /\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Tabs (Only for Teachers/Admins) */}\r\n            {userRole !== \u0027student\u0027 \u0026\u0026 (\r\n                \u003cView style={{ paddingHorizontal: 20, marginBottom: 16 }}\u003e\r\n                    \u003cView style={{ flexDirection: \"row\", backgroundColor: colors.cardBackground, borderRadius: 16, padding: 4, borderWidth: 1, borderColor: colors.border }}\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setActiveTab(\u0027inbox\u0027)}\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 12,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \u0027inbox\u0027 ? colors.primary + \"15\" : \"transparent\",\r\n                                borderRadius: 12,\r\n                            }}\r\n                        \u003e\r\n                            \u003cText style={{\r\n                                fontFamily: \"DMSans-Bold\",\r\n                                color: activeTab === \u0027inbox\u0027 ? colors.primary : colors.textSecondary,\r\n                                fontSize: 14\r\n                            }}\u003eInbox\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setActiveTab(\u0027my_complaints\u0027)}\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 12,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \u0027my_complaints\u0027 ? colors.primary + \"15\" : \"transparent\",\r\n                                borderRadius: 12,\r\n                            }}\r\n                        \u003e\r\n                            \u003cText style={{\r\n                                fontFamily: \"DMSans-Bold\",\r\n                                color: activeTab === \u0027my_complaints\u0027 ? colors.primary : colors.textSecondary,\r\n                                fontSize: 14\r\n                            }}\u003eMy Complaints\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n\r\n            {loading ? (\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} style={{ marginTop: 40 }} /\u003e\r\n            ) : (\r\n                \u003cFlatList\r\n                    data={complaints}\r\n                    renderItem={renderComplaintItem}\r\n                    keyExtractor={item =\u003e item._id}\r\n                    contentContainerStyle={{ paddingHorizontal: 20, paddingBottom: 100 }}\r\n                    refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} tintColor={colors.primary} /\u003e}\r\n                    showsVerticalScrollIndicator={false}\r\n                    ListEmptyComponent={() =\u003e (\r\n                        \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                            \u003cMaterialIcons name=\"inbox\" size={48} color={colors.textSecondary} /\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontFamily: \"DMSans-Medium\", fontSize: 16 }}\u003e\r\n                                No complaints found\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n                /\u003e\r\n            )}\r\n\r\n            {/* FAB to Raise Complaint */}\r\n            \u003cPressable\r\n                onPress={() =\u003e router.push(\"/complaints/raise\")}\r\n                style={({ pressed }) =\u003e [\r\n                    styles.fab,\r\n                    { opacity: pressed ? 0.9 : 1 }\r\n                ]}\r\n            \u003e\r\n                \u003cMaterialIcons name=\"add\" size={24} color=\"#fff\" /\u003e\r\n            \u003c/Pressable\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\complaints\\raise.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Alert\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  9,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  9,
                                           "endColumn":  10
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027setPriority\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  28,
                                           "column":  22,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  28,
                                           "endColumn":  33
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    TextInput,\r\n    Pressable,\r\n    ScrollView,\r\n    ActivityIndicator,\r\n    Alert\r\n} from \"react-native\";\r\nimport { useRouter } from \"expo-router\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useTheme } from \"../../theme\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport Header from \"../../components/Header\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nexport default function RaiseComplaintScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [title, setTitle] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");\r\n    const [category, setCategory] = useState(\"Academic\");\r\n    const [priority, setPriority] = useState(\"Medium\");\r\n    const [visibility, setVisibility] = useState(\"teacher\"); // \u0027teacher\u0027, \u0027admin\u0027 (for students)\r\n    const [userRole, setUserRole] = useState(null);\r\n\r\n\r\n    useEffect(() =\u003e {\r\n        checkUserRole();\r\n    }, []);\r\n\r\n    const checkUserRole = async () =\u003e {\r\n        const role = await AsyncStorage.getItem(\"userRole\");\r\n        setUserRole(role);\r\n        if (role === \u0027teacher\u0027) {\r\n            setCategory(\"Management\"); // Default for teachers\r\n            setVisibility(\"super_admin\");\r\n        }\r\n    };\r\n\r\n    const raiseComplaintMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/complaints`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Complaint raised successfully\", \"success\");\r\n            router.back();\r\n            // Invalidate queries if needed, but we don\u0027t have easy access to queryClient here unless we import it\r\n            // Assuming the list page will refetch on focus or we can rely on stale time\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to raise complaint\", \"error\")\r\n    });\r\n\r\n    const handleSubmit = () =\u003e {\r\n        if (!title.trim() || !description.trim()) {\r\n            showToast(\"Please fill all fields\", \"error\");\r\n            return;\r\n        }\r\n\r\n        raiseComplaintMutation.mutate({\r\n            title,\r\n            description,\r\n            category,\r\n            priority,\r\n            visibility\r\n        });\r\n    };\r\n\r\n    const categories = userRole === \u0027teacher\u0027\r\n        ? [\u0027Management\u0027, \u0027Facility\u0027, \u0027Other\u0027]\r\n        : [\u0027Academic\u0027, \u0027Facility\u0027, \u0027Transport\u0027, \u0027Discipline\u0027, \u0027Other\u0027];\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                \u003cHeader title=\"Raise Complaint\" showBack /\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView contentContainerStyle={{ padding: 16 }}\u003e\r\n                {/* Visibility Selection (For Students) */}\r\n                {userRole === \u0027student\u0027 \u0026\u0026 (\r\n                    \u003cView style={{ marginBottom: 24 }}\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eTo\u003c/Text\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 12 }}\u003e\r\n                            \u003cPressable\r\n                                onPress={() =\u003e setVisibility(\u0027teacher\u0027)}\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: 16,\r\n                                    backgroundColor: visibility === \u0027teacher\u0027 ? colors.primary + \"15\" : colors.cardBackground,\r\n                                    borderRadius: 12,\r\n                                    borderWidth: 1,\r\n                                    borderColor: visibility === \u0027teacher\u0027 ? colors.primary : \"transparent\",\r\n                                    alignItems: \"center\"\r\n                                }}\r\n                            \u003e\r\n                                \u003cMaterialIcons name=\"person\" size={24} color={visibility === \u0027teacher\u0027 ? colors.primary : colors.textSecondary} /\u003e\r\n                                \u003cText style={{\r\n                                    marginTop: 8,\r\n                                    fontFamily: \"DMSans-Bold\",\r\n                                    color: visibility === \u0027teacher\u0027 ? colors.primary : colors.textSecondary\r\n                                }}\u003eClass Teacher\u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n\r\n                            \u003cPressable\r\n                                onPress={() =\u003e setVisibility(\u0027admin\u0027)}\r\n                                style={{\r\n                                    flex: 1,\r\n                                    padding: 16,\r\n                                    backgroundColor: visibility === \u0027admin\u0027 ? colors.primary + \"15\" : colors.cardBackground,\r\n                                    borderRadius: 12,\r\n                                    borderWidth: 1,\r\n                                    borderColor: visibility === \u0027admin\u0027 ? colors.primary : \"transparent\",\r\n                                    alignItems: \"center\"\r\n                                }}\r\n                            \u003e\r\n                                \u003cMaterialIcons name=\"admin-panel-settings\" size={24} color={visibility === \u0027admin\u0027 ? colors.primary : colors.textSecondary} /\u003e\r\n                                \u003cText style={{\r\n                                    marginTop: 8,\r\n                                    fontFamily: \"DMSans-Bold\",\r\n                                    color: visibility === \u0027admin\u0027 ? colors.primary : colors.textSecondary\r\n                                }}\u003eHeadmaster\u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                )}\r\n\r\n                {/* For Teachers (Read Only) */}\r\n                {userRole === \u0027teacher\u0027 \u0026\u0026 (\r\n                    \u003cView style={{ marginBottom: 24 }}\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eTo\u003c/Text\u003e\r\n                        \u003cView style={{\r\n                            padding: 16,\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 12,\r\n                            flexDirection: \"row\",\r\n                            alignItems: \"center\",\r\n                            gap: 12\r\n                        }}\u003e\r\n                            \u003cMaterialIcons name=\"business\" size={24} color={colors.primary} /\u003e\r\n                            \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003eManagement (Super Admin)\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                )}\r\n\r\n                {/* Category */}\r\n                \u003cView style={{ marginBottom: 24 }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eCategory\u003c/Text\u003e\r\n                    \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                            {categories.map(cat =\u003e (\r\n                                \u003cPressable\r\n                                    key={cat}\r\n                                    onPress={() =\u003e setCategory(cat)}\r\n                                    style={{\r\n                                        paddingHorizontal: 16,\r\n                                        paddingVertical: 8,\r\n                                        backgroundColor: category === cat ? colors.primary : colors.cardBackground,\r\n                                        borderRadius: 20\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cText style={{\r\n                                        color: category === cat ? \"#fff\" : colors.textPrimary,\r\n                                        fontFamily: \"DMSans-Medium\"\r\n                                    }}\u003e{cat}\u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    \u003c/ScrollView\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Title */}\r\n                \u003cView style={{ marginBottom: 24 }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eSubject\u003c/Text\u003e\r\n                    \u003cTextInput\r\n                        value={title}\r\n                        onChangeText={setTitle}\r\n                        placeholder=\"Brief subject of the complaint\"\r\n                        placeholderTextColor={colors.textSecondary}\r\n                        style={{\r\n                            backgroundColor: colors.cardBackground,\r\n                            padding: 16,\r\n                            borderRadius: 12,\r\n                            color: colors.textPrimary,\r\n                            fontFamily: \"DMSans-Medium\",\r\n                            fontSize: 16\r\n                        }}\r\n                    /\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Description */}\r\n                \u003cView style={{ marginBottom: 32 }}\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontFamily: \"DMSans-Medium\" }}\u003eDescription\u003c/Text\u003e\r\n                    \u003cTextInput\r\n                        value={description}\r\n                        onChangeText={setDescription}\r\n                        placeholder=\"Detailed description...\"\r\n                        placeholderTextColor={colors.textSecondary}\r\n                        multiline\r\n                        numberOfLines={6}\r\n                        textAlignVertical=\"top\"\r\n                        style={{\r\n                            backgroundColor: colors.cardBackground,\r\n                            padding: 16,\r\n                            borderRadius: 12,\r\n                            color: colors.textPrimary,\r\n                            fontFamily: \"DMSans-Medium\",\r\n                            fontSize: 16,\r\n                            minHeight: 120\r\n                        }}\r\n                    /\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Submit Button */}\r\n                \u003cPressable\r\n                    onPress={handleSubmit}\r\n                    disabled={raiseComplaintMutation.isPending}\r\n                    style={{\r\n                        backgroundColor: colors.primary,\r\n                        padding: 18,\r\n                        borderRadius: 16,\r\n                        alignItems: \"center\",\r\n                        shadowColor: colors.primary,\r\n                        shadowOffset: { width: 0, height: 4 },\r\n                        shadowOpacity: 0.3,\r\n                        shadowRadius: 8,\r\n                        elevation: 4,\r\n                        opacity: raiseComplaintMutation.isPending ? 0.7 : 1\r\n                    }}\r\n                \u003e\r\n                    {raiseComplaintMutation.isPending ? (\r\n                        \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                    ) : (\r\n                        \u003cText style={{ color: \"#fff\", fontFamily: \"DMSans-Bold\", fontSize: 18 }}\u003eSubmit Complaint\u003c/Text\u003e\r\n                    )}\r\n                \u003c/Pressable\u003e\r\n\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\events.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  36,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  45
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useCallback\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  47,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  58
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027StyleSheet\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  68,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  78
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  6,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  6,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useTheme\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  18
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useToast\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  9,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  9,
                                           "endColumn":  18
                                       },
                                       {
                                           "ruleId":  "react/display-name",
                                           "severity":  2,
                                           "message":  "Component definition is missing display name",
                                           "line":  17,
                                           "column":  21,
                                           "nodeType":  "CallExpression",
                                           "messageId":  "noDisplayName",
                                           "endLine":  97,
                                           "endColumn":  3
                                       },
                                       {
                                           "ruleId":  "react/display-name",
                                           "severity":  2,
                                           "message":  "Component definition is missing display name",
                                           "line":  108,
                                           "column":  19,
                                           "nodeType":  "CallExpression",
                                           "messageId":  "noDisplayName",
                                           "endLine":  179,
                                           "endColumn":  3
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027navigation\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  182,
                                           "column":  9,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  182,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  190,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  190,
                                           "endColumn":  14
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  190,
                                           "column":  19,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  190,
                                           "endColumn":  28
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  198,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  198,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  204,
                                           "column":  37,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  204,
                                           "endColumn":  46
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  204,
                                           "column":  51,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  204,
                                           "endColumn":  60
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027showToast\u0027 is not defined.",
                                           "line":  207,
                                           "column":  7,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  207,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027showToast\u0027 is not defined.",
                                           "line":  210,
                                           "column":  25,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  210,
                                           "endColumn":  34
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  214,
                                           "column":  47,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  214,
                                           "endColumn":  56
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  214,
                                           "column":  61,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  214,
                                           "endColumn":  70
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027showToast\u0027 is not defined.",
                                           "line":  217,
                                           "column":  7,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  217,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027showToast\u0027 is not defined.",
                                           "line":  221,
                                           "column":  25,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  221,
                                           "endColumn":  34
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  225,
                                           "column":  45,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  225,
                                           "endColumn":  54
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027apiConfig\u0027 is not defined.",
                                           "line":  225,
                                           "column":  59,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  225,
                                           "endColumn":  68
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027showToast\u0027 is not defined.",
                                           "line":  228,
                                           "column":  7,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  228,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027showToast\u0027 is not defined.",
                                           "line":  230,
                                           "column":  25,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  230,
                                           "endColumn":  34
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027setRefreshFlag\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  233,
                                           "column":  23,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  233,
                                           "endColumn":  37
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027eventTitle\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  253,
                                           "column":  39,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  253,
                                           "endColumn":  49
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027setRefreshing\u0027 is not defined.",
                                           "line":  258,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  258,
                                           "endColumn":  18
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027setRefreshing\u0027 is not defined.",
                                           "line":  260,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  260,
                                           "endColumn":  18
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027styles\u0027 is not defined.",
                                           "line":  317,
                                           "column":  18,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  317,
                                           "endColumn":  24
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027refreshing\u0027 is not defined.",
                                           "line":  322,
                                           "column":  39,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  322,
                                           "endColumn":  49
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  322,
                                           "column":  82,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  322,
                                           "endColumn":  88
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  322,
                                           "column":  110,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  322,
                                           "endColumn":  116
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027styles\u0027 is not defined.",
                                           "line":  329,
                                           "column":  25,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  329,
                                           "endColumn":  31
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027month\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  333,
                                           "column":  31,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  333,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  344,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  344,
                                           "endColumn":  33
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027styles\u0027 is not defined.",
                                           "line":  366,
                                           "column":  29,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  366,
                                           "endColumn":  35
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  372,
                                           "column":  58,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  372,
                                           "endColumn":  64
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  373,
                                           "column":  41,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  373,
                                           "endColumn":  47
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  377,
                                           "column":  69,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  377,
                                           "endColumn":  75
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  378,
                                           "column":  41,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  378,
                                           "endColumn":  47
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027styles\u0027 is not defined.",
                                           "line":  388,
                                           "column":  31,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  388,
                                           "endColumn":  37
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  389,
                                           "column":  31,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  389,
                                           "endColumn":  37
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027styles\u0027 is not defined.",
                                           "line":  429,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  429,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027colors\u0027 is not defined.",
                                           "line":  433,
                                           "column":  54,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  433,
                                           "endColumn":  60
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  34,
                      "fatalErrorCount":  0,
                      "warningCount":  10,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useMemo, useEffect, useCallback } from \"react\";\r\nimport { ScrollView, View, Text, Pressable, Alert, RefreshControl, StyleSheet, ActivityIndicator } from \"react-native\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\n\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nimport { useTheme } from \"../theme\";\r\nimport { useToast } from \"../components/ToastProvider\";\r\nimport Header from \"../components/Header\";\r\nimport EventFormModal from \"../components/EventFormModal\";\r\nimport ModernCalendar from \"../components/ModernCalendar\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\n\r\n// Memoized day renderer component for performance\r\nconst DayRenderer = React.memo(({ date, state, marking, onDayPress, colors }) =\u003e {\r\n  const hasSchoolEvent = marking?.hasSchoolEvent;\r\n  const hasEvent = marking?.marked;\r\n  const isSelected = marking?.selected;\r\n  const isToday = state === \u0027today\u0027;\r\n\r\n  return (\r\n    \u003cPressable\r\n      onPress={() =\u003e onDayPress({ dateString: date.dateString })}\r\n      style={{\r\n        width: 40,\r\n        height: 40, // Reduced height for vertical compactness\r\n        justifyContent: \u0027center\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        position: \u0027relative\u0027,\r\n      }}\r\n    \u003e\r\n      {/* Circle border for school events */}\r\n      {hasSchoolEvent \u0026\u0026 (\r\n        \u003cView\r\n          style={{\r\n            position: \u0027absolute\u0027,\r\n            width: 42,\r\n            height: 42,\r\n            borderRadius: 20,\r\n            borderWidth: 2,\r\n            borderColor: \u0027#FFD700\u0027,\r\n          }}\r\n        /\u003e\r\n      )}\r\n\r\n      {/* Selected background */}\r\n      {isSelected \u0026\u0026 (\r\n        \u003cView\r\n          style={{\r\n            position: \u0027absolute\u0027,\r\n            width: 40,\r\n            height: 40,\r\n            borderRadius: 20,\r\n            backgroundColor: colors.primary,\r\n          }}\r\n        /\u003e\r\n      )}\r\n\r\n      {/* Date text */}\r\n      \u003cText\r\n        style={{\r\n          fontSize: 16,\r\n          fontWeight: isSelected ? \u0027600\u0027 : isToday ? \u0027600\u0027 : \u0027400\u0027,\r\n          color: isSelected ? colors.white : state === \u0027disabled\u0027 ? colors.textSecondary : colors.textPrimary,\r\n          zIndex: 1,\r\n        }}\r\n      \u003e\r\n        {date.day}\r\n      \u003c/Text\u003e\r\n\r\n      {/* Dots for events */}\r\n      {hasEvent \u0026\u0026 !isSelected \u0026\u0026 !hasSchoolEvent \u0026\u0026 (\r\n        \u003cView\r\n          style={{\r\n            position: \u0027absolute\u0027,\r\n            bottom: 2,\r\n            width: 4,\r\n            height: 4,\r\n            borderRadius: 2,\r\n            backgroundColor: colors.primary,\r\n          }}\r\n        /\u003e\r\n      )}\r\n    \u003c/Pressable\u003e\r\n  );\r\n}, (prevProps, nextProps) =\u003e {\r\n  // Custom comparison for memoization - only re-render if these props change\r\n  return (\r\n    prevProps.marking?.hasSchoolEvent === nextProps.marking?.hasSchoolEvent \u0026\u0026\r\n    prevProps.marking?.marked === nextProps.marking?.marked \u0026\u0026\r\n    prevProps.marking?.selected === nextProps.marking?.selected \u0026\u0026\r\n    prevProps.state === nextProps.state \u0026\u0026\r\n    prevProps.date?.dateString === nextProps.date?.dateString\r\n  );\r\n});\r\n\r\nimport { formatDate } from \"../utils/date\";\r\n\r\n// ... inside component\r\n// Helper to format dates for display in Indian format (DD-MM-YYYY)\r\nconst formatIndianDate = (dateInput) =\u003e {\r\n  return formatDate(dateInput);\r\n};\r\n\r\n// Memoized EventCard component with custom comparison for optimal performance\r\nconst EventCard = React.memo(({ event, styles, colors, isAdmin, onEdit, onDelete }) =\u003e {\r\n  // Sanitize event data to prevent rendering issues\r\n  const title = event.title?.trim() || \u0027Untitled Event\u0027;\r\n  const description = event.description?.trim();\r\n  const hasValidDescription = description \u0026\u0026 description.length \u003e 1;\r\n\r\n  return (\r\n    \u003cView style={styles.cardMinimal}\u003e\r\n      \u003cView style={{ flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027flex-start\u0027 }}\u003e\r\n        \u003cView style={{ flex: 1, marginRight: 12 }}\u003e\r\n          \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 8 }} numberOfLines={2}\u003e\r\n            {title}\r\n          \u003c/Text\u003e\r\n          {hasValidDescription \u0026\u0026 (\r\n            \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Regular\", color: colors.textSecondary, lineHeight: 20, marginBottom: 12 }} numberOfLines={2}\u003e\r\n              {description}\r\n            \u003c/Text\u003e\r\n          )}\r\n          {event.isSchoolEvent \u0026\u0026 (\r\n            \u003cView style={{\r\n              backgroundColor: \u0027#FFD700\u0027 + \u002720\u0027,\r\n              paddingVertical: 4,\r\n              paddingHorizontal: 12,\r\n              borderRadius: 20,\r\n              alignSelf: \u0027flex-start\u0027,\r\n              flexDirection: \u0027row\u0027,\r\n              alignItems: \u0027center\u0027\r\n            }}\u003e\r\n              \u003cMaterialIcons name=\"school\" size={14} color=\"#F59E0B\" style={{ marginRight: 4 }} /\u003e\r\n              \u003cText style={{ fontSize: 12, fontFamily: \"DMSans-Bold\", color: \"#F59E0B\" }}\u003eSchool Event\u003c/Text\u003e\r\n            \u003c/View\u003e\r\n          )}\r\n        \u003c/View\u003e\r\n        {isAdmin \u0026\u0026 (\r\n          \u003cView style={{ flexDirection: \u0027row\u0027, gap: 8 }}\u003e\r\n            \u003cPressable\r\n              onPress={onEdit}\r\n              style={({ pressed }) =\u003e ({\r\n                padding: 8,\r\n                backgroundColor: colors.background,\r\n                borderRadius: 8,\r\n                opacity: pressed ? 0.7 : 1,\r\n              })}\r\n            \u003e\r\n              \u003cMaterialIcons name=\"edit\" size={18} color={colors.textSecondary} /\u003e\r\n            \u003c/Pressable\u003e\r\n            \u003cPressable\r\n              onPress={onDelete}\r\n              style={({ pressed }) =\u003e ({\r\n                padding: 8,\r\n                backgroundColor: colors.error + \u002715\u0027,\r\n                borderRadius: 8,\r\n                opacity: pressed ? 0.7 : 1,\r\n              })}\r\n            \u003e\r\n              \u003cMaterialIcons name=\"delete-outline\" size={18} color={colors.error} /\u003e\r\n            \u003c/Pressable\u003e\r\n          \u003c/View\u003e\r\n        )}\r\n      \u003c/View\u003e\r\n    \u003c/View\u003e\r\n  );\r\n}, (prevProps, nextProps) =\u003e {\r\n  // Custom comparison - only re-render if these props change\r\n  return (\r\n    prevProps.event._id === nextProps.event._id \u0026\u0026\r\n    prevProps.event.title === nextProps.event.title \u0026\u0026\r\n    prevProps.event.description === nextProps.event.description \u0026\u0026\r\n    prevProps.event.isSchoolEvent === nextProps.event.isSchoolEvent \u0026\u0026\r\n    prevProps.isAdmin === nextProps.isAdmin\r\n  );\r\n});\r\n\r\nexport default function EventsScreen() {\r\n  const navigation = useNavigation();\r\n  const today = new Date().toISOString().split(\u0027T\u0027)[0];\r\n  const [selectedDate, setSelectedDate] = useState(today);\r\n  const [isEventFormVisible, setIsEventFormVisible] = useState(false);\r\n  const [editingEvent, setEditingEvent] = useState(null);\r\n  const queryClient = useQueryClient();\r\n  const { events: allEvents, isLoading: loading, refetch } = useApiQuery(\r\n    [\u0027events\u0027],\r\n    apiConfig.url(apiConfig.endpoints.events.list),\r\n    {\r\n      select: (data) =\u003e data.events || [],\r\n    }\r\n  );\r\n\r\n  const { data: userData } = useApiQuery(\r\n    [\u0027currentUser\u0027],\r\n    `${apiConfig.baseUrl}/auth/me`\r\n  );\r\n  const isAuthenticated = userData?.role === \u0027admin\u0027 || userData?.role === \u0027super admin\u0027;\r\n\r\n  // Mutations\r\n  const createEventMutation = useApiMutation({\r\n    mutationFn: createApiMutationFn(apiConfig.url(apiConfig.endpoints.events.create), \u0027POST\u0027),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027events\u0027] });\r\n      showToast(\u0027Event created successfully\u0027);\r\n      setIsEventFormVisible(false);\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \u0027Failed to create event\u0027)\r\n  });\r\n\r\n  const updateEventMutation = useApiMutation({\r\n    mutationFn: (data) =\u003e createApiMutationFn(apiConfig.url(apiConfig.endpoints.events.update(data._id)), \u0027PUT\u0027)(data),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027events\u0027] });\r\n      showToast(\u0027Event updated successfully\u0027);\r\n      setIsEventFormVisible(false);\r\n      setEditingEvent(null);\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \u0027Failed to update event\u0027)\r\n  });\r\n\r\n  const deleteEventMutation = useApiMutation({\r\n    mutationFn: (id) =\u003e createApiMutationFn(apiConfig.url(apiConfig.endpoints.events.delete(id)), \u0027DELETE\u0027)(),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027events\u0027] });\r\n      showToast(\u0027Event deleted successfully\u0027);\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \u0027Failed to delete event\u0027)\r\n  });\r\n\r\n  const [refreshFlag, setRefreshFlag] = useState(false);\r\n\r\n  const handleDateSelect = (day) =\u003e {\r\n    setSelectedDate(day.dateString);\r\n  };\r\n\r\n  // Modified handleEventCreated to toggle refreshFlag to trigger re-render\r\n  const handleEventSubmit = (eventData) =\u003e {\r\n    if (eventData._id) {\r\n      updateEventMutation.mutate(eventData);\r\n    } else {\r\n      createEventMutation.mutate(eventData);\r\n    }\r\n  };\r\n\r\n  const handleEditEvent = (eventItem) =\u003e {\r\n    setEditingEvent(eventItem);\r\n    setIsEventFormVisible(true);\r\n  };\r\n\r\n  const handleDeleteEvent = (eventId, eventTitle) =\u003e {\r\n    deleteEventMutation.mutate(eventId);\r\n  };\r\n\r\n  const onRefresh = async () =\u003e {\r\n    setRefreshing(true);\r\n    await refetch();\r\n    setRefreshing(false);\r\n  };\r\n\r\n  const filteredEvents = useMemo(\r\n    () =\u003e\r\n      selectedDate\r\n        ? allEvents\r\n          .filter((event) =\u003e {\r\n            if (!event || !event.date) return false;\r\n            try {\r\n              return new Date(event.date).toISOString().split(\u0027T\u0027)[0] === selectedDate;\r\n            } catch (e) {\r\n              return false;\r\n            }\r\n          })\r\n          .sort((a, b) =\u003e {\r\n            // School events first (true comes before false in descending order)\r\n            if (a.isSchoolEvent \u0026\u0026 !b.isSchoolEvent) return -1;\r\n            if (!a.isSchoolEvent \u0026\u0026 b.isSchoolEvent) return 1;\r\n            return 0;\r\n          })\r\n        : [],\r\n    [selectedDate, allEvents, refreshFlag]\r\n  );\r\n\r\n  const markedDates = useMemo(() =\u003e {\r\n    const dates = allEvents.reduce((acc, curr) =\u003e {\r\n      if (!curr || !curr.date) return acc;\r\n      try {\r\n        const date = new Date(curr.date).toISOString().split(\u0027T\u0027)[0];\r\n        if (!acc[date]) {\r\n          acc[date] = {\r\n            marked: true,\r\n            hasSchoolEvent: false,\r\n          };\r\n        }\r\n        // If any event on this date is a school event, flag it\r\n        if (curr.isSchoolEvent) {\r\n          acc[date].hasSchoolEvent = true;\r\n        }\r\n      } catch (e) {\r\n        // Ignore invalid dates\r\n      }\r\n      return acc;\r\n    }, {});\r\n\r\n    if (selectedDate) {\r\n      dates[selectedDate] = {\r\n        ...dates[selectedDate],\r\n        selected: true,\r\n      };\r\n    }\r\n\r\n    return dates;\r\n  }, [selectedDate, allEvents, refreshFlag]);\r\n\r\n  return (\r\n    \u003cView style={styles.container}\u003e\r\n      \u003cScrollView\r\n        style={{ flex: 1 }}\r\n        contentContainerStyle={{ paddingBottom: 100 }}\r\n        refreshControl={\r\n          \u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} tintColor={colors.primary} /\u003e\r\n        }\r\n        showsVerticalScrollIndicator={false}\r\n      \u003e\r\n        \u003cView style={{ paddingHorizontal: 20, paddingTop: 20 }}\u003e\r\n          \u003cHeader title=\"Events\" subtitle=\"View and manage events\" /\u003e\r\n\r\n          \u003cView style={[styles.card, { padding: 0, overflow: \u0027hidden\u0027, marginBottom: 24 }]}\u003e\r\n            \u003cModernCalendar\r\n              current={selectedDate}\r\n              onDayPress={handleDateSelect}\r\n              onMonthChange={(month) =\u003e {\r\n                // React Query handles caching automatically, no need to manually fetch range\r\n                // But if we want to prefetch, we could do it here\r\n              }}\r\n              markedDates={markedDates}\r\n              dayComponent={({ date, state, marking }) =\u003e (\r\n                \u003cDayRenderer\r\n                  date={date}\r\n                  state={state}\r\n                  marking={marking}\r\n                  onDayPress={handleDateSelect}\r\n                  colors={colors}\r\n                /\u003e\r\n              )}\r\n              style={{\r\n                borderRadius: 24,\r\n              }}\r\n              theme={{\r\n                calendarBackground: \u0027transparent\u0027,\r\n                \u0027stylesheet.day.basic\u0027: {\r\n                  base: {\r\n                    width: 40,\r\n                    height: 40,\r\n                    alignItems: \u0027center\u0027,\r\n                    justifyContent: \u0027center\u0027\r\n                  }\r\n                }\r\n              }}\r\n            /\u003e\r\n          \u003c/View\u003e\r\n\r\n          {selectedDate \u0026\u0026 (\r\n            \u003cView\u003e\r\n              \u003cText style={[styles.sectionTitle, { marginBottom: 16 }]}\u003e\r\n                Events on {formatIndianDate(selectedDate)}\r\n              \u003c/Text\u003e\r\n\r\n              {loading \u0026\u0026 filteredEvents.length === 0 ? (\r\n                \u003cView style={{ alignItems: \u0027center\u0027, padding: 20 }}\u003e\r\n                  \u003cActivityIndicator size=\"small\" color={colors.primary} /\u003e\r\n                  \u003cText style={{ color: colors.textSecondary, marginTop: 8, fontFamily: \"DMSans-Regular\" }}\u003eLoading events...\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n              ) : filteredEvents.length === 0 ? (\r\n                \u003cView style={{ alignItems: \u0027center\u0027, padding: 40, opacity: 0.6 }}\u003e\r\n                  \u003cMaterialIcons name=\"event-busy\" size={48} color={colors.textSecondary} /\u003e\r\n                  \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                    No events on this day\r\n                  \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n              ) : (\r\n                \u003cView style={{ gap: 12 }}\u003e\r\n                  {filteredEvents.map((item) =\u003e (\r\n                    \u003cEventCard\r\n                      key={item._id ?? item.id}\r\n                      event={{ ...item, date: formatIndianDate(item.date) }}\r\n                      styles={styles}\r\n                      colors={colors}\r\n                      isAdmin={isAuthenticated}\r\n                      onEdit={() =\u003e handleEditEvent(item)}\r\n                      onDelete={() =\u003e {\r\n                        Alert.alert(\r\n                          \"Delete Event\",\r\n                          `Are you sure you want to delete \"${item.title}\"? This action cannot be undone.`,\r\n                          [\r\n                            { text: \"Cancel\", style: \"cancel\" },\r\n                            { text: \"Delete\", style: \"destructive\", onPress: () =\u003e handleDeleteEvent(item._id, item.title) },\r\n                          ]\r\n                        );\r\n                      }}\r\n                    /\u003e\r\n                  ))}\r\n                \u003c/View\u003e\r\n              )}\r\n            \u003c/View\u003e\r\n          )}\r\n        \u003c/View\u003e\r\n\r\n        \u003cEventFormModal\r\n          isVisible={isEventFormVisible}\r\n          onClose={() =\u003e {\r\n            setIsEventFormVisible(false);\r\n            setEditingEvent(null);\r\n          }}\r\n          selectedDate={selectedDate}\r\n          onSuccess={(eventData) =\u003e {\r\n            handleEventSubmit(eventData);\r\n          }}\r\n          editItem={editingEvent}\r\n        /\u003e\r\n      \u003c/ScrollView\u003e\r\n\r\n      {/* FAB for Add Event - Outside ScrollView to stay fixed */}\r\n      {isAuthenticated \u0026\u0026 (\r\n        \u003cPressable\r\n          onPress={() =\u003e setIsEventFormVisible(true)}\r\n          style={({ pressed }) =\u003e ([\r\n            styles.fab,\r\n            { opacity: pressed ? 0.9 : 1 }\r\n          ])}\r\n        \u003e\r\n          \u003cMaterialIcons name=\"add\" size={24} color={colors.white} /\u003e\r\n        \u003c/Pressable\u003e\r\n      )}\r\n    \u003c/View\u003e\r\n  );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\history.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Pressable,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../theme\";\r\nimport { useApiQuery } from \"../hooks/useApi\";\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport { useToast } from \"../components/ToastProvider\";\r\nimport AppHeader from \"../components/Header\";\r\nimport { formatDate } from \"../utils/date\";\r\n\r\nexport default function HistoryScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Fetch User Role\r\n    const { data: userData } = useApiQuery(\r\n        [\u0027currentUser\u0027],\r\n        `${apiConfig.baseUrl}/auth/me`\r\n    );\r\n    const userRole = userData?.role;\r\n\r\n    // Fetch Exams (Only for students)\r\n    const { data: examsData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027studentExamHistory\u0027],\r\n        `${apiConfig.baseUrl}/exams/schedule/student`,\r\n        { enabled: userRole === \u0027student\u0027 }\r\n    );\r\n\r\n    const exams = (examsData || []).filter(exam =\u003e new Date(exam.date) \u003c new Date());\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        if (userRole === \u0027student\u0027) {\r\n            await refetch();\r\n        }\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const renderExams = () =\u003e {\r\n        if (userRole !== \u0027student\u0027) {\r\n            return (\r\n                \u003cView style={{ alignItems: \"center\", marginTop: 60, paddingHorizontal: 20 }}\u003e\r\n                    \u003cMaterialIcons name=\"info-outline\" size={64} color={colors.textSecondary} /\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, textAlign: \"center\" }}\u003e\r\n                        Exam history is available in the Reports section of Academic Year or per class in Exam Schedule.\r\n                    \u003c/Text\u003e\r\n                    \u003cPressable\r\n                        onPress={() =\u003e router.push(\"/admin/academic-year\")}\r\n                        style={{\r\n                            marginTop: 20,\r\n                            backgroundColor: colors.primary,\r\n                            paddingHorizontal: 20,\r\n                            paddingVertical: 10,\r\n                            borderRadius: 8\r\n                        }}\r\n                    \u003e\r\n                        \u003cText style={{ color: \"#fff\", fontWeight: \"600\" }}\u003eGo to Academic Year\u003c/Text\u003e\r\n                    \u003c/Pressable\u003e\r\n                \u003c/View\u003e\r\n            );\r\n        }\r\n\r\n        return (\r\n            \u003cView\u003e\r\n                {exams.length === 0 ? (\r\n                    \u003cView style={{ alignItems: \"center\", marginTop: 60, opacity: 0.6 }}\u003e\r\n                        \u003cMaterialIcons name=\"event-note\" size={64} color={colors.textSecondary} /\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                            No past exams found\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                ) : (\r\n                    exams.map((item) =\u003e (\r\n                        \u003cView\r\n                            key={item._id}\r\n                            style={{\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 16,\r\n                                marginBottom: 12,\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: { width: 0, height: 1 },\r\n                                shadowOpacity: 0.05,\r\n                                shadowRadius: 4,\r\n                                elevation: 1,\r\n                                borderLeftWidth: 4,\r\n                                borderLeftColor: colors.secondary\r\n                            }}\r\n                        \u003e\r\n                            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 8 }}\u003e\r\n                                \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, flex: 1 }}\u003e\r\n                                    {item.name}\r\n                                \u003c/Text\u003e\r\n                                \u003cView style={{ backgroundColor: colors.secondary + \"15\", paddingHorizontal: 8, paddingVertical: 4, borderRadius: 6 }}\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.secondary, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                                        {item.subject?.name}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 12, marginBottom: 12 }}\u003e\r\n                                \u003cView style={{ backgroundColor: colors.background, paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 }}\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, textTransform: \"capitalize\" }}\u003e\r\n                                        {item.type}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                {item.room \u0026\u0026 (\r\n                                    \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\u003e\r\n                                        \u003cMaterialIcons name=\"meeting-room\" size={14} color={colors.textSecondary} /\u003e\r\n                                        \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                            Room: {item.room}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", borderTopWidth: 1, borderTopColor: colors.border, paddingTop: 12 }}\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                    \u003cMaterialIcons name=\"class\" size={16} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ fontSize: 13, color: colors.textSecondary }}\u003e\r\n                                        {item.class?.name} {item.class?.section}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                    \u003cMaterialIcons name=\"event\" size={16} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ fontSize: 13, color: colors.textSecondary }}\u003e\r\n                                        {formatDate(item.date)}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    ))\r\n                )}\r\n            \u003c/View\u003e\r\n        );\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                \u003cAppHeader title=\"History\" subtitle={userRole === \u0027student\u0027 ? \"Past exams\" : \"Reports\"} showBack /\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ padding: 16, paddingTop: 0, paddingBottom: 100 }}\r\n            \u003e\r\n                {renderExams()}\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\index.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027StyleSheet\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  71,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  81
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { View, Text, ScrollView, Animated, StatusBar, RefreshControl, StyleSheet } from \"react-native\";\r\nimport { useState, useEffect } from \"react\";\r\nimport useFade from \"../hooks/useFade\";\r\nimport { useTheme } from \"../theme\";\r\nimport useSchoolInfo from \"../hooks/useSchoolInfo\";\r\nimport Header from \"../components/Header\";\r\n\r\nimport SchoolPhotoCarousel from \"../components/SchoolPhotoCarousel\";\r\n\r\nimport { useToast } from \"../components/ToastProvider\";\r\n\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport { useApiQuery } from \"../hooks/useApi\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\n// Global variable to track if welcome/latest notification has been shown in this session\r\nlet hasShownNotification = false;\r\n\r\nexport default function HomeScreen() {\r\n  const fadeAnim = useFade();\r\n  const { styles, colors, mode } = useTheme();\r\n  const { schoolInfo: SCHOOL, refresh } = useSchoolInfo();\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const { showToast } = useToast();\r\n\r\n  const onRefresh = async () =\u003e {\r\n    setRefreshing(true);\r\n    try {\r\n      await refresh(true);\r\n    } catch (err) {\r\n      // Suppress error\r\n    } finally {\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const { data: userData, isError } = useApiQuery(\r\n    [\u0027currentUser\u0027],\r\n    `${apiConfig.baseUrl}/auth/me`,\r\n    {\r\n      enabled: true,\r\n      staleTime: Infinity,\r\n      retry: false,\r\n    }\r\n  );\r\n\r\n  useEffect(() =\u003e {\r\n    if (isError) {\r\n      // If we can\u0027t fetch user details (likely 401/403), clear session and redirect\r\n      const handleLogout = async () =\u003e {\r\n        await AsyncStorage.multiRemove([\u0027@auth_token\u0027, \u0027@auth_user\u0027]);\r\n        // Optional: router.replace(\u0027/login\u0027); \r\n        // For now, we just clear storage so the UI reflects logged out state\r\n        // or let the user manually log in again.\r\n      };\r\n      handleLogout();\r\n    }\r\n  }, [isError]);\r\n\r\n  const { data: notificationsData } = useApiQuery(\r\n    [\u0027notifications\u0027, \u0027latest\u0027],\r\n    `${apiConfig.baseUrl}/notifications`\r\n  );\r\n\r\n  useEffect(() =\u003e {\r\n    if (notificationsData \u0026\u0026 !hasShownNotification \u0026\u0026 notificationsData.notifications \u0026\u0026 notificationsData.notifications.length \u003e 0) {\r\n      const latest = notificationsData.notifications[0];\r\n      showToast(latest.message || latest.title || \"Welcome back!\", \"info\");\r\n      hasShownNotification = true;\r\n    }\r\n  }, [notificationsData]);\r\n\r\n  return (\r\n    \u003cScrollView\r\n      style={styles.container}\r\n      contentContainerStyle={styles.contentPaddingBottom}\r\n      refreshControl={\r\n        \u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e\r\n      }\r\n    \u003e\r\n      \u003cStatusBar\r\n        barStyle={mode === \"dark\" ? \"light-content\" : \"dark-content\"}\r\n        backgroundColor={colors.background}\r\n      /\u003e\r\n\r\n      {/* Minimalist Header */}\r\n      \u003cHeader title={SCHOOL.name} subtitle={userData?.name ? `Welcome, ${userData.name.split(\u0027 \u0027)[0]}` : \"Welcome\"} variant=\"welcome\" /\u003e\r\n\r\n      {/* School Photo Carousel */}\r\n      \u003cSchoolPhotoCarousel photos={SCHOOL.photoUrl} /\u003e\r\n\r\n      {/* About Us Section */}\r\n      \u003cAnimated.View style={[styles.cardMinimal, { opacity: fadeAnim }]}\u003e\r\n        \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, marginBottom: 16 }}\u003e\r\n          \u003cView style={{\r\n            width: 40,\r\n            height: 40,\r\n            borderRadius: 12,\r\n            backgroundColor: colors.primary + \u002715\u0027,\r\n            justifyContent: \u0027center\u0027,\r\n            alignItems: \u0027center\u0027,\r\n            marginRight: 12\r\n          }}\u003e\r\n            \u003cMaterialIcons name=\"apartment\" size={24} color={colors.primary} /\u003e\r\n          \u003c/View\u003e\r\n          \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003eAbout Us\u003c/Text\u003e\r\n        \u003c/View\u003e\r\n        \u003cText style={[styles.text, { marginBottom: 0 }]}\u003e{SCHOOL.about}\u003c/Text\u003e\r\n      \u003c/Animated.View\u003e\r\n\r\n      {/* Branches Section */}\r\n      \u003cAnimated.View style={[styles.cardMinimal, { opacity: fadeAnim }]}\u003e\r\n        \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, marginBottom: 16 }}\u003e\r\n          \u003cView style={{\r\n            width: 40,\r\n            height: 40,\r\n            borderRadius: 12,\r\n            backgroundColor: colors.secondary + \u002715\u0027,\r\n            justifyContent: \u0027center\u0027,\r\n            alignItems: \u0027center\u0027,\r\n            marginRight: 12\r\n          }}\u003e\r\n            \u003cMaterialIcons name=\"school\" size={24} color={colors.secondary} /\u003e\r\n          \u003c/View\u003e\r\n          \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003eBranches\u003c/Text\u003e\r\n        \u003c/View\u003e\r\n\r\n        \u003cView style={{ gap: 12 }}\u003e\r\n          \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027flex-start\u0027 }}\u003e\r\n            \u003cView style={{\r\n              width: 6,\r\n              height: 6,\r\n              borderRadius: 3,\r\n              backgroundColor: colors.secondary,\r\n              marginTop: 8,\r\n              marginRight: 10\r\n            }} /\u003e\r\n            \u003cText style={[styles.text, { flex: 1, marginBottom: 0 }]}\u003e\r\n              \u003cText style={{ fontFamily: \"DMSans-Bold\" }}\u003eRenuka Nagar, Mangasuli\u003c/Text\u003e\r\n              {\"\\n\"}Kindergarten to 8th Standard (9th and 10th opening soon).\r\n            \u003c/Text\u003e\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027flex-start\u0027 }}\u003e\r\n            \u003cView style={{\r\n              width: 6,\r\n              height: 6,\r\n              borderRadius: 3,\r\n              backgroundColor: colors.secondary,\r\n              marginTop: 8,\r\n              marginRight: 10\r\n            }} /\u003e\r\n            \u003cText style={[styles.text, { flex: 1, marginBottom: 0 }]}\u003e\r\n              \u003cText style={{ fontFamily: \"DMSans-Bold\" }}\u003eUgar Khurd\u003c/Text\u003e\r\n              {\"\\n\"}Only Kindergarten.\r\n            \u003c/Text\u003e\r\n          \u003c/View\u003e\r\n        \u003c/View\u003e\r\n      \u003c/Animated.View\u003e\r\n\r\n      {/* Mission Section */}\r\n      \u003cAnimated.View style={[styles.cardMinimal, { opacity: fadeAnim }]}\u003e\r\n        \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, marginBottom: 16 }}\u003e\r\n          \u003cView style={{\r\n            width: 40,\r\n            height: 40,\r\n            borderRadius: 12,\r\n            backgroundColor: \u0027#FFD700\u0027 + \u002720\u0027,\r\n            justifyContent: \u0027center\u0027,\r\n            alignItems: \u0027center\u0027,\r\n            marginRight: 12\r\n          }}\u003e\r\n            \u003cMaterialIcons name=\"flag\" size={24} color=\"#F59E0B\" /\u003e\r\n          \u003c/View\u003e\r\n          \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003eOur Mission\u003c/Text\u003e\r\n        \u003c/View\u003e\r\n        \u003cText style={[styles.text, { marginBottom: 0 }]}\u003e{SCHOOL.mission}\u003c/Text\u003e\r\n      \u003c/Animated.View\u003e\r\n    \u003c/ScrollView\u003e\r\n  );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\login.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Image\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  118,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  123
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027mode\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  15,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  15,
                                           "endColumn":  31
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState } from \u0027react\u0027;\r\nimport { View, Text, TextInput, Pressable, ScrollView, StatusBar, ActivityIndicator, KeyboardAvoidingView, Platform, Image } from \u0027react-native\u0027;\r\nimport { MaterialIcons } from \u0027@expo/vector-icons\u0027;\r\nimport { useTheme } from \u0027../theme\u0027;\r\nimport AsyncStorage from \u0027@react-native-async-storage/async-storage\u0027;\r\nimport { useRouter } from \u0027expo-router\u0027;\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport { useApiMutation, createApiMutationFn } from \"../hooks/useApi\";\r\nimport { LinearGradient } from \u0027expo-linear-gradient\u0027;\r\n\r\nexport default function Login() {\r\n  const [phone, setPhone] = useState(\u0027\u0027);\r\n  const [password, setPassword] = useState(\u0027\u0027);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const { styles, colors, mode, gradients } = useTheme();\r\n  const router = useRouter();\r\n\r\n  const loginMutation = useApiMutation({\r\n    mutationFn: createApiMutationFn(apiConfig.url(apiConfig.endpoints.auth.login), \u0027POST\u0027),\r\n    onSuccess: async (data) =\u003e {\r\n      if (data.token) {\r\n        await AsyncStorage.setItem(\u0027@auth_token\u0027, data.token);\r\n        await AsyncStorage.setItem(\u0027@auth_user\u0027, JSON.stringify(data.user));\r\n        router.replace(\u0027/\u0027);\r\n      } else {\r\n        alert(data.message || \u0027Login failed\u0027);\r\n      }\r\n    },\r\n    onError: (error) =\u003e {\r\n      console.error(\u0027Login error:\u0027, error);\r\n      alert(error.message || \u0027Network error. Please try again.\u0027);\r\n    }\r\n  });\r\n\r\n  const handleLogin = () =\u003e {\r\n    if (!phone || !password) {\r\n      alert(\u0027Please enter both phone number and password.\u0027);\r\n      return;\r\n    }\r\n\r\n    loginMutation.mutate({ phone, password });\r\n  };\r\n\r\n  const loading = loginMutation.isPending;\r\n\r\n  return (\r\n    \u003cKeyboardAvoidingView\r\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n      style={{ flex: 1 }}\r\n    \u003e\r\n      \u003cStatusBar\r\n        barStyle=\"light-content\"\r\n        backgroundColor=\"transparent\"\r\n        translucent\r\n      /\u003e\r\n\r\n      \u003cLinearGradient\r\n        colors={gradients.primary}\r\n        style={{ flex: 1 }}\r\n        start={{ x: 0, y: 0 }}\r\n        end={{ x: 1, y: 1 }}\r\n      \u003e\r\n        \u003cScrollView\r\n          contentContainerStyle={{ flexGrow: 1, justifyContent: \u0027center\u0027, padding: 24 }}\r\n          showsVerticalScrollIndicator={false}\r\n        \u003e\r\n          \u003cView style={{ alignItems: \u0027center\u0027, marginBottom: 40 }}\u003e\r\n            \u003cView style={{\r\n              width: 80,\r\n              height: 80,\r\n              backgroundColor: \u0027rgba(255,255,255,0.2)\u0027,\r\n              borderRadius: 24,\r\n              justifyContent: \u0027center\u0027,\r\n              alignItems: \u0027center\u0027,\r\n              marginBottom: 24,\r\n              borderWidth: 1,\r\n              borderColor: \u0027rgba(255,255,255,0.3)\u0027\r\n            }}\u003e\r\n              \u003cMaterialIcons name=\"school\" size={40} color=\"#fff\" /\u003e\r\n            \u003c/View\u003e\r\n            \u003cText style={{\r\n              fontSize: 32,\r\n              fontFamily: \"DMSans-Bold\",\r\n              color: \"#fff\",\r\n              marginBottom: 8,\r\n              textAlign: \u0027center\u0027\r\n            }}\u003e\r\n              Welcome Back\r\n            \u003c/Text\u003e\r\n            \u003cText style={{\r\n              fontSize: 16,\r\n              fontFamily: \"DMSans-Regular\",\r\n              color: \"rgba(255,255,255,0.8)\",\r\n              textAlign: \u0027center\u0027\r\n            }}\u003e\r\n              Sign in to continue to your account\r\n            \u003c/Text\u003e\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={[styles.card, { padding: 32, borderRadius: 32 }]}\u003e\r\n            \u003cView style={{ marginBottom: 20 }}\u003e\r\n              \u003cText style={[styles.label, { marginLeft: 4, marginBottom: 8 }]}\u003ePhone Number\u003c/Text\u003e\r\n              \u003cView style={[styles.input, { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, paddingHorizontal: 16, height: 56 }]}\u003e\r\n                \u003cMaterialIcons name=\"phone\" size={20} color={colors.textSecondary} style={{ marginRight: 12 }} /\u003e\r\n                \u003cTextInput\r\n                  style={{ flex: 1, fontSize: 16, color: colors.textPrimary, fontFamily: \"DMSans-Regular\", height: \u0027100%\u0027 }}\r\n                  value={phone}\r\n                  onChangeText={setPhone}\r\n                  placeholder=\"Enter phone number\"\r\n                  placeholderTextColor={colors.textSecondary}\r\n                  keyboardType=\"number-pad\"\r\n                  maxLength={10}\r\n                  editable={!loading}\r\n                  autoComplete=\"tel\"\r\n                /\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cView style={{ marginBottom: 32 }}\u003e\r\n              \u003cText style={[styles.label, { marginLeft: 4, marginBottom: 8 }]}\u003ePassword\u003c/Text\u003e\r\n              \u003cView style={[styles.input, { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, paddingHorizontal: 16, height: 56 }]}\u003e\r\n                \u003cMaterialIcons name=\"lock\" size={20} color={colors.textSecondary} style={{ marginRight: 12 }} /\u003e\r\n                \u003cTextInput\r\n                  style={{ flex: 1, fontSize: 16, color: colors.textPrimary, fontFamily: \"DMSans-Regular\", height: \u0027100%\u0027 }}\r\n                  value={password}\r\n                  onChangeText={setPassword}\r\n                  placeholder=\"Enter password\"\r\n                  secureTextEntry={!showPassword}\r\n                  placeholderTextColor={colors.textSecondary}\r\n                  editable={!loading}\r\n                  autoCapitalize=\"none\"\r\n                  autoComplete=\"password\"\r\n                /\u003e\r\n                \u003cPressable onPress={() =\u003e setShowPassword(!showPassword)} style={{ padding: 4 }}\u003e\r\n                  \u003cMaterialIcons name={showPassword ? \"visibility\" : \"visibility-off\"} size={20} color={colors.textSecondary} /\u003e\r\n                \u003c/Pressable\u003e\r\n              \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cPressable\r\n              style={({ pressed }) =\u003e [\r\n                styles.buttonLarge,\r\n                {\r\n                  width: \"100%\",\r\n                  opacity: pressed || loading ? 0.8 : 1,\r\n                  transform: [{ scale: pressed ? 0.98 : 1 }]\r\n                }\r\n              ]}\r\n              onPress={handleLogin}\r\n              disabled={loading}\r\n            \u003e\r\n              {loading ? (\r\n                \u003cActivityIndicator color=\"#fff\" /\u003e\r\n              ) : (\r\n                \u003cText style={[styles.buttonText, { fontSize: 18 }]}\u003eSign In\u003c/Text\u003e\r\n              )}\r\n            \u003c/Pressable\u003e\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={{ marginTop: 24, alignItems: \u0027center\u0027 }}\u003e\r\n            \u003cText style={{ color: \u0027rgba(255,255,255,0.6)\u0027, fontSize: 14 }}\u003e\r\n              Protected by School Management System\r\n            \u003c/Text\u003e\r\n          \u003c/View\u003e\r\n        \u003c/ScrollView\u003e\r\n      \u003c/LinearGradient\u003e\r\n    \u003c/KeyboardAvoidingView\u003e\r\n  );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\menu.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Image\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  62,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  67
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Ionicons\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  4,
                                           "column":  38,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  4,
                                           "endColumn":  46
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027LinearGradient\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  10,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  10,
                                           "endColumn":  24
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027gradients\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  14,
                                           "column":  43,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  14,
                                           "endColumn":  52
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  15,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  15,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  5,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState } from \u0027react\u0027;\r\nimport { View, Text, ScrollView, Pressable, Switch, Linking, Image } from \u0027react-native\u0027;\r\nimport { useRouter } from \u0027expo-router\u0027;\r\nimport { MaterialIcons, FontAwesome, Ionicons } from \u0027@expo/vector-icons\u0027;\r\nimport { useTheme } from \u0027../theme\u0027;\r\nimport { useToast } from \u0027../components/ToastProvider\u0027;\r\nimport Header from \u0027../components/Header\u0027;\r\nimport AsyncStorage from \u0027@react-native-async-storage/async-storage\u0027;\r\nimport { SCHOOL } from \u0027../constants/basic-info\u0027;\r\nimport { LinearGradient } from \u0027expo-linear-gradient\u0027;\r\n\r\nexport default function MenuScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors, mode, toggle, gradients } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const handleLogout = async () =\u003e {\r\n        try {\r\n            await AsyncStorage.removeItem(\u0027@auth_token\u0027);\r\n            await AsyncStorage.removeItem(\u0027@auth_user\u0027);\r\n            router.replace(\u0027/login\u0027);\r\n        } catch (error) {\r\n            console.error(\u0027Logout failed:\u0027, error);\r\n        }\r\n    };\r\n\r\n    const handlePress = async (appUrl, fallbackUrl) =\u003e {\r\n        try {\r\n            const supported = await Linking.canOpenURL(appUrl);\r\n            if (supported) {\r\n                await Linking.openURL(appUrl);\r\n            } else {\r\n                await Linking.openURL(fallbackUrl);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Failed to open link:\", err);\r\n        }\r\n    };\r\n\r\n    const [user, setUser] = useState(null);\r\n\r\n    React.useEffect(() =\u003e {\r\n        loadUser();\r\n    }, []);\r\n\r\n    const loadUser = async () =\u003e {\r\n        try {\r\n            const storedUser = await AsyncStorage.getItem(\u0027@auth_user\u0027);\r\n            if (storedUser) {\r\n                setUser(JSON.parse(storedUser));\r\n            }\r\n        } catch (e) {\r\n            console.warn(\u0027Failed to load user\u0027, e);\r\n        }\r\n    };\r\n\r\n    const navigateToComplaints = () =\u003e {\r\n        router.push(\u0027/complaints\u0027);\r\n    };\r\n\r\n    const menuItems = [\r\n        {\r\n            title: \"Profile\",\r\n            subtitle: \"View \u0026 edit your profile\",\r\n            icon: \"person\",\r\n            route: \"/profile\",\r\n            color: \"#673AB7\"\r\n        },\r\n        {\r\n            title: \"Events\",\r\n            subtitle: \"School calendar \u0026 upcoming events\",\r\n            icon: \"event\",\r\n            route: \"/events\",\r\n            color: \"#4CAF50\"\r\n        },\r\n        {\r\n            title: \"News\",\r\n            subtitle: \"Latest announcements \u0026 updates\",\r\n            icon: \"article\",\r\n            route: \"/news\",\r\n            color: \"#2196F3\"\r\n        },\r\n        // Only show Complaints if user is logged in\r\n        ...(user ? [{\r\n            title: \"Complaints \u0026 Feedback\",\r\n            subtitle: \"Raise issues or share feedback\",\r\n            icon: \"feedback\",\r\n            action: navigateToComplaints,\r\n            color: \"#FF5722\"\r\n        }] : []),\r\n\r\n    ];\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cHeader title=\"Menu\" subtitle=\"Settings \u0026 More\" /\u003e\r\n\r\n            \u003cScrollView showsVerticalScrollIndicator={false} contentContainerStyle={{ paddingBottom: 100 }}\u003e\r\n\r\n                {/* Quick Actions Grid */}\r\n                \u003cView style={{ flexDirection: \u0027row\u0027, flexWrap: \u0027wrap\u0027, gap: 12, marginTop: 10 }}\u003e\r\n                    {menuItems.map((item, index) =\u003e (\r\n                        \u003cPressable\r\n                            key={index}\r\n                            onPress={() =\u003e item.route ? router.push(item.route) : item.action()}\r\n                            style={({ pressed }) =\u003e ({\r\n                                width: \u002748%\u0027,\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 20,\r\n                                padding: 16,\r\n                                marginBottom: 4,\r\n                                borderWidth: 1,\r\n                                borderColor: mode === \u0027dark\u0027 ? \u0027rgba(255,255,255,0.05)\u0027 : \u0027rgba(0,0,0,0.02)\u0027,\r\n                                shadowColor: colors.shadow,\r\n                                shadowOffset: { width: 0, height: 4 },\r\n                                shadowOpacity: mode === \u0027dark\u0027 ? 0.2 : 0.04,\r\n                                shadowRadius: 8,\r\n                                elevation: 2,\r\n                                opacity: pressed ? 0.9 : 1,\r\n                                transform: [{ scale: pressed ? 0.98 : 1 }]\r\n                            })}\r\n                        \u003e\r\n                            \u003cView style={{\r\n                                width: 48,\r\n                                height: 48,\r\n                                borderRadius: 14,\r\n                                backgroundColor: item.color + \u002715\u0027,\r\n                                alignItems: \u0027center\u0027,\r\n                                justifyContent: \u0027center\u0027,\r\n                                marginBottom: 12\r\n                            }}\u003e\r\n                                \u003cMaterialIcons name={item.icon} size={24} color={item.color} /\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e\r\n                                {item.title}\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Medium\", lineHeight: 16 }}\u003e\r\n                                {item.subtitle}\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    ))}\r\n                \u003c/View\u003e\r\n\r\n                {/* Settings Section */}\r\n                \u003cText style={[styles.sectionTitle, { marginTop: 24, marginLeft: 4 }]}\u003ePreferences\u003c/Text\u003e\r\n\r\n                \u003cView style={[styles.card, { padding: 0, overflow: \u0027hidden\u0027 }]}\u003e\r\n                    \u003cView style={{\r\n                        flexDirection: \u0027row\u0027,\r\n                        alignItems: \u0027center\u0027,\r\n                        justifyContent: \u0027space-between\u0027,\r\n                        padding: 20,\r\n                    }}\u003e\r\n                        \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, gap: 16 }}\u003e\r\n                            \u003cView style={{\r\n                                width: 40,\r\n                                height: 40,\r\n                                borderRadius: 12,\r\n                                backgroundColor: colors.primary + \u002715\u0027,\r\n                                alignItems: \u0027center\u0027,\r\n                                justifyContent: \u0027center\u0027\r\n                            }}\u003e\r\n                                \u003cMaterialIcons name={mode === \u0027dark\u0027 ? \"dark-mode\" : \"light-mode\"} size={22} color={colors.primary} /\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView\u003e\r\n                                \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                    Dark Mode\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 13, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    {mode === \u0027dark\u0027 ? \u0027Easy on the eyes\u0027 : \u0027Bright and clear\u0027}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cSwitch\r\n                            value={mode === \u0027dark\u0027}\r\n                            onValueChange={toggle}\r\n                            trackColor={{ false: \"#e0e0e0\", true: colors.primary + \u002760\u0027 }}\r\n                            thumbColor={mode === \u0027dark\u0027 ? colors.primary : \"#f4f3f4\"}\r\n                        /\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Socials Section */}\r\n                \u003cText style={[styles.sectionTitle, { marginTop: 24, marginLeft: 4 }]}\u003eFollow Us\u003c/Text\u003e\r\n                \u003cView style={[styles.card, { flexDirection: \u0027row\u0027, justifyContent: \u0027space-around\u0027, paddingVertical: 24 }]}\u003e\r\n                    \u003cPressable\r\n                        onPress={() =\u003e handlePress(SCHOOL.socials.youtubeAppUrl, SCHOOL.socials.youtube)}\r\n                        style={({ pressed }) =\u003e ({ alignItems: \u0027center\u0027, opacity: pressed ? 0.7 : 1 })}\r\n                    \u003e\r\n                        \u003cView style={{ width: 56, height: 56, borderRadius: 18, backgroundColor: \u0027#FF000015\u0027, alignItems: \u0027center\u0027, justifyContent: \u0027center\u0027, marginBottom: 8 }}\u003e\r\n                            \u003cFontAwesome name=\"youtube-play\" size={28} color=\"#FF0000\" /\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cText style={{ fontSize: 12, fontFamily: \"DMSans-Medium\", color: colors.textSecondary }}\u003eYouTube\u003c/Text\u003e\r\n                    \u003c/Pressable\u003e\r\n\r\n                    \u003cPressable\r\n                        onPress={() =\u003e handlePress(SCHOOL.socials.instagramAppUrl, SCHOOL.socials.instagram)}\r\n                        style={({ pressed }) =\u003e ({ alignItems: \u0027center\u0027, opacity: pressed ? 0.7 : 1 })}\r\n                    \u003e\r\n                        \u003cView style={{ width: 56, height: 56, borderRadius: 18, backgroundColor: \u0027#C1358415\u0027, alignItems: \u0027center\u0027, justifyContent: \u0027center\u0027, marginBottom: 8 }}\u003e\r\n                            \u003cFontAwesome name=\"instagram\" size={28} color=\"#C13584\" /\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cText style={{ fontSize: 12, fontFamily: \"DMSans-Medium\", color: colors.textSecondary }}\u003eInstagram\u003c/Text\u003e\r\n                    \u003c/Pressable\u003e\r\n\r\n                    \u003cPressable\r\n                        onPress={() =\u003e handlePress(SCHOOL.mapAppUrl, SCHOOL.mapUrl)}\r\n                        style={({ pressed }) =\u003e ({ alignItems: \u0027center\u0027, opacity: pressed ? 0.7 : 1 })}\r\n                    \u003e\r\n                        \u003cView style={{ width: 56, height: 56, borderRadius: 18, backgroundColor: colors.primary + \u002715\u0027, alignItems: \u0027center\u0027, justifyContent: \u0027center\u0027, marginBottom: 8 }}\u003e\r\n                            \u003cMaterialIcons name=\"location-on\" size={28} color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cText style={{ fontSize: 12, fontFamily: \"DMSans-Medium\", color: colors.textSecondary }}\u003eLocation\u003c/Text\u003e\r\n                    \u003c/Pressable\u003e\r\n                \u003c/View\u003e\r\n\r\n                {/* Logout / Login Button */}\r\n                {user ? (\r\n                    \u003cPressable\r\n                        onPress={handleLogout}\r\n                        style={({ pressed }) =\u003e ({\r\n                            marginTop: 24,\r\n                            backgroundColor: colors.error + \u002710\u0027,\r\n                            borderRadius: 16,\r\n                            padding: 18,\r\n                            flexDirection: \u0027row\u0027,\r\n                            alignItems: \u0027center\u0027,\r\n                            justifyContent: \u0027center\u0027,\r\n                            gap: 10,\r\n                            borderWidth: 1,\r\n                            borderColor: colors.error + \u002720\u0027,\r\n                            opacity: pressed ? 0.8 : 1\r\n                        })}\r\n                    \u003e\r\n                        \u003cMaterialIcons name=\"logout\" size={22} color={colors.error} /\u003e\r\n                        \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.error }}\u003e\r\n                            Log Out\r\n                        \u003c/Text\u003e\r\n                    \u003c/Pressable\u003e\r\n                ) : (\r\n                    \u003cPressable\r\n                        onPress={() =\u003e router.replace(\u0027/login\u0027)}\r\n                        style={({ pressed }) =\u003e ({\r\n                            marginTop: 24,\r\n                            backgroundColor: colors.primary,\r\n                            borderRadius: 16,\r\n                            padding: 18,\r\n                            flexDirection: \u0027row\u0027,\r\n                            alignItems: \u0027center\u0027,\r\n                            justifyContent: \u0027center\u0027,\r\n                            gap: 10,\r\n                            opacity: pressed ? 0.9 : 1,\r\n                            shadowColor: colors.primary,\r\n                            shadowOffset: { width: 0, height: 4 },\r\n                            shadowOpacity: 0.3,\r\n                            shadowRadius: 8,\r\n                            elevation: 4,\r\n                        })}\r\n                    \u003e\r\n                        \u003cMaterialIcons name=\"login\" size={22} color=\"#fff\" /\u003e\r\n                        \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                            Log In\r\n                        \u003c/Text\u003e\r\n                    \u003c/Pressable\u003e\r\n                )}\r\n\r\n                \u003cText style={{ textAlign: \u0027center\u0027, marginTop: 24, color: colors.textSecondary, fontSize: 12, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                    App Version 1.0.0 â€¢ Build 2024\r\n                \u003c/Text\u003e\r\n\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\news.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useFocusEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  25,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  39
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  7,
                                           "column":  20,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  7,
                                           "endColumn":  29
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027apiFetch\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  10,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  10,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027navigation\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  16,
                                           "column":  9,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  16,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027formatDate\u0027 is not defined.",
                                           "line":  86,
                                           "column":  14,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  86,
                                           "endColumn":  24
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027newsTitle\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  163,
                                           "column":  37,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  163,
                                           "endColumn":  46
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  6,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import { View, Text, FlatList, Pressable, Alert, RefreshControl, Linking } from \"react-native\";\r\nimport { useNavigation, useFocusEffect } from \"@react-navigation/native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useTheme } from \"../theme\";\r\nimport Header from \"../components/Header\";\r\nimport NewsFormModal from \"../components/NewsFormModal\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport apiFetch from \"../utils/apiFetch\";\r\nimport { useToast } from \"../components/ToastProvider\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\n\r\nexport default function NewsScreen() {\r\n  const navigation = useNavigation();\r\n  const { styles, colors } = useTheme();\r\n  const { showToast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [editingNews, setEditingNews] = useState(null);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n\r\n  // Fetch News\r\n  const { data: newsData, refetch } = useApiQuery(\r\n    [\u0027news\u0027],\r\n    apiConfig.url(apiConfig.endpoints.news.list)\r\n  );\r\n  const news = newsData?.news || [];\r\n\r\n  // Check Auth \u0026 Admin\r\n  const { data: userData } = useApiQuery(\r\n    [\u0027currentUser\u0027],\r\n    `${apiConfig.baseUrl}/auth/me`\r\n  );\r\n  const isAdmin = userData?.role === \u0027admin\u0027 || userData?.role === \u0027super admin\u0027;\r\n\r\n  // Mutations\r\n  const createNewsMutation = useApiMutation({\r\n    mutationFn: createApiMutationFn(apiConfig.url(apiConfig.endpoints.news.create), \u0027POST\u0027),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027news\u0027] });\r\n      showToast(\u0027News created successfully\u0027);\r\n      setIsModalVisible(false);\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \u0027Failed to create news\u0027)\r\n  });\r\n\r\n  const updateNewsMutation = useApiMutation({\r\n    mutationFn: (data) =\u003e createApiMutationFn(apiConfig.url(apiConfig.endpoints.news.update(data._id)), \u0027PUT\u0027)(data),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027news\u0027] });\r\n      showToast(\u0027News updated successfully\u0027);\r\n      setIsModalVisible(false);\r\n      setEditingNews(null);\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \u0027Failed to update news\u0027)\r\n  });\r\n\r\n  const deleteNewsMutation = useApiMutation({\r\n    mutationFn: (id) =\u003e createApiMutationFn(apiConfig.url(apiConfig.endpoints.news.delete(id)), \u0027DELETE\u0027)(),\r\n    onSuccess: () =\u003e {\r\n      queryClient.invalidateQueries({ queryKey: [\u0027news\u0027] });\r\n      showToast(\u0027News deleted successfully\u0027);\r\n    },\r\n    onError: (error) =\u003e showToast(error.message || \u0027Failed to delete news\u0027)\r\n  });\r\n\r\n  // Memoize renderItem BEFORE early returns to maintain hooks order\r\n  const renderNewsItem = useCallback(({ item }) =\u003e (\r\n    \u003cView style={styles.cardMinimal}\u003e\r\n      \u003cView style={{ flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027flex-start\u0027, marginBottom: 12 }}\u003e\r\n        \u003cView style={{ flex: 1, marginRight: 12 }}\u003e\r\n          {item.url ? (\r\n            \u003cPressable onPress={() =\u003e Linking.openURL(item.url)}\u003e\r\n              \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.primary, marginBottom: 8, textDecorationLine: \u0027underline\u0027 }} numberOfLines={2}\u003e\r\n                {item.title}\r\n              \u003c/Text\u003e\r\n            \u003c/Pressable\u003e\r\n          ) : (\r\n            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 8 }} numberOfLines={2}\u003e\r\n              {item.title}\r\n            \u003c/Text\u003e\r\n          )}\r\n          \u003cText style={{ fontSize: 13, fontFamily: \"DMSans-Medium\", color: colors.textSecondary }}\u003e\r\n            {formatDate(item.creationDate)}\r\n          \u003c/Text\u003e\r\n        \u003c/View\u003e\r\n        {item.isPrivate \u0026\u0026 (\r\n          \u003cView style={{ backgroundColor: colors.background, paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 }}\u003e\r\n            \u003cText style={{ fontSize: 10, fontFamily: \"DMSans-Bold\", color: colors.textSecondary, textTransform: \"uppercase\" }}\u003e\r\n              Private\r\n            \u003c/Text\u003e\r\n          \u003c/View\u003e\r\n        )}\r\n      \u003c/View\u003e\r\n\r\n      \u003cText style={{ fontSize: 15, fontFamily: \"DMSans-Regular\", color: colors.textSecondary, lineHeight: 22 }} numberOfLines={3}\u003e\r\n        {item.description}\r\n      \u003c/Text\u003e\r\n\r\n      {item.url \u0026\u0026 (\r\n        \u003cPressable onPress={() =\u003e {\r\n          Linking.openURL(item.url).catch(err =\u003e {\r\n            console.error(\"Failed to open URL:\", err);\r\n            showToast(\u0027Failed to open link\u0027);\r\n          });\r\n        }} style={{ marginTop: 12 }}\u003e\r\n          \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-SemiBold\", color: colors.primary }}\u003eðŸ”— Open Link\u003c/Text\u003e\r\n        \u003c/Pressable\u003e\r\n      )}\r\n\r\n      {isAdmin \u0026\u0026 (\r\n        \u003cView style={{ flexDirection: \u0027row\u0027, justifyContent: \u0027flex-end\u0027, marginTop: 12, gap: 8, borderTopWidth: 1, borderTopColor: colors.border, paddingTop: 12 }}\u003e\r\n          \u003cPressable\r\n            onPress={() =\u003e handleEditNews(item)}\r\n            style={({ pressed }) =\u003e ({\r\n              padding: 8,\r\n              backgroundColor: colors.background,\r\n              borderRadius: 8,\r\n              opacity: pressed ? 0.7 : 1,\r\n            })}\r\n          \u003e\r\n            \u003cMaterialIcons name=\"edit\" size={18} color={colors.textSecondary} /\u003e\r\n          \u003c/Pressable\u003e\r\n          \u003cPressable\r\n            onPress={() =\u003e {\r\n              Alert.alert(\r\n                \"Delete News\",\r\n                `Are you sure you want to delete \"${item.title}\"? This action cannot be undone.`,\r\n                [\r\n                  { text: \"Cancel\", style: \"cancel\" },\r\n                  { text: \"Delete\", style: \"destructive\", onPress: () =\u003e handleDeleteNews(item._id, item.title) },\r\n                ]\r\n              );\r\n            }}\r\n            style={({ pressed }) =\u003e ({\r\n              padding: 8,\r\n              backgroundColor: colors.error + \u002715\u0027,\r\n              borderRadius: 8,\r\n              opacity: pressed ? 0.7 : 1,\r\n            })}\r\n          \u003e\r\n            \u003cMaterialIcons name=\"delete-outline\" size={18} color={colors.error} /\u003e\r\n          \u003c/Pressable\u003e\r\n        \u003c/View\u003e\r\n      )}\r\n    \u003c/View\u003e\r\n  ), [styles.cardMinimal, colors, isAdmin, showToast]); // Removed handleEditNews, handleDeleteNews from deps\r\n\r\n  // NO LOADING STATE - just show empty state if no data\r\n  // Removed: if (loading \u0026\u0026 news.length === 0) return \u003cLoadingView /\u003e;\r\n  // Removed: if (error \u0026\u0026 news.length === 0) return \u003cErrorView /\u003e;\r\n\r\n  const handleNewsSubmit = (newsData) =\u003e {\r\n    if (newsData._id) {\r\n      updateNewsMutation.mutate(newsData);\r\n    } else {\r\n      createNewsMutation.mutate(newsData);\r\n    }\r\n  };\r\n\r\n  const handleDeleteNews = (newsId, newsTitle) =\u003e {\r\n    deleteNewsMutation.mutate(newsId);\r\n  };\r\n\r\n  const handleEditNews = (newsItem) =\u003e {\r\n    setEditingNews(newsItem);\r\n    setIsModalVisible(true);\r\n  };\r\n\r\n  const onRefresh = async () =\u003e {\r\n    setRefreshing(true);\r\n    await refetch();\r\n    setRefreshing(false);\r\n  };\r\n\r\n  return (\r\n    \u003cView style={styles.container}\u003e\r\n      \u003cView style={{ paddingHorizontal: 20, paddingTop: 20, paddingBottom: 10 }}\u003e\r\n        \u003cHeader title=\"Latest News\" subtitle=\"Stay updated with announcements\" /\u003e\r\n      \u003c/View\u003e\r\n\r\n      \u003cFlatList\r\n        data={news}\r\n        keyExtractor={(item) =\u003e item._id || item.id || Math.random().toString()}\r\n        refreshControl={\r\n          \u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} tintColor={colors.primary} /\u003e\r\n        }\r\n        ListEmptyComponent={\r\n          \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n            \u003cMaterialIcons name=\"article\" size={48} color={colors.textSecondary} /\u003e\r\n            \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, fontFamily: \"DMSans-Medium\" }}\u003e\r\n              No news available right now\r\n            \u003c/Text\u003e\r\n          \u003c/View\u003e\r\n        }\r\n        renderItem={renderNewsItem}\r\n        contentContainerStyle={{ paddingHorizontal: 20, paddingBottom: 100 }}\r\n        showsVerticalScrollIndicator={false}\r\n        // Performance optimizations\r\n        removeClippedSubviews={true}\r\n        maxToRenderPerBatch={10}\r\n        updateCellsBatchingPeriod={50}\r\n        windowSize={10}\r\n      /\u003e\r\n\r\n      {/* FAB for Add News */}\r\n      {isAdmin \u0026\u0026 (\r\n        \u003cPressable\r\n          onPress={() =\u003e setIsModalVisible(true)}\r\n          style={({ pressed }) =\u003e ([\r\n            styles.fab,\r\n            { opacity: pressed ? 0.9 : 1 }\r\n          ])}\r\n        \u003e\r\n          \u003cMaterialIcons name=\"add\" size={24} color={colors.white} /\u003e\r\n        \u003c/Pressable\u003e\r\n      )}\r\n\r\n      \u003cNewsFormModal\r\n        isVisible={isModalVisible}\r\n        onClose={() =\u003e {\r\n          setIsModalVisible(false);\r\n          setEditingNews(null);\r\n        }}\r\n        onSubmit={handleNewsSubmit}\r\n        editItem={editingNews}\r\n      /\u003e\r\n    \u003c/View\u003e\r\n  );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\notifications.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  13,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  13,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  24,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  24,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027setRefreshing\u0027 is not defined.",
                                           "line":  79,
                                           "column":  9,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  79,
                                           "endColumn":  22
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027setRefreshing\u0027 is not defined.",
                                           "line":  81,
                                           "column":  9,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  81,
                                           "endColumn":  22
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027refreshing\u0027 is not defined.",
                                           "line":  126,
                                           "column":  61,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  126,
                                           "endColumn":  71
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  3,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Pressable,\r\n    Switch,\r\n    Modal\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../theme\";\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { useToast } from \"../components/ToastProvider\";\r\nimport Header from \"../components/Header\";\r\n\r\nexport default function NotificationsScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [showSettings, setShowSettings] = useState(false);\r\n    const queryClient = useQueryClient();\r\n\r\n    // Fetch Notifications\r\n    const { data: notificationsData, isLoading: loadingNotifications, refetch: refetchNotifications } = useApiQuery(\r\n        [\u0027notifications\u0027],\r\n        `${apiConfig.baseUrl}/notifications`\r\n    );\r\n    const notifications = notificationsData?.notifications || [];\r\n\r\n    // Fetch Preferences\r\n    const { data: userData } = useApiQuery(\r\n        [\u0027currentUser\u0027],\r\n        `${apiConfig.baseUrl}/auth/me`\r\n    );\r\n    const preferences = userData?.notificationPreferences || {\r\n        homework: true,\r\n        exam: true,\r\n        fee: true,\r\n        event: true,\r\n        general: true\r\n    };\r\n\r\n    // Mark as read mutation\r\n    const markReadMutation = useApiMutation({\r\n        mutationFn: (id) =\u003e createApiMutationFn(`${apiConfig.baseUrl}/notifications/${id}/read`, \u0027PUT\u0027)(),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027notifications\u0027] });\r\n        }\r\n    });\r\n\r\n    // Update preferences mutation\r\n    const updatePreferencesMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/notifications/preferences`, \u0027PUT\u0027),\r\n        onSuccess: () =\u003e {\r\n            queryClient.invalidateQueries({ queryKey: [\u0027currentUser\u0027] });\r\n        },\r\n        onError: () =\u003e {\r\n            showToast(\"Failed to update settings\", \"error\");\r\n        }\r\n    });\r\n\r\n    const markAsRead = (id) =\u003e {\r\n        markReadMutation.mutate(id);\r\n    };\r\n\r\n    const togglePreference = (key) =\u003e {\r\n        const newPreferences = { ...preferences, [key]: !preferences[key] };\r\n        updatePreferencesMutation.mutate({ preferences: newPreferences });\r\n    };\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await Promise.all([refetchNotifications(), queryClient.invalidateQueries({ queryKey: [\u0027currentUser\u0027] })]);\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const loading = loadingNotifications \u0026\u0026 !notifications.length;\r\n\r\n\r\n\r\n    const getIcon = (type) =\u003e {\r\n        switch (type) {\r\n            case \u0027Homework\u0027: return \u0027assignment\u0027;\r\n            case \u0027Exam\u0027: return \u0027event-note\u0027;\r\n            case \u0027Fee\u0027: return \u0027attach-money\u0027;\r\n            case \u0027Emergency\u0027: return \u0027warning\u0027;\r\n            default: return \u0027notifications\u0027;\r\n        }\r\n    };\r\n\r\n    const getColor = (type) =\u003e {\r\n        switch (type) {\r\n            case \u0027Homework\u0027: return \u0027#9C27B0\u0027;\r\n            case \u0027Exam\u0027: return \u0027#E91E63\u0027;\r\n            case \u0027Fee\u0027: return \u0027#FF5722\u0027;\r\n            case \u0027Emergency\u0027: return \u0027#F44336\u0027;\r\n            default: return colors.primary;\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cView style={{ padding: 16, paddingTop: 24, flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}\u003e\r\n                \u003cHeader title=\"Notifications\" showBack /\u003e\r\n                \u003cPressable onPress={() =\u003e setShowSettings(true)} style={{ padding: 8 }}\u003e\r\n                    \u003cMaterialIcons name=\"settings\" size={24} color={colors.textPrimary} /\u003e\r\n                \u003c/Pressable\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ padding: 16, paddingBottom: 100 }}\r\n            \u003e\r\n                {notifications.length === 0 ? (\r\n                    \u003cView style={{ alignItems: \"center\", marginTop: 60, opacity: 0.6 }}\u003e\r\n                        \u003cMaterialIcons name=\"notifications-none\" size={64} color={colors.textSecondary} /\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                            No notifications yet\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                ) : (\r\n                    notifications.map((notif) =\u003e (\r\n                        \u003cPressable\r\n                            key={notif._id}\r\n                            onPress={() =\u003e !notif.read \u0026\u0026 markAsRead(notif._id)}\r\n                            style={{\r\n                                backgroundColor: notif.read ? colors.background : colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 16,\r\n                                marginBottom: 12,\r\n                                flexDirection: \"row\",\r\n                                gap: 16,\r\n                                borderLeftWidth: 4,\r\n                                borderLeftColor: getColor(notif.type),\r\n                                opacity: notif.read ? 0.7 : 1,\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: { width: 0, height: 1 },\r\n                                shadowOpacity: notif.read ? 0 : 0.05,\r\n                                shadowRadius: 2,\r\n                                elevation: notif.read ? 0 : 1,\r\n                            }}\r\n                        \u003e\r\n                            \u003cView style={{\r\n                                backgroundColor: getColor(notif.type) + \"15\",\r\n                                padding: 10,\r\n                                borderRadius: 50,\r\n                                height: 44,\r\n                                width: 44,\r\n                                justifyContent: \"center\",\r\n                                alignItems: \"center\"\r\n                            }}\u003e\r\n                                \u003cMaterialIcons name={getIcon(notif.type)} size={24} color={getColor(notif.type)} /\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flex: 1 }}\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 4 }}\u003e\r\n                                    \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, flex: 1 }}\u003e\r\n                                        {notif.title || \"Notification\"}\r\n                                    \u003c/Text\u003e\r\n                                    {!notif.read \u0026\u0026 (\r\n                                        \u003cView style={{ height: 8, width: 8, borderRadius: 4, backgroundColor: colors.primary }} /\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontSize: 14, marginBottom: 8 }}\u003e\r\n                                    {notif.message}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                    {new Date(notif.createdAt).toLocaleDateString()} â€¢ {new Date(notif.createdAt).toLocaleTimeString([], { hour: \u00272-digit\u0027, minute: \u00272-digit\u0027 })}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/Pressable\u003e\r\n                    ))\r\n                )}\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* Settings Modal */}\r\n            \u003cModal\r\n                visible={showSettings}\r\n                animationType=\"slide\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e setShowSettings(false)}\r\n            \u003e\r\n                \u003cView style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}\u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderTopLeftRadius: 24, borderTopRightRadius: 24, padding: 24 }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 24 }}\u003e\r\n                            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                Notification Settings\r\n                            \u003c/Text\u003e\r\n                            \u003cPressable onPress={() =\u003e setShowSettings(false)}\u003e\r\n                                \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cText style={{ color: colors.textSecondary, marginBottom: 16 }}\u003e\r\n                            Customize which notifications you want to receive.\r\n                        \u003c/Text\u003e\r\n\r\n                        {Object.keys(preferences).map((key) =\u003e (\r\n                            \u003cView key={key} style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 20 }}\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                                    \u003cMaterialIcons name={getIcon(key.charAt(0).toUpperCase() + key.slice(1))} size={24} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ fontSize: 16, color: colors.textPrimary, textTransform: \"capitalize\" }}\u003e\r\n                                        {key} Alerts\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cSwitch\r\n                                    value={preferences[key]}\r\n                                    onValueChange={() =\u003e togglePreference(key)}\r\n                                    trackColor={{ false: \"#767577\", true: colors.primary + \"80\" }}\r\n                                    thumbColor={preferences[key] ? colors.primary : \"#f4f3f4\"}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n                        ))}\r\n\r\n                        \u003cView style={{ height: 20 }} /\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\profile.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport { View, Text, ScrollView, RefreshControl, Pressable } from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useTheme } from \"../theme\";\r\nimport { useToast } from \"../components/ToastProvider\";\r\nimport { formatDate } from \"../utils/date\";\r\n\r\nimport { useApiQuery } from \"../hooks/useApi\";\r\nimport apiConfig from \"../config/apiConfig\";\r\n\r\nexport default function ProfileScreen() {\r\n  const { styles, colors } = useTheme();\r\n  const { showToast } = useToast();\r\n  const [refreshing, setRefreshing] = useState(false);\r\n\r\n  const { data: user, refetch } = useApiQuery(\r\n    [\u0027currentUser\u0027],\r\n    `${apiConfig.baseUrl}/auth/me`,\r\n    {\r\n      staleTime: Infinity,\r\n    }\r\n  );\r\n\r\n  const onRefresh = async () =\u003e {\r\n    setRefreshing(true);\r\n    await refetch();\r\n    setRefreshing(false);\r\n  };\r\n\r\n  const handleLogout = async () =\u003e {\r\n    try {\r\n      await AsyncStorage.removeItem(\u0027@auth_token\u0027);\r\n      await AsyncStorage.removeItem(\u0027@auth_user\u0027);\r\n      // Invalidate queries to clear cache\r\n      const { queryClient } = require(\u0027../utils/queryClient\u0027);\r\n      queryClient.clear();\r\n      const { router } = require(\u0027expo-router\u0027);\r\n      router.replace(\u0027/login\u0027);\r\n    } catch (error) {\r\n      console.error(\u0027Logout failed:\u0027, error);\r\n      showToast(\u0027Failed to logout. Please try again.\u0027, \u0027error\u0027);\r\n    }\r\n  };\r\n\r\n  const handleLogin = () =\u003e {\r\n    const { router } = require(\u0027expo-router\u0027);\r\n    router.replace(\u0027/login\u0027);\r\n  };\r\n\r\n  return (\r\n    \u003cScrollView\r\n      style={styles.container}\r\n      contentContainerStyle={styles.contentPaddingBottom}\r\n      refreshControl={\r\n        \u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e\r\n      }\r\n    \u003e\r\n      \u003cView style={{ alignItems: \"center\", marginTop: 20, marginBottom: 40 }}\u003e\r\n        \u003cView style={{\r\n          width: 100,\r\n          height: 100,\r\n          borderRadius: 50,\r\n          backgroundColor: colors.cardBackground,\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          marginBottom: 16,\r\n          shadowColor: colors.shadow,\r\n          shadowOffset: { width: 0, height: 4 },\r\n          shadowOpacity: 0.1,\r\n          shadowRadius: 12,\r\n          elevation: 5,\r\n        }}\u003e\r\n          \u003cMaterialIcons name=\"person\" size={50} color={colors.primary} /\u003e\r\n        \u003c/View\u003e\r\n\r\n        {user ? (\r\n          \u003c\u003e\r\n            \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 8 }}\u003e\r\n              {user.name}\r\n            \u003c/Text\u003e\r\n\r\n            {user.role \u0026\u0026 (\r\n              \u003cView style={{\r\n                backgroundColor: colors.primary + \u002715\u0027,\r\n                paddingVertical: 6,\r\n                paddingHorizontal: 16,\r\n                borderRadius: 20,\r\n                marginTop: 4,\r\n                marginBottom: 16\r\n              }}\u003e\r\n                \u003cText style={{ color: colors.primary, fontFamily: \"DMSans-Bold\", fontSize: 12, textTransform: \u0027uppercase\u0027 }}\u003e\r\n                  {user.role}\r\n                \u003c/Text\u003e\r\n              \u003c/View\u003e\r\n            )}\r\n\r\n            \u003cView style={{ width: \u0027100%\u0027, paddingHorizontal: 20 }}\u003e\r\n              \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 16, marginBottom: 16 }}\u003e\r\n                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: colors.textSecondary, marginBottom: 12 }}\u003eCONTACT INFO\u003c/Text\u003e\r\n\r\n                {user.phone \u0026\u0026 (\r\n                  \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, marginBottom: 12 }}\u003e\r\n                    \u003cView style={{ width: 32, alignItems: \u0027center\u0027 }}\u003e\u003cMaterialIcons name=\"phone\" size={20} color={colors.primary} /\u003e\u003c/View\u003e\r\n                    \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Medium\", color: colors.textPrimary, marginLeft: 8 }}\u003e{user.phone}\u003c/Text\u003e\r\n                  \u003c/View\u003e\r\n                )}\r\n\r\n                {user.email \u0026\u0026 (\r\n                  \u003cView style={{ flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027 }}\u003e\r\n                    \u003cView style={{ width: 32, alignItems: \u0027center\u0027 }}\u003e\u003cMaterialIcons name=\"email\" size={20} color={colors.primary} /\u003e\u003c/View\u003e\r\n                    \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Medium\", color: colors.textPrimary, marginLeft: 8 }}\u003e{user.email}\u003c/Text\u003e\r\n                  \u003c/View\u003e\r\n                )}\r\n              \u003c/View\u003e\r\n\r\n              {(user.role === \u0027student\u0027 || user.role === \u0027class teacher\u0027 || user.role === \u0027staff\u0027) \u0026\u0026 (\r\n                \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 16, marginBottom: 16 }}\u003e\r\n                  \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: colors.textSecondary, marginBottom: 12 }}\u003e\r\n                    {user.role === \u0027student\u0027 ? \u0027STUDENT DETAILS\u0027 : \u0027STAFF DETAILS\u0027}\r\n                  \u003c/Text\u003e\r\n\r\n                  {user.role === \u0027student\u0027 \u0026\u0026 (\r\n                    \u003c\u003e\r\n                      {user.guardianName \u0026\u0026 (\r\n                        \u003cView style={{ marginBottom: 12 }}\u003e\r\n                          \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003eGuardian Name\u003c/Text\u003e\r\n                          \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Medium\", color: colors.textPrimary }}\u003e{user.guardianName}\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                      )}\r\n                      {user.guardianPhone \u0026\u0026 (\r\n                        \u003cView style={{ marginBottom: 12 }}\u003e\r\n                          \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003eGuardian Phone\u003c/Text\u003e\r\n                          \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Medium\", color: colors.textPrimary }}\u003e{user.guardianPhone}\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                      )}\r\n                      {user.admissionDate \u0026\u0026 (\r\n                        \u003cView\u003e\r\n                          \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003eAdmission Date\u003c/Text\u003e\r\n                          \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Medium\", color: colors.textPrimary }}\u003e{formatDate(user.admissionDate)}\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                      )}\r\n                    \u003c/\u003e\r\n                  )}\r\n\r\n                  {(user.role === \u0027class teacher\u0027 || user.role === \u0027staff\u0027) \u0026\u0026 (\r\n                    \u003c\u003e\r\n                      {user.designation \u0026\u0026 (\r\n                        \u003cView style={{ marginBottom: 12 }}\u003e\r\n                          \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003eDesignation\u003c/Text\u003e\r\n                          \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Medium\", color: colors.textPrimary }}\u003e{user.designation}\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                      )}\r\n                      {user.joiningDate \u0026\u0026 (\r\n                        \u003cView\u003e\r\n                          \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003eJoining Date\u003c/Text\u003e\r\n                          \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Medium\", color: colors.textPrimary }}\u003e{formatDate(user.joiningDate)}\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                      )}\r\n                    \u003c/\u003e\r\n                  )}\r\n                \u003c/View\u003e\r\n              )}\r\n            \u003c/View\u003e\r\n          \u003c/\u003e\r\n        ) : (\r\n          \u003c\u003e\r\n            \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e\r\n              Guest User\r\n            \u003c/Text\u003e\r\n            \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Regular\", color: colors.textSecondary }}\u003e\r\n              Login to access all features\r\n            \u003c/Text\u003e\r\n          \u003c/\u003e\r\n        )}\r\n      \u003c/View\u003e\r\n\r\n      \u003cView style={{ paddingHorizontal: 20 }}\u003e\r\n        \u003cPressable\r\n          onPress={user ? handleLogout : handleLogin}\r\n          style={({ pressed }) =\u003e ({\r\n            backgroundColor: user ? colors.error + \u002715\u0027 : colors.primary,\r\n            borderRadius: 16,\r\n            paddingVertical: 16,\r\n            alignItems: \u0027center\u0027,\r\n            justifyContent: \u0027center\u0027,\r\n            flexDirection: \u0027row\u0027,\r\n            opacity: pressed ? 0.9 : 1,\r\n            marginBottom: 16,\r\n          })}\r\n        \u003e\r\n          \u003cMaterialIcons\r\n            name={user ? \"logout\" : \"login\"}\r\n            size={20}\r\n            color={user ? colors.error : colors.white}\r\n            style={{ marginRight: 8 }}\r\n          /\u003e\r\n          \u003cText style={{\r\n            fontSize: 16,\r\n            fontFamily: \"DMSans-Bold\",\r\n            color: user ? colors.error : colors.white\r\n          }}\u003e\r\n            {user ? \"Log Out\" : \"Log In\"}\r\n          \u003c/Text\u003e\r\n        \u003c/Pressable\u003e\r\n      \u003c/View\u003e\r\n    \u003c/ScrollView\u003e\r\n  );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\requests.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  13,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  13,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport { View, Text, ScrollView, RefreshControl, Pressable } from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../theme\";\r\nimport Header from \"../components/Header\";\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport { useApiQuery } from \"../hooks/useApi\";\r\n\r\nexport default function RequestsScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const [user, setUser] = useState(null);\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n\r\n\r\n    useEffect(() =\u003e {\r\n        loadUser();\r\n    }, []);\r\n\r\n\r\n\r\n    const loadUser = async () =\u003e {\r\n        try {\r\n            const storedUser = await AsyncStorage.getItem(\u0027@auth_user\u0027);\r\n            if (storedUser) {\r\n                setUser(JSON.parse(storedUser));\r\n            } else {\r\n                router.replace(\u0027/login\u0027);\r\n            }\r\n        } catch (e) {\r\n            console.warn(\u0027Failed to load user\u0027, e);\r\n            router.replace(\u0027/login\u0027);\r\n        }\r\n    };\r\n\r\n    // Fetch Teacher Classes (for teachers/class teachers)\r\n    const { data: teacherClassesData, refetch: refetchClasses } = useApiQuery(\r\n        [\u0027teacherClasses\u0027],\r\n        `${apiConfig.baseUrl}/classes/my-classes`,\r\n        {\r\n            enabled: !!(user \u0026\u0026 (user.role === \u0027teacher\u0027 || user.role === \u0027class teacher\u0027))\r\n        }\r\n    );\r\n\r\n    const teacherClasses = teacherClassesData || [];\r\n\r\n\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await loadUser();\r\n        if (user \u0026\u0026 (user.role === \u0027teacher\u0027 || user.role === \u0027class teacher\u0027)) {\r\n            await refetchClasses();\r\n        }\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const navigateToLeaves = () =\u003e {\r\n        if (user?.role === \u0027student\u0027) {\r\n            router.push(\u0027/student/leaves\u0027);\r\n        } else if (user?.role === \u0027class teacher\u0027 || user?.role === \u0027staff\u0027 || user?.role === \u0027teacher\u0027) {\r\n            router.push(\u0027/teacher/leaves\u0027);\r\n        } else if (user?.role === \u0027admin\u0027 || user?.role === \u0027super admin\u0027) {\r\n            router.push(\u0027/admin/leaves\u0027);\r\n        }\r\n    };\r\n\r\n    const navigateToMyAttendance = () =\u003e {\r\n        if (user?.role === \u0027student\u0027) {\r\n            router.push(`/student/attendance`);\r\n        } else if (user?.role === \u0027teacher\u0027 || user?.role === \u0027class teacher\u0027 || user?.role === \u0027staff\u0027) {\r\n            router.push(\u0027/teacher/attendance\u0027);\r\n        } else if (user?.role === \u0027admin\u0027 || user?.role === \u0027super admin\u0027) {\r\n            router.push(\u0027/admin/attendance?tab=my_attendance\u0027);\r\n        }\r\n    };\r\n\r\n    const navigateToMarkAttendance = () =\u003e {\r\n        if (user?.role === \u0027teacher\u0027 || user?.role === \u0027class teacher\u0027) {\r\n            if (teacherClasses.length === 1) {\r\n                // If only one class, go directly to attendance marking\r\n                router.push({\r\n                    pathname: \"/teacher/class/attendance\",\r\n                    params: { classId: teacherClasses[0]._id }\r\n                });\r\n            } else {\r\n                // If multiple classes or 0 (let them see empty list), go to class list\r\n                router.push(\u0027/teacher/classes?action=attendance\u0027);\r\n            }\r\n        } else if (user?.role === \u0027admin\u0027 || user?.role === \u0027super admin\u0027) {\r\n            router.push(\u0027/admin/attendance\u0027);\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader\r\n                        title=\"Attendance\"\r\n                        subtitle=\"Manage attendance and requests\"\r\n                    /\u003e\r\n\r\n                    \u003cView style={{ marginTop: 24 }}\u003e\r\n                        {/* My Attendance Card - For All */}\r\n                        \u003cPressable\r\n                            onPress={navigateToMyAttendance}\r\n                            style={({ pressed }) =\u003e ({\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 20,\r\n                                marginBottom: 16,\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: { width: 0, height: 2 },\r\n                                shadowOpacity: 0.05,\r\n                                shadowRadius: 8,\r\n                                elevation: 2,\r\n                                opacity: pressed ? 0.9 : 1,\r\n                                flexDirection: \"row\",\r\n                                justifyContent: \"space-between\",\r\n                                alignItems: \"center\"\r\n                            })}\r\n                        \u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 16, flex: 1 }}\u003e\r\n                                \u003cView style={{\r\n                                    backgroundColor: \"#4CAF50\" + \"20\",\r\n                                    padding: 14,\r\n                                    borderRadius: 12\r\n                                }}\u003e\r\n                                    \u003cMaterialIcons name=\"person\" size={28} color=\"#4CAF50\" /\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cView style={{ flex: 1 }}\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 17,\r\n                                        fontFamily: \"DMSans-Bold\",\r\n                                        color: colors.textPrimary,\r\n                                        marginBottom: 4\r\n                                    }}\u003e\r\n                                        My Attendance\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 13,\r\n                                        color: colors.textSecondary,\r\n                                        fontFamily: \"DMSans-Regular\"\r\n                                    }}\u003e\r\n                                        View your attendance history\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                        \u003c/Pressable\u003e\r\n\r\n                        {/* Mark Attendance Card - For Teachers \u0026 Admins */}\r\n                        {[\u0027teacher\u0027, \u0027class teacher\u0027, \u0027admin\u0027, \u0027super admin\u0027].includes(user?.role) \u0026\u0026 (\r\n                            \u003cPressable\r\n                                onPress={navigateToMarkAttendance}\r\n                                style={({ pressed }) =\u003e ({\r\n                                    backgroundColor: colors.cardBackground,\r\n                                    borderRadius: 16,\r\n                                    padding: 20,\r\n                                    marginBottom: 16,\r\n                                    shadowColor: \"#000\",\r\n                                    shadowOffset: { width: 0, height: 2 },\r\n                                    shadowOpacity: 0.05,\r\n                                    shadowRadius: 8,\r\n                                    elevation: 2,\r\n                                    opacity: pressed ? 0.9 : 1,\r\n                                    flexDirection: \"row\",\r\n                                    justifyContent: \"space-between\",\r\n                                    alignItems: \"center\"\r\n                                })}\r\n                            \u003e\r\n                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 16, flex: 1 }}\u003e\r\n                                    \u003cView style={{\r\n                                        backgroundColor: \"#2196F3\" + \"20\",\r\n                                        padding: 14,\r\n                                        borderRadius: 12\r\n                                    }}\u003e\r\n                                        \u003cMaterialIcons name=\"edit-calendar\" size={28} color=\"#2196F3\" /\u003e\r\n                                    \u003c/View\u003e\r\n                                    \u003cView style={{ flex: 1 }}\u003e\r\n                                        \u003cText style={{\r\n                                            fontSize: 17,\r\n                                            fontFamily: \"DMSans-Bold\",\r\n                                            color: colors.textPrimary,\r\n                                            marginBottom: 4\r\n                                        }}\u003e\r\n                                            Mark Attendance\r\n                                        \u003c/Text\u003e\r\n                                        \u003cText style={{\r\n                                            fontSize: 13,\r\n                                            color: colors.textSecondary,\r\n                                            fontFamily: \"DMSans-Regular\"\r\n                                        }}\u003e\r\n                                            {user?.role === \u0027admin\u0027 || user?.role === \u0027super admin\u0027\r\n                                                ? \u0027Mark staff and student attendance\u0027\r\n                                                : \u0027Mark student attendance\u0027}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        )}\r\n\r\n                        {/* Leave Requests Card */}\r\n                        \u003cPressable\r\n                            onPress={navigateToLeaves}\r\n                            style={({ pressed }) =\u003e ({\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 20,\r\n                                marginBottom: 16,\r\n                                shadowColor: \"#000\",\r\n                                shadowOffset: { width: 0, height: 2 },\r\n                                shadowOpacity: 0.05,\r\n                                shadowRadius: 8,\r\n                                elevation: 2,\r\n                                opacity: pressed ? 0.9 : 1,\r\n                                flexDirection: \"row\",\r\n                                justifyContent: \"space-between\",\r\n                                alignItems: \"center\"\r\n                            })}\r\n                        \u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 16, flex: 1 }}\u003e\r\n                                \u003cView style={{\r\n                                    backgroundColor: \"#FF9800\" + \"20\",\r\n                                    padding: 14,\r\n                                    borderRadius: 12\r\n                                }}\u003e\r\n                                    \u003cMaterialIcons name=\"event-note\" size={28} color=\"#FF9800\" /\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cView style={{ flex: 1 }}\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 17,\r\n                                        fontFamily: \"DMSans-Bold\",\r\n                                        color: colors.textPrimary,\r\n                                        marginBottom: 4\r\n                                    }}\u003e\r\n                                        Leave Requests\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 13,\r\n                                        color: colors.textSecondary,\r\n                                        fontFamily: \"DMSans-Regular\"\r\n                                    }}\u003e\r\n                                        {user?.role === \u0027student\u0027\r\n                                            ? \u0027Apply for leave and track status\u0027\r\n                                            : \u0027Approve or reject leave requests\u0027}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\attendance.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Pressable\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  6,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  6,
                                           "endColumn":  14
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027MaterialIcons\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  23
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027cellSize\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  7,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  15
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  26,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  26,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  27,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  27,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  6,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect, useMemo } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    RefreshControl,\r\n    Dimensions,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport Header from \"../../components/Header\";\r\nimport ModernCalendar from \"../../components/ModernCalendar\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nconst { width } = Dimensions.get(\u0027window\u0027);\r\nconst cellSize = (width - 80) / 7; // 7 days in a week, accounting for padding\r\n\r\nexport default function StudentAttendanceScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n    const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().split(\u0027T\u0027)[0]);\r\n\r\n    useEffect(() =\u003e {\r\n        const loadUser = async () =\u003e {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (storedUser) {\r\n                setUser(JSON.parse(storedUser));\r\n            }\r\n        };\r\n        loadUser();\r\n    }, []);\r\n\r\n    const userId = user?.id || user?._id;\r\n\r\n    // Fetch Attendance Summary\r\n    const { data: summary, isLoading: loadingSummary, refetch: refetchSummary } = useApiQuery(\r\n        [\u0027studentAttendanceSummary\u0027, userId],\r\n        `${apiConfig.baseUrl}/attendance/student/${userId}/summary`,\r\n        { enabled: !!userId }\r\n    );\r\n\r\n    // Fetch Attendance History\r\n    const { data: historyData, isLoading: loadingHistory, refetch: refetchHistory } = useApiQuery(\r\n        [\u0027studentAttendanceHistory\u0027, userId],\r\n        `${apiConfig.baseUrl}/attendance/student/${userId}`,\r\n        { enabled: !!userId }\r\n    );\r\n\r\n    const attendanceHistory = historyData?.attendance || [];\r\n    const loading = loadingSummary || loadingHistory;\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await Promise.all([refetchSummary(), refetchHistory()]);\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027present\u0027: return colors.success;\r\n            case \u0027absent\u0027: return colors.error;\r\n            case \u0027late\u0027: return \u0027#FF9800\u0027;\r\n            case \u0027excused\u0027: return \u0027#2196F3\u0027;\r\n            default: return colors.textSecondary;\r\n        }\r\n    };\r\n\r\n    const markedDates = useMemo(() =\u003e {\r\n        const marks = {};\r\n        attendanceHistory.forEach(record =\u003e {\r\n            const dateStr = new Date(record.date).toISOString().split(\u0027T\u0027)[0];\r\n            const color = getStatusColor(record.status);\r\n            marks[dateStr] = {\r\n                customStyles: {\r\n                    container: {\r\n                        backgroundColor: color + \u002720\u0027,\r\n                        borderWidth: 1,\r\n                        borderColor: color,\r\n                        borderRadius: 8,\r\n                    },\r\n                    text: {\r\n                        color: color,\r\n                        fontFamily: \u0027DMSans-Bold\u0027,\r\n                    }\r\n                }\r\n            };\r\n        });\r\n        return marks;\r\n    }, [attendanceHistory, colors]);\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader\r\n                        title=\"My Attendance\"\r\n                        subtitle=\"Track your attendance record\"\r\n                    /\u003e\r\n\r\n                    {/* Overall Percentage - Big Display */}\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.primary,\r\n                        borderRadius: 20,\r\n                        padding: 24,\r\n                        marginTop: 20,\r\n                        alignItems: \"center\",\r\n                        elevation: 4\r\n                    }}\u003e\r\n                        \u003cText style={{ fontSize: 16, color: \"#fff\", opacity: 0.9, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                            Overall Attendance\r\n                        \u003c/Text\u003e\r\n                        \u003cText style={{ fontSize: 64, fontFamily: \"DMSans-Bold\", color: \"#fff\", marginTop: 8 }}\u003e\r\n                            {summary?.overall?.percentage || 0}%\r\n                        \u003c/Text\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 24, marginTop: 16 }}\u003e\r\n                            \u003cView style={{ alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ fontSize: 28, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                    {summary?.overall?.present || 0}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: \"#fff\", opacity: 0.8, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Present\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ fontSize: 28, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                    {summary?.overall?.total || 0}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: \"#fff\", opacity: 0.8, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Total Days\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Subject-wise Breakdown */}\r\n                    {summary?.subjectWise \u0026\u0026 summary.subjectWise.length \u003e 0 \u0026\u0026 (\r\n                        \u003cView style={{ marginTop: 24 }}\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 12 }}\u003e\r\n                                Subject-wise Attendance\r\n                            \u003c/Text\u003e\r\n                            {summary.subjectWise.map((subject) =\u003e (\r\n                                \u003cView\r\n                                    key={subject.subjectId}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 12,\r\n                                        padding: 16,\r\n                                        marginBottom: 10,\r\n                                        elevation: 1\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\" }}\u003e\r\n                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                            \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary }}\u003e\r\n                                                {subject.name}\r\n                                            \u003c/Text\u003e\r\n                                            \u003cText style={{ fontSize: 13, color: colors.textSecondary, marginTop: 4, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                {subject.present} / {subject.total} classes\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                        \u003cView style={{ alignItems: \"flex-end\" }}\u003e\r\n                                            \u003cText style={{\r\n                                                fontSize: 24,\r\n                                                fontFamily: \"DMSans-Bold\",\r\n                                                color: parseFloat(subject.percentage) \u003e= 75 ? colors.success : colors.error\r\n                                            }}\u003e\r\n                                                {subject.percentage}%\r\n                                            \u003c/Text\u003e\r\n                                            {parseFloat(subject.percentage) \u003c 75 \u0026\u0026 (\r\n                                                \u003cView style={{ backgroundColor: colors.error + \"20\", paddingHorizontal: 8, paddingVertical: 2, borderRadius: 4, marginTop: 4 }}\u003e\r\n                                                    \u003cText style={{ fontSize: 10, color: colors.error, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                                                        LOW\r\n                                                    \u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                            )}\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    )}\r\n\r\n                    {/* Calendar View */}\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 16,\r\n                        padding: 16,\r\n                        marginTop: 24,\r\n                        elevation: 2\r\n                    }}\u003e\r\n                        \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e\r\n                            Attendance Calendar\r\n                        \u003c/Text\u003e\r\n                        \u003cModernCalendar\r\n                            current={selectedMonth}\r\n                            markedDates={markedDates}\r\n                            onMonthChange={(month) =\u003e setSelectedMonth(month.dateString)}\r\n                            markingType={\u0027custom\u0027}\r\n                            theme={{\r\n                                calendarBackground: \u0027transparent\u0027,\r\n                            }}\r\n                        /\u003e\r\n\r\n                        {/* Legend */}\r\n                        \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12, marginTop: 16, justifyContent: \"center\" }}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                \u003cView style={{ width: 16, height: 16, borderRadius: 4, backgroundColor: colors.success + \"40\" }} /\u003e\r\n                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003ePresent\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                \u003cView style={{ width: 16, height: 16, borderRadius: 4, backgroundColor: colors.error + \"40\" }} /\u003e\r\n                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eAbsent\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                \u003cView style={{ width: 16, height: 16, borderRadius: 4, backgroundColor: \"#FF9800\" + \"40\" }} /\u003e\r\n                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eLate\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                \u003cView style={{ width: 16, height: 16, borderRadius: 4, backgroundColor: \"#2196F3\" + \"40\" }} /\u003e\r\n                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eExcused\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Monthly Summary */}\r\n                    {summary?.monthlyBreakdown \u0026\u0026 summary.monthlyBreakdown.length \u003e 0 \u0026\u0026 (\r\n                        \u003cView style={{ marginTop: 24 }}\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 12 }}\u003e\r\n                                Monthly Summary\r\n                            \u003c/Text\u003e\r\n                            {summary.monthlyBreakdown.slice(0, 6).map((month) =\u003e (\r\n                                \u003cView\r\n                                    key={month.month}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 12,\r\n                                        padding: 16,\r\n                                        marginBottom: 8,\r\n                                        flexDirection: \"row\",\r\n                                        justifyContent: \"space-between\",\r\n                                        alignItems: \"center\",\r\n                                        elevation: 1\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cView\u003e\r\n                                        \u003cText style={{ fontSize: 15, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary }}\u003e\r\n                                            {month.month}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 2, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                            {month.present} / {month.total} days\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 20,\r\n                                        fontFamily: \"DMSans-Bold\",\r\n                                        color: parseFloat(month.percentage) \u003e= 75 ? colors.success : colors.error\r\n                                    }}\u003e\r\n                                        {month.percentage}%\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\class.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Pressable,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport Header from \"../../components/Header\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\n\r\nexport default function StudentClassScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(() =\u003e {\r\n        const loadUser = async () =\u003e {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (storedUser) {\r\n                setUser(JSON.parse(storedUser));\r\n            }\r\n        };\r\n        loadUser();\r\n    }, []);\r\n\r\n    const classId = user?.currentClass?._id || user?.currentClass;\r\n\r\n    // Fetch Class Details\r\n    const { data, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027studentClassDetails\u0027, classId],\r\n        `${apiConfig.baseUrl}/classes/${classId}/full-details`,\r\n        { enabled: !!classId }\r\n    );\r\n\r\n    const classData = data?.classData;\r\n    const subjects = data?.subjects || [];\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    if (!classData) {\r\n        return (\r\n            \u003cScrollView\r\n                contentContainerStyle={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", padding: 20 }}\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} tintColor={colors.primary} /\u003e}\r\n            \u003e\r\n                \u003cMaterialIcons name=\"school\" size={64} color={colors.textSecondary} /\u003e\r\n                \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 16, textAlign: \"center\" }}\u003e\r\n                    No Class Assigned\r\n                \u003c/Text\u003e\r\n                \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginTop: 8, textAlign: \"center\", fontFamily: \"DMSans-Regular\" }}\u003e\r\n                    Please contact your administrator to be assigned to a class.\r\n                \u003c/Text\u003e\r\n            \u003c/ScrollView\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} tintColor={colors.primary} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n                showsVerticalScrollIndicator={false}\r\n            \u003e\r\n                \u003cView style={{ paddingHorizontal: 20, paddingTop: 20 }}\u003e\r\n                    \u003cHeader\r\n                        title={classData.name}\r\n                        subtitle={`Section ${classData.section || \u0027N/A\u0027} â€¢ ${classData.academicYear?.name || \u0027\u0027}`}\r\n                    /\u003e\r\n\r\n                    {loading ? (\r\n                        \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", marginTop: 100 }}\u003e\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003cView style={{ gap: 24 }}\u003e\r\n                            \u003cView\u003e\r\n                                \u003cText style={styles.sectionTitle}\u003e\r\n                                    Quick Actions\r\n                                \u003c/Text\u003e\r\n\r\n                                \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12 }}\u003e\r\n                                    \u003cMenuCard\r\n                                        title=\"Report Card\"\r\n                                        icon=\"assessment\"\r\n                                        color=\"#FF9800\"\r\n                                        onPress={() =\u003e router.push(\"/student/report-card\")}\r\n                                    /\u003e\r\n                                    \u003cMenuCard\r\n                                        title=\"Timetable\"\r\n                                        icon=\"calendar-today\"\r\n                                        color=\"#009688\"\r\n                                        onPress={() =\u003e router.push(\"/student/timetable\")}\r\n                                    /\u003e\r\n                                    \u003cMenuCard\r\n                                        title=\"Fees\"\r\n                                        icon=\"attach-money\"\r\n                                        color=\"#FF5722\"\r\n                                        onPress={() =\u003e router.push(\"/student/fees\")}\r\n                                    /\u003e\r\n                                    \u003cMenuCard\r\n                                        title=\"Exams\"\r\n                                        icon=\"event\"\r\n                                        color=\"#E91E63\"\r\n                                        onPress={() =\u003e router.push(\"/student/exam-schedule\")}\r\n                                    /\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView\u003e\r\n                                \u003cText style={styles.sectionTitle}\u003e\r\n                                    Subjects\r\n                                \u003c/Text\u003e\r\n\r\n                                {subjects.length === 0 ? (\r\n                                    \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                                        \u003cMaterialIcons name=\"library-books\" size={48} color={colors.textSecondary} /\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                            No subjects added yet.\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                ) : (\r\n                                    \u003cView style={{ gap: 12 }}\u003e\r\n                                        {subjects.map((subject) =\u003e (\r\n                                            \u003cPressable\r\n                                                key={subject._id}\r\n                                                onPress={() =\u003e router.push({\r\n                                                    pathname: \"/student/class/subject/[subjectId]\",\r\n                                                    params: { id: classData._id, subjectId: subject._id }\r\n                                                })}\r\n                                                style={({ pressed }) =\u003e [\r\n                                                    styles.cardMinimal,\r\n                                                    {\r\n                                                        flexDirection: \"row\",\r\n                                                        justifyContent: \"space-between\",\r\n                                                        alignItems: \"center\",\r\n                                                        padding: 16,\r\n                                                        opacity: pressed ? 0.9 : 1,\r\n                                                    }\r\n                                                ]}\r\n                                            \u003e\r\n                                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 14, flex: 1 }}\u003e\r\n                                                    \u003cView style={{\r\n                                                        backgroundColor: colors.primary + \"15\",\r\n                                                        padding: 12,\r\n                                                        borderRadius: 12\r\n                                                    }}\u003e\r\n                                                        \u003cMaterialIcons name=\"book\" size={24} color={colors.primary} /\u003e\r\n                                                    \u003c/View\u003e\r\n                                                    \u003cView style={{ flex: 1 }}\u003e\r\n                                                        \u003cText style={{\r\n                                                            fontSize: 16,\r\n                                                            fontFamily: \"DMSans-Bold\",\r\n                                                            color: colors.textPrimary,\r\n                                                            marginBottom: 4\r\n                                                        }}\u003e\r\n                                                            {subject.name}\r\n                                                        \u003c/Text\u003e\r\n                                                        {subject.teachers \u0026\u0026 subject.teachers.length \u003e 0 ? (\r\n                                                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\u003e\r\n                                                                \u003cMaterialIcons name=\"person\" size={14} color={colors.textSecondary} /\u003e\r\n                                                                \u003cText style={{\r\n                                                                    fontSize: 13,\r\n                                                                    color: colors.textSecondary,\r\n                                                                    fontFamily: \"DMSans-Medium\"\r\n                                                                }}\u003e\r\n                                                                    {subject.teachers.map(t =\u003e t.name).join(\", \")}\r\n                                                                \u003c/Text\u003e\r\n                                                            \u003c/View\u003e\r\n                                                        ) : (\r\n                                                            \u003cText style={{\r\n                                                                fontSize: 12,\r\n                                                                color: colors.textSecondary,\r\n                                                                fontStyle: \"italic\",\r\n                                                                fontFamily: \"DMSans-Regular\"\r\n                                                            }}\u003e\r\n                                                                No teacher assigned\r\n                                                            \u003c/Text\u003e\r\n                                                        )}\r\n                                                    \u003c/View\u003e\r\n                                                \u003c/View\u003e\r\n                                                \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                        ))}\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\n// Helper Component for Menu Cards\r\nconst MenuCard = ({ title, icon, color, onPress }) =\u003e {\r\n    const { colors } = useTheme();\r\n\r\n    return (\r\n        \u003cPressable\r\n            onPress={onPress}\r\n            style={({ pressed }) =\u003e ({\r\n                flex: 1,\r\n                minWidth: \"45%\",\r\n                backgroundColor: colors.cardBackground,\r\n                padding: 20,\r\n                borderRadius: 24,\r\n                alignItems: \"center\",\r\n                opacity: pressed ? 0.9 : 1,\r\n                shadowColor: \"#000\",\r\n                shadowOffset: { width: 0, height: 4 },\r\n                shadowOpacity: 0.05,\r\n                shadowRadius: 12,\r\n                elevation: 3,\r\n                borderWidth: 1,\r\n                borderColor: colors.border\r\n            })}\r\n        \u003e\r\n            \u003cView style={{\r\n                backgroundColor: color + \"15\",\r\n                padding: 16,\r\n                borderRadius: 20,\r\n                marginBottom: 12\r\n            }}\u003e\r\n                \u003cMaterialIcons name={icon} size={28} color={color} /\u003e\r\n            \u003c/View\u003e\r\n            \u003cText style={{\r\n                fontSize: 15,\r\n                fontFamily: \"DMSans-Bold\",\r\n                color: colors.textPrimary,\r\n                textAlign: \"center\"\r\n            }}\u003e\r\n                {title}\r\n            \u003c/Text\u003e\r\n        \u003c/Pressable\u003e\r\n    );\r\n};\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\class\\subject\\[subjectId].jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  24,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  24,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n} from \"react-native\";\r\nimport { useLocalSearchParams, useRouter } from \"expo-router\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useTheme } from \"../../../../theme\";\r\nimport apiConfig from \"../../../../config/apiConfig\";\r\nimport apiFetch from \"../../../../utils/apiFetch\";\r\nimport { useToast } from \"../../../../components/ToastProvider\";\r\nimport Header from \"../../../../components/Header\";\r\nimport { formatDate } from \"../../../../utils/date\";\r\n\r\nimport { getCachedData, setCachedData } from \"../../../../utils/cache\";\r\nimport { useNetworkStatus } from \"../../../../components/NetworkStatusProvider\";\r\n\r\nexport default function StudentSubjectDetailScreen() {\r\n    const { id, subjectId } = useLocalSearchParams(); // classId and subjectId\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n    const { isConnected } = useNetworkStatus();\r\n\r\n    const [subjectName, setSubjectName] = useState(\"\");\r\n    const [content, setContent] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    useEffect(() =\u003e {\r\n        loadData();\r\n    }, []);\r\n\r\n    const loadData = async () =\u003e {\r\n        const cacheKeyContent = `@subject_content_${subjectId}`;\r\n        try {\r\n            const token = await AsyncStorage.getItem(\"@auth_token\");\r\n\r\n            // 1. Try cache\r\n            const cachedContent = await getCachedData(cacheKeyContent);\r\n            if (cachedContent) {\r\n                setContent(cachedContent);\r\n                setLoading(false);\r\n\r\n            }\r\n\r\n            // 2. Fetch API\r\n            const fetchFromApi = async () =\u003e {\r\n                // Fetch Subject Details (to get name)\r\n                const subjectsRes = await apiFetch(`${apiConfig.baseUrl}/classes/${id}/subjects`, {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                    silent: !!cachedContent\r\n                });\r\n\r\n                if (subjectsRes.ok) {\r\n                    const subjects = await subjectsRes.json();\r\n                    const currentSubject = subjects.find(s =\u003e s._id === subjectId);\r\n                    if (currentSubject) setSubjectName(currentSubject.name);\r\n                }\r\n\r\n                // Fetch Content for this subject\r\n                const contentRes = await apiFetch(`${apiConfig.baseUrl}/classes/${id}/subjects/${subjectId}/content`, {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                    silent: !!cachedContent\r\n                });\r\n\r\n                if (contentRes.ok) {\r\n                    const contentData = await contentRes.json();\r\n                    setContent(contentData);\r\n                    setCachedData(cacheKeyContent, contentData);\r\n\r\n                } else {\r\n                    if (!cachedContent) showToast(\"Failed to load content\", \"error\");\r\n                }\r\n            };\r\n\r\n            if (isConnected) {\r\n                await fetchFromApi();\r\n            } else if (!cachedContent) {\r\n                showToast(\"No internet connection\", \"error\");\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(error);\r\n            if (!content.length) showToast(\"Error loading data\", \"error\");\r\n        } finally {\r\n            setLoading(false);\r\n            setRefreshing(false);\r\n        }\r\n    };\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        try {\r\n            await loadData();\r\n        } finally {\r\n            setRefreshing(false);\r\n        }\r\n    };\r\n\r\n    const getContentTypeColor = (type) =\u003e {\r\n        switch (type) {\r\n            case \"homework\": return colors.error;\r\n            case \"news\": return colors.primary;\r\n            default: return colors.secondary;\r\n        }\r\n    };\r\n\r\n    const getContentTypeIcon = (type) =\u003e {\r\n        switch (type) {\r\n            case \"homework\": return \"assignment\";\r\n            case \"news\": return \"campaign\";\r\n            default: return \"note\";\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader title={subjectName || \"Subject Details\"} subtitle=\"Class Content\" showBack /\u003e\r\n\r\n                    {loading ? (\r\n                        \u003cView style={{ marginTop: 100, alignItems: \"center\" }}\u003e\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003cView style={{ marginTop: 24 }}\u003e\r\n                            {content.length === 0 ? (\r\n                                \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                                    \u003cMaterialIcons name=\"article\" size={48} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                                        No content posted yet.\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ) : (\r\n                                content.map((item) =\u003e (\r\n                                    \u003cView\r\n                                        key={item._id}\r\n                                        style={{\r\n                                            backgroundColor: colors.cardBackground,\r\n                                            borderRadius: 16,\r\n                                            padding: 16,\r\n                                            marginBottom: 12,\r\n                                            borderLeftWidth: 4,\r\n                                            borderLeftColor: getContentTypeColor(item.type),\r\n                                            shadowColor: \"#000\",\r\n                                            shadowOffset: { width: 0, height: 1 },\r\n                                            shadowOpacity: 0.05,\r\n                                            shadowRadius: 4,\r\n                                            elevation: 1,\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"flex-start\", marginBottom: 8 }}\u003e\r\n                                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                                                \u003cView style={{ backgroundColor: getContentTypeColor(item.type) + \"20\", padding: 6, borderRadius: 8 }}\u003e\r\n                                                    \u003cMaterialIcons name={getContentTypeIcon(item.type)} size={20} color={getContentTypeColor(item.type)} /\u003e\r\n                                                \u003c/View\u003e\r\n                                                \u003cText style={{ fontSize: 16, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                                                    {item.title}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                            \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                                {formatDate(item.createdAt)}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n\r\n                                        \u003cText style={{ fontSize: 14, color: colors.textSecondary, lineHeight: 20 }}\u003e\r\n                                            {item.description}\r\n                                        \u003c/Text\u003e\r\n\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginTop: 12, alignItems: \"center\" }}\u003e\r\n                                            \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontWeight: \"500\" }}\u003e\r\n                                                By: {item.author?.name || \"Teacher\"}\r\n                                            \u003c/Text\u003e\r\n                                            \u003cView style={{ backgroundColor: colors.background, paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 }}\u003e\r\n                                                \u003cText style={{ fontSize: 10, fontWeight: \"600\", color: colors.textSecondary, textTransform: \"uppercase\" }}\u003e\r\n                                                    {item.type}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                ))\r\n                            )}\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\complaints.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  15,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  15,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  26,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  26,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027error\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  58,
                                           "column":  19,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  58,
                                           "endColumn":  24
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  5,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Pressable,\r\n    Modal,\r\n    TextInput,\r\n    KeyboardAvoidingView,\r\n    Platform\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport Header from \"../../components/Header\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nexport default function StudentComplaintsScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const queryClient = useQueryClient();\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Create Modal State\r\n    const [showCreateModal, setShowCreateModal] = useState(false);\r\n    const [title, setTitle] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");\r\n    const [category, setCategory] = useState(\"Academic\");\r\n\r\n    const categories = [\u0027Academic\u0027, \u0027Facility\u0027, \u0027Transport\u0027, \u0027Discipline\u0027, \u0027Other\u0027];\r\n\r\n    // Fetch Complaints\r\n    const { data: complaintsData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027studentComplaints\u0027],\r\n        `${apiConfig.baseUrl}/complaints/my-complaints`\r\n    );\r\n    const complaints = complaintsData || [];\r\n\r\n    // Create Complaint Mutation\r\n    const createComplaintMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/complaints`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Complaint submitted successfully\", \"success\");\r\n            setShowCreateModal(false);\r\n            setTitle(\"\");\r\n            setDescription(\"\");\r\n            setCategory(\"Academic\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027studentComplaints\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(\"Failed to submit complaint\", \"error\")\r\n    });\r\n\r\n    const handleCreate = () =\u003e {\r\n        if (!title.trim() || !description.trim()) {\r\n            showToast(\"Please fill all fields\", \"error\");\r\n            return;\r\n        }\r\n\r\n        createComplaintMutation.mutate({\r\n            title,\r\n            description,\r\n            category\r\n        });\r\n    };\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027Resolved\u0027: return \u0027#4CAF50\u0027;\r\n            case \u0027In Progress\u0027: return \u0027#FF9800\u0027;\r\n            case \u0027Rejected\u0027: return \u0027#F44336\u0027;\r\n            default: return \u0027#9E9E9E\u0027;\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader title=\"Help \u0026 Support\" subtitle=\"Report Issues\" showBack /\u003e\r\n\r\n                    {complaints.length === 0 ? (\r\n                        \u003cView style={{ alignItems: \"center\", marginTop: 60, opacity: 0.6 }}\u003e\r\n                            \u003cMaterialIcons name=\"feedback\" size={64} color={colors.textSecondary} /\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                                No complaints reported yet.\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003cView style={{ marginTop: 16 }}\u003e\r\n                            {complaints.map((complaint) =\u003e (\r\n                                \u003cView\r\n                                    key={complaint._id}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 16,\r\n                                        padding: 16,\r\n                                        marginBottom: 16,\r\n                                        borderLeftWidth: 4,\r\n                                        borderLeftColor: getStatusColor(complaint.status),\r\n                                        shadowColor: \"#000\",\r\n                                        shadowOffset: { width: 0, height: 2 },\r\n                                        shadowOpacity: 0.05,\r\n                                        shadowRadius: 4,\r\n                                        elevation: 2,\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"flex-start\" }}\u003e\r\n                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                            \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e\r\n                                                {complaint.title}\r\n                                            \u003c/Text\u003e\r\n                                            \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                {complaint.category} â€¢ {new Date(complaint.createdAt).toLocaleDateString()}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                        \u003cView style={{ backgroundColor: getStatusColor(complaint.status) + \"15\", paddingHorizontal: 10, paddingVertical: 4, borderRadius: 8 }}\u003e\r\n                                            \u003cText style={{ color: getStatusColor(complaint.status), fontFamily: \"DMSans-Bold\", fontSize: 12 }}\u003e\r\n                                                {complaint.status}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    \u003cText style={{ marginTop: 12, color: colors.textPrimary, fontSize: 14, lineHeight: 20 }}\u003e\r\n                                        {complaint.description}\r\n                                    \u003c/Text\u003e\r\n\r\n                                    {complaint.adminResponse \u0026\u0026 (\r\n                                        \u003cView style={{ marginTop: 12, backgroundColor: colors.background, padding: 12, borderRadius: 8 }}\u003e\r\n                                            \u003cText style={{ color: colors.primary, fontSize: 12, fontFamily: \"DMSans-Bold\", marginBottom: 4 }}\u003e\r\n                                                Admin Response:\r\n                                            \u003c/Text\u003e\r\n                                            \u003cText style={{ color: colors.textSecondary, fontSize: 13 }}\u003e\r\n                                                {complaint.adminResponse}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* FAB */}\r\n            \u003cPressable\r\n                onPress={() =\u003e setShowCreateModal(true)}\r\n                style={{\r\n                    position: \"absolute\",\r\n                    bottom: 110,\r\n                    right: 24,\r\n                    backgroundColor: colors.primary,\r\n                    width: 56,\r\n                    height: 56,\r\n                    borderRadius: 28,\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                    elevation: 5,\r\n                    shadowColor: \"#000\",\r\n                    shadowOffset: { width: 0, height: 2 },\r\n                    shadowOpacity: 0.25,\r\n                    shadowRadius: 3.84,\r\n                }}\r\n            \u003e\r\n                \u003cMaterialIcons name=\"add\" size={32} color=\"#fff\" /\u003e\r\n            \u003c/Pressable\u003e\r\n\r\n            {/* Create Modal */}\r\n            \u003cModal\r\n                visible={showCreateModal}\r\n                animationType=\"slide\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e setShowCreateModal(false)}\r\n            \u003e\r\n                \u003cKeyboardAvoidingView\r\n                    behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n                    style={{ flex: 1, backgroundColor: \"rgba(0,0,0,0.5)\", justifyContent: \"flex-end\" }}\r\n                \u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderTopLeftRadius: 24, borderTopRightRadius: 24, padding: 24, maxHeight: \"80%\" }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 24 }}\u003e\r\n                            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                New Complaint\r\n                            \u003c/Text\u003e\r\n                            \u003cPressable onPress={() =\u003e setShowCreateModal(false)}\u003e\r\n                                \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cScrollView\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eCategory\u003c/Text\u003e\r\n                            \u003cScrollView horizontal showsHorizontalScrollIndicator={false} style={{ marginBottom: 16 }}\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                    {categories.map(cat =\u003e (\r\n                                        \u003cPressable\r\n                                            key={cat}\r\n                                            onPress={() =\u003e setCategory(cat)}\r\n                                            style={{\r\n                                                paddingHorizontal: 16,\r\n                                                paddingVertical: 8,\r\n                                                backgroundColor: category === cat ? colors.primary : colors.background,\r\n                                                borderRadius: 20,\r\n                                                borderWidth: 1,\r\n                                                borderColor: category === cat ? colors.primary : colors.textSecondary + \"20\"\r\n                                            }}\r\n                                        \u003e\r\n                                            \u003cText style={{ color: category === cat ? \"#fff\" : colors.textPrimary }}\u003e\r\n                                                {cat}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                    ))}\r\n                                \u003c/View\u003e\r\n                            \u003c/ScrollView\u003e\r\n\r\n                            \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eTitle\u003c/Text\u003e\r\n                            \u003cTextInput\r\n                                value={title}\r\n                                onChangeText={setTitle}\r\n                                placeholder=\"Brief summary of the issue\"\r\n                                placeholderTextColor={colors.textSecondary + \"80\"}\r\n                                style={{\r\n                                    borderWidth: 1,\r\n                                    borderColor: colors.textSecondary + \"40\",\r\n                                    borderRadius: 12,\r\n                                    padding: 16,\r\n                                    color: colors.textPrimary,\r\n                                    fontSize: 16,\r\n                                    marginBottom: 16,\r\n                                    backgroundColor: colors.background\r\n                                }}\r\n                            /\u003e\r\n\r\n                            \u003cText style={{ color: colors.textSecondary, marginBottom: 8 }}\u003eDescription\u003c/Text\u003e\r\n                            \u003cTextInput\r\n                                value={description}\r\n                                onChangeText={setDescription}\r\n                                placeholder=\"Detailed explanation...\"\r\n                                placeholderTextColor={colors.textSecondary + \"80\"}\r\n                                multiline\r\n                                numberOfLines={4}\r\n                                style={{\r\n                                    borderWidth: 1,\r\n                                    borderColor: colors.textSecondary + \"40\",\r\n                                    borderRadius: 12,\r\n                                    padding: 16,\r\n                                    color: colors.textPrimary,\r\n                                    fontSize: 16,\r\n                                    marginBottom: 24,\r\n                                    backgroundColor: colors.background,\r\n                                    minHeight: 100,\r\n                                    textAlignVertical: \"top\"\r\n                                }}\r\n                            /\u003e\r\n\r\n                            \u003cPressable\r\n                                onPress={handleCreate}\r\n                                disabled={createComplaintMutation.isPending}\r\n                                style={{\r\n                                    backgroundColor: colors.primary,\r\n                                    padding: 16,\r\n                                    borderRadius: 16,\r\n                                    alignItems: \"center\",\r\n                                    opacity: createComplaintMutation.isPending ? 0.7 : 1\r\n                                }}\r\n                            \u003e\r\n                                {createComplaintMutation.isPending ? (\r\n                                    \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                ) : (\r\n                                    \u003cText style={{ color: \"#fff\", fontSize: 16, fontFamily: \"DMSans-Bold\" }}\u003e\r\n                                        Submit Complaint\r\n                                    \u003c/Text\u003e\r\n                                )}\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/KeyboardAvoidingView\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\exam-schedule.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Pressable\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  14
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  20,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  20,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  21,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  21,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  6,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Pressable,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport Header from \"../../components/Header\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nexport default function StudentExamScheduleScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Fetch Exam Schedule\r\n    const { data: examsData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027studentExamSchedule\u0027],\r\n        `${apiConfig.baseUrl}/exams/schedule/student`\r\n    );\r\n    const exams = examsData || [];\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getDaysRemaining = (examDate) =\u003e {\r\n        const today = new Date();\r\n        today.setHours(0, 0, 0, 0);\r\n        const exam = new Date(examDate);\r\n        exam.setHours(0, 0, 0, 0);\r\n\r\n        const diffTime = exam - today;\r\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n        if (diffDays === 0) return \"Today\";\r\n        if (diffDays === 1) return \"Tomorrow\";\r\n        return `In ${diffDays} days`;\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader title=\"Exam Schedule\" subtitle=\"Upcoming Examinations\" showBack /\u003e\r\n\r\n                    {exams.length === 0 ? (\r\n                        \u003cView style={{ alignItems: \"center\", marginTop: 60, opacity: 0.6 }}\u003e\r\n                            \u003cMaterialIcons name=\"event-available\" size={64} color={colors.textSecondary} /\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                                No upcoming exams scheduled.\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003cView style={{ marginTop: 16 }}\u003e\r\n                            {exams.map((exam) =\u003e (\r\n                                \u003cView\r\n                                    key={exam._id}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 16,\r\n                                        padding: 16,\r\n                                        marginBottom: 16,\r\n                                        borderLeftWidth: 4,\r\n                                        borderLeftColor: colors.primary,\r\n                                        shadowColor: \"#000\",\r\n                                        shadowOffset: { width: 0, height: 2 },\r\n                                        shadowOpacity: 0.05,\r\n                                        shadowRadius: 4,\r\n                                        elevation: 2,\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"flex-start\" }}\u003e\r\n                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e\r\n                                                {exam.subject?.name}\r\n                                            \u003c/Text\u003e\r\n                                            \u003cText style={{ fontSize: 14, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                {exam.name} â€¢ {exam.type}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                        \u003cView style={{ backgroundColor: colors.primary + \"15\", paddingHorizontal: 10, paddingVertical: 4, borderRadius: 8 }}\u003e\r\n                                            \u003cText style={{ color: colors.primary, fontFamily: \"DMSans-Bold\", fontSize: 12 }}\u003e\r\n                                                {getDaysRemaining(exam.date)}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    \u003cView style={{ height: 1, backgroundColor: colors.textSecondary + \"20\", marginVertical: 12 }} /\u003e\r\n\r\n                                    \u003cView style={{ flexDirection: \"row\", gap: 24 }}\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                                            \u003cMaterialIcons name=\"calendar-today\" size={18} color={colors.textSecondary} /\u003e\r\n                                            \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                {new Date(exam.date).toLocaleDateString()}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                        {exam.duration \u0026\u0026 (\r\n                                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                                                \u003cMaterialIcons name=\"schedule\" size={18} color={colors.textSecondary} /\u003e\r\n                                                \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                    {exam.duration} mins\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        )}\r\n                                        {exam.room \u0026\u0026 (\r\n                                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                                                \u003cMaterialIcons name=\"meeting-room\" size={18} color={colors.textSecondary} /\u003e\r\n                                                \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                    {exam.room}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n\r\n                                    {exam.instructions \u0026\u0026 (\r\n                                        \u003cView style={{ marginTop: 12, backgroundColor: colors.background, padding: 10, borderRadius: 8 }}\u003e\r\n                                            \u003cText style={{ color: colors.textSecondary, fontSize: 12, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                {exam.instructions}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\fees.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  19,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  19,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  20,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  20,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  21,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  21,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    ActivityIndicator,\r\n    RefreshControl,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport Header from \"../../components/Header\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nexport default function StudentFeesScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(() =\u003e {\r\n        const loadUser = async () =\u003e {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (storedUser) {\r\n                setUser(JSON.parse(storedUser));\r\n            }\r\n        };\r\n        loadUser();\r\n    }, []);\r\n\r\n    const userId = user?.id || user?._id;\r\n\r\n    // Fetch Fees Data\r\n    const { data: feeData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027studentFees\u0027, userId],\r\n        `${apiConfig.baseUrl}/fees/student/${userId}`,\r\n        { enabled: !!userId }\r\n    );\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader title=\"My Fees\" subtitle=\"Payment Status \u0026 History\" showBack /\u003e\r\n\r\n                    {/* Summary Cards */}\r\n                    \u003cView style={{ flexDirection: \"row\", gap: 12, marginTop: 24 }}\u003e\r\n                        \u003cView style={{ flex: 1, backgroundColor: colors.cardBackground, padding: 16, borderRadius: 16, alignItems: \"center\" }}\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, fontSize: 12, marginBottom: 4 }}\u003eTotal Fees\u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                â‚¹{feeData?.totalFees?.toLocaleString() || 0}\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cView style={{ flex: 1, backgroundColor: colors.cardBackground, padding: 16, borderRadius: 16, alignItems: \"center\" }}\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, fontSize: 12, marginBottom: 4 }}\u003ePaid\u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.success }}\u003e\r\n                                â‚¹{feeData?.paidAmount?.toLocaleString() || 0}\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cView style={{ flex: 1, backgroundColor: colors.cardBackground, padding: 16, borderRadius: 16, alignItems: \"center\" }}\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, fontSize: 12, marginBottom: 4 }}\u003ePending\u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.error }}\u003e\r\n                                â‚¹{feeData?.pendingAmount?.toLocaleString() || 0}\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Fee Breakdown */}\r\n                    \u003cView style={{ marginTop: 24 }}\u003e\r\n                        \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                            Fee Breakdown\r\n                        \u003c/Text\u003e\r\n                        \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 16 }}\u003e\r\n                            {feeData?.feeStructure?.components?.map((comp, index) =\u003e (\r\n                                \u003cView key={index} style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 12 }}\u003e\r\n                                    \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Medium\" }}\u003e{comp.name}\u003c/Text\u003e\r\n                                    \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Bold\" }}\u003eâ‚¹{comp.amount}\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                            \u003cView style={{ height: 1, backgroundColor: colors.textSecondary + \"20\", marginVertical: 8 }} /\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}\u003e\r\n                                \u003cText style={{ color: colors.textPrimary, fontFamily: \"DMSans-Bold\" }}\u003eTotal\u003c/Text\u003e\r\n                                \u003cText style={{ color: colors.primary, fontFamily: \"DMSans-Bold\" }}\u003eâ‚¹{feeData?.totalFees}\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Payment History */}\r\n                    \u003cView style={{ marginTop: 24 }}\u003e\r\n                        \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                            Payment History\r\n                        \u003c/Text\u003e\r\n                        {(!feeData?.payments || feeData.payments.length === 0) ? (\r\n                            \u003cView style={{ alignItems: \"center\", padding: 24, opacity: 0.6 }}\u003e\r\n                                \u003cMaterialIcons name=\"receipt-long\" size={48} color={colors.textSecondary} /\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, marginTop: 12 }}\u003eNo payments recorded yet\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        ) : (\r\n                            feeData.payments.map((payment) =\u003e (\r\n                                \u003cView\r\n                                    key={payment._id}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 16,\r\n                                        padding: 16,\r\n                                        marginBottom: 12,\r\n                                        flexDirection: \"row\",\r\n                                        justifyContent: \"space-between\",\r\n                                        alignItems: \"center\"\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cView\u003e\r\n                                        \u003cText style={{ fontFamily: \"DMSans-Bold\", color: colors.textPrimary, fontSize: 16 }}\u003e\r\n                                            â‚¹{payment.amount}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, fontSize: 12, marginTop: 4 }}\u003e\r\n                                            {new Date(payment.paymentDate).toLocaleDateString()} â€¢ {payment.paymentMethod}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, fontSize: 12 }}\u003e\r\n                                            Receipt: {payment.receiptNumber}\r\n                                        \u003c/Text\u003e\r\n                                        {(payment.bookNumber || payment.manualReceiptNumber) \u0026\u0026 (\r\n                                            \u003cText style={{ fontSize: 12, color: \u0027#666\u0027, marginTop: 2 }}\u003e\r\n                                                {payment.bookNumber ? `Book: ${payment.bookNumber}` : \u0027\u0027}\r\n                                                {payment.bookNumber \u0026\u0026 payment.manualReceiptNumber ? \u0027 | \u0027 : \u0027\u0027}\r\n                                                {payment.manualReceiptNumber ? `Receipt: ${payment.manualReceiptNumber}` : \u0027\u0027}\r\n                                            \u003c/Text\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n                                    \u003cView style={{ alignItems: \"flex-end\" }}\u003e\r\n                                        \u003cView style={{ backgroundColor: colors.success + \"20\", paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 }}\u003e\r\n                                            \u003cText style={{ color: colors.success, fontSize: 10, fontFamily: \"DMSans-Bold\", textTransform: \"uppercase\" }}\u003e\r\n                                                {payment.status}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                            ))\r\n                        )}\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\leaves.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useCallback\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  38,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  49
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect, useCallback } from \u0027react\u0027;\r\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity, Modal, TextInput, RefreshControl, ActivityIndicator, ScrollView, Switch } from \u0027react-native\u0027;\r\nimport { useRouter } from \u0027expo-router\u0027;\r\nimport { Ionicons } from \u0027@expo/vector-icons\u0027;\r\nimport DateTimePicker from \u0027@react-native-community/datetimepicker\u0027;\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \u0027../../hooks/useApi\u0027;\r\nimport apiConfig from \u0027../../config/apiConfig\u0027;\r\nimport { useToast } from \u0027../../components/ToastProvider\u0027;\r\nimport { useQueryClient } from \u0027@tanstack/react-query\u0027;\r\n\r\nexport default function StudentLeaves() {\r\n    const router = useRouter();\r\n    const queryClient = useQueryClient();\r\n    const { showToast } = useToast();\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n\r\n    // Form State\r\n    const [startDate, setStartDate] = useState(new Date());\r\n    const [endDate, setEndDate] = useState(new Date());\r\n    const [reason, setReason] = useState(\u0027\u0027);\r\n    const [showStartPicker, setShowStartPicker] = useState(false);\r\n    const [showEndPicker, setShowEndPicker] = useState(false);\r\n    const [isHalfDay, setIsHalfDay] = useState(false);\r\n    const [halfDaySlot, setHalfDaySlot] = useState(\u0027morning\u0027); // \u0027morning\u0027 or \u0027afternoon\u0027\r\n\r\n    // Fetch Leaves\r\n    const { data: leavesData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027studentLeaves\u0027],\r\n        `${apiConfig.baseUrl}/leaves/my-leaves`\r\n    );\r\n    const leaves = leavesData?.data || [];\r\n\r\n    // Apply Leave Mutation\r\n    const applyLeaveMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/leaves/apply`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\u0027Leave applied successfully\u0027, \u0027success\u0027);\r\n            setModalVisible(false);\r\n            setReason(\u0027\u0027);\r\n            setIsHalfDay(false);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027studentLeaves\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \u0027Failed to apply leave\u0027, \u0027error\u0027)\r\n    });\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const handleApplyLeave = () =\u003e {\r\n        if (!reason.trim()) {\r\n            showToast(\u0027Please enter a reason\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        if (!isHalfDay \u0026\u0026 endDate \u003c startDate) {\r\n            showToast(\u0027End date cannot be before start date\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        // If half day, start and end date should be same (usually)\r\n        // But backend handles logic. For UI simplicity, if half day, we can force end date = start date\r\n        let finalEndDate = endDate;\r\n        if (isHalfDay) {\r\n            finalEndDate = startDate;\r\n        }\r\n\r\n        applyLeaveMutation.mutate({\r\n            startDate: startDate.toISOString().split(\u0027T\u0027)[0],\r\n            endDate: finalEndDate.toISOString().split(\u0027T\u0027)[0],\r\n            reason,\r\n            leaveType: isHalfDay ? \u0027half\u0027 : \u0027full\u0027,\r\n            halfDaySlot: isHalfDay ? halfDaySlot : undefined\r\n        });\r\n    };\r\n\r\n    const formatDate = (date) =\u003e {\r\n        return date.toLocaleDateString(\u0027en-GB\u0027, {\r\n            day: \u00272-digit\u0027,\r\n            month: \u0027short\u0027,\r\n            year: \u0027numeric\u0027\r\n        });\r\n    };\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027approved\u0027: return \u0027#4CAF50\u0027;\r\n            case \u0027rejected\u0027: return \u0027#F44336\u0027;\r\n            default: return \u0027#FF9800\u0027;\r\n        }\r\n    };\r\n\r\n    const renderItem = ({ item }) =\u003e (\r\n        \u003cView style={styles.card}\u003e\r\n            \u003cView style={styles.cardHeader}\u003e\r\n                \u003cView\u003e\r\n                    \u003cText style={styles.dateRange}\u003e\r\n                        {formatDate(new Date(item.startDate))}\r\n                        {item.leaveType === \u0027full\u0027 \u0026\u0026 item.startDate !== item.endDate \u0026\u0026 ` - ${formatDate(new Date(item.endDate))}`}\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={styles.leaveTypeBadge}\u003e\r\n                        {item.leaveType === \u0027half\u0027 ? `Half Day (${item.halfDaySlot})` : \u0027Full Day\u0027}\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n                \u003cView style={[styles.statusBadge, { backgroundColor: getStatusColor(item.status) }]}\u003e\r\n                    \u003cText style={styles.statusText}\u003e{(item.status || \u0027pending\u0027).toUpperCase()}\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cText style={styles.reasonLabel}\u003eReason:\u003c/Text\u003e\r\n            \u003cText style={styles.reasonText}\u003e{item.reason}\u003c/Text\u003e\r\n\r\n            {item.status === \u0027rejected\u0027 \u0026\u0026 (\r\n                \u003cView style={styles.rejectionBox}\u003e\r\n                    \u003cText style={styles.rejectionTitle}\u003eRejection Details:\u003c/Text\u003e\r\n                    \u003cText style={styles.rejectionText}\u003e\u003cText style={{ fontWeight: \u0027bold\u0027 }}\u003eReason:\u003c/Text\u003e {item.rejectionReason}\u003c/Text\u003e\r\n                    \u003cText style={styles.rejectionText}\u003e\u003cText style={{ fontWeight: \u0027bold\u0027 }}\u003eComments:\u003c/Text\u003e {item.rejectionComments}\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cView style={styles.header}\u003e\r\n                \u003cTouchableOpacity onPress={() =\u003e router.back()} style={styles.backButton}\u003e\r\n                    \u003cIonicons name=\"arrow-back\" size={24} color=\"#333\" /\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cText style={styles.headerTitle}\u003eMy Leaves\u003c/Text\u003e\r\n\r\n            \u003c/View\u003e\r\n\r\n            {loading ? (\r\n                \u003cActivityIndicator size=\"large\" color=\"#2F6CD4\" style={styles.loader} /\u003e\r\n            ) : (\r\n                \u003cFlatList\r\n                    data={leaves}\r\n                    renderItem={renderItem}\r\n                    keyExtractor={(item) =\u003e item._id}\r\n                    contentContainerStyle={styles.listContent}\r\n                    refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} /\u003e}\r\n                    ListEmptyComponent={\u003cText style={styles.emptyText}\u003eNo leave history found.\u003c/Text\u003e}\r\n                /\u003e\r\n            )}\r\n\r\n            \u003cTouchableOpacity style={styles.fab} onPress={() =\u003e setModalVisible(true)}\u003e\r\n                \u003cIonicons name=\"add\" size={24} color=\"#fff\" /\u003e\r\n                \u003cText style={styles.fabText}\u003eApply Leave\u003c/Text\u003e\r\n            \u003c/TouchableOpacity\u003e\r\n\r\n            \u003cModal\r\n                visible={modalVisible}\r\n                animationType=\"slide\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e setModalVisible(false)}\r\n            \u003e\r\n                \u003cView style={styles.modalContainer}\u003e\r\n                    \u003cView style={styles.modalContent}\u003e\r\n                        \u003cView style={styles.modalHeader}\u003e\r\n                            \u003cText style={styles.modalTitle}\u003eApply for Leave\u003c/Text\u003e\r\n                            \u003cTouchableOpacity onPress={() =\u003e setModalVisible(false)}\u003e\r\n                                \u003cIonicons name=\"close\" size={24} color=\"#333\" /\u003e\r\n                            \u003c/TouchableOpacity\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cScrollView\u003e\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eLeave Type\u003c/Text\u003e\r\n                                \u003cView style={styles.row}\u003e\r\n                                    \u003cText style={styles.valueText}\u003e{isHalfDay ? \u0027Half Day\u0027 : \u0027Full Day\u0027}\u003c/Text\u003e\r\n                                    \u003cSwitch\r\n                                        value={isHalfDay}\r\n                                        onValueChange={setIsHalfDay}\r\n                                        trackColor={{ false: \"#767577\", true: \"#81b0ff\" }}\r\n                                        thumbColor={isHalfDay ? \"#2F6CD4\" : \"#f4f3f4\"}\r\n                                    /\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {isHalfDay \u0026\u0026 (\r\n                                \u003cView style={styles.inputGroup}\u003e\r\n                                    \u003cText style={styles.label}\u003eSlot\u003c/Text\u003e\r\n                                    \u003cView style={styles.slotContainer}\u003e\r\n                                        \u003cTouchableOpacity\r\n                                            style={[styles.slotButton, halfDaySlot === \u0027morning\u0027 \u0026\u0026 styles.activeSlot]}\r\n                                            onPress={() =\u003e setHalfDaySlot(\u0027morning\u0027)}\r\n                                        \u003e\r\n                                            \u003cText style={[styles.slotText, halfDaySlot === \u0027morning\u0027 \u0026\u0026 styles.activeSlotText]}\u003eMorning\u003c/Text\u003e\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                        \u003cTouchableOpacity\r\n                                            style={[styles.slotButton, halfDaySlot === \u0027afternoon\u0027 \u0026\u0026 styles.activeSlot]}\r\n                                            onPress={() =\u003e setHalfDaySlot(\u0027afternoon\u0027)}\r\n                                        \u003e\r\n                                            \u003cText style={[styles.slotText, halfDaySlot === \u0027afternoon\u0027 \u0026\u0026 styles.activeSlotText]}\u003eAfternoon\u003c/Text\u003e\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                            )}\r\n\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eStart Date\u003c/Text\u003e\r\n                                \u003cTouchableOpacity\r\n                                    style={styles.dateButton}\r\n                                    onPress={() =\u003e setShowStartPicker(true)}\r\n                                \u003e\r\n                                    \u003cText style={styles.dateText}\u003e{formatDate(startDate)}\u003c/Text\u003e\r\n                                    \u003cIonicons name=\"calendar-outline\" size={20} color=\"#666\" /\u003e\r\n                                \u003c/TouchableOpacity\u003e\r\n                                {showStartPicker \u0026\u0026 (\r\n                                    \u003cDateTimePicker\r\n                                        value={startDate}\r\n                                        mode=\"date\"\r\n                                        display=\"default\"\r\n                                        minimumDate={new Date()}\r\n                                        onChange={(event, selectedDate) =\u003e {\r\n                                            setShowStartPicker(false);\r\n                                            if (selectedDate) {\r\n                                                setStartDate(selectedDate);\r\n                                                if (selectedDate \u003e endDate) {\r\n                                                    setEndDate(selectedDate);\r\n                                                }\r\n                                            }\r\n                                        }}\r\n                                    /\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            {!isHalfDay \u0026\u0026 (\r\n                                \u003cView style={styles.inputGroup}\u003e\r\n                                    \u003cText style={styles.label}\u003eEnd Date\u003c/Text\u003e\r\n                                    \u003cTouchableOpacity\r\n                                        style={styles.dateButton}\r\n                                        onPress={() =\u003e setShowEndPicker(true)}\r\n                                    \u003e\r\n                                        \u003cText style={styles.dateText}\u003e{formatDate(endDate)}\u003c/Text\u003e\r\n                                        \u003cIonicons name=\"calendar-outline\" size={20} color=\"#666\" /\u003e\r\n                                    \u003c/TouchableOpacity\u003e\r\n                                    {showEndPicker \u0026\u0026 (\r\n                                        \u003cDateTimePicker\r\n                                            value={endDate}\r\n                                            mode=\"date\"\r\n                                            display=\"default\"\r\n                                            minimumDate={startDate}\r\n                                            onChange={(event, selectedDate) =\u003e {\r\n                                                setShowEndPicker(false);\r\n                                                if (selectedDate) setEndDate(selectedDate);\r\n                                            }}\r\n                                        /\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                            )}\r\n\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eReason\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={[styles.input, styles.textArea]}\r\n                                    placeholder=\"Enter reason for leave...\"\r\n                                    value={reason}\r\n                                    onChangeText={setReason}\r\n                                    multiline\r\n                                    numberOfLines={4}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cTouchableOpacity\r\n                                style={styles.submitButton}\r\n                                onPress={handleApplyLeave}\r\n                                disabled={applyLeaveMutation.isPending}\r\n                            \u003e\r\n                                {applyLeaveMutation.isPending ? (\r\n                                    \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                ) : (\r\n                                    \u003cText style={styles.submitButtonText}\u003eSubmit Application\u003c/Text\u003e\r\n                                )}\r\n                            \u003c/TouchableOpacity\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: \u0027#f5f5f5\u0027,\r\n    },\r\n    header: {\r\n        flexDirection: \u0027row\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        justifyContent: \u0027space-between\u0027,\r\n        padding: 16,\r\n        backgroundColor: \u0027#fff\u0027,\r\n        elevation: 2,\r\n    },\r\n    headerTitle: {\r\n        fontSize: 18,\r\n        fontWeight: \u0027bold\u0027,\r\n        color: \u0027#333\u0027,\r\n    },\r\n    backButton: {\r\n        padding: 4,\r\n    },\r\n    fab: {\r\n        position: \u0027absolute\u0027,\r\n        bottom: 100,\r\n        right: 20,\r\n        backgroundColor: \u0027#2F6CD4\u0027,\r\n        flexDirection: \u0027row\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        paddingVertical: 12,\r\n        paddingHorizontal: 20,\r\n        borderRadius: 30,\r\n        elevation: 4,\r\n    },\r\n    fabText: {\r\n        color: \u0027#fff\u0027,\r\n        fontWeight: \u0027bold\u0027,\r\n        marginLeft: 8,\r\n    },\r\n    loader: {\r\n        marginTop: 20,\r\n    },\r\n    listContent: {\r\n        padding: 16,\r\n    },\r\n    card: {\r\n        backgroundColor: \u0027#fff\u0027,\r\n        borderRadius: 12,\r\n        padding: 16,\r\n        marginBottom: 12,\r\n        elevation: 2,\r\n    },\r\n    cardHeader: {\r\n        flexDirection: \u0027row\u0027,\r\n        justifyContent: \u0027space-between\u0027,\r\n        alignItems: \u0027flex-start\u0027,\r\n        marginBottom: 8,\r\n    },\r\n    dateRange: {\r\n        fontSize: 16,\r\n        fontWeight: \u0027bold\u0027,\r\n        color: \u0027#333\u0027,\r\n    },\r\n    leaveTypeBadge: {\r\n        fontSize: 12,\r\n        color: \u0027#666\u0027,\r\n        marginTop: 2,\r\n        fontStyle: \u0027italic\u0027\r\n    },\r\n    statusBadge: {\r\n        paddingHorizontal: 8,\r\n        paddingVertical: 4,\r\n        borderRadius: 12,\r\n    },\r\n    statusText: {\r\n        color: \u0027#fff\u0027,\r\n        fontSize: 12,\r\n        fontWeight: \u0027bold\u0027,\r\n    },\r\n    reasonLabel: {\r\n        fontSize: 14,\r\n        color: \u0027#666\u0027,\r\n        marginTop: 8,\r\n        marginBottom: 2,\r\n    },\r\n    reasonText: {\r\n        fontSize: 14,\r\n        color: \u0027#333\u0027,\r\n    },\r\n    rejectionBox: {\r\n        marginTop: 12,\r\n        padding: 10,\r\n        backgroundColor: \u0027#FFEBEE\u0027,\r\n        borderRadius: 8,\r\n        borderLeftWidth: 3,\r\n        borderLeftColor: \u0027#F44336\u0027\r\n    },\r\n    rejectionTitle: {\r\n        fontSize: 12,\r\n        fontWeight: \u0027bold\u0027,\r\n        color: \u0027#D32F2F\u0027,\r\n        marginBottom: 4\r\n    },\r\n    rejectionText: {\r\n        fontSize: 12,\r\n        color: \u0027#D32F2F\u0027,\r\n        marginBottom: 2\r\n    },\r\n    emptyText: {\r\n        textAlign: \u0027center\u0027,\r\n        marginTop: 40,\r\n        color: \u0027#666\u0027,\r\n        fontSize: 16,\r\n    },\r\n    modalContainer: {\r\n        flex: 1,\r\n        backgroundColor: \u0027rgba(0,0,0,0.5)\u0027,\r\n        justifyContent: \u0027flex-end\u0027,\r\n    },\r\n    modalContent: {\r\n        backgroundColor: \u0027#fff\u0027,\r\n        borderTopLeftRadius: 20,\r\n        borderTopRightRadius: 20,\r\n        padding: 20,\r\n        maxHeight: \u002790%\u0027,\r\n    },\r\n    modalHeader: {\r\n        flexDirection: \u0027row\u0027,\r\n        justifyContent: \u0027space-between\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        marginBottom: 20,\r\n    },\r\n    modalTitle: {\r\n        fontSize: 20,\r\n        fontWeight: \u0027bold\u0027,\r\n        color: \u0027#333\u0027,\r\n    },\r\n    inputGroup: {\r\n        marginBottom: 20,\r\n    },\r\n    label: {\r\n        fontSize: 14,\r\n        color: \u0027#666\u0027,\r\n        marginBottom: 8,\r\n        fontWeight: \u0027500\u0027,\r\n    },\r\n    row: {\r\n        flexDirection: \u0027row\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        justifyContent: \u0027space-between\u0027,\r\n        backgroundColor: \u0027#f9f9f9\u0027,\r\n        padding: 12,\r\n        borderRadius: 8,\r\n        borderWidth: 1,\r\n        borderColor: \u0027#ddd\u0027,\r\n    },\r\n    valueText: {\r\n        fontSize: 16,\r\n        color: \u0027#333\u0027,\r\n    },\r\n    slotContainer: {\r\n        flexDirection: \u0027row\u0027,\r\n        gap: 12\r\n    },\r\n    slotButton: {\r\n        flex: 1,\r\n        padding: 12,\r\n        borderRadius: 8,\r\n        borderWidth: 1,\r\n        borderColor: \u0027#ddd\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        backgroundColor: \u0027#f9f9f9\u0027\r\n    },\r\n    activeSlot: {\r\n        borderColor: \u0027#2F6CD4\u0027,\r\n        backgroundColor: \u0027#EDE7F6\u0027\r\n    },\r\n    slotText: {\r\n        color: \u0027#666\u0027,\r\n        fontWeight: \u0027500\u0027\r\n    },\r\n    activeSlotText: {\r\n        color: \u0027#2F6CD4\u0027,\r\n        fontWeight: \u0027bold\u0027\r\n    },\r\n    dateButton: {\r\n        flexDirection: \u0027row\u0027,\r\n        justifyContent: \u0027space-between\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        backgroundColor: \u0027#f9f9f9\u0027,\r\n        borderWidth: 1,\r\n        borderColor: \u0027#ddd\u0027,\r\n        borderRadius: 8,\r\n        padding: 12,\r\n    },\r\n    dateText: {\r\n        fontSize: 16,\r\n        color: \u0027#333\u0027,\r\n    },\r\n    input: {\r\n        backgroundColor: \u0027#f9f9f9\u0027,\r\n        borderWidth: 1,\r\n        borderColor: \u0027#ddd\u0027,\r\n        borderRadius: 8,\r\n        padding: 12,\r\n        fontSize: 16,\r\n    },\r\n    textArea: {\r\n        height: 100,\r\n        textAlignVertical: \u0027top\u0027,\r\n    },\r\n    submitButton: {\r\n        backgroundColor: \u0027#2F6CD4\u0027,\r\n        padding: 16,\r\n        borderRadius: 12,\r\n        alignItems: \u0027center\u0027,\r\n        marginTop: 10,\r\n        marginBottom: 20,\r\n    },\r\n    submitButtonText: {\r\n        color: \u0027#fff\u0027,\r\n        fontSize: 16,\r\n        fontWeight: \u0027bold\u0027,\r\n    },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\report-card.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027MaterialIcons\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  23
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  24,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  24,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027loading\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  43,
                                           "column":  42,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  43,
                                           "endColumn":  49
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027index\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  96,
                                           "column":  44,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  96,
                                           "endColumn":  49
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027opacity\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  182,
                                           "column":  37,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  182,
                                           "endColumn":  44
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027opacity\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  183,
                                           "column":  42,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  183,
                                           "endColumn":  49
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  7,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    Dimensions,\r\n    TouchableOpacity,\r\n    ActivityIndicator\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport Header from \"../../components/Header\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { LineChart } from \"react-native-chart-kit\";\r\n\r\nconst { width } = Dimensions.get(\u0027window\u0027);\r\n\r\nexport default function StudentReportCardScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n    const [activeTab, setActiveTab] = useState(\u0027overview\u0027); // \u0027overview\u0027 | \u0027insights\u0027\r\n\r\n    useEffect(() =\u003e {\r\n        const loadUser = async () =\u003e {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (storedUser) {\r\n                setUser(JSON.parse(storedUser));\r\n            }\r\n        };\r\n        loadUser();\r\n    }, []);\r\n\r\n    const userId = user?.id || user?._id;\r\n\r\n    // Fetch Standardized Report Card\r\n    const { data: reportCard, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027studentReportCard\u0027, userId],\r\n        `${apiConfig.baseUrl}/reports/student/${userId}`,\r\n        { enabled: !!userId }\r\n    );\r\n\r\n    // Fetch Insights\r\n    const { data: insights, isLoading: loadingInsights } = useApiQuery(\r\n        [\u0027studentInsights\u0027, userId],\r\n        `${apiConfig.baseUrl}/reports/insights/${userId}`,\r\n        { enabled: !!userId \u0026\u0026 activeTab === \u0027insights\u0027 }\r\n    );\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getGradeColor = (grade) =\u003e {\r\n        if (grade === \u0027A+\u0027 || grade === \u0027A\u0027) return colors.success;\r\n        if (grade === \u0027B+\u0027 || grade === \u0027B\u0027) return \u0027#2196F3\u0027;\r\n        if (grade === \u0027C\u0027) return \u0027#FF9800\u0027;\r\n        if (grade === \u0027D\u0027) return \u0027#FF5722\u0027;\r\n        return colors.error;\r\n    };\r\n\r\n    const renderOverview = () =\u003e (\r\n        \u003cView\u003e\r\n            {/* Overall Stats */}\r\n            \u003cView style={{\r\n                backgroundColor: colors.primary,\r\n                borderRadius: 20,\r\n                padding: 24,\r\n                marginTop: 20,\r\n                elevation: 4\r\n            }}\u003e\r\n                \u003cText style={{ fontSize: 16, color: \"#fff\", opacity: 0.9, fontFamily: \"DMSans-Medium\", textAlign: \"center\" }}\u003e\r\n                    Overall Percentage\r\n                \u003c/Text\u003e\r\n                \u003cText style={{ fontSize: 64, fontFamily: \"DMSans-Bold\", color: \"#fff\", marginTop: 8, textAlign: \"center\" }}\u003e\r\n                    {reportCard?.overall?.percentage}%\r\n                \u003c/Text\u003e\r\n                \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: \"#fff\", marginTop: 4, textAlign: \"center\", opacity: 0.9 }}\u003e\r\n                    Grade {reportCard?.overall?.grade}\r\n                \u003c/Text\u003e\r\n            \u003c/View\u003e\r\n\r\n            {/* Exam Wise Summary */}\r\n            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 32, marginBottom: 16 }}\u003e\r\n                Exam Summary\r\n            \u003c/Text\u003e\r\n\r\n            {reportCard?.exams?.map((exam, index) =\u003e (\r\n                \u003cView\r\n                    key={exam.examType}\r\n                    style={{\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 16,\r\n                        padding: 18,\r\n                        marginBottom: 14,\r\n                        elevation: 2,\r\n                        opacity: exam.isCompleted ? 1 : 0.7\r\n                    }}\r\n                \u003e\r\n                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 12 }}\u003e\r\n                        \u003cView\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                {exam.examType}\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                {exam.isCompleted ? \"Completed\" : \"In Progress / Pending\"}\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                        {exam.isCompleted \u0026\u0026 (\r\n                            \u003cView style={{ alignItems: \"flex-end\" }}\u003e\r\n                                \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: getGradeColor(exam.grade) }}\u003e\r\n                                    {exam.percentage}%\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, fontFamily: \"DMSans-Bold\", color: getGradeColor(exam.grade) }}\u003e\r\n                                    Grade {exam.grade}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        )}\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Subjects List for this Exam */}\r\n                    {exam.isCompleted \u0026\u0026 (\r\n                        \u003cView style={{ marginTop: 8, paddingTop: 12, borderTopWidth: 1, borderTopColor: colors.borderColor }}\u003e\r\n                            {exam.subjects.map((sub, idx) =\u003e (\r\n                                \u003cView key={idx} style={{ flexDirection: \"row\", justifyContent: \"space-between\", paddingVertical: 6 }}\u003e\r\n                                    \u003cText style={{ fontSize: 14, color: colors.textPrimary, fontFamily: \"DMSans-Medium\", flex: 1 }}\u003e\r\n                                        {sub.subject}\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{ fontSize: 14, color: colors.textPrimary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                        {sub.obtainedMarks !== null ? `${sub.obtainedMarks}/${sub.maxMarks}` : \"-\"}\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{ fontSize: 14, color: getGradeColor(sub.grade), fontFamily: \"DMSans-Bold\", width: 30, textAlign: \"right\" }}\u003e\r\n                                        {sub.grade}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            ))}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderInsights = () =\u003e {\r\n        if (loadingInsights) {\r\n            return \u003cActivityIndicator color={colors.primary} style={{ marginTop: 40 }} /\u003e;\r\n        }\r\n\r\n        if (!insights) return null;\r\n\r\n        const examLabels = insights.examTrends.map(e =\u003e e.exam);\r\n        const examData = insights.examTrends.map(e =\u003e parseFloat(e.percentage));\r\n\r\n        return (\r\n            \u003cView\u003e\r\n                \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 24, marginBottom: 16 }}\u003e\r\n                    Performance Trend\r\n                \u003c/Text\u003e\r\n\r\n                \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 16, elevation: 2 }}\u003e\r\n                    \u003cLineChart\r\n                        data={{\r\n                            labels: examLabels,\r\n                            datasets: [{ data: examData }]\r\n                        }}\r\n                        width={width - 64} // from react-native\r\n                        height={220}\r\n                        yAxisSuffix=\"%\"\r\n                        chartConfig={{\r\n                            backgroundColor: colors.cardBackground,\r\n                            backgroundGradientFrom: colors.cardBackground,\r\n                            backgroundGradientTo: colors.cardBackground,\r\n                            decimalPlaces: 0,\r\n                            color: (opacity = 1) =\u003e colors.primary,\r\n                            labelColor: (opacity = 1) =\u003e colors.textSecondary,\r\n                            style: { borderRadius: 16 },\r\n                            propsForDots: {\r\n                                r: \"6\",\r\n                                strokeWidth: \"2\",\r\n                                stroke: colors.primary\r\n                            }\r\n                        }}\r\n                        bezier\r\n                        style={{ marginVertical: 8, borderRadius: 16 }}\r\n                    /\u003e\r\n                \u003c/View\u003e\r\n\r\n                \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 32, marginBottom: 16 }}\u003e\r\n                    Subject Analysis\r\n                \u003c/Text\u003e\r\n\r\n                {Object.entries(insights.subjectTrends).map(([subject, trends]) =\u003e (\r\n                    \u003cView key={subject} style={{ marginBottom: 20 }}\u003e\r\n                        \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary, marginBottom: 8 }}\u003e\r\n                            {subject}\r\n                        \u003c/Text\u003e\r\n                        \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                            {trends.map((t, i) =\u003e (\r\n                                \u003cView key={i} style={{ marginRight: 16, alignItems: \"center\" }}\u003e\r\n                                    \u003cView style={{\r\n                                        height: 100,\r\n                                        width: 40,\r\n                                        justifyContent: \"flex-end\",\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 20,\r\n                                        overflow: \"hidden\"\r\n                                    }}\u003e\r\n                                        \u003cView style={{\r\n                                            height: `${t.percentage}%`,\r\n                                            backgroundColor: getGradeColor(getGrade(t.percentage)),\r\n                                            width: \"100%\",\r\n                                            borderRadius: 20\r\n                                        }} /\u003e\r\n                                    \u003c/View\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 4 }}\u003e{t.exam}\u003c/Text\u003e\r\n                                    \u003cText style={{ fontSize: 10, color: colors.textPrimary, fontFamily: \"DMSans-Bold\" }}\u003e{t.percentage}%\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n                ))}\r\n            \u003c/View\u003e\r\n        );\r\n    };\r\n\r\n    // Helper for subject analysis chart color\r\n    const getGrade = (percentage) =\u003e {\r\n        if (percentage \u003e= 90) return \u0027A+\u0027;\r\n        if (percentage \u003e= 80) return \u0027A\u0027;\r\n        if (percentage \u003e= 70) return \u0027B+\u0027;\r\n        if (percentage \u003e= 60) return \u0027B\u0027;\r\n        if (percentage \u003e= 50) return \u0027C\u0027;\r\n        if (percentage \u003e= 40) return \u0027D\u0027;\r\n        return \u0027F\u0027;\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader\r\n                        title=\"My Report Card\"\r\n                        subtitle={reportCard?.student?.class?.name ? `${reportCard.student.class.name} ${reportCard.student.class.section || \u0027\u0027}` : \"Academic Performance\"}\r\n                    /\u003e\r\n\r\n                    {/* Tabs */}\r\n                    \u003cView style={{ flexDirection: \"row\", marginTop: 20, backgroundColor: colors.cardBackground, borderRadius: 12, padding: 4 }}\u003e\r\n                        \u003cTouchableOpacity\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \u0027overview\u0027 ? colors.primary : \u0027transparent\u0027,\r\n                                borderRadius: 10\r\n                            }}\r\n                            onPress={() =\u003e setActiveTab(\u0027overview\u0027)}\r\n                        \u003e\r\n                            \u003cText style={{ fontFamily: \"DMSans-Bold\", color: activeTab === \u0027overview\u0027 ? \"#fff\" : colors.textSecondary }}\u003eOverview\u003c/Text\u003e\r\n                        \u003c/TouchableOpacity\u003e\r\n                        \u003cTouchableOpacity\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \u0027insights\u0027 ? colors.primary : \u0027transparent\u0027,\r\n                                borderRadius: 10\r\n                            }}\r\n                            onPress={() =\u003e setActiveTab(\u0027insights\u0027)}\r\n                        \u003e\r\n                            \u003cText style={{ fontFamily: \"DMSans-Bold\", color: activeTab === \u0027insights\u0027 ? \"#fff\" : colors.textSecondary }}\u003eInsights\u003c/Text\u003e\r\n                        \u003c/TouchableOpacity\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {activeTab === \u0027overview\u0027 ? renderOverview() : renderInsights()}\r\n\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\student\\timetable.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  24,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  24,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    RefreshControl,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport AppHeader from \"../../components/Header\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\n\r\nconst DAYS = [\u0027Monday\u0027, \u0027Tuesday\u0027, \u0027Wednesday\u0027, \u0027Thursday\u0027, \u0027Friday\u0027, \u0027Saturday\u0027];\r\n\r\nexport default function StudentTimetableScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [selectedDay, setSelectedDay] = useState(\u0027Monday\u0027);\r\n    const [currentDay, setCurrentDay] = useState(\u0027\u0027);\r\n\r\n    useEffect(() =\u003e {\r\n        // Set current day\r\n        const days = [\u0027Sunday\u0027, \u0027Monday\u0027, \u0027Tuesday\u0027, \u0027Wednesday\u0027, \u0027Thursday\u0027, \u0027Friday\u0027, \u0027Saturday\u0027];\r\n        const today = days[new Date().getDay()];\r\n        if (DAYS.includes(today)) {\r\n            setSelectedDay(today);\r\n            setCurrentDay(today);\r\n        } else {\r\n            setSelectedDay(\u0027Monday\u0027); // Default to Monday if Sunday\r\n        }\r\n    }, []);\r\n\r\n    // Fetch Timetable\r\n    const { data: timetableData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027studentTimetable\u0027],\r\n        `${apiConfig.baseUrl}/timetable/my-timetable`\r\n    );\r\n\r\n    // Process timetable data\r\n    const schedule = {};\r\n    DAYS.forEach(day =\u003e schedule[day] = []);\r\n\r\n    if (timetableData?.schedule) {\r\n        timetableData.schedule.forEach(daySchedule =\u003e {\r\n            schedule[daySchedule.day] = daySchedule.periods.sort((a, b) =\u003e a.periodNumber - b.periodNumber);\r\n        });\r\n    }\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader title=\"My Timetable\" subtitle=\"Class Schedule\" showBack /\u003e\r\n\r\n                    {/* Day Tabs */}\r\n                    \u003cView style={{ marginTop: 24 }}\u003e\r\n                        \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                {DAYS.map((day) =\u003e (\r\n                                    \u003cPressable\r\n                                        key={day}\r\n                                        onPress={() =\u003e setSelectedDay(day)}\r\n                                        style={{\r\n                                            paddingHorizontal: 16,\r\n                                            paddingVertical: 8,\r\n                                            backgroundColor: selectedDay === day ? colors.primary : colors.cardBackground,\r\n                                            borderRadius: 12,\r\n                                            borderWidth: 1,\r\n                                            borderColor: selectedDay === day ? colors.primary : colors.textSecondary + \"20\"\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cText style={{\r\n                                            color: selectedDay === day ? \"#fff\" : colors.textPrimary,\r\n                                            fontFamily: selectedDay === day ? \"DMSans-Bold\" : \"DMSans-Medium\"\r\n                                        }}\u003e\r\n                                            {day.slice(0, 3)}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                ))}\r\n                            \u003c/View\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Schedule List */}\r\n                    \u003cView style={{ marginTop: 24 }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                {selectedDay}\r\n                            \u003c/Text\u003e\r\n                            {selectedDay === currentDay \u0026\u0026 (\r\n                                \u003cView style={{ backgroundColor: colors.success + \"20\", paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 }}\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.success, fontFamily: \"DMSans-Bold\" }}\u003eTODAY\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            )}\r\n                        \u003c/View\u003e\r\n\r\n                        {(!schedule[selectedDay] || schedule[selectedDay].length === 0) ? (\r\n                            \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                                \u003cMaterialIcons name=\"event-busy\" size={48} color={colors.textSecondary} /\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                                    No classes scheduled\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        ) : (\r\n                            schedule[selectedDay].map((period, index) =\u003e (\r\n                                \u003cView\r\n                                    key={index}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 16,\r\n                                        padding: 16,\r\n                                        marginBottom: 12,\r\n                                        flexDirection: \"row\",\r\n                                        gap: 16,\r\n                                        shadowColor: \"#000\",\r\n                                        shadowOffset: { width: 0, height: 1 },\r\n                                        shadowOpacity: 0.05,\r\n                                        shadowRadius: 4,\r\n                                        elevation: 1,\r\n                                    }}\r\n                                \u003e\r\n                                    {/* Time Column */}\r\n                                    \u003cView style={{ alignItems: \"center\", justifyContent: \"center\", width: 60 }}\u003e\r\n                                        \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                            {period.startTime}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cView style={{ width: 1, height: 10, backgroundColor: colors.textSecondary + \"40\", marginVertical: 2 }} /\u003e\r\n                                        \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                            {period.endTime}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    {/* Divider */}\r\n                                    \u003cView style={{ width: 4, backgroundColor: colors.primary, borderRadius: 2 }} /\u003e\r\n\r\n                                    {/* Details Column */}\r\n                                    \u003cView style={{ flex: 1, justifyContent: \"center\" }}\u003e\r\n                                        \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e\r\n                                            {period.subject?.name || \"Subject\"}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\u003e\r\n                                                \u003cMaterialIcons name=\"person\" size={14} color={colors.textSecondary} /\u003e\r\n                                                \u003cText style={{ fontSize: 13, color: colors.textSecondary }}\u003e\r\n                                                    {period.teacher?.name || \"Teacher\"}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                            {period.roomNumber \u0026\u0026 (\r\n                                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\u003e\r\n                                                    \u003cMaterialIcons name=\"room\" size={14} color={colors.textSecondary} /\u003e\r\n                                                    \u003cText style={{ fontSize: 13, color: colors.textSecondary }}\u003e\r\n                                                        Room {period.roomNumber}\r\n                                                    \u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                            )}\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                            ))\r\n                        )}\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\subjects.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  5,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  5,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  16,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  16,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  17,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  17,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport { View, Text, ScrollView, RefreshControl, ActivityIndicator, Pressable } from \"react-native\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useTheme } from \"../theme\";\r\nimport apiConfig from \"../config/apiConfig\";\r\nimport apiFetch from \"../utils/apiFetch\";\r\nimport { useApiQuery } from \"../hooks/useApi\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useToast } from \"../components/ToastProvider\";\r\nimport Header from \"../components/Header\";\r\n\r\nexport default function SubjectsScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    const { data: userData } = useApiQuery([\u0027currentUser\u0027], `${apiConfig.baseUrl}/auth/me`);\r\n    const user = userData || {};\r\n\r\n    // Student Subjects Query\r\n    const { data: studentSubjectsData, isLoading: loadingStudent, refetch: refetchStudent } = useApiQuery(\r\n        [\u0027studentSubjects\u0027, user?.currentClass?._id || user?.currentClass],\r\n        `${apiConfig.baseUrl}/classes/${user?.currentClass?._id || user?.currentClass}/full-details`,\r\n        {\r\n            enabled: !!(user?.role === \u0027student\u0027 \u0026\u0026 user?.currentClass),\r\n            select: (data) =\u003e data.subjects || []\r\n        }\r\n    );\r\n\r\n    // Teacher Subjects Query\r\n    const { data: teacherClassesData, isLoading: loadingTeacher, refetch: refetchTeacher } = useQuery({\r\n        queryKey: [\u0027teacherSubjectsFull\u0027],\r\n        queryFn: async () =\u003e {\r\n            const response = await apiFetch(`${apiConfig.baseUrl}/classes/my-classes`);\r\n            if (!response.ok) throw new Error(\u0027Failed to fetch classes\u0027);\r\n            const classes = await response.json();\r\n\r\n            const classesWithSubjects = await Promise.all(classes.map(async (cls) =\u003e {\r\n                try {\r\n                    const res = await apiFetch(`${apiConfig.baseUrl}/classes/${cls._id}/full-details`);\r\n                    if (res.ok) {\r\n                        const data = await res.json();\r\n                        return { ...cls, subjects: data.subjects || [] };\r\n                    }\r\n                    return cls;\r\n                } catch (e) {\r\n                    return cls;\r\n                }\r\n            }));\r\n            return classesWithSubjects;\r\n        },\r\n        enabled: !!(user \u0026\u0026 (user.role === \u0027class teacher\u0027 || user.role === \u0027staff\u0027 || user.role === \u0027teacher\u0027))\r\n    });\r\n\r\n    const loading = (user?.role === \u0027student\u0027 ? loadingStudent : loadingTeacher);\r\n    const studentSubjects = studentSubjectsData || [];\r\n    const teacherClasses = teacherClassesData || [];\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        if (user?.role === \u0027student\u0027) await refetchStudent();\r\n        else await refetchTeacher();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const renderStudentView = () =\u003e (\r\n        \u003cView\u003e\r\n            {studentSubjects.length === 0 ? (\r\n                \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                    \u003cMaterialIcons name=\"library-books\" size={48} color={colors.textSecondary} /\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                        No subjects assigned.\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            ) : (\r\n                studentSubjects.map((subject) =\u003e (\r\n                    \u003cPressable\r\n                        key={subject._id}\r\n                        onPress={() =\u003e router.push({\r\n                            pathname: \"/student/class/subject/[subjectId]\",\r\n                            params: { id: user.currentClass._id || user.currentClass, subjectId: subject._id }\r\n                        })}\r\n                        style={({ pressed }) =\u003e ({\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 16,\r\n                            padding: 16,\r\n                            marginBottom: 12,\r\n                            shadowColor: \"#000\",\r\n                            shadowOffset: { width: 0, height: 1 },\r\n                            shadowOpacity: 0.05,\r\n                            shadowRadius: 4,\r\n                            elevation: 1,\r\n                            opacity: pressed ? 0.9 : 1,\r\n                            flexDirection: \"row\",\r\n                            justifyContent: \"space-between\",\r\n                            alignItems: \"center\"\r\n                        })}\r\n                    \u003e\r\n                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                            \u003cView style={{ backgroundColor: colors.primary + \"20\", padding: 10, borderRadius: 10 }}\u003e\r\n                                \u003cMaterialIcons name=\"book\" size={24} color={colors.primary} /\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView\u003e\r\n                                \u003cText style={{ fontSize: 16, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                                    {subject.name}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 2 }}\u003e\r\n                                    Tap to view content\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                    \u003c/Pressable\u003e\r\n                ))\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderTeacherView = () =\u003e (\r\n        \u003cView\u003e\r\n            {teacherClasses.length === 0 ? (\r\n                \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                    \u003cMaterialIcons name=\"class\" size={48} color={colors.textSecondary} /\u003e\r\n                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                        No classes assigned.\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            ) : (\r\n                teacherClasses.map((cls) =\u003e (\r\n                    \u003cView key={cls._id} style={{ marginBottom: 24 }}\u003e\r\n                        \u003cText style={{ fontSize: 16, fontWeight: \"700\", color: colors.textSecondary, marginBottom: 12, marginLeft: 4 }}\u003e\r\n                            {cls.name} {cls.section ? `- ${cls.section}` : \"\"}\r\n                        \u003c/Text\u003e\r\n\r\n                        {(!cls.subjects || cls.subjects.length === 0) ? (\r\n                            \u003cText style={{ color: colors.textSecondary, fontStyle: \u0027italic\u0027, marginLeft: 16 }}\u003eNo subjects found\u003c/Text\u003e\r\n                        ) : (\r\n                            cls.subjects.map((subject) =\u003e (\r\n                                \u003cPressable\r\n                                    key={subject._id}\r\n                                    onPress={() =\u003e router.push({\r\n                                        pathname: \"/teacher/class/subject/[subjectId]\",\r\n                                        params: { id: cls._id, subjectId: subject._id }\r\n                                    })}\r\n                                    style={({ pressed }) =\u003e ({\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 12,\r\n                                        padding: 14,\r\n                                        marginBottom: 8,\r\n                                        opacity: pressed ? 0.9 : 1,\r\n                                        flexDirection: \"row\",\r\n                                        justifyContent: \"space-between\",\r\n                                        alignItems: \"center\",\r\n                                        borderLeftWidth: 4,\r\n                                        borderLeftColor: colors.primary\r\n                                    })}\r\n                                \u003e\r\n                                    \u003cText style={{ fontSize: 15, fontWeight: \"600\", color: colors.textPrimary }}\u003e\r\n                                        {subject.name}\r\n                                    \u003c/Text\u003e\r\n                                    \u003cMaterialIcons name=\"chevron-right\" size={20} color={colors.textSecondary} /\u003e\r\n                                \u003c/Pressable\u003e\r\n                            ))\r\n                        )}\r\n                    \u003c/View\u003e\r\n                ))\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader title=\"Subjects\" subtitle=\"Access your course materials\" /\u003e\r\n\r\n                    {loading ? (\r\n                        \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", marginTop: 100 }}\u003e\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003cView style={{ marginTop: 16 }}\u003e\r\n                            {user?.role === \u0027student\u0027 ? renderStudentView() : renderTeacherView()}\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\assessments.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    TouchableOpacity,\r\n    ActivityIndicator,\r\n    Alert,\r\n    StyleSheet\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation } from \"../../hooks/useApi\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport AppHeader from \"../../components/Header\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nexport default function AssessmentDashboard() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [user, setUser] = useState(null);\r\n    const [selectedClass, setSelectedClass] = useState(null);\r\n    const [selectedSubject, setSelectedSubject] = useState(null);\r\n\r\n    useEffect(() =\u003e {\r\n        const loadUser = async () =\u003e {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (storedUser) {\r\n                setUser(JSON.parse(storedUser));\r\n            }\r\n        };\r\n        loadUser();\r\n    }, []);\r\n\r\n    // Fetch Teacher\u0027s Classes (Assuming generic teacher classes endpoint or filtering)\r\n    // For now, let\u0027s use the existing teacher classes endpoint\r\n    const { data: teacherClasses, isLoading: loadingClasses } = useApiQuery(\r\n        [\u0027teacherClasses\u0027, user?.id],\r\n        `${apiConfig.baseUrl}/teachers/${user?.id}/classes`,\r\n        { enabled: !!user?.id }\r\n    );\r\n\r\n    // Fetch Subjects for selected class (if class teacher) or just teacher\u0027s subjects\r\n    // This part depends on how the backend exposes subjects. \r\n    // Let\u0027s assume we can get subjects for a class that the teacher teaches.\r\n    const { data: subjects, isLoading: loadingSubjects } = useApiQuery(\r\n        [\u0027classSubjects\u0027, selectedClass?._id],\r\n        `${apiConfig.baseUrl}/classes/${selectedClass?._id}/subjects`, // This might need adjustment based on actual API\r\n        { enabled: !!selectedClass }\r\n    );\r\n\r\n    // Fetch Standardized Exams Status\r\n    const { data: examStatus, isLoading: loadingExams, refetch: refetchExams } = useApiQuery(\r\n        [\u0027standardizedExams\u0027, selectedClass?._id, selectedSubject?._id],\r\n        `${apiConfig.baseUrl}/exams/standardized?classId=${selectedClass?._id}\u0026subjectId=${selectedSubject?._id}`,\r\n        { enabled: !!selectedClass \u0026\u0026 !!selectedSubject }\r\n    );\r\n\r\n    const createExamMutation = useApiMutation(`${apiConfig.baseUrl}/exams/standardized`, \u0027POST\u0027);\r\n\r\n    const handleCreateExam = async (type) =\u003e {\r\n        if (!selectedClass || !selectedSubject) return;\r\n\r\n        Alert.alert(\r\n            \"Initialize Exam\",\r\n            `Are you sure you want to initialize ${type} for ${selectedClass.name} - ${selectedSubject.name}?`,\r\n            [\r\n                { text: \"Cancel\", style: \"cancel\" },\r\n                {\r\n                    text: \"Create\",\r\n                    onPress: async () =\u003e {\r\n                        try {\r\n                            await createExamMutation.mutateAsync({\r\n                                type,\r\n                                classId: selectedClass._id,\r\n                                subjectId: selectedSubject._id,\r\n                                totalMarks: type.startsWith(\u0027SA\u0027) ? 80 : 20, // Default marks, can be editable later\r\n                                instructions: `Standardized ${type} Assessment`\r\n                            });\r\n                            showToast(`${type} created successfully`, \"success\");\r\n                            refetchExams();\r\n                        } catch (error) {\r\n                            showToast(error.message || \"Failed to create exam\", \"error\");\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        );\r\n    };\r\n\r\n    const handleEnterMarks = (exam) =\u003e {\r\n        router.push({\r\n            pathname: \"/teacher/marks-entry\",\r\n            params: {\r\n                examId: exam._id,\r\n                examName: exam.name,\r\n                className: selectedClass.name,\r\n                subjectName: selectedSubject.name\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cAppHeader title=\"Assessments\" subtitle=\"Manage Standardized Exams\" /\u003e\r\n\r\n            \u003cScrollView contentContainerStyle={{ padding: 16, paddingBottom: 100 }}\u003e\r\n\r\n                {/* Class Selection */}\r\n                \u003cText style={[localStyles.label, { color: colors.textPrimary }]}\u003eSelect Class\u003c/Text\u003e\r\n                \u003cScrollView horizontal showsHorizontalScrollIndicator={false} style={{ marginBottom: 20 }}\u003e\r\n                    {loadingClasses ? (\r\n                        \u003cActivityIndicator color={colors.primary} /\u003e\r\n                    ) : (\r\n                        teacherClasses?.map((cls) =\u003e (\r\n                            \u003cTouchableOpacity\r\n                                key={cls._id}\r\n                                style={[\r\n                                    localStyles.chip,\r\n                                    {\r\n                                        backgroundColor: selectedClass?._id === cls._id ? colors.primary : colors.cardBackground,\r\n                                        borderColor: selectedClass?._id === cls._id ? colors.primary : colors.borderColor\r\n                                    }\r\n                                ]}\r\n                                onPress={() =\u003e {\r\n                                    setSelectedClass(cls);\r\n                                    setSelectedSubject(null); // Reset subject\r\n                                }}\r\n                            \u003e\r\n                                \u003cText style={{\r\n                                    color: selectedClass?._id === cls._id ? \"#fff\" : colors.textPrimary,\r\n                                    fontFamily: \"DMSans-Medium\"\r\n                                }}\u003e\r\n                                    {cls.name} {cls.section}\r\n                                \u003c/Text\u003e\r\n                            \u003c/TouchableOpacity\u003e\r\n                        ))\r\n                    )}\r\n                \u003c/ScrollView\u003e\r\n\r\n                {/* Subject Selection */}\r\n                {selectedClass \u0026\u0026 (\r\n                    \u003c\u003e\r\n                        \u003cText style={[localStyles.label, { color: colors.textPrimary }]}\u003eSelect Subject\u003c/Text\u003e\r\n                        \u003cScrollView horizontal showsHorizontalScrollIndicator={false} style={{ marginBottom: 20 }}\u003e\r\n                            {loadingSubjects ? (\r\n                                \u003cActivityIndicator color={colors.primary} /\u003e\r\n                            ) : (\r\n                                subjects?.map((sub) =\u003e (\r\n                                    \u003cTouchableOpacity\r\n                                        key={sub._id}\r\n                                        style={[\r\n                                            localStyles.chip,\r\n                                            {\r\n                                                backgroundColor: selectedSubject?._id === sub._id ? colors.primary : colors.cardBackground,\r\n                                                borderColor: selectedSubject?._id === sub._id ? colors.primary : colors.borderColor\r\n                                            }\r\n                                        ]}\r\n                                        onPress={() =\u003e setSelectedSubject(sub)}\r\n                                    \u003e\r\n                                        \u003cText style={{\r\n                                            color: selectedSubject?._id === sub._id ? \"#fff\" : colors.textPrimary,\r\n                                            fontFamily: \"DMSans-Medium\"\r\n                                        }}\u003e\r\n                                            {sub.name}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/TouchableOpacity\u003e\r\n                                ))\r\n                            )}\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/\u003e\r\n                )}\r\n\r\n                {/* Exam Grid */}\r\n                {selectedClass \u0026\u0026 selectedSubject ? (\r\n                    loadingExams ? (\r\n                        \u003cActivityIndicator size=\"large\" color={colors.primary} style={{ marginTop: 40 }} /\u003e\r\n                    ) : (\r\n                        \u003cView style={localStyles.grid}\u003e\r\n                            {examStatus?.map((item) =\u003e (\r\n                                \u003cView\r\n                                    key={item.type}\r\n                                    style={[localStyles.card, { backgroundColor: colors.cardBackground }]}\r\n                                \u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 12 }}\u003e\r\n                                        \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                            {item.type}\r\n                                        \u003c/Text\u003e\r\n                                        {item.exists ? (\r\n                                            \u003cMaterialIcons name=\"check-circle\" size={20} color={colors.success} /\u003e\r\n                                        ) : (\r\n                                            \u003cMaterialIcons name=\"radio-button-unchecked\" size={20} color={colors.textSecondary} /\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n\r\n                                    {item.exists ? (\r\n                                        \u003c\u003e\r\n                                            \u003cView style={{ marginBottom: 16 }}\u003e\r\n                                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                    Status: {item.marksEntered ? \"Marks Entered\" : \"Pending Entry\"}\r\n                                                \u003c/Text\u003e\r\n                                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\", marginTop: 4 }}\u003e\r\n                                                    Students Graded: {item.marksCount}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                            \u003cTouchableOpacity\r\n                                                style={[localStyles.button, { backgroundColor: colors.primary }]}\r\n                                                onPress={() =\u003e handleEnterMarks(item.exam)}\r\n                                            \u003e\r\n                                                \u003cText style={localStyles.buttonText}\u003eManage Marks\u003c/Text\u003e\r\n                                            \u003c/TouchableOpacity\u003e\r\n                                        \u003c/\u003e\r\n                                    ) : (\r\n                                        \u003c\u003e\r\n                                            \u003cView style={{ marginBottom: 16 }}\u003e\r\n                                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                    Not Created Yet\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                            \u003cTouchableOpacity\r\n                                                style={[localStyles.button, { backgroundColor: colors.cardBackground, borderWidth: 1, borderColor: colors.primary }]}\r\n                                                onPress={() =\u003e handleCreateExam(item.type)}\r\n                                            \u003e\r\n                                                \u003cText style={[localStyles.buttonText, { color: colors.primary }]}\u003eInitialize\u003c/Text\u003e\r\n                                            \u003c/TouchableOpacity\u003e\r\n                                        \u003c/\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    )\r\n                ) : (\r\n                    \u003cView style={{ alignItems: \"center\", marginTop: 60 }}\u003e\r\n                        \u003cMaterialIcons name=\"assignment\" size={60} color={colors.textSecondary + \"40\"} /\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                            Select a Class and Subject to view exams\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                )}\r\n\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst localStyles = StyleSheet.create({\r\n    label: {\r\n        fontSize: 14,\r\n        fontFamily: \"DMSans-Bold\",\r\n        marginBottom: 12,\r\n        marginLeft: 4\r\n    },\r\n    chip: {\r\n        paddingHorizontal: 16,\r\n        paddingVertical: 8,\r\n        borderRadius: 20,\r\n        borderWidth: 1,\r\n        marginRight: 10,\r\n        minWidth: 80,\r\n        alignItems: \"center\"\r\n    },\r\n    grid: {\r\n        flexDirection: \"row\",\r\n        flexWrap: \"wrap\",\r\n        gap: 12,\r\n        marginTop: 10\r\n    },\r\n    card: {\r\n        width: \"48%\",\r\n        padding: 16,\r\n        borderRadius: 16,\r\n        elevation: 2,\r\n        marginBottom: 4\r\n    },\r\n    button: {\r\n        paddingVertical: 8,\r\n        borderRadius: 8,\r\n        alignItems: \"center\"\r\n    },\r\n    buttonText: {\r\n        color: \"#fff\",\r\n        fontSize: 12,\r\n        fontFamily: \"DMSans-Bold\"\r\n    }\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\attendance.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useCallback\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  38,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  49
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  10,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  10,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect, useCallback } from \u0027react\u0027;\r\nimport { View, StyleSheet } from \u0027react-native\u0027;\r\nimport { useRouter } from \u0027expo-router\u0027;\r\nimport { useApiQuery } from \u0027../../hooks/useApi\u0027;\r\nimport apiConfig from \u0027../../config/apiConfig\u0027;\r\nimport { useToast } from \u0027../../components/ToastProvider\u0027;\r\nimport AttendanceView from \u0027../../components/AttendanceView\u0027;\r\n\r\nexport default function TeacherAttendance() {\r\n    const router = useRouter();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Fetch Attendance\r\n    const { data: attendanceData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027teacherAttendance\u0027],\r\n        `${apiConfig.baseUrl}/attendance/my-attendance`\r\n    );\r\n\r\n    const myAttendance = attendanceData?.attendance || [];\r\n    const mySummary = attendanceData?.summary || null;\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cAttendanceView\r\n                attendanceHistory={myAttendance}\r\n                summary={mySummary}\r\n                loading={loading}\r\n                refreshing={refreshing}\r\n                onRefresh={onRefresh}\r\n                title=\"My Attendance\"\r\n                subtitle=\"Track your teaching attendance\"\r\n            /\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: \u0027#f5f5f5\u0027 },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\class\\[id].jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027FlatList\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  12,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  12,
                                           "endColumn":  13
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  28,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  28,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027loading\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  61,
                                           "column":  30,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  61,
                                           "endColumn":  37
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027formatDate\u0027 is not defined.",
                                           "line":  467,
                                           "column":  68,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  467,
                                           "endColumn":  78
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027formatDate\u0027 is not defined.",
                                           "line":  730,
                                           "column":  68,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  730,
                                           "endColumn":  78
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  2,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    TextInput,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Modal,\r\n    Alert,\r\n    FlatList\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\r\nimport { useTheme } from \"../../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport apiConfig from \"../../../config/apiConfig\";\r\nimport { useToast } from \"../../../components/ToastProvider\";\r\nimport AppHeader from \"../../../components/Header\";\r\n\r\nexport default function ClassDetailsScreen() {\r\n    const router = useRouter();\r\n    const { id } = useLocalSearchParams();\r\n    const queryClient = useQueryClient();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Modals\r\n    const [showAddSubjectModal, setShowAddSubjectModal] = useState(false);\r\n    const [showAddStudentModal, setShowAddStudentModal] = useState(false);\r\n\r\n    const [activeTab, setActiveTab] = useState(\"subjects\"); // subjects, students\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [user, setUser] = useState(null);\r\n\r\n    const [selectedGlobalSubjectIds, setSelectedGlobalSubjectIds] = useState([]);\r\n    const [selectedStudentIds, setSelectedStudentIds] = useState([]);\r\n\r\n    useEffect(() =\u003e {\r\n        loadUserData();\r\n    }, []);\r\n\r\n    const loadUserData = async () =\u003e {\r\n        try {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (storedUser) {\r\n                const parsedUser = JSON.parse(storedUser);\r\n                setUser(parsedUser);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to load user:\", error);\r\n        }\r\n    };\r\n\r\n    // Fetch Class Details\r\n    const { data, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027classDetails\u0027, id],\r\n        `${apiConfig.baseUrl}/classes/${id}/full-details`,\r\n        { enabled: !!id }\r\n    );\r\n\r\n    const classData = data?.classData;\r\n    const subjects = data?.subjects || [];\r\n    const students = data?.students || [];\r\n\r\n    // Fetch Global Subjects\r\n    const { data: globalSubjectsData } = useApiQuery(\r\n        [\u0027globalSubjects\u0027],\r\n        `${apiConfig.baseUrl}/subjects`\r\n    );\r\n    const globalSubjects = globalSubjectsData || [];\r\n\r\n    // Fetch Available Students\r\n    const { data: availableStudentsData } = useApiQuery(\r\n        [\u0027availableStudents\u0027],\r\n        `${apiConfig.baseUrl}/users?role=student\u0026limit=1000`\r\n    );\r\n    // Handle both new paginated structure and potential old array structure\r\n    const availableStudents = Array.isArray(availableStudentsData)\r\n        ? availableStudentsData.filter(s =\u003e !s.currentClass)\r\n        : (availableStudentsData?.data || []).filter(s =\u003e !s.currentClass);\r\n\r\n    // Mutations\r\n    const addSubjectMutation = useApiMutation({\r\n        mutationFn: async (subjectId) =\u003e {\r\n            const subject = globalSubjects.find(s =\u003e s._id === subjectId);\r\n            if (!subject) throw new Error(\"Subject not found\");\r\n            return createApiMutationFn(`${apiConfig.baseUrl}/classes/${id}/subjects`, \u0027POST\u0027)({\r\n                name: subject.name,\r\n                globalSubjectId: subject._id\r\n            });\r\n        }\r\n    });\r\n\r\n    const removeSubjectMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn((subjectId) =\u003e `${apiConfig.baseUrl}/classes/${id}/subjects/${subjectId}`, \u0027DELETE\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Subject removed successfully\", \"success\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027classDetails\u0027, id] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to remove subject\", \"error\")\r\n    });\r\n\r\n    const addStudentsMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/classes/${id}/students`, \u0027POST\u0027),\r\n        onSuccess: (data) =\u003e {\r\n            showToast(data.message || \"Students added successfully\", \"success\");\r\n            setShowAddStudentModal(false);\r\n            setSearchQuery(\"\");\r\n            setSelectedStudentIds([]);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027classDetails\u0027, id] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027availableStudents\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to add students\", \"error\")\r\n    });\r\n\r\n    const removeStudentMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn((studentId) =\u003e `${apiConfig.baseUrl}/classes/${id}/students/${studentId}`, \u0027DELETE\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Student removed successfully\", \"success\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027classDetails\u0027, id] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027availableStudents\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to remove student\", \"error\")\r\n    });\r\n\r\n    const toggleSubjectSelection = (subjectId) =\u003e {\r\n        setSelectedGlobalSubjectIds(prev =\u003e {\r\n            if (prev.includes(subjectId)) {\r\n                return prev.filter(id =\u003e id !== subjectId);\r\n            } else {\r\n                return [...prev, subjectId];\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleAddSubject = async () =\u003e {\r\n        if (selectedGlobalSubjectIds.length === 0) {\r\n            showToast(\"Please select at least one subject\", \"error\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Add subjects one by one\r\n            let successCount = 0;\r\n            let failCount = 0;\r\n\r\n            await Promise.all(selectedGlobalSubjectIds.map(async (subjectId) =\u003e {\r\n                try {\r\n                    await addSubjectMutation.mutateAsync(subjectId);\r\n                    successCount++;\r\n                } catch (error) {\r\n                    failCount++;\r\n                }\r\n            }));\r\n\r\n            if (successCount \u003e 0) {\r\n                showToast(`${successCount} subject(s) added successfully`, \"success\");\r\n            }\r\n            if (failCount \u003e 0) {\r\n                showToast(`${failCount} subject(s) failed to add`, \"error\");\r\n            }\r\n\r\n            setShowAddSubjectModal(false);\r\n            setSelectedGlobalSubjectIds([]);\r\n            setSearchQuery(\"\");\r\n            queryClient.invalidateQueries({ queryKey: [\u0027classDetails\u0027, id] });\r\n        } catch (error) {\r\n            console.error(error);\r\n            showToast(\"Error adding subjects\", \"error\");\r\n        }\r\n    };\r\n\r\n    const handleRemoveSubject = (subjectId, subjectName) =\u003e {\r\n        Alert.alert(\r\n            \"Remove Subject\",\r\n            `Are you sure you want to remove ${subjectName}?`,\r\n            [\r\n                { text: \"Cancel\", style: \"cancel\" },\r\n                {\r\n                    text: \"Remove\",\r\n                    style: \"destructive\",\r\n                    onPress: () =\u003e removeSubjectMutation.mutate(subjectId),\r\n                },\r\n            ]\r\n        );\r\n    };\r\n\r\n\r\n\r\n    const toggleStudentSelection = (studentId) =\u003e {\r\n        setSelectedStudentIds(prev =\u003e {\r\n            if (prev.includes(studentId)) {\r\n                return prev.filter(id =\u003e id !== studentId);\r\n            } else {\r\n                return [...prev, studentId];\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleBulkAddStudents = () =\u003e {\r\n        if (selectedStudentIds.length === 0) {\r\n            showToast(\"Please select at least one student\", \"error\");\r\n            return;\r\n        }\r\n\r\n        addStudentsMutation.mutate({ studentIds: selectedStudentIds });\r\n    };\r\n\r\n    const handleRemoveStudent = (studentId, studentName) =\u003e {\r\n        Alert.alert(\r\n            \"Remove Student\",\r\n            `Are you sure you want to remove ${studentName} from this class?`,\r\n            [\r\n                { text: \"Cancel\", style: \"cancel\" },\r\n                {\r\n                    text: \"Remove\",\r\n                    style: \"destructive\",\r\n                    onPress: () =\u003e removeStudentMutation.mutate(studentId),\r\n                },\r\n            ]\r\n        );\r\n    };\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const isClassTeacher = (() =\u003e {\r\n        if (!user || !classData || !classData.classTeacher) return false;\r\n\r\n        const teacherId = typeof classData.classTeacher === \u0027object\u0027 ? classData.classTeacher._id : classData.classTeacher;\r\n        const userId = user._id || user.id;\r\n\r\n        return String(teacherId) === String(userId);\r\n    })();\r\n\r\n    const canManageClass = (() =\u003e {\r\n        if (!user) return false;\r\n        return user.role === \u0027admin\u0027 || user.role === \u0027super admin\u0027;\r\n    })();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const filteredAvailableStudents = availableStudents.filter(s =\u003e\r\n        s.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        s.phone.includes(searchQuery)\r\n    );\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title={classData ? `${classData.name} ${classData.section || \u0027\u0027}` : \"Class Details\"}\r\n                        subtitle=\"Manage subjects and students\"\r\n                        showBack\r\n                    /\u003e\r\n\r\n                    {/* Quick Actions */}\r\n                    {isClassTeacher \u0026\u0026 (\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 12, marginTop: 20, marginBottom: 16 }}\u003e\r\n                            \u003cPressable\r\n                                onPress={() =\u003e router.push({\r\n                                    pathname: \"/teacher/class/attendance\",\r\n                                    params: { id }\r\n                                })}\r\n                                style={({ pressed }) =\u003e ({\r\n                                    flex: 1,\r\n                                    backgroundColor: colors.cardBackground,\r\n                                    borderRadius: 12,\r\n                                    padding: 16,\r\n                                    alignItems: \"center\",\r\n                                    opacity: pressed ? 0.7 : 1,\r\n                                    elevation: 2\r\n                                })}\r\n                            \u003e\r\n                                \u003cMaterialIcons name=\"how-to-reg\" size={28} color={colors.primary} /\u003e\r\n                                \u003cText style={{ fontSize: 13, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary, marginTop: 8 }}\u003e\r\n                                    Attendance\r\n                                \u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                            \u003cPressable\r\n                                onPress={() =\u003e router.push({\r\n                                    pathname: \"/teacher/class/performance\",\r\n                                    params: { classId: id }\r\n                                })}\r\n                                style={({ pressed }) =\u003e ({\r\n                                    flex: 1,\r\n                                    backgroundColor: colors.cardBackground,\r\n                                    borderRadius: 12,\r\n                                    padding: 16,\r\n                                    alignItems: \"center\",\r\n                                    opacity: pressed ? 0.7 : 1,\r\n                                    elevation: 2\r\n                                })}\r\n                            \u003e\r\n                                \u003cMaterialIcons name=\"insights\" size={28} color={colors.success} /\u003e\r\n                                \u003cText style={{ fontSize: 13, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary, marginTop: 8 }}\u003e\r\n                                    Performance\r\n                                \u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n\r\n\r\n\r\n                    {/* Tabs */}\r\n                    \u003cView style={{ flexDirection: \"row\", marginBottom: 24, backgroundColor: colors.cardBackground, padding: 4, borderRadius: 12 }}\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setActiveTab(\"subjects\")}\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \"subjects\" ? colors.primary : \"transparent\",\r\n                                borderRadius: 8\r\n                            }}\r\n                        \u003e\r\n                            \u003cText style={{ fontWeight: \"600\", color: activeTab === \"subjects\" ? \"#fff\" : colors.textSecondary }}\u003eSubjects\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e setActiveTab(\"students\")}\r\n                            style={{\r\n                                flex: 1,\r\n                                paddingVertical: 10,\r\n                                alignItems: \"center\",\r\n                                backgroundColor: activeTab === \"students\" ? colors.primary : \"transparent\",\r\n                                borderRadius: 8\r\n                            }}\r\n                        \u003e\r\n                            \u003cText style={{ fontWeight: \"600\", color: activeTab === \"students\" ? \"#fff\" : colors.textSecondary }}\u003eStudents\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {activeTab === \"subjects\" ? (\r\n                        \u003cView\u003e\r\n                            {subjects.length === 0 ? (\r\n                                \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                                    \u003cMaterialIcons name=\"library-books\" size={48} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                                        No subjects added yet.\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ) : (\r\n                                subjects.map((subject) =\u003e (\r\n                                    \u003cPressable\r\n                                        key={subject._id}\r\n                                        onPress={() =\u003e router.push({\r\n                                            pathname: \"/teacher/class/subject/[subjectId]\",\r\n                                            params: { id, subjectId: subject._id }\r\n                                        })}\r\n                                        style={({ pressed }) =\u003e ({\r\n                                            backgroundColor: colors.cardBackground,\r\n                                            borderRadius: 16,\r\n                                            padding: 16,\r\n                                            marginBottom: 12,\r\n                                            shadowColor: \"#000\",\r\n                                            shadowOffset: { width: 0, height: 1 },\r\n                                            shadowOpacity: 0.05,\r\n                                            shadowRadius: 4,\r\n                                            elevation: 1,\r\n                                            opacity: pressed ? 0.9 : 1,\r\n                                            flexDirection: \"row\",\r\n                                            justifyContent: \"space-between\",\r\n                                            alignItems: \"center\"\r\n                                        })}\r\n                                    \u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12, flex: 1 }}\u003e\r\n                                            \u003cView style={{ backgroundColor: colors.primary + \"20\", padding: 10, borderRadius: 10 }}\u003e\r\n                                                \u003cMaterialIcons name=\"book\" size={24} color={colors.primary} /\u003e\r\n                                            \u003c/View\u003e\r\n                                            \u003cView style={{ flex: 1 }}\u003e\r\n                                                \u003cText style={{ fontSize: 16, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                                                    {subject.name}\r\n                                                \u003c/Text\u003e\r\n                                                {subject.teachers \u0026\u0026 subject.teachers.length \u003e 0 ? (\r\n                                                    \u003cText style={{ fontSize: 13, color: colors.textSecondary, marginTop: 2, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                        {subject.teachers.map(t =\u003e t.name).join(\", \")}\r\n                                                    \u003c/Text\u003e\r\n                                                ) : (\r\n                                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 2, fontStyle: \"italic\" }}\u003e\r\n                                                        No teachers assigned\r\n                                                    \u003c/Text\u003e\r\n                                                )}\r\n                                            \u003c/View\u003e\r\n                                        \u003c/View\u003e\r\n\r\n                                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                                            {canManageClass \u0026\u0026 (\r\n                                                \u003cPressable\r\n                                                    onPress={(e) =\u003e {\r\n                                                        e.stopPropagation();\r\n                                                        handleRemoveSubject(subject._id, subject.name);\r\n                                                    }}\r\n                                                    style={{ padding: 8 }}\r\n                                                \u003e\r\n                                                    \u003cMaterialIcons name=\"delete-outline\" size={24} color={colors.error} /\u003e\r\n                                                \u003c/Pressable\u003e\r\n                                            )}\r\n                                            \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                ))\r\n                            )}\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003cView\u003e\r\n                            {students.length === 0 ? (\r\n                                \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                                    \u003cMaterialIcons name=\"people-outline\" size={48} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                                        No students in this class yet.\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ) : (\r\n                                students.map((student) =\u003e (\r\n                                    \u003cView\r\n                                        key={student._id}\r\n                                        style={{\r\n                                            backgroundColor: colors.cardBackground,\r\n                                            borderRadius: 16,\r\n                                            padding: 16,\r\n                                            marginBottom: 12,\r\n                                            shadowColor: \"#000\",\r\n                                            shadowOffset: { width: 0, height: 1 },\r\n                                            shadowOpacity: 0.05,\r\n                                            shadowRadius: 4,\r\n                                            elevation: 1,\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"flex-start\" }}\u003e\r\n                                            \u003cView style={{ flex: 1 }}\u003e\r\n                                                \u003cText style={{ fontSize: 16, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                                                    {student.name}\r\n                                                \u003c/Text\u003e\r\n                                                \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginTop: 4 }}\u003e\r\n                                                    {student.phone}\r\n                                                \u003c/Text\u003e\r\n                                                {student.email \u0026\u0026 (\r\n                                                    \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginTop: 2 }}\u003e\r\n                                                        {student.email}\r\n                                                    \u003c/Text\u003e\r\n                                                )}\r\n                                                {student.guardianName \u0026\u0026 (\r\n                                                    \u003cText style={{ fontSize: 13, color: colors.textSecondary, marginTop: 6 }}\u003e\r\n                                                        Guardian: {student.guardianName}\r\n                                                        {student.guardianPhone \u0026\u0026 ` (${student.guardianPhone})`}\r\n                                                    \u003c/Text\u003e\r\n                                                )}\r\n                                                {student.admissionDate \u0026\u0026 (\r\n                                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 4 }}\u003e\r\n                                                        Admitted: {formatDate(student.admissionDate)}\r\n                                                    \u003c/Text\u003e\r\n                                                )}\r\n                                            \u003c/View\u003e\r\n                                            {canManageClass \u0026\u0026 (\r\n                                                \u003cPressable\r\n                                                    onPress={() =\u003e handleRemoveStudent(student._id, student.name)}\r\n                                                    style={{ padding: 8 }}\r\n                                                \u003e\r\n                                                    \u003cMaterialIcons name=\"remove-circle-outline\" size={24} color={colors.error} /\u003e\r\n                                                \u003c/Pressable\u003e\r\n                                            )}\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                ))\r\n                            )}\r\n                        \u003c/View\u003e\r\n                    )\r\n                    }\r\n\r\n                \u003c/View \u003e\r\n            \u003c/ScrollView \u003e\r\n\r\n            {/* FAB for Add Subject or Add Student */}\r\n            {\r\n                canManageClass \u0026\u0026 (\r\n                    \u003cPressable\r\n                        onPress={() =\u003e {\r\n                            if (activeTab === \"subjects\") {\r\n                                // Pre-select already added subjects\r\n                                const alreadyAddedIds = subjects\r\n                                    .filter(s =\u003e s.globalSubject)\r\n                                    .map(s =\u003e typeof s.globalSubject === \u0027object\u0027 ? s.globalSubject._id : s.globalSubject);\r\n                                setSelectedGlobalSubjectIds(alreadyAddedIds);\r\n                                setShowAddSubjectModal(true);\r\n                                setSearchQuery(\"\");\r\n                            } else {\r\n                                setShowAddStudentModal(true);\r\n                                setSelectedStudentIds([]); // Reset selection\r\n                            }\r\n                        }}\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            bottom: 90,\r\n                            right: 24,\r\n                            backgroundColor: colors.primary,\r\n                            width: 56,\r\n                            height: 56,\r\n                            borderRadius: 28,\r\n                            justifyContent: \"center\",\r\n                            alignItems: \"center\",\r\n                            elevation: 6,\r\n                            zIndex: 9999,\r\n                        }}\r\n                    \u003e\r\n                        \u003cMaterialIcons name=\"add\" size={28} color=\"#fff\" /\u003e\r\n                    \u003c/Pressable\u003e\r\n                )\r\n            }\r\n\r\n            {/* Add Subject Modal */}\r\n            \u003cModal visible={showAddSubjectModal} animationType=\"slide\" transparent\u003e\r\n                \u003cView style={{ flex: 1, justifyContent: \"center\", backgroundColor: \"rgba(0,0,0,0.5)\", padding: 20 }}\u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 24, maxHeight: \"80%\" }}\u003e\r\n                        \u003cText style={{ fontSize: 20, fontWeight: \"700\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                            Add Subjects to Class\r\n                        \u003c/Text\u003e\r\n\r\n                        \u003cTextInput\r\n                            placeholder=\"Search subjects...\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                padding: 12,\r\n                                borderRadius: 8,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 16\r\n                            }}\r\n                            value={searchQuery}\r\n                            onChangeText={setSearchQuery}\r\n                        /\u003e\r\n\r\n                        \u003cScrollView style={{ maxHeight: 400 }}\u003e\r\n                            {globalSubjects.filter(s =\u003e s.name.toLowerCase().includes(searchQuery.toLowerCase())).length === 0 ? (\r\n                                \u003cView style={{ alignItems: \"center\", paddingVertical: 40 }}\u003e\r\n                                    \u003cMaterialIcons name=\"library-books\" size={48} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginTop: 16 }}\u003e\r\n                                        {searchQuery ? \"No subjects found\" : \"No subjects available. Please ask admin to add subjects to the master list.\"}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ) : (\r\n                                globalSubjects.filter(s =\u003e s.name.toLowerCase().includes(searchQuery.toLowerCase())).map((item) =\u003e {\r\n                                    const isSelected = selectedGlobalSubjectIds.includes(item._id);\r\n                                    // Check if this subject is already added to the class\r\n                                    const isAlreadyAdded = subjects.some(s =\u003e\r\n                                        s.globalSubject \u0026\u0026 (\r\n                                            typeof s.globalSubject === \u0027object\u0027\r\n                                                ? s.globalSubject._id === item._id\r\n                                                : s.globalSubject === item._id\r\n                                        )\r\n                                    );\r\n                                    return (\r\n                                        \u003cPressable\r\n                                            key={item._id}\r\n                                            onPress={() =\u003e !isAlreadyAdded \u0026\u0026 toggleSubjectSelection(item._id)}\r\n                                            disabled={isAlreadyAdded}\r\n                                            style={({ pressed }) =\u003e ({\r\n                                                backgroundColor: isAlreadyAdded\r\n                                                    ? colors.disabled + \"30\"\r\n                                                    : isSelected ? colors.primary + \"10\" : (pressed ? colors.background : colors.cardBackground),\r\n                                                borderRadius: 12,\r\n                                                padding: 12,\r\n                                                marginBottom: 8,\r\n                                                borderWidth: 1,\r\n                                                borderColor: isAlreadyAdded\r\n                                                    ? colors.textSecondary\r\n                                                    : isSelected ? colors.primary : colors.border,\r\n                                                flexDirection: \"row\",\r\n                                                alignItems: \"center\",\r\n                                                gap: 12,\r\n                                                opacity: isAlreadyAdded ? 0.6 : 1\r\n                                            })}\r\n                                        \u003e\r\n                                            \u003cView style={{\r\n                                                width: 24,\r\n                                                height: 24,\r\n                                                borderRadius: 12,\r\n                                                borderWidth: 2,\r\n                                                borderColor: isAlreadyAdded || isSelected ? colors.primary : colors.textSecondary,\r\n                                                alignItems: \"center\",\r\n                                                justifyContent: \"center\",\r\n                                                backgroundColor: isAlreadyAdded || isSelected ? colors.primary : \"transparent\"\r\n                                            }}\u003e\r\n                                                {(isSelected || isAlreadyAdded) \u0026\u0026 \u003cMaterialIcons name=\"check\" size={16} color=\"#fff\" /\u003e}\r\n                                            \u003c/View\u003e\r\n                                            \u003cView style={{ flex: 1 }}\u003e\r\n                                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                                                    \u003cText style={{ fontSize: 16, fontWeight: \"600\", color: colors.textPrimary }}\u003e\r\n                                                        {item.name}\r\n                                                    \u003c/Text\u003e\r\n                                                    {isAlreadyAdded \u0026\u0026 (\r\n                                                        \u003cView style={{ backgroundColor: colors.success + \"20\", paddingHorizontal: 8, paddingVertical: 2, borderRadius: 8 }}\u003e\r\n                                                            \u003cText style={{ fontSize: 11, color: colors.success, fontWeight: \"600\" }}\u003eADDED\u003c/Text\u003e\r\n                                                        \u003c/View\u003e\r\n                                                    )}\r\n                                                \u003c/View\u003e\r\n                                                {item.code \u0026\u0026 (\r\n                                                    \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginTop: 2 }}\u003e\r\n                                                        Code: {item.code}\r\n                                                    \u003c/Text\u003e\r\n                                                )}\r\n                                            \u003c/View\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                    );\r\n                                })\r\n                            )}\r\n                        \u003c/ScrollView\u003e\r\n\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginTop: 16, borderTopWidth: 1, borderTopColor: colors.border, paddingTop: 16 }}\u003e\r\n                            \u003cPressable\r\n                                onPress={() =\u003e {\r\n                                    setShowAddSubjectModal(false);\r\n                                    setSelectedGlobalSubjectIds([]);\r\n                                    setSearchQuery(\"\");\r\n                                }}\r\n                                style={{ padding: 12 }}\r\n                            \u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontWeight: \"600\" }}\u003eCancel\u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n\r\n                            \u003cPressable\r\n                                onPress={handleAddSubject}\r\n                                disabled={selectedGlobalSubjectIds.length === 0 || addSubjectMutation.isPending}\r\n                                style={{\r\n                                    backgroundColor: (selectedGlobalSubjectIds.length \u003e 0 \u0026\u0026 !addSubjectMutation.isPending) ? colors.primary : colors.disabled,\r\n                                    paddingHorizontal: 20,\r\n                                    paddingVertical: 12,\r\n                                    borderRadius: 8,\r\n                                    flexDirection: \"row\",\r\n                                    alignItems: \"center\",\r\n                                    gap: 8\r\n                                }}\r\n                            \u003e\r\n                                {addSubjectMutation.isPending \u0026\u0026 \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e}\r\n                                \u003cText style={{ color: \"#fff\", fontWeight: \"600\" }}\u003e\r\n                                    {addSubjectMutation.isPending ? \"Adding...\" : `Add ${selectedGlobalSubjectIds.length \u003e 0 ? `${selectedGlobalSubjectIds.length} ` : \"\"}Selected`}\r\n                                \u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n\r\n            {/* Add Student Modal */}\r\n            \u003cModal visible={showAddStudentModal} animationType=\"slide\" transparent\u003e\r\n                \u003cView style={{ flex: 1, justifyContent: \"center\", backgroundColor: \"rgba(0,0,0,0.5)\", padding: 20 }}\u003e\r\n                    \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 24, maxHeight: \"80%\" }}\u003e\r\n                        \u003cText style={{ fontSize: 20, fontWeight: \"700\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                            Add Students to Class\r\n                        \u003c/Text\u003e\r\n\r\n                        \u003cTextInput\r\n                            placeholder=\"Search by name or phone...\"\r\n                            placeholderTextColor={colors.textSecondary}\r\n                            style={{\r\n                                backgroundColor: colors.background,\r\n                                padding: 12,\r\n                                borderRadius: 8,\r\n                                color: colors.textPrimary,\r\n                                marginBottom: 16\r\n                            }}\r\n                            value={searchQuery}\r\n                            onChangeText={setSearchQuery}\r\n                        /\u003e\r\n\r\n                        \u003cScrollView style={{ maxHeight: 400 }}\u003e\r\n                            {filteredAvailableStudents.length === 0 ? (\r\n                                \u003cView style={{ alignItems: \"center\", paddingVertical: 40 }}\u003e\r\n                                    \u003cMaterialIcons name=\"person-off\" size={48} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginTop: 16 }}\u003e\r\n                                        {searchQuery ? \"No students found\" : \"No unassigned students available\"}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ) : (\r\n                                filteredAvailableStudents.map((student) =\u003e {\r\n                                    const isSelected = selectedStudentIds.includes(student._id);\r\n                                    return (\r\n                                        \u003cPressable\r\n                                            key={student._id}\r\n                                            onPress={() =\u003e toggleStudentSelection(student._id)}\r\n                                            style={({ pressed }) =\u003e ({\r\n                                                backgroundColor: isSelected ? colors.primary + \"10\" : (pressed ? colors.background : colors.cardBackground),\r\n                                                borderRadius: 12,\r\n                                                padding: 12,\r\n                                                marginBottom: 8,\r\n                                                borderWidth: 1,\r\n                                                borderColor: isSelected ? colors.primary : colors.border,\r\n                                                flexDirection: \"row\",\r\n                                                alignItems: \"center\",\r\n                                                gap: 12\r\n                                            })}\r\n                                        \u003e\r\n                                            \u003cView style={{\r\n                                                width: 24,\r\n                                                height: 24,\r\n                                                borderRadius: 12,\r\n                                                borderWidth: 2,\r\n                                                borderColor: isSelected ? colors.primary : colors.textSecondary,\r\n                                                alignItems: \"center\",\r\n                                                justifyContent: \"center\",\r\n                                                backgroundColor: isSelected ? colors.primary : \"transparent\"\r\n                                            }}\u003e\r\n                                                {isSelected \u0026\u0026 \u003cMaterialIcons name=\"check\" size={16} color=\"#fff\" /\u003e}\r\n                                            \u003c/View\u003e\r\n                                            \u003cView style={{ flex: 1 }}\u003e\r\n                                                \u003cText style={{ fontSize: 16, fontWeight: \"600\", color: colors.textPrimary }}\u003e\r\n                                                    {student.name}\r\n                                                \u003c/Text\u003e\r\n                                                \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginTop: 2 }}\u003e\r\n                                                    {student.phone}\r\n                                                \u003c/Text\u003e\r\n                                                {student.admissionDate \u0026\u0026 (\r\n                                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 4 }}\u003e\r\n                                                        Admitted: {formatDate(student.admissionDate)}\r\n                                                    \u003c/Text\u003e\r\n                                                )}\r\n                                            \u003c/View\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                    );\r\n                                })\r\n                            )}\r\n                        \u003c/ScrollView\u003e\r\n\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginTop: 16, borderTopWidth: 1, borderTopColor: colors.border, paddingTop: 16 }}\u003e\r\n                            \u003cPressable\r\n                                onPress={() =\u003e {\r\n                                    setShowAddStudentModal(false);\r\n                                    setSearchQuery(\"\");\r\n                                    setSelectedStudentIds([]);\r\n                                }}\r\n                                style={{ padding: 12 }}\r\n                            \u003e\r\n                                \u003cText style={{ color: colors.textSecondary, fontWeight: \"600\" }}\u003eCancel\u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n\r\n                            \u003cPressable\r\n                                onPress={handleBulkAddStudents}\r\n                                disabled={selectedStudentIds.length === 0 || addStudentsMutation.isPending}\r\n                                style={{\r\n                                    backgroundColor: (selectedStudentIds.length \u003e 0 \u0026\u0026 !addStudentsMutation.isPending) ? colors.primary : colors.disabled,\r\n                                    paddingHorizontal: 20,\r\n                                    paddingVertical: 12,\r\n                                    borderRadius: 8,\r\n                                    flexDirection: \"row\",\r\n                                    alignItems: \"center\",\r\n                                    gap: 8\r\n                                }}\r\n                            \u003e\r\n                                {addStudentsMutation.isPending \u0026\u0026 \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e}\r\n                                \u003cText style={{ color: \"#fff\", fontWeight: \"600\" }}\u003e\r\n                                    {addStudentsMutation.isPending ? \"Adding...\" : `Add ${selectedStudentIds.length \u003e 0 ? `${selectedStudentIds.length} ` : \"\"}Selected`}\r\n                                \u003c/Text\u003e\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View \u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\class\\attendance.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  21,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  21,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    RefreshControl,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\r\nimport { useTheme } from \"../../../theme\";\r\nimport apiConfig from \"../../../config/apiConfig\";\r\nimport apiFetch from \"../../../utils/apiFetch\";\r\nimport { useToast } from \"../../../components/ToastProvider\";\r\nimport AppHeader from \"../../../components/Header\";\r\nimport DateTimePicker from \"@react-native-community/datetimepicker\";\r\n\r\nexport default function MarkAttendanceScreen() {\r\n    const router = useRouter();\r\n    const params = useLocalSearchParams();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const { classId, subjectId } = params;\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n    const [selectedDate, setSelectedDate] = useState(new Date());\r\n    const [showDatePicker, setShowDatePicker] = useState(false);\r\n    const [students, setStudents] = useState([]);\r\n    const [classData, setClassData] = useState(null);\r\n    const [subjectData, setSubjectData] = useState(null);\r\n\r\n    useEffect(() =\u003e {\r\n        loadData();\r\n    }, [selectedDate]);\r\n\r\n    const loadData = async () =\u003e {\r\n        try {\r\n            const token = await AsyncStorage.getItem(\"@auth_token\");\r\n\r\n            // Load class/subject info\r\n            if (classId) {\r\n                const classResponse = await apiFetch(`${apiConfig.baseUrl}/classes/${classId}`, {\r\n                    headers: { Authorization: `Bearer ${token}` }\r\n                });\r\n                if (classResponse.ok) {\r\n                    const data = await classResponse.json();\r\n                    setClassData(data);\r\n                }\r\n            }\r\n\r\n            if (subjectId) {\r\n                const subjectResponse = await apiFetch(`${apiConfig.baseUrl}/subjects/${subjectId}`, {\r\n                    headers: { Authorization: `Bearer ${token}` }\r\n                });\r\n                if (subjectResponse.ok) {\r\n                    const data = await subjectResponse.json();\r\n                    setSubjectData(data);\r\n                }\r\n            }\r\n\r\n            // Load attendance for selected date\r\n            const dateStr = selectedDate.toISOString().split(\u0027T\u0027)[0];\r\n            const endpoint = subjectId\r\n                ? `/attendance/subject/${subjectId}/date/${dateStr}`\r\n                : `/attendance/class/${classId}/date/${dateStr}`;\r\n\r\n            const response = await apiFetch(`${apiConfig.baseUrl}${endpoint}`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setStudents(data);\r\n            } else {\r\n                showToast(\"Failed to load attendance\", \"error\");\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            showToast(\"Error loading data\", \"error\");\r\n        } finally {\r\n            setLoading(false);\r\n            setRefreshing(false);\r\n        }\r\n    };\r\n\r\n    const onRefresh = () =\u003e {\r\n        setRefreshing(true);\r\n        loadData();\r\n    };\r\n\r\n    const handleStatusChange = (studentId, newStatus) =\u003e {\r\n        setStudents(prevStudents =\u003e\r\n            prevStudents.map(s =\u003e\r\n                s.student._id === studentId\r\n                    ? { ...s, status: newStatus }\r\n                    : s\r\n            )\r\n        );\r\n    };\r\n\r\n    const handleMarkAllPresent = () =\u003e {\r\n        setStudents(prevStudents =\u003e\r\n            prevStudents.map(s =\u003e ({ ...s, status: \u0027present\u0027 }))\r\n        );\r\n    };\r\n\r\n\r\n\r\n    const handleSaveAttendance = async () =\u003e {\r\n        try {\r\n            setSaving(true);\r\n            const token = await AsyncStorage.getItem(\"@auth_token\");\r\n\r\n            // Prepare attendance records\r\n            const attendanceRecords = students\r\n                .filter(s =\u003e s.status !== null)\r\n                .map(s =\u003e ({\r\n                    studentId: s.student._id,\r\n                    status: s.status,\r\n                    remarks: s.remarks || \u0027\u0027\r\n                }));\r\n\r\n            if (attendanceRecords.length === 0) {\r\n                showToast(\"Please mark attendance for at least one student\", \"warning\");\r\n                setSaving(false);\r\n                return;\r\n            }\r\n\r\n            const dateStr = selectedDate.toISOString().split(\u0027T\u0027)[0];\r\n\r\n            const response = await apiFetch(`${apiConfig.baseUrl}/attendance/mark`, {\r\n                method: \u0027POST\u0027,\r\n                headers: {\r\n                    \u0027Content-Type\u0027: \u0027application/json\u0027,\r\n                    Authorization: `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    classId,\r\n                    subjectId: null, // Force class-based attendance\r\n                    date: dateStr,\r\n                    attendanceRecords\r\n                })\r\n            });\r\n\r\n            if (response.ok) {\r\n                showToast(\"Attendance saved successfully\", \"success\");\r\n                loadData();\r\n            } else {\r\n                const error = await response.json();\r\n                showToast(error.message || \"Failed to save attendance\", \"error\");\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            showToast(\"Error saving attendance\", \"error\");\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    const onDateChange = (event, selectedDate) =\u003e {\r\n        setShowDatePicker(false);\r\n        if (selectedDate) {\r\n            setSelectedDate(selectedDate);\r\n        }\r\n    };\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027present\u0027: return colors.success;\r\n            case \u0027absent\u0027: return colors.error;\r\n            case \u0027late\u0027: return \u0027#FF9800\u0027;\r\n            case \u0027excused\u0027: return \u0027#2196F3\u0027;\r\n            default: return colors.textSecondary;\r\n        }\r\n    };\r\n\r\n    const getStatusIcon = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027present\u0027: return \u0027check-circle\u0027;\r\n            case \u0027absent\u0027: return \u0027cancel\u0027;\r\n            case \u0027late\u0027: return \u0027schedule\u0027;\r\n            case \u0027excused\u0027: return \u0027verified\u0027;\r\n            default: return \u0027radio-button-unchecked\u0027;\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title=\"Mark Attendance\"\r\n                        subtitle={subjectData ? `${subjectData.name} - ${classData?.name}` : classData?.name}\r\n                    /\u003e\r\n\r\n                    {/* Date Picker */}\r\n                    \u003cPressable\r\n                        onPress={() =\u003e setShowDatePicker(true)}\r\n                        style={{\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 12,\r\n                            padding: 16,\r\n                            marginTop: 20,\r\n                            flexDirection: \"row\",\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"space-between\",\r\n                            elevation: 2\r\n                        }}\r\n                    \u003e\r\n                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                            \u003cMaterialIcons name=\"calendar-today\" size={24} color={colors.primary} /\u003e\r\n                            \u003cView\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                    Selected Date\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 17, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 2 }}\u003e\r\n                                    {selectedDate.toLocaleDateString(\u0027en-GB\u0027, {\r\n                                        day: \u00272-digit\u0027,\r\n                                        month: \u0027short\u0027,\r\n                                        year: \u0027numeric\u0027\r\n                                    })}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cMaterialIcons name=\"edit\" size={20} color={colors.textSecondary} /\u003e\r\n                    \u003c/Pressable\u003e\r\n\r\n                    {showDatePicker \u0026\u0026 (\r\n                        \u003cDateTimePicker\r\n                            value={selectedDate}\r\n                            mode=\"date\"\r\n                            display=\"default\"\r\n                            onChange={onDateChange}\r\n                            maximumDate={new Date()}\r\n                        /\u003e\r\n                    )}\r\n\r\n                    {/* Quick Actions */}\r\n                    \u003cView style={{ flexDirection: \"row\", gap: 12, marginTop: 20 }}\u003e\r\n                        \u003cPressable\r\n                            onPress={handleMarkAllPresent}\r\n                            style={({ pressed }) =\u003e ({\r\n                                flex: 1,\r\n                                backgroundColor: colors.success + \"15\",\r\n                                borderRadius: 12,\r\n                                padding: 14,\r\n                                flexDirection: \"row\",\r\n                                alignItems: \"center\",\r\n                                justifyContent: \"center\",\r\n                                gap: 8,\r\n                                opacity: pressed ? 0.7 : 1\r\n                            })}\r\n                        \u003e\r\n                            \u003cMaterialIcons name=\"check-circle\" size={20} color={colors.success} /\u003e\r\n                            \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: colors.success }}\u003e\r\n                                All Present\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n\r\n\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Attendance Summary */}\r\n                    \u003cView style={{ flexDirection: \u0027row\u0027, gap: 12, marginTop: 24, marginBottom: 8 }}\u003e\r\n                        \u003cView style={{ flex: 1, backgroundColor: colors.success + \u002715\u0027, padding: 12, borderRadius: 12, alignItems: \u0027center\u0027 }}\u003e\r\n                            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.success }}\u003e\r\n                                {students.filter(s =\u003e s.status === \u0027present\u0027).length}\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 12, color: colors.success, fontFamily: \"DMSans-Medium\" }}\u003ePresent\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cView style={{ flex: 1, backgroundColor: colors.error + \u002715\u0027, padding: 12, borderRadius: 12, alignItems: \u0027center\u0027 }}\u003e\r\n                            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.error }}\u003e\r\n                                {students.filter(s =\u003e s.status === \u0027absent\u0027).length}\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 12, color: colors.error, fontFamily: \"DMSans-Medium\" }}\u003eAbsent\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cView style={{ flex: 1, backgroundColor: colors.primary + \u002715\u0027, padding: 12, borderRadius: 12, alignItems: \u0027center\u0027 }}\u003e\r\n                            \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.primary }}\u003e\r\n                                {students.length}\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 12, color: colors.primary, fontFamily: \"DMSans-Medium\" }}\u003eTotal\u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Students List */}\r\n                    \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                        Students List\r\n                    \u003c/Text\u003e\r\n\r\n                    {loading ? (\r\n                        \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", marginTop: 60 }}\u003e\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        students.map((studentData, index) =\u003e (\r\n                            \u003cView\r\n                                key={studentData.student._id}\r\n                                style={{\r\n                                    backgroundColor: colors.cardBackground,\r\n                                    borderRadius: 12,\r\n                                    padding: 14,\r\n                                    marginBottom: 10,\r\n                                    elevation: 1\r\n                                }}\r\n                            \u003e\r\n                                \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 12 }}\u003e\r\n                                    \u003cView style={{ flex: 1 }}\u003e\r\n                                        \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary }}\u003e\r\n                                            {index + 1}. {studentData.student.name}\r\n                                        \u003c/Text\u003e\r\n                                        {studentData.student.email \u0026\u0026 (\r\n                                            \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 2, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                {studentData.student.email}\r\n                                            \u003c/Text\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n                                    {studentData.status \u0026\u0026 (\r\n                                        \u003cMaterialIcons\r\n                                            name={getStatusIcon(studentData.status)}\r\n                                            size={24}\r\n                                            color={getStatusColor(studentData.status)}\r\n                                        /\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n\r\n                                {/* Status Buttons */}\r\n                                \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                    {[\u0027present\u0027, \u0027absent\u0027, \u0027late\u0027, \u0027excused\u0027].map((status) =\u003e (\r\n                                        \u003cPressable\r\n                                            key={status}\r\n                                            onPress={() =\u003e handleStatusChange(studentData.student._id, status)}\r\n                                            style={({ pressed }) =\u003e ({\r\n                                                flex: 1,\r\n                                                backgroundColor: studentData.status === status\r\n                                                    ? getStatusColor(status) + \"20\"\r\n                                                    : colors.background,\r\n                                                borderWidth: studentData.status === status ? 2 : 1,\r\n                                                borderColor: studentData.status === status\r\n                                                    ? getStatusColor(status)\r\n                                                    : colors.textSecondary + \"30\",\r\n                                                borderRadius: 8,\r\n                                                paddingVertical: 10,\r\n                                                alignItems: \"center\",\r\n                                                opacity: pressed ? 0.7 : 1\r\n                                            })}\r\n                                        \u003e\r\n                                            \u003cText style={{\r\n                                                fontSize: 11,\r\n                                                fontFamily: \"DMSans-Bold\",\r\n                                                color: studentData.status === status\r\n                                                    ? getStatusColor(status)\r\n                                                    : colors.textSecondary,\r\n                                                textTransform: \"uppercase\"\r\n                                            }}\u003e\r\n                                                {status === \u0027present\u0027 ? \u0027P\u0027 : status === \u0027absent\u0027 ? \u0027A\u0027 : status === \u0027late\u0027 ? \u0027L\u0027 : \u0027E\u0027}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/Pressable\u003e\r\n                                    ))}\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n                        ))\r\n                    )}\r\n\r\n                    {/* Save Button */}\r\n                    {!loading \u0026\u0026 (\r\n                        \u003cPressable\r\n                            onPress={handleSaveAttendance}\r\n                            disabled={saving}\r\n                            style={({ pressed }) =\u003e ({\r\n                                backgroundColor: colors.primary,\r\n                                borderRadius: 12,\r\n                                padding: 16,\r\n                                marginTop: 24,\r\n                                flexDirection: \"row\",\r\n                                alignItems: \"center\",\r\n                                justifyContent: \"center\",\r\n                                gap: 8,\r\n                                opacity: pressed || saving ? 0.7 : 1,\r\n                                elevation: 3\r\n                            })}\r\n                        \u003e\r\n                            {saving ? (\r\n                                \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e\r\n                            ) : (\r\n                                \u003c\u003e\r\n                                    \u003cMaterialIcons name=\"save\" size={24} color=\"#fff\" /\u003e\r\n                                    \u003cText style={{ fontSize: 17, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                        Save Attendance\r\n                                    \u003c/Text\u003e\r\n                                \u003c/\u003e\r\n                            )}\r\n                        \u003c/Pressable\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\class\\performance.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Pressable\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  14
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027BarChart\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  17,
                                           "column":  21,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  17,
                                           "endColumn":  29
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  31,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  31,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027opacity\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  162,
                                           "column":  45,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  162,
                                           "endColumn":  52
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027opacity\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  163,
                                           "column":  50,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  163,
                                           "endColumn":  57
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  5,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Pressable,\r\n    Dimensions,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\r\nimport { useTheme } from \"../../../theme\";\r\nimport { useApiQuery } from \"../../../hooks/useApi\";\r\nimport AppHeader from \"../../../components/Header\";\r\nimport apiConfig from \"../../../config/apiConfig\";\r\nimport { LineChart, BarChart } from \"react-native-chart-kit\";\r\n\r\nconst { width } = Dimensions.get(\u0027window\u0027);\r\n\r\nconst EXAM_COLORS = {\r\n    \u0027FA1\u0027: \u0027#4CAF50\u0027,\r\n    \u0027FA2\u0027: \u0027#2196F3\u0027,\r\n    \u0027SA1\u0027: \u0027#FF9800\u0027,\r\n    \u0027FA3\u0027: \u0027#9C27B0\u0027,\r\n    \u0027FA4\u0027: \u0027#E91E63\u0027,\r\n    \u0027SA2\u0027: \u0027#F44336\u0027\r\n};\r\n\r\nexport default function ClassPerformanceScreen() {\r\n    const router = useRouter();\r\n    const params = useLocalSearchParams();\r\n    const { colors } = useTheme();\r\n    const { classId } = params;\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Fetch class performance data\r\n    const { data: performanceData, isLoading, refetch } = useApiQuery(\r\n        [\u0027classPerformance\u0027, classId],\r\n        `${apiConfig.baseUrl}/exams/performance/class/${classId}`,\r\n        { enabled: !!classId }\r\n    );\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getGradeColor = (percentage) =\u003e {\r\n        if (percentage \u003e= 90) return colors.success;\r\n        if (percentage \u003e= 75) return \u0027#2196F3\u0027;\r\n        if (percentage \u003e= 60) return \u0027#FF9800\u0027;\r\n        if (percentage \u003e= 40) return \u0027#FF5722\u0027;\r\n        return colors.error;\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \u0027center\u0027, alignItems: \u0027center\u0027 }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    if (!performanceData) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \u0027center\u0027, alignItems: \u0027center\u0027, padding: 20 }}\u003e\r\n                \u003cMaterialIcons name=\"info-outline\" size={64} color={colors.textSecondary} /\u003e\r\n                \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, textAlign: \u0027center\u0027 }}\u003e\r\n                    No performance data available\r\n                \u003c/Text\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    const { performance = [], totalStudents = 0 } = performanceData;\r\n\r\n    // Prepare chart data\r\n    const completedExams = performance.filter(p =\u003e p.avgPercentage \u003e 0);\r\n    const chartLabels = completedExams.map(p =\u003e p.examType);\r\n    const chartData = completedExams.map(p =\u003e p.avgPercentage);\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title=\"Class Performance\"\r\n                        subtitle={`Exam-wise analytics for ${totalStudents} students`}\r\n                        showBack\r\n                    /\u003e\r\n\r\n                    {/* Overall Stats */}\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 16,\r\n                        padding: 20,\r\n                        marginTop: 20,\r\n                        elevation: 2\r\n                    }}\u003e\r\n                        \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                            Overall Statistics\r\n                        \u003c/Text\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-around\" }}\u003e\r\n                            \u003cView style={{ alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ fontSize: 32, fontFamily: \"DMSans-Bold\", color: colors.primary }}\u003e\r\n                                    {totalStudents}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Students\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ fontSize: 32, fontFamily: \"DMSans-Bold\", color: colors.success }}\u003e\r\n                                    {performance.filter(p =\u003e p.isComplete).length}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Completed\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ fontSize: 32, fontFamily: \"DMSans-Bold\", color: colors.textSecondary }}\u003e\r\n                                    {6 - performance.filter(p =\u003e p.isComplete).length}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Pending\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Performance Trend Chart */}\r\n                    {completedExams.length \u003e 0 \u0026\u0026 (\r\n                        \u003cView style={{\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 16,\r\n                            padding: 16,\r\n                            marginTop: 20,\r\n                            elevation: 2\r\n                        }}\u003e\r\n                            \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                                Performance Trend\r\n                            \u003c/Text\u003e\r\n                            \u003cLineChart\r\n                                data={{\r\n                                    labels: chartLabels,\r\n                                    datasets: [{ data: chartData }]\r\n                                }}\r\n                                width={width - 64}\r\n                                height={220}\r\n                                yAxisSuffix=\"%\"\r\n                                chartConfig={{\r\n                                    backgroundColor: colors.cardBackground,\r\n                                    backgroundGradientFrom: colors.cardBackground,\r\n                                    backgroundGradientTo: colors.cardBackground,\r\n                                    decimalPlaces: 0,\r\n                                    color: (opacity = 1) =\u003e colors.primary,\r\n                                    labelColor: (opacity = 1) =\u003e colors.textSecondary,\r\n                                    style: { borderRadius: 16 },\r\n                                    propsForDots: {\r\n                                        r: \"6\",\r\n                                        strokeWidth: \"2\",\r\n                                        stroke: colors.primary\r\n                                    }\r\n                                }}\r\n                                bezier\r\n                                style={{ marginVertical: 8, borderRadius: 16 }}\r\n                            /\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n\r\n                    {/* Exam-wise Cards */}\r\n                    \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 24, marginBottom: 12 }}\u003e\r\n                        Exam-wise Breakdown\r\n                    \u003c/Text\u003e\r\n\r\n                    {performance.map((exam) =\u003e (\r\n                        \u003cView\r\n                            key={exam.examType}\r\n                            style={{\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 18,\r\n                                marginBottom: 12,\r\n                                borderLeftWidth: 4,\r\n                                borderLeftColor: EXAM_COLORS[exam.examType],\r\n                                elevation: 2\r\n                            }}\r\n                        \u003e\r\n                            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 12 }}\u003e\r\n                                \u003cView\u003e\r\n                                    \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                        {exam.examType}\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\", marginTop: 2 }}\u003e\r\n                                        {exam.subjectsCount} subject{exam.subjectsCount !== 1 ? \u0027s\u0027 : \u0027\u0027}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                {exam.isComplete ? (\r\n                                    \u003cView style={{\r\n                                        backgroundColor: colors.success + \u002720\u0027,\r\n                                        paddingHorizontal: 12,\r\n                                        paddingVertical: 6,\r\n                                        borderRadius: 8\r\n                                    }}\u003e\r\n                                        \u003cText style={{ color: colors.success, fontFamily: \"DMSans-Bold\", fontSize: 11 }}\u003e\r\n                                            COMPLETE\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                ) : (\r\n                                    \u003cView style={{\r\n                                        backgroundColor: colors.textSecondary + \u002720\u0027,\r\n                                        paddingHorizontal: 12,\r\n                                        paddingVertical: 6,\r\n                                        borderRadius: 8\r\n                                    }}\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, fontFamily: \"DMSans-Bold\", fontSize: 11 }}\u003e\r\n                                            {exam.studentsWithMarks}/{totalStudents}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{ height: 1, backgroundColor: colors.textSecondary + \u002720\u0027, marginVertical: 12 }} /\u003e\r\n\r\n                            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}\u003e\r\n                                \u003cView style={{ flex: 1 }}\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                        Class Average\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 24,\r\n                                        fontFamily: \"DMSans-Bold\",\r\n                                        color: getGradeColor(exam.avgPercentage)\r\n                                    }}\u003e\r\n                                        {exam.avgPercentage.toFixed(1)}%\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cView style={{ flex: 1, alignItems: \"center\" }}\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                        Highest\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.success }}\u003e\r\n                                        {exam.highest.toFixed(1)}%\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cView style={{ flex: 1, alignItems: \"flex-end\" }}\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                        Lowest\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.error }}\u003e\r\n                                        {exam.lowest.toFixed(1)}%\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    ))}\r\n\r\n                    {performance.length === 0 \u0026\u0026 (\r\n                        \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                            \u003cMaterialIcons name=\"assessment\" size={64} color={colors.textSecondary} /\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, textAlign: \u0027center\u0027 }}\u003e\r\n                                No exam data available yet.{\u0027\\n\u0027}Initialize exams to see performance.\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\class\\subject\\[subjectId].jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Alert\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  9,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  9,
                                           "endColumn":  10
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  26,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  26,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027user\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  31,
                                           "column":  12,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  31,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027formatDate\u0027 is not defined.",
                                           "line":  207,
                                           "column":  50,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  207,
                                           "endColumn":  60
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Alert,\r\n} from \"react-native\";\r\nimport { useLocalSearchParams, useRouter } from \"expo-router\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useTheme } from \"../../../../theme\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../../../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport PostContentModal from \"../../../../components/PostContentModal\";\r\nimport apiConfig from \"../../../../config/apiConfig\";\r\nimport { useToast } from \"../../../../components/ToastProvider\";\r\nimport AppHeader from \"../../../../components/Header\";\r\n\r\nexport default function SubjectDetailScreen() {\r\n    const { id, subjectId } = useLocalSearchParams(); // classId and subjectId\r\n    const router = useRouter();\r\n    const queryClient = useQueryClient();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [showPostModal, setShowPostModal] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(() =\u003e {\r\n        loadUserData();\r\n    }, []);\r\n\r\n    const loadUserData = async () =\u003e {\r\n        try {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (storedUser) setUser(JSON.parse(storedUser));\r\n        } catch (error) {\r\n            console.error(\"Failed to load user:\", error);\r\n        }\r\n    };\r\n\r\n    // Fetch Subject Details\r\n    const { data: subjects } = useApiQuery(\r\n        [\u0027classSubjects\u0027, id],\r\n        `${apiConfig.baseUrl}/classes/${id}/subjects`,\r\n        { enabled: !!id }\r\n    );\r\n\r\n    const currentSubject = subjects?.find(s =\u003e s._id === subjectId);\r\n    const subjectName = currentSubject?.name || \"\";\r\n    const subjectTeachers = currentSubject?.teachers || [];\r\n\r\n    // Fetch Content\r\n    const { data: contentData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027subjectContent\u0027, subjectId],\r\n        `${apiConfig.baseUrl}/classes/${id}/subjects/${subjectId}/content`,\r\n        { enabled: !!subjectId \u0026\u0026 !!id }\r\n    );\r\n    const content = contentData || [];\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const postContentMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/classes/${id}/content`, \u0027POST\u0027),\r\n        onSuccess: () =\u003e {\r\n            showToast(\"Content posted successfully\", \"success\");\r\n            setShowPostModal(false);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027subjectContent\u0027, subjectId] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to post content\", \"error\")\r\n    });\r\n\r\n    const handlePostContent = (data) =\u003e {\r\n        // Add subjectId to the data\r\n        const payload = { ...data, subject: subjectId };\r\n        postContentMutation.mutate(payload);\r\n    };\r\n\r\n    const getContentTypeColor = (type) =\u003e {\r\n        switch (type) {\r\n            case \"homework\": return colors.error;\r\n            case \"news\": return colors.primary;\r\n            default: return colors.secondary;\r\n        }\r\n    };\r\n\r\n    const getContentTypeIcon = (type) =\u003e {\r\n        switch (type) {\r\n            case \"homework\": return \"assignment\";\r\n            case \"news\": return \"campaign\";\r\n            default: return \"note\";\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title={subjectName || \"Subject Details\"}\r\n                        subtitle={subjectTeachers.length \u003e 0 ? `Teachers: ${subjectTeachers.map(t =\u003e t.name).join(\", \")}` : \"Class Content\"}\r\n                        showBack\r\n                    /\u003e\r\n\r\n                    {/* Quick Actions */}\r\n                    \u003cView style={{ flexDirection: \"row\", gap: 12, marginTop: 20 }}\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e router.push({\r\n                                pathname: \"/teacher/subject/create-exam\",\r\n                                params: { subjectId, classId: id }\r\n                            })}\r\n                            style={({ pressed }) =\u003e ({\r\n                                flex: 1,\r\n                                backgroundColor: colors.primary,\r\n                                borderRadius: 12,\r\n                                padding: 16,\r\n                                flexDirection: \"row\",\r\n                                alignItems: \"center\",\r\n                                justifyContent: \"center\",\r\n                                gap: 8,\r\n                                opacity: pressed ? 0.9 : 1,\r\n                                elevation: 3\r\n                            })}\r\n                        \u003e\r\n                            \u003cMaterialIcons name=\"assignment\" size={20} color=\"#fff\" /\u003e\r\n                            \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                Manage Exams\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                        \u003cPressable\r\n                            onPress={() =\u003e router.push({\r\n                                pathname: \"/teacher/subject/performance\",\r\n                                params: { subjectId }\r\n                            })}\r\n                            style={({ pressed }) =\u003e ({\r\n                                flex: 1,\r\n                                backgroundColor: colors.success,\r\n                                borderRadius: 12,\r\n                                padding: 16,\r\n                                flexDirection: \"row\",\r\n                                alignItems: \"center\",\r\n                                justifyContent: \"center\",\r\n                                gap: 8,\r\n                                opacity: pressed ? 0.9 : 1,\r\n                                elevation: 3\r\n                            })}\r\n                        \u003e\r\n                            \u003cMaterialIcons name=\"leaderboard\" size={20} color=\"#fff\" /\u003e\r\n                            \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                Performance\r\n                            \u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {loading ? (\r\n                        \u003cView style={{ marginTop: 100, alignItems: \"center\" }}\u003e\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003cView style={{ marginTop: 24 }}\u003e\r\n                            {content.length === 0 ? (\r\n                                \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                                    \u003cMaterialIcons name=\"article\" size={48} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                                        No content posted yet.\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ) : (\r\n                                content.map((item) =\u003e (\r\n                                    \u003cView\r\n                                        key={item._id}\r\n                                        style={{\r\n                                            backgroundColor: colors.cardBackground,\r\n                                            borderRadius: 16,\r\n                                            padding: 16,\r\n                                            marginBottom: 12,\r\n                                            borderLeftWidth: 4,\r\n                                            borderLeftColor: getContentTypeColor(item.type),\r\n                                            shadowColor: \"#000\",\r\n                                            shadowOffset: { width: 0, height: 1 },\r\n                                            shadowOpacity: 0.05,\r\n                                            shadowRadius: 4,\r\n                                            elevation: 1,\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"flex-start\", marginBottom: 8 }}\u003e\r\n                                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                                                \u003cView style={{ backgroundColor: getContentTypeColor(item.type) + \"20\", padding: 6, borderRadius: 8 }}\u003e\r\n                                                    \u003cMaterialIcons name={getContentTypeIcon(item.type)} size={20} color={getContentTypeColor(item.type)} /\u003e\r\n                                                \u003c/View\u003e\r\n                                                \u003cText style={{ fontSize: 16, fontWeight: \"700\", color: colors.textPrimary }}\u003e\r\n                                                    {item.title}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                            \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                                {formatDate(item.createdAt)}\r\n                                            \u003c/Text\u003e\r\n                                        \u003c/View\u003e\r\n\r\n                                        \u003cText style={{ fontSize: 14, color: colors.textSecondary, lineHeight: 20 }}\u003e\r\n                                            {item.description}\r\n                                        \u003c/Text\u003e\r\n\r\n                                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginTop: 12, alignItems: \"center\" }}\u003e\r\n                                            \u003cText style={{ fontSize: 12, color: colors.textSecondary, fontWeight: \"500\" }}\u003e\r\n                                                By: {item.author?.name || item.teacher?.name || \"Teacher\"}\r\n                                            \u003c/Text\u003e\r\n                                            \u003cView style={{ backgroundColor: colors.background, paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 }}\u003e\r\n                                                \u003cText style={{ fontSize: 10, fontWeight: \"600\", color: colors.textSecondary, textTransform: \"uppercase\" }}\u003e\r\n                                                    {item.type}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        \u003c/View\u003e\r\n                                    \u003c/View\u003e\r\n                                ))\r\n                            )}\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* FAB to Post Content */}\r\n            \u003cPressable\r\n                onPress={() =\u003e setShowPostModal(true)}\r\n                style={({ pressed }) =\u003e ({\r\n                    position: \"absolute\",\r\n                    bottom: 110,\r\n                    right: 24,\r\n                    backgroundColor: colors.primary,\r\n                    width: 56,\r\n                    height: 56,\r\n                    borderRadius: 28,\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                    elevation: 4,\r\n                    zIndex: 9999,\r\n                    shadowColor: \"#000\",\r\n                    shadowOffset: { width: 0, height: 2 },\r\n                    shadowOpacity: 0.25,\r\n                    shadowRadius: 3.84,\r\n                    opacity: pressed ? 0.9 : 1,\r\n                })}\r\n            \u003e\r\n                \u003cMaterialIcons name=\"add\" size={28} color=\"#fff\" /\u003e\r\n            \u003c/Pressable\u003e\r\n\r\n            \u003cPostContentModal\r\n                visible={showPostModal}\r\n                onClose={() =\u003e setShowPostModal(false)}\r\n                onSubmit={handlePostContent}\r\n            /\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\classes.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  24,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  24,
                                           "endColumn":  22
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027user\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  12,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027setRefreshing\u0027 is not defined.",
                                           "line":  52,
                                           "column":  9,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  52,
                                           "endColumn":  22
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027setRefreshing\u0027 is not defined.",
                                           "line":  54,
                                           "column":  9,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  54,
                                           "endColumn":  22
                                       },
                                       {
                                           "ruleId":  "no-undef",
                                           "severity":  2,
                                           "message":  "\u0027refreshing\u0027 is not defined.",
                                           "line":  60,
                                           "column":  61,
                                           "nodeType":  "Identifier",
                                           "messageId":  "undef",
                                           "endLine":  60,
                                           "endColumn":  71
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  3,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport AppHeader from \"../../components/Header\";\r\n\r\nexport default function TeacherClassesScreen() {\r\n    const router = useRouter();\r\n    const params = useLocalSearchParams();\r\n    const { action } = params;\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(() =\u003e {\r\n        const loadUser = async () =\u003e {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (!storedUser) {\r\n                router.replace(\"/login\");\r\n                return;\r\n            }\r\n            try {\r\n                setUser(JSON.parse(storedUser));\r\n            } catch (e) {\r\n                console.error(\"Failed to parse stored user:\", e);\r\n                await AsyncStorage.removeItem(\"@auth_user\");\r\n                router.replace(\"/login\");\r\n            }\r\n        };\r\n        loadUser();\r\n    }, []);\r\n\r\n    const { data: classesData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027teacherClasses\u0027],\r\n        `${apiConfig.baseUrl}/classes/my-classes`\r\n    );\r\n    const classes = classesData || [];\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} tintColor={colors.primary} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100, minHeight: \"100%\" }}\r\n                showsVerticalScrollIndicator={false}\r\n            \u003e\r\n                \u003cView style={{ paddingHorizontal: 20, paddingTop: 20 }}\u003e\r\n                    \u003cAppHeader title=\"My Classes\" subtitle=\"Manage your assigned classes\" /\u003e\r\n\r\n                    {loading ? (\r\n                        \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", marginTop: 100 }}\u003e\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003cView style={{ gap: 24 }}\u003e\r\n                            \u003cView\u003e\r\n                                \u003cText style={styles.sectionTitle}\u003e\r\n                                    My Classes\r\n                                \u003c/Text\u003e\r\n                                {classes.length === 0 ? (\r\n                                    \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                                        \u003cMaterialIcons name=\"class\" size={48} color={colors.textSecondary} /\u003e\r\n                                        \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                            No classes assigned to you yet.\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                ) : (\r\n                                    \u003cView style={{ gap: 12 }}\u003e\r\n                                        {classes.map((cls) =\u003e (\r\n                                            \u003cPressable\r\n                                                key={cls._id}\r\n                                                onPress={() =\u003e {\r\n                                                    if (action === \u0027attendance\u0027) {\r\n                                                        router.push({\r\n                                                            pathname: \"/teacher/class/attendance\",\r\n                                                            params: { classId: cls._id }\r\n                                                        });\r\n                                                    } else {\r\n                                                        router.push(`/teacher/class/${cls._id}`);\r\n                                                    }\r\n                                                }}\r\n                                                style={({ pressed }) =\u003e [\r\n                                                    styles.cardMinimal,\r\n                                                    {\r\n                                                        flexDirection: \"row\",\r\n                                                        justifyContent: \"space-between\",\r\n                                                        alignItems: \"center\",\r\n                                                        padding: 20,\r\n                                                        opacity: pressed ? 0.9 : 1,\r\n                                                    }\r\n                                                ]}\r\n                                            \u003e\r\n                                                \u003cView\u003e\r\n                                                    \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                                        {cls.name} {cls.section ? `- ${cls.section}` : \"\"}\r\n                                                    \u003c/Text\u003e\r\n                                                    \u003cText style={{ fontSize: 14, color: colors.textSecondary, marginTop: 4, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                        {cls.academicYear?.name} â€¢ {cls.branch}\r\n                                                    \u003c/Text\u003e\r\n                                                    \u003cView style={{\r\n                                                        backgroundColor: colors.primary + \"15\",\r\n                                                        alignSelf: \"flex-start\",\r\n                                                        paddingHorizontal: 10,\r\n                                                        paddingVertical: 4,\r\n                                                        borderRadius: 8,\r\n                                                        marginTop: 10\r\n                                                    }}\u003e\r\n                                                        \u003cText style={{ color: colors.primary, fontSize: 11, fontFamily: \"DMSans-Bold\" }}\u003eCLASS TEACHER\u003c/Text\u003e\r\n                                                    \u003c/View\u003e\r\n                                                \u003c/View\u003e\r\n                                                \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                                            \u003c/Pressable\u003e\r\n                                        ))}\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\dashboard.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  21,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  21,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  22
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027user\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  12,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "react/no-unescaped-entities",
                                           "severity":  2,
                                           "message":  "`\"` can be escaped with `\u0026quot;`, `\u0026ldquo;`, `\u0026#34;`, `\u0026rdquo;`.",
                                           "line":  90,
                                           "column":  31,
                                           "nodeType":  "JSXText",
                                           "messageId":  "unescapedEntityAlts",
                                           "suggestions":  [
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026quot;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3236,
                                                                                             3333
                                                                                         ],
                                                                               "text":  "\r\n                        Check \u0026quot;My Subjects\" tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026quot;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026ldquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3236,
                                                                                             3333
                                                                                         ],
                                                                               "text":  "\r\n                        Check \u0026ldquo;My Subjects\" tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026ldquo;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026#34;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3236,
                                                                                             3333
                                                                                         ],
                                                                               "text":  "\r\n                        Check \u0026#34;My Subjects\" tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026#34;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026rdquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3236,
                                                                                             3333
                                                                                         ],
                                                                               "text":  "\r\n                        Check \u0026rdquo;My Subjects\" tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026rdquo;`."
                                                               }
                                                           ]
                                       },
                                       {
                                           "ruleId":  "react/no-unescaped-entities",
                                           "severity":  2,
                                           "message":  "`\"` can be escaped with `\u0026quot;`, `\u0026ldquo;`, `\u0026#34;`, `\u0026rdquo;`.",
                                           "line":  90,
                                           "column":  43,
                                           "nodeType":  "JSXText",
                                           "messageId":  "unescapedEntityAlts",
                                           "suggestions":  [
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026quot;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3236,
                                                                                             3333
                                                                                         ],
                                                                               "text":  "\r\n                        Check \"My Subjects\u0026quot; tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026quot;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026ldquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3236,
                                                                                             3333
                                                                                         ],
                                                                               "text":  "\r\n                        Check \"My Subjects\u0026ldquo; tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026ldquo;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026#34;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3236,
                                                                                             3333
                                                                                         ],
                                                                               "text":  "\r\n                        Check \"My Subjects\u0026#34; tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026#34;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026rdquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3236,
                                                                                             3333
                                                                                         ],
                                                                               "text":  "\r\n                        Check \"My Subjects\u0026rdquo; tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026rdquo;`."
                                                               }
                                                           ]
                                       },
                                       {
                                           "ruleId":  "react/no-unescaped-entities",
                                           "severity":  2,
                                           "message":  "`\"` can be escaped with `\u0026quot;`, `\u0026ldquo;`, `\u0026#34;`, `\u0026rdquo;`.",
                                           "line":  198,
                                           "column":  31,
                                           "nodeType":  "JSXText",
                                           "messageId":  "unescapedEntityAlts",
                                           "suggestions":  [
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026quot;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             8668,
                                                                                             8765
                                                                                         ],
                                                                               "text":  "\r\n                        Check \u0026quot;My Subjects\" tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026quot;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026ldquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             8668,
                                                                                             8765
                                                                                         ],
                                                                               "text":  "\r\n                        Check \u0026ldquo;My Subjects\" tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026ldquo;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026#34;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             8668,
                                                                                             8765
                                                                                         ],
                                                                               "text":  "\r\n                        Check \u0026#34;My Subjects\" tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026#34;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026rdquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             8668,
                                                                                             8765
                                                                                         ],
                                                                               "text":  "\r\n                        Check \u0026rdquo;My Subjects\" tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026rdquo;`."
                                                               }
                                                           ]
                                       },
                                       {
                                           "ruleId":  "react/no-unescaped-entities",
                                           "severity":  2,
                                           "message":  "`\"` can be escaped with `\u0026quot;`, `\u0026ldquo;`, `\u0026#34;`, `\u0026rdquo;`.",
                                           "line":  198,
                                           "column":  43,
                                           "nodeType":  "JSXText",
                                           "messageId":  "unescapedEntityAlts",
                                           "suggestions":  [
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026quot;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             8668,
                                                                                             8765
                                                                                         ],
                                                                               "text":  "\r\n                        Check \"My Subjects\u0026quot; tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026quot;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026ldquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             8668,
                                                                                             8765
                                                                                         ],
                                                                               "text":  "\r\n                        Check \"My Subjects\u0026ldquo; tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026ldquo;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026#34;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             8668,
                                                                                             8765
                                                                                         ],
                                                                               "text":  "\r\n                        Check \"My Subjects\u0026#34; tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026#34;`."
                                                               },
                                                               {
                                                                   "messageId":  "replaceWithAlt",
                                                                   "data":  {
                                                                                "alt":  "\u0026rdquo;"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             8668,
                                                                                             8765
                                                                                         ],
                                                                               "text":  "\r\n                        Check \"My Subjects\u0026rdquo; tab to see subjects you teach\r\n                    "
                                                                           },
                                                                   "desc":  "Replace with `\u0026rdquo;`."
                                                               }
                                                           ]
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  4,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport AppHeader from \"../../components/Header\";\r\n\r\nexport default function TeacherDashboard() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n    const [activeTab, setActiveTab] = useState(\u0027classTeacher\u0027); // \u0027classTeacher\u0027 or \u0027mySubjects\u0027\r\n\r\n    useEffect(() =\u003e {\r\n        const loadUser = async () =\u003e {\r\n            const storedUser = await AsyncStorage.getItem(\"@auth_user\");\r\n            if (!storedUser) {\r\n                router.replace(\"/login\");\r\n                return;\r\n            }\r\n            try {\r\n                setUser(JSON.parse(storedUser));\r\n            } catch (e) {\r\n                console.error(\"Failed to parse stored user:\", e);\r\n                await AsyncStorage.removeItem(\"@auth_user\");\r\n                router.replace(\"/login\");\r\n            }\r\n        };\r\n        loadUser();\r\n    }, []);\r\n\r\n    const { data: dashboardData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027teacherDashboard\u0027],\r\n        `${apiConfig.baseUrl}/teachers/my-classes-and-subjects`\r\n    );\r\n\r\n    const asClassTeacher = dashboardData?.asClassTeacher || [];\r\n    const allMySubjects = dashboardData?.allMySubjects || [];\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    // Group subjects by subject name for display\r\n    const groupedSubjects = allMySubjects.reduce((acc, subj) =\u003e {\r\n        if (!acc[subj.name]) {\r\n            acc[subj.name] = [];\r\n        }\r\n        acc[subj.name].push(subj);\r\n        return acc;\r\n    }, {});\r\n\r\n    const renderClassTeacherTab = () =\u003e (\r\n        \u003cView\u003e\r\n            {asClassTeacher.length === 0 ? (\r\n                \u003cView style={{ alignItems: \"center\", marginTop: 60, opacity: 0.6 }}\u003e\r\n                    \u003cMaterialIcons name=\"class\" size={56} color={colors.textSecondary} /\u003e\r\n                    \u003cText style={{\r\n                        color: colors.textSecondary,\r\n                        marginTop: 20,\r\n                        fontSize: 16,\r\n                        fontFamily: \"DMSans-Medium\"\r\n                    }}\u003e\r\n                        You are not a class teacher of any class\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={{\r\n                        color: colors.textSecondary,\r\n                        marginTop: 8,\r\n                        fontSize: 13,\r\n                        fontFamily: \"DMSans-Regular\",\r\n                        textAlign: \"center\",\r\n                        paddingHorizontal: 40\r\n                    }}\u003e\r\n                        Check \"My Subjects\" tab to see subjects you teach\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            ) : (\r\n                asClassTeacher.map((cls) =\u003e (\r\n                    \u003cPressable\r\n                        key={cls._id}\r\n                        onPress={() =\u003e router.push(`/teacher/class/${cls._id}`)}\r\n                        style={({ pressed }) =\u003e ({\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 16,\r\n                            padding: 18,\r\n                            marginBottom: 12,\r\n                            flexDirection: \"row\",\r\n                            justifyContent: \"space-between\",\r\n                            alignItems: \"center\",\r\n                            opacity: pressed ? 0.9 : 1,\r\n                            shadowColor: \"#000\",\r\n                            shadowOffset: { width: 0, height: 2 },\r\n                            shadowOpacity: 0.06,\r\n                            shadowRadius: 6,\r\n                            elevation: 2,\r\n                        })}\r\n                    \u003e\r\n                        \u003cView style={{ flex: 1 }}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 6 }}\u003e\r\n                                \u003cText style={{\r\n                                    fontSize: 18,\r\n                                    fontFamily: \"DMSans-Bold\",\r\n                                    color: colors.textPrimary\r\n                                }}\u003e\r\n                                    {cls.name} {cls.section ? `- ${cls.section}` : \"\"}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12, marginTop: 4 }}\u003e\r\n                                \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\u003e\r\n                                    \u003cMaterialIcons name=\"people\" size={16} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 13,\r\n                                        color: colors.textSecondary,\r\n                                        fontFamily: \"DMSans-Medium\"\r\n                                    }}\u003e\r\n                                        {cls.studentCount} students\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n\r\n                                {cls.mySubjects \u0026\u0026 cls.mySubjects.length \u003e 0 \u0026\u0026 (\r\n                                    \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\u003e\r\n                                        \u003cMaterialIcons name=\"book\" size={16} color={colors.textSecondary} /\u003e\r\n                                        \u003cText style={{\r\n                                            fontSize: 13,\r\n                                            color: colors.textSecondary,\r\n                                            fontFamily: \"DMSans-Medium\"\r\n                                        }}\u003e\r\n                                            Teaching: {cls.mySubjects.join(\", \")}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{\r\n                                backgroundColor: colors.primary + \"15\",\r\n                                alignSelf: \"flex-start\",\r\n                                paddingHorizontal: 10,\r\n                                paddingVertical: 3,\r\n                                borderRadius: 6,\r\n                                marginTop: 10\r\n                            }}\u003e\r\n                                \u003cText style={{\r\n                                    color: colors.primary,\r\n                                    fontSize: 11,\r\n                                    fontFamily: \"DMSans-Bold\",\r\n                                    textTransform: \"uppercase\"\r\n                                }}\u003e\r\n                                    CLASS TEACHER\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                    \u003c/Pressable\u003e\r\n                ))\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderMySubjectsTab = () =\u003e (\r\n        \u003cView\u003e\r\n            {Object.keys(groupedSubjects).length === 0 ? (\r\n                \u003cView style={{ alignItems: \"center\", marginTop: 60, opacity: 0.6 }}\u003e\r\n                    \u003cMaterialIcons name=\"library-books\" size={56} color={colors.textSecondary} /\u003e\r\n                    \u003cText style={{\r\n                        color: colors.textSecondary,\r\n                        marginTop: 20,\r\n                        fontSize: 16,\r\n                        fontFamily: \"DMSans-Medium\"\r\n                    }}\u003e\r\n                        No subjects assigned to you yet\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={{\r\n                        color: colors.textSecondary,\r\n                        marginTop: 8,\r\n                        fontSize: 13,\r\n                        fontFamily: \"DMSans-Regular\",\r\n                        textAlign: \"center\",\r\n                        paddingHorizontal: 40\r\n                    }}\u003e\r\n                        Check \"My Subjects\" tab to see subjects you teach\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            ) : (\r\n                allMySubjects.map((subj) =\u003e (\r\n                    \u003cPressable\r\n                        key={subj._id}\r\n                        onPress={() =\u003e router.push({\r\n                            pathname: `/teacher/class/subject/${subj._id}`,\r\n                            params: { id: subj.class._id, subjectId: subj._id }\r\n                        })}\r\n                        style={({ pressed }) =\u003e ({\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 12,\r\n                            padding: 14,\r\n                            marginBottom: 8,\r\n                            marginLeft: 12,\r\n                            opacity: pressed ? 0.9 : 1,\r\n                            flexDirection: \"row\",\r\n                            justifyContent: \"space-between\",\r\n                            alignItems: \"center\",\r\n                            borderLeftWidth: 3,\r\n                            borderLeftColor: colors.primary\r\n                        })}\r\n                    \u003e\r\n                        \u003cView style={{ flex: 1 }}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 8 }}\u003e\r\n                                \u003cText style={{\r\n                                    fontSize: 16,\r\n                                    fontFamily: \"DMSans-SemiBold\",\r\n                                    color: colors.textPrimary\r\n                                }}\u003e\r\n                                    {subj.class.name} {subj.class.section ? `- ${subj.class.section}` : \"\"}\r\n                                \u003c/Text\u003e\r\n                                {subj.isClassTeacher \u0026\u0026 (\r\n                                    \u003cView style={{\r\n                                        backgroundColor: colors.success + \"20\",\r\n                                        paddingHorizontal: 6,\r\n                                        paddingVertical: 2,\r\n                                        borderRadius: 4\r\n                                    }}\u003e\r\n                                        \u003cText style={{\r\n                                            fontSize: 10,\r\n                                            color: colors.success,\r\n                                            fontFamily: \"DMSans-Bold\"\r\n                                        }}\u003e\r\n                                            MY CLASS\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n                            {subj.class.branch \u0026\u0026 (\r\n                                \u003cText style={{\r\n                                    fontSize: 12,\r\n                                    color: colors.textSecondary,\r\n                                    fontFamily: \"DMSans-Regular\",\r\n                                    marginTop: 2\r\n                                }}\u003e\r\n                                    {subj.class.branch}\r\n                                \u003c/Text\u003e\r\n                            )}\r\n                        \u003c/View\u003e\r\n                        \u003cMaterialIcons name=\"chevron-right\" size={20} color={colors.textSecondary} /\u003e\r\n                    \u003c/Pressable\u003e\r\n                ))\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader title=\"My Teaching\" subtitle=\"Manage your classes and subjects\" /\u003e\r\n\r\n                    {/* Quick Action: History */}\r\n                    \u003cPressable\r\n                        onPress={() =\u003e router.push(\"/history\")}\r\n                        style={({ pressed }) =\u003e ({\r\n                            backgroundColor: colors.cardBackground,\r\n                            borderRadius: 16,\r\n                            padding: 16,\r\n                            marginBottom: 24,\r\n                            shadowColor: \"#000\",\r\n                            shadowOffset: { width: 0, height: 1 },\r\n                            shadowOpacity: 0.05,\r\n                            shadowRadius: 4,\r\n                            elevation: 1,\r\n                            opacity: pressed ? 0.9 : 1,\r\n                            flexDirection: \"row\",\r\n                            justifyContent: \"space-between\",\r\n                            alignItems: \"center\"\r\n                        })}\r\n                    \u003e\r\n                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                            \u003cView style={{ backgroundColor: \"#795548\" + \"20\", padding: 10, borderRadius: 10 }}\u003e\r\n                                \u003cMaterialIcons name=\"history\" size={24} color=\"#795548\" /\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView\u003e\r\n                                \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                    History\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 2, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    View past exams\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cMaterialIcons name=\"chevron-right\" size={24} color={colors.textSecondary} /\u003e\r\n                    \u003c/Pressable\u003e\r\n\r\n                    {loading ? (\r\n                        \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", marginTop: 100 }}\u003e\r\n                            \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        \u003c\u003e\r\n                            {/* Tab Switcher */}\r\n                            \u003cView style={{\r\n                                flexDirection: \"row\",\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 12,\r\n                                padding: 4,\r\n                                marginBottom: 20\r\n                            }}\u003e\r\n                                \u003cPressable\r\n                                    onPress={() =\u003e setActiveTab(\u0027classTeacher\u0027)}\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        paddingVertical: 10,\r\n                                        borderRadius: 10,\r\n                                        backgroundColor: activeTab === \u0027classTeacher\u0027 ? colors.primary : \u0027transparent\u0027,\r\n                                        alignItems: \"center\"\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 14,\r\n                                        fontFamily: \"DMSans-Bold\",\r\n                                        color: activeTab === \u0027classTeacher\u0027 ? \u0027#fff\u0027 : colors.textSecondary\r\n                                    }}\u003e\r\n                                        As Class Teacher\r\n                                    \u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n\r\n                                \u003cPressable\r\n                                    onPress={() =\u003e setActiveTab(\u0027mySubjects\u0027)}\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        paddingVertical: 10,\r\n                                        borderRadius: 10,\r\n                                        backgroundColor: activeTab === \u0027mySubjects\u0027 ? colors.primary : \u0027transparent\u0027,\r\n                                        alignItems: \"center\"\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 14,\r\n                                        fontFamily: \"DMSans-Bold\",\r\n                                        color: activeTab === \u0027mySubjects\u0027 ? \u0027#fff\u0027 : colors.textSecondary\r\n                                    }}\u003e\r\n                                        My Subjects\r\n                                    \u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Tab Content */}\r\n                            {activeTab === \u0027classTeacher\u0027 ? renderClassTeacherTab() : renderMySubjectsTab()}\r\n                        \u003c/\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\exam\\enter-marks.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  12,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  12,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027existingMarks\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  56,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  56,
                                           "endColumn":  24
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    TextInput,\r\n    ActivityIndicator,\r\n    RefreshControl,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\r\nimport { useTheme } from \"../../../theme\";\r\nimport apiConfig from \"../../../config/apiConfig\";\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \"../../../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { useToast } from \"../../../components/ToastProvider\";\r\nimport AppHeader from \"../../../components/Header\";\r\n\r\nexport default function EnterMarksScreen() {\r\n    const router = useRouter();\r\n    const params = useLocalSearchParams();\r\n    const queryClient = useQueryClient();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const { examId } = params;\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [marksData, setMarksData] = useState({});\r\n\r\n    // Fetch Exam Details\r\n    const { data: exam, isLoading: examLoading } = useApiQuery(\r\n        [\u0027examDetails\u0027, examId],\r\n        `${apiConfig.baseUrl}/exams/${examId}`,\r\n        { enabled: !!examId }\r\n    );\r\n\r\n    // Fetch Students (using exam.class._id)\r\n    const { data: classData, isLoading: studentsLoading } = useApiQuery(\r\n        [\u0027classStudents\u0027, exam?.class?._id],\r\n        `${apiConfig.baseUrl}/classes/${exam?.class?._id}/full-details`,\r\n        { enabled: !!exam?.class?._id }\r\n    );\r\n    const students = classData?.students || [];\r\n\r\n    // Fetch Existing Marks\r\n    const { data: existingMarksData, isLoading: marksLoading, refetch: refetchMarks } = useApiQuery(\r\n        [\u0027examMarks\u0027, examId],\r\n        `${apiConfig.baseUrl}/marks/exam/${examId}`,\r\n        { enabled: !!examId }\r\n    );\r\n\r\n    // Process existing marks into maps\r\n    const existingMarks = {};\r\n    useEffect(() =\u003e {\r\n        if (existingMarksData) {\r\n            const marksMap = {};\r\n            const existingMap = {};\r\n            existingMarksData.forEach(mark =\u003e {\r\n                const studentId = mark.student._id;\r\n                marksMap[studentId] = mark.marksObtained.toString();\r\n                existingMap[studentId] = mark;\r\n            });\r\n            setMarksData(marksMap);\r\n            // We can\u0027t set existingMarks state directly as it\u0027s derived, \r\n            // but we can use a ref or just use the data directly if we memoize it.\r\n            // For now, let\u0027s just use the existingMarksData in render.\r\n        }\r\n    }, [existingMarksData]);\r\n\r\n    // Create a map for easy lookup in render\r\n    const existingMarksMap = React.useMemo(() =\u003e {\r\n        const map = {};\r\n        if (existingMarksData) {\r\n            existingMarksData.forEach(mark =\u003e {\r\n                map[mark.student._id] = mark;\r\n            });\r\n        }\r\n        return map;\r\n    }, [existingMarksData]);\r\n\r\n\r\n    const saveMarksMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/marks/bulk`, \u0027POST\u0027),\r\n        onSuccess: (result) =\u003e {\r\n            const failures = result.results.filter(r =\u003e !r.success);\r\n            if (failures.length \u003e 0) {\r\n                showToast(`Marks saved with ${failures.length} errors`, \"warning\");\r\n            } else {\r\n                showToast(\"All marks saved successfully\", \"success\");\r\n            }\r\n            queryClient.invalidateQueries({ queryKey: [\u0027examMarks\u0027, examId] });\r\n            refetchMarks();\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to save marks\", \"error\")\r\n    });\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await Promise.all([\r\n            queryClient.invalidateQueries({ queryKey: [\u0027examDetails\u0027, examId] }),\r\n            queryClient.invalidateQueries({ queryKey: [\u0027classStudents\u0027, exam?.class?._id] }),\r\n            refetchMarks()\r\n        ]);\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const handleMarksChange = (studentId, value) =\u003e {\r\n        setMarksData(prev =\u003e ({\r\n            ...prev,\r\n            [studentId]: value\r\n        }));\r\n    };\r\n\r\n    const handleSaveMarks = () =\u003e {\r\n        // Prepare marks data for bulk upload\r\n        const marksArray = Object.keys(marksData)\r\n            .filter(studentId =\u003e marksData[studentId] !== \u0027\u0027 \u0026\u0026 marksData[studentId] !== undefined)\r\n            .map(studentId =\u003e ({\r\n                studentId,\r\n                marksObtained: parseFloat(marksData[studentId])\r\n            }));\r\n\r\n        if (marksArray.length === 0) {\r\n            showToast(\"Please enter marks for at least one student\", \"warning\");\r\n            return;\r\n        }\r\n\r\n        // Validate all marks\r\n        const invalidMarks = marksArray.filter(\r\n            m =\u003e isNaN(m.marksObtained) || m.marksObtained \u003c 0 || m.marksObtained \u003e exam.totalMarks\r\n        );\r\n\r\n        if (invalidMarks.length \u003e 0) {\r\n            showToast(`Marks must be between 0 and ${exam.totalMarks}`, \"error\");\r\n            return;\r\n        }\r\n\r\n        saveMarksMutation.mutate({\r\n            examId,\r\n            marksData: marksArray\r\n        });\r\n    };\r\n\r\n    const getGradeColor = (grade) =\u003e {\r\n        if (grade === \u0027A+\u0027 || grade === \u0027A\u0027) return colors.success;\r\n        if (grade === \u0027B+\u0027 || grade === \u0027B\u0027) return \u0027#2196F3\u0027;\r\n        if (grade === \u0027C\u0027) return \u0027#FF9800\u0027;\r\n        if (grade === \u0027D\u0027) return \u0027#FF5722\u0027;\r\n        return colors.error;\r\n    };\r\n\r\n    const loading = examLoading || studentsLoading || marksLoading;\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    if (!exam) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\", padding: 20 }}\u003e\r\n                \u003cMaterialIcons name=\"error-outline\" size={64} color={colors.error} /\u003e\r\n                \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary, marginTop: 16 }}\u003e\r\n                    Exam not found\r\n                \u003c/Text\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title=\"Enter Marks\"\r\n                        subtitle={`${exam.name} - ${exam.subject.name}`}\r\n                        showBack\r\n                    /\u003e\r\n\r\n                    {/* Exam Info Card */}\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.primary + \"15\",\r\n                        borderRadius: 16,\r\n                        padding: 16,\r\n                        marginTop: 20,\r\n                        borderLeftWidth: 4,\r\n                        borderLeftColor: colors.primary\r\n                    }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 8 }}\u003e\r\n                            \u003cText style={{ fontSize: 14, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                Class\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                {exam.class.name} {exam.class.section}\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 8 }}\u003e\r\n                            \u003cText style={{ fontSize: 14, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                Type\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, textTransform: \"capitalize\" }}\u003e\r\n                                {exam.type.replace(\u0027-\u0027, \u0027 \u0027)}\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}\u003e\r\n                            \u003cText style={{ fontSize: 14, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                Total Marks\r\n                            \u003c/Text\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.primary }}\u003e\r\n                                {exam.totalMarks}\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Students List with Marks Entry */}\r\n                    \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 28, marginBottom: 16 }}\u003e\r\n                        Student Marks ({students.length})\r\n                    \u003c/Text\u003e\r\n\r\n                    {students.length === 0 ? (\r\n                        \u003cView style={{ alignItems: \"center\", marginTop: 40 }}\u003e\r\n                            \u003cMaterialIcons name=\"people-outline\" size={64} color={colors.textSecondary} /\u003e\r\n                            \u003cText style={{ fontSize: 16, color: colors.textSecondary, marginTop: 16, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                No students in this class\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    ) : (\r\n                        students.map((student, index) =\u003e {\r\n                            const existingMark = existingMarksMap[student._id];\r\n                            const currentValue = marksData[student._id] || \u0027\u0027;\r\n\r\n                            return (\r\n                                \u003cView\r\n                                    key={student._id}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 12,\r\n                                        padding: 16,\r\n                                        marginBottom: 12,\r\n                                        elevation: 1\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 12 }}\u003e\r\n                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                            \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary }}\u003e\r\n                                                {index + 1}. {student.name}\r\n                                            \u003c/Text\u003e\r\n                                            {student.email \u0026\u0026 (\r\n                                                \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 2, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                    {student.email}\r\n                                                \u003c/Text\u003e\r\n                                            )}\r\n                                        \u003c/View\u003e\r\n\r\n                                        {existingMark \u0026\u0026 (\r\n                                            \u003cView style={{\r\n                                                backgroundColor: getGradeColor(existingMark.grade) + \"20\",\r\n                                                paddingHorizontal: 12,\r\n                                                paddingVertical: 6,\r\n                                                borderRadius: 8\r\n                                            }}\u003e\r\n                                                \u003cText style={{\r\n                                                    fontSize: 16,\r\n                                                    fontFamily: \"DMSans-Bold\",\r\n                                                    color: getGradeColor(existingMark.grade)\r\n                                                }}\u003e\r\n                                                    {existingMark.grade}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n\r\n                                    {/* Marks Input */}\r\n                                    \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 12 }}\u003e\r\n                                        \u003cView style={{ flex: 1 }}\u003e\r\n                                            \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginBottom: 6, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                Marks Obtained (out of {exam.totalMarks})\r\n                                            \u003c/Text\u003e\r\n                                            \u003cTextInput\r\n                                                placeholder=\"0\"\r\n                                                placeholderTextColor={colors.textSecondary + \"60\"}\r\n                                                keyboardType=\"numeric\"\r\n                                                style={{\r\n                                                    backgroundColor: colors.background,\r\n                                                    padding: 12,\r\n                                                    borderRadius: 10,\r\n                                                    color: colors.textPrimary,\r\n                                                    fontSize: 18,\r\n                                                    fontFamily: \"DMSans-Bold\",\r\n                                                    borderWidth: 2,\r\n                                                    borderColor: currentValue !== \u0027\u0027 ? colors.primary : colors.textSecondary + \"20\"\r\n                                                }}\r\n                                                value={currentValue}\r\n                                                onChangeText={(value) =\u003e handleMarksChange(student._id, value)}\r\n                                            /\u003e\r\n                                        \u003c/View\u003e\r\n\r\n                                        {currentValue !== \u0027\u0027 \u0026\u0026 !isNaN(currentValue) \u0026\u0026 (\r\n                                            \u003cView style={{ alignItems: \"center\", minWidth: 60 }}\u003e\r\n                                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, marginBottom: 4, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                                                    %\r\n                                                \u003c/Text\u003e\r\n                                                \u003cText style={{ fontSize: 24, fontFamily: \"DMSans-Bold\", color: colors.primary }}\u003e\r\n                                                    {((parseFloat(currentValue) / exam.totalMarks) * 100).toFixed(0)}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                            );\r\n                        })\r\n                    )}\r\n\r\n                    {/* Save Button */}\r\n                    {students.length \u003e 0 \u0026\u0026 (\r\n                        \u003cPressable\r\n                            onPress={handleSaveMarks}\r\n                            disabled={saveMarksMutation.isPending}\r\n                            style={({ pressed }) =\u003e ({\r\n                                backgroundColor: colors.primary,\r\n                                borderRadius: 12,\r\n                                padding: 16,\r\n                                marginTop: 24,\r\n                                flexDirection: \"row\",\r\n                                alignItems: \"center\",\r\n                                justifyContent: \"center\",\r\n                                gap: 8,\r\n                                opacity: pressed || saveMarksMutation.isPending ? 0.7 : 1,\r\n                                elevation: 3\r\n                            })}\r\n                        \u003e\r\n                            {saveMarksMutation.isPending ? (\r\n                                \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e\r\n                            ) : (\r\n                                \u003c\u003e\r\n                                    \u003cMaterialIcons name=\"save\" size={24} color=\"#fff\" /\u003e\r\n                                    \u003cText style={{ fontSize: 17, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                        Save All Marks\r\n                                    \u003c/Text\u003e\r\n                                \u003c/\u003e\r\n                            )}\r\n                        \u003c/Pressable\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\leaves.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useCallback\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  38,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  49
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027data\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  79,
                                           "column":  21,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  79,
                                           "endColumn":  25
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027data\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  89,
                                           "column":  21,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  89,
                                           "endColumn":  25
                                       },
                                       {
                                           "ruleId":  "no-dupe-keys",
                                           "severity":  2,
                                           "message":  "Duplicate key \u0027dateText\u0027.",
                                           "line":  563,
                                           "column":  5,
                                           "nodeType":  "ObjectExpression",
                                           "messageId":  "unexpected",
                                           "endLine":  563,
                                           "endColumn":  13
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect, useCallback } from \u0027react\u0027;\r\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity, Modal, TextInput, RefreshControl, ActivityIndicator, ScrollView, Switch } from \u0027react-native\u0027;\r\nimport { useRouter } from \u0027expo-router\u0027;\r\nimport { Ionicons } from \u0027@expo/vector-icons\u0027;\r\nimport DateTimePicker from \u0027@react-native-community/datetimepicker\u0027;\r\nimport { useApiQuery, useApiMutation, createApiMutationFn } from \u0027../../hooks/useApi\u0027;\r\nimport { useQueryClient } from \u0027@tanstack/react-query\u0027;\r\nimport apiConfig from \u0027../../config/apiConfig\u0027;\r\nimport { useToast } from \u0027../../components/ToastProvider\u0027;\r\n\r\nexport default function TeacherLeaves() {\r\n    const router = useRouter();\r\n    const queryClient = useQueryClient();\r\n    const { showToast } = useToast();\r\n    const [activeTab, setActiveTab] = useState(\u0027requests\u0027); // \u0027requests\u0027 or \u0027my_leaves\u0027\r\n\r\n    // Data State\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Action Modal State\r\n    const [actionModalVisible, setActionModalVisible] = useState(false);\r\n    const [selectedRequest, setSelectedRequest] = useState(null);\r\n    const [actionType, setActionType] = useState(\u0027\u0027); // \u0027approved\u0027 or \u0027rejected\u0027\r\n    const [actionReason, setActionReason] = useState(\u0027\u0027);\r\n    const [rejectionReason, setRejectionReason] = useState(\u0027\u0027);\r\n    const [rejectionComments, setRejectionComments] = useState(\u0027\u0027);\r\n\r\n    // Apply Leave Modal State\r\n    const [applyModalVisible, setApplyModalVisible] = useState(false);\r\n    const [startDate, setStartDate] = useState(new Date());\r\n    const [endDate, setEndDate] = useState(new Date());\r\n    const [reason, setReason] = useState(\u0027\u0027);\r\n    const [showStartPicker, setShowStartPicker] = useState(false);\r\n    const [showEndPicker, setShowEndPicker] = useState(false);\r\n    const [isHalfDay, setIsHalfDay] = useState(false);\r\n    const [halfDaySlot, setHalfDaySlot] = useState(\u0027morning\u0027);\r\n\r\n    // Fetch Pending Requests\r\n    const { data: requestsData, isLoading: requestsLoading, refetch: refetchRequests } = useApiQuery(\r\n        [\u0027teacherLeaveRequests\u0027],\r\n        `${apiConfig.baseUrl}/leaves/pending`,\r\n        { enabled: activeTab === \u0027requests\u0027 }\r\n    );\r\n    const requests = requestsData?.data || [];\r\n\r\n    // Fetch My Leaves\r\n    const { data: myLeavesData, isLoading: myLeavesLoading, refetch: refetchMyLeaves } = useApiQuery(\r\n        [\u0027teacherMyLeaves\u0027],\r\n        `${apiConfig.baseUrl}/leaves/my-leaves`,\r\n        { enabled: activeTab === \u0027my_leaves\u0027 }\r\n    );\r\n    const myLeaves = myLeavesData?.data || [];\r\n\r\n    // Fetch Leave Balance\r\n    const { data: balanceData, isLoading: balanceLoading, refetch: refetchBalance } = useApiQuery(\r\n        [\u0027teacherLeaveBalance\u0027],\r\n        `${apiConfig.baseUrl}/leaves/balance`,\r\n        { enabled: activeTab === \u0027my_leaves\u0027 }\r\n    );\r\n    const leaveBalance = balanceData?.data || null;\r\n\r\n    const loading = activeTab === \u0027requests\u0027 ? requestsLoading : (myLeavesLoading || balanceLoading);\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        if (activeTab === \u0027requests\u0027) {\r\n            await refetchRequests();\r\n        } else {\r\n            await Promise.all([refetchMyLeaves(), refetchBalance()]);\r\n        }\r\n        setRefreshing(false);\r\n    };\r\n\r\n    // Mutations\r\n    const actionMutation = useApiMutation({\r\n        mutationFn: async ({ requestId, payload }) =\u003e {\r\n            return createApiMutationFn(`${apiConfig.baseUrl}/leaves/${requestId}/action`, \u0027PUT\u0027)(payload);\r\n        },\r\n        onSuccess: (data) =\u003e {\r\n            showToast(`Leave ${actionType} successfully`, \u0027success\u0027);\r\n            setActionModalVisible(false);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027teacherLeaveRequests\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \u0027Error updating status\u0027, \u0027error\u0027)\r\n    });\r\n\r\n    const applyLeaveMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/leaves/apply`, \u0027POST\u0027),\r\n        onSuccess: (data) =\u003e {\r\n            showToast(\u0027Leave applied successfully\u0027, \u0027success\u0027);\r\n            setApplyModalVisible(false);\r\n            setReason(\u0027\u0027);\r\n            setIsHalfDay(false);\r\n            queryClient.invalidateQueries({ queryKey: [\u0027teacherMyLeaves\u0027] });\r\n            queryClient.invalidateQueries({ queryKey: [\u0027teacherLeaveBalance\u0027] });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \u0027Error applying leave\u0027, \u0027error\u0027)\r\n    });\r\n\r\n    // --- Action Handlers ---\r\n\r\n    const openActionModal = (request, type) =\u003e {\r\n        setSelectedRequest(request);\r\n        setActionType(type);\r\n        setActionReason(\u0027\u0027);\r\n        setRejectionReason(\u0027\u0027);\r\n        setRejectionComments(\u0027\u0027);\r\n        setActionModalVisible(true);\r\n    };\r\n\r\n    const handleAction = () =\u003e {\r\n        if (actionType === \u0027rejected\u0027 \u0026\u0026 (!rejectionReason || !rejectionComments)) {\r\n            showToast(\u0027Rejection reason and comments are required\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        const payload = {\r\n            status: actionType,\r\n            reason: actionReason,\r\n            rejectionReason: actionType === \u0027rejected\u0027 ? rejectionReason : undefined,\r\n            rejectionComments: actionType === \u0027rejected\u0027 ? rejectionComments : undefined\r\n        };\r\n\r\n        actionMutation.mutate({ requestId: selectedRequest._id, payload });\r\n    };\r\n\r\n    // --- Apply Leave Handlers ---\r\n\r\n    const handleApplyLeave = () =\u003e {\r\n        if (!reason.trim()) {\r\n            showToast(\u0027Please enter a reason\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        if (!isHalfDay \u0026\u0026 endDate \u003c startDate) {\r\n            showToast(\u0027End date cannot be before start date\u0027, \u0027error\u0027);\r\n            return;\r\n        }\r\n\r\n        let finalEndDate = endDate;\r\n        if (isHalfDay) finalEndDate = startDate;\r\n\r\n        const payload = {\r\n            startDate: startDate.toISOString().split(\u0027T\u0027)[0],\r\n            endDate: finalEndDate.toISOString().split(\u0027T\u0027)[0],\r\n            reason,\r\n            leaveType: isHalfDay ? \u0027half\u0027 : \u0027full\u0027,\r\n            halfDaySlot: isHalfDay ? halfDaySlot : undefined\r\n        };\r\n\r\n        applyLeaveMutation.mutate(payload);\r\n    };\r\n\r\n    // --- Render Items ---\r\n\r\n    const formatDate = (dateString) =\u003e {\r\n        if (!dateString) return \u0027\u0027;\r\n        return new Date(dateString).toLocaleDateString(\u0027en-GB\u0027, { day: \u00272-digit\u0027, month: \u0027short\u0027 });\r\n    };\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027approved\u0027: return \u0027#4CAF50\u0027;\r\n            case \u0027rejected\u0027: return \u0027#F44336\u0027;\r\n            default: return \u0027#FF9800\u0027;\r\n        }\r\n    };\r\n\r\n    const renderRequestItem = ({ item }) =\u003e (\r\n        \u003cView style={styles.card}\u003e\r\n            \u003cView style={styles.cardHeader}\u003e\r\n                \u003cView\u003e\r\n                    \u003cText style={styles.studentName}\u003e{item.applicant?.name || \u0027Unknown\u0027}\u003c/Text\u003e\r\n                    \u003cText style={styles.classInfo}\u003e\r\n                        {item.applicantRole === \u0027student\u0027 ? `Class: ${item.class?.name || \u0027\u0027} ${item.class?.section || \u0027\u0027}` : \u0027Teacher\u0027}\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n                \u003cView style={styles.dateContainer}\u003e\r\n                    \u003cText style={styles.dateText}\u003e\r\n                        {formatDate(item.startDate)}\r\n                        {item.leaveType === \u0027full\u0027 \u0026\u0026 item.startDate !== item.endDate \u0026\u0026 ` - ${formatDate(item.endDate)}`}\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={styles.leaveTypeBadge}\u003e\r\n                        {item.leaveType === \u0027half\u0027 ? `Half Day (${item.halfDaySlot})` : \u0027Full Day\u0027}\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cText style={styles.reasonLabel}\u003eReason:\u003c/Text\u003e\r\n            \u003cText style={styles.reasonText}\u003e{item.reason}\u003c/Text\u003e\r\n\r\n            \u003cView style={styles.actionButtons}\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.actionButton, styles.rejectButton]}\r\n                    onPress={() =\u003e openActionModal(item, \u0027rejected\u0027)}\r\n                \u003e\r\n                    \u003cText style={styles.actionButtonText}\u003eReject\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.actionButton, styles.approveButton]}\r\n                    onPress={() =\u003e openActionModal(item, \u0027approved\u0027)}\r\n                \u003e\r\n                    \u003cText style={styles.actionButtonText}\u003eApprove\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n            \u003c/View\u003e\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    const renderMyLeaveItem = ({ item }) =\u003e (\r\n        \u003cView style={styles.card}\u003e\r\n            \u003cView style={styles.cardHeader}\u003e\r\n                \u003cView\u003e\r\n                    \u003cText style={styles.dateText}\u003e\r\n                        {formatDate(item.startDate)}\r\n                        {item.leaveType === \u0027full\u0027 \u0026\u0026 item.startDate !== item.endDate \u0026\u0026 ` - ${formatDate(item.endDate)}`}\r\n                    \u003c/Text\u003e\r\n                    \u003cText style={styles.leaveTypeBadge}\u003e\r\n                        {item.leaveType === \u0027half\u0027 ? `Half Day (${item.halfDaySlot})` : \u0027Full Day\u0027}\r\n                    \u003c/Text\u003e\r\n                \u003c/View\u003e\r\n                \u003cView style={[styles.statusBadge, { backgroundColor: getStatusColor(item.status) }]}\u003e\r\n                    \u003cText style={styles.statusText}\u003e{(item.status || \u0027pending\u0027).toUpperCase()}\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n            \u003cText style={styles.reasonLabel}\u003eReason:\u003c/Text\u003e\r\n            \u003cText style={styles.reasonText}\u003e{item.reason}\u003c/Text\u003e\r\n            {item.status === \u0027rejected\u0027 \u0026\u0026 (\r\n                \u003cView style={styles.rejectionBox}\u003e\r\n                    \u003cText style={styles.rejectionTitle}\u003eRejection Details:\u003c/Text\u003e\r\n                    \u003cText style={styles.rejectionText}\u003e\u003cText style={{ fontWeight: \u0027bold\u0027 }}\u003eReason:\u003c/Text\u003e {item.rejectionReason}\u003c/Text\u003e\r\n                    \u003cText style={styles.rejectionText}\u003e\u003cText style={{ fontWeight: \u0027bold\u0027 }}\u003eComments:\u003c/Text\u003e {item.rejectionComments}\u003c/Text\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cView style={styles.header}\u003e\r\n                \u003cTouchableOpacity onPress={() =\u003e router.back()} style={styles.backButton}\u003e\r\n                    \u003cIonicons name=\"arrow-back\" size={24} color=\"#333\" /\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cText style={styles.headerTitle}\u003eLeave Management\u003c/Text\u003e\r\n                \u003cView style={{ width: 24 }} /\u003e\r\n            \u003c/View\u003e\r\n\r\n            \u003cView style={styles.tabContainer}\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.tab, activeTab === \u0027requests\u0027 \u0026\u0026 styles.activeTab]}\r\n                    onPress={() =\u003e setActiveTab(\u0027requests\u0027)}\r\n                \u003e\r\n                    \u003cText style={[styles.tabText, activeTab === \u0027requests\u0027 \u0026\u0026 styles.activeTabText]}\u003eRequests\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[styles.tab, activeTab === \u0027my_leaves\u0027 \u0026\u0026 styles.activeTab]}\r\n                    onPress={() =\u003e setActiveTab(\u0027my_leaves\u0027)}\r\n                \u003e\r\n                    \u003cText style={[styles.tabText, activeTab === \u0027my_leaves\u0027 \u0026\u0026 styles.activeTabText]}\u003eMy Leaves\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n            \u003c/View\u003e\r\n\r\n            {activeTab === \u0027my_leaves\u0027 \u0026\u0026 leaveBalance \u0026\u0026 (\r\n                \u003cView style={styles.balanceCard}\u003e\r\n                    \u003cView style={styles.balanceItem}\u003e\r\n                        \u003cText style={styles.balanceLabel}\u003eTotal\u003c/Text\u003e\r\n                        \u003cText style={styles.balanceValue}\u003e{leaveBalance.total}\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                    \u003cView style={styles.balanceDivider} /\u003e\r\n                    \u003cView style={styles.balanceItem}\u003e\r\n                        \u003cText style={styles.balanceLabel}\u003eUsed\u003c/Text\u003e\r\n                        \u003cText style={styles.balanceValue}\u003e{leaveBalance.used}\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                    \u003cView style={styles.balanceDivider} /\u003e\r\n                    \u003cView style={styles.balanceItem}\u003e\r\n                        \u003cText style={styles.balanceLabel}\u003eRemaining\u003c/Text\u003e\r\n                        \u003cText style={[styles.balanceValue, { color: \u0027#4CAF50\u0027 }]}\u003e{leaveBalance.remaining}\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            )}\r\n\r\n            {loading ? (\r\n                \u003cActivityIndicator size=\"large\" color=\"#2F6CD4\" style={styles.loader} /\u003e\r\n            ) : (\r\n                \u003cFlatList\r\n                    data={activeTab === \u0027requests\u0027 ? requests : myLeaves}\r\n                    renderItem={activeTab === \u0027requests\u0027 ? renderRequestItem : renderMyLeaveItem}\r\n                    keyExtractor={(item) =\u003e item._id}\r\n                    contentContainerStyle={styles.listContent}\r\n                    refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} /\u003e}\r\n                    ListEmptyComponent={\u003cText style={styles.emptyText}\u003eNo records found.\u003c/Text\u003e}\r\n                /\u003e\r\n            )}\r\n\r\n            {activeTab === \u0027my_leaves\u0027 \u0026\u0026 (\r\n                \u003cTouchableOpacity style={styles.fab} onPress={() =\u003e setApplyModalVisible(true)}\u003e\r\n                    \u003cIonicons name=\"add\" size={24} color=\"#fff\" /\u003e\r\n                    \u003cText style={styles.fabText}\u003eApply Leave\u003c/Text\u003e\r\n                \u003c/TouchableOpacity\u003e\r\n            )}\r\n\r\n            {/* Action Modal */}\r\n            \u003cModal\r\n                visible={actionModalVisible}\r\n                animationType=\"fade\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e setActionModalVisible(false)}\r\n            \u003e\r\n                \u003cView style={styles.modalContainer}\u003e\r\n                    \u003cView style={styles.modalContent}\u003e\r\n                        \u003cText style={styles.modalTitle}\u003e\r\n                            {actionType === \u0027approved\u0027 ? \u0027Approve Leave\u0027 : \u0027Reject Leave\u0027}\r\n                        \u003c/Text\u003e\r\n\r\n                        {actionType === \u0027rejected\u0027 \u0026\u0026 (\r\n                            \u003c\u003e\r\n                                \u003cText style={styles.label}\u003eRejection Reason *\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={styles.input}\r\n                                    placeholder=\"e.g., Exam Period, Staff Shortage\"\r\n                                    value={rejectionReason}\r\n                                    onChangeText={setRejectionReason}\r\n                                /\u003e\r\n                                \u003cText style={styles.label}\u003eComments *\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={[styles.input, styles.textArea]}\r\n                                    placeholder=\"Add detailed comments...\"\r\n                                    value={rejectionComments}\r\n                                    onChangeText={setRejectionComments}\r\n                                    multiline\r\n                                    numberOfLines={3}\r\n                                /\u003e\r\n                            \u003c/\u003e\r\n                        )}\r\n\r\n                        {actionType === \u0027approved\u0027 \u0026\u0026 (\r\n                            \u003c\u003e\r\n                                \u003cText style={styles.label}\u003eNote (Optional)\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={[styles.input, styles.textArea]}\r\n                                    placeholder=\"Add a note...\"\r\n                                    value={actionReason}\r\n                                    onChangeText={setActionReason}\r\n                                    multiline\r\n                                    numberOfLines={3}\r\n                                /\u003e\r\n                            \u003c/\u003e\r\n                        )}\r\n\r\n                        \u003cView style={styles.modalButtons}\u003e\r\n                            \u003cTouchableOpacity\r\n                                style={[styles.button, styles.cancelButton]}\r\n                                onPress={() =\u003e setActionModalVisible(false)}\r\n                            \u003e\r\n                                \u003cText style={styles.cancelButtonText}\u003eCancel\u003c/Text\u003e\r\n                            \u003c/TouchableOpacity\u003e\r\n                            \u003cTouchableOpacity\r\n                                style={[styles.button, actionType === \u0027approved\u0027 ? styles.approveButton : styles.rejectButton]}\r\n                                onPress={handleAction}\r\n                                disabled={actionMutation.isPending}\r\n                            \u003e\r\n                                {actionMutation.isPending ? (\r\n                                    \u003cActivityIndicator color=\"#fff\" size=\"small\" /\u003e\r\n                                ) : (\r\n                                    \u003cText style={styles.submitButtonText}\u003e\r\n                                        {actionType === \u0027approved\u0027 ? \u0027Approve\u0027 : \u0027Reject\u0027}\r\n                                    \u003c/Text\u003e\r\n                                )}\r\n                            \u003c/TouchableOpacity\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n\r\n            {/* Apply Leave Modal */}\r\n            \u003cModal\r\n                visible={applyModalVisible}\r\n                animationType=\"slide\"\r\n                transparent={true}\r\n                onRequestClose={() =\u003e setApplyModalVisible(false)}\r\n            \u003e\r\n                \u003cView style={styles.modalContainer}\u003e\r\n                    \u003cView style={styles.modalContent}\u003e\r\n                        \u003cView style={styles.modalHeader}\u003e\r\n                            \u003cText style={styles.modalTitle}\u003eApply for Leave\u003c/Text\u003e\r\n                            \u003cTouchableOpacity onPress={() =\u003e setApplyModalVisible(false)}\u003e\r\n                                \u003cIonicons name=\"close\" size={24} color=\"#333\" /\u003e\r\n                            \u003c/TouchableOpacity\u003e\r\n                        \u003c/View\u003e\r\n\r\n                        \u003cScrollView\u003e\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eLeave Type\u003c/Text\u003e\r\n                                \u003cView style={styles.row}\u003e\r\n                                    \u003cText style={styles.valueText}\u003e{isHalfDay ? \u0027Half Day\u0027 : \u0027Full Day\u0027}\u003c/Text\u003e\r\n                                    \u003cSwitch\r\n                                        value={isHalfDay}\r\n                                        onValueChange={setIsHalfDay}\r\n                                        trackColor={{ false: \"#767577\", true: \"#81b0ff\" }}\r\n                                        thumbColor={isHalfDay ? \"#2F6CD4\" : \"#f4f3f4\"}\r\n                                    /\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {isHalfDay \u0026\u0026 (\r\n                                \u003cView style={styles.inputGroup}\u003e\r\n                                    \u003cText style={styles.label}\u003eSlot\u003c/Text\u003e\r\n                                    \u003cView style={styles.slotContainer}\u003e\r\n                                        \u003cTouchableOpacity\r\n                                            style={[styles.slotButton, halfDaySlot === \u0027morning\u0027 \u0026\u0026 styles.activeSlot]}\r\n                                            onPress={() =\u003e setHalfDaySlot(\u0027morning\u0027)}\r\n                                        \u003e\r\n                                            \u003cText style={[styles.slotText, halfDaySlot === \u0027morning\u0027 \u0026\u0026 styles.activeSlotText]}\u003eMorning\u003c/Text\u003e\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                        \u003cTouchableOpacity\r\n                                            style={[styles.slotButton, halfDaySlot === \u0027afternoon\u0027 \u0026\u0026 styles.activeSlot]}\r\n                                            onPress={() =\u003e setHalfDaySlot(\u0027afternoon\u0027)}\r\n                                        \u003e\r\n                                            \u003cText style={[styles.slotText, halfDaySlot === \u0027afternoon\u0027 \u0026\u0026 styles.activeSlotText]}\u003eAfternoon\u003c/Text\u003e\r\n                                        \u003c/TouchableOpacity\u003e\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                            )}\r\n\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eStart Date\u003c/Text\u003e\r\n                                \u003cTouchableOpacity\r\n                                    style={styles.dateButton}\r\n                                    onPress={() =\u003e setShowStartPicker(true)}\r\n                                \u003e\r\n                                    \u003cText style={styles.dateText}\u003e{formatDate(startDate.toISOString())}\u003c/Text\u003e\r\n                                    \u003cIonicons name=\"calendar-outline\" size={20} color=\"#666\" /\u003e\r\n                                \u003c/TouchableOpacity\u003e\r\n                                {showStartPicker \u0026\u0026 (\r\n                                    \u003cDateTimePicker\r\n                                        value={startDate}\r\n                                        mode=\"date\"\r\n                                        display=\"default\"\r\n                                        minimumDate={new Date()}\r\n                                        onChange={(event, selectedDate) =\u003e {\r\n                                            setShowStartPicker(false);\r\n                                            if (selectedDate) {\r\n                                                setStartDate(selectedDate);\r\n                                                if (selectedDate \u003e endDate) setEndDate(selectedDate);\r\n                                            }\r\n                                        }}\r\n                                    /\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            {!isHalfDay \u0026\u0026 (\r\n                                \u003cView style={styles.inputGroup}\u003e\r\n                                    \u003cText style={styles.label}\u003eEnd Date\u003c/Text\u003e\r\n                                    \u003cTouchableOpacity\r\n                                        style={styles.dateButton}\r\n                                        onPress={() =\u003e setShowEndPicker(true)}\r\n                                    \u003e\r\n                                        \u003cText style={styles.dateText}\u003e{formatDate(endDate.toISOString())}\u003c/Text\u003e\r\n                                        \u003cIonicons name=\"calendar-outline\" size={20} color=\"#666\" /\u003e\r\n                                    \u003c/TouchableOpacity\u003e\r\n                                    {showEndPicker \u0026\u0026 (\r\n                                        \u003cDateTimePicker\r\n                                            value={endDate}\r\n                                            mode=\"date\"\r\n                                            display=\"default\"\r\n                                            minimumDate={startDate}\r\n                                            onChange={(event, selectedDate) =\u003e {\r\n                                                setShowEndPicker(false);\r\n                                                if (selectedDate) setEndDate(selectedDate);\r\n                                            }}\r\n                                        /\u003e\r\n                                    )}\r\n                                \u003c/View\u003e\r\n                            )}\r\n\r\n                            \u003cView style={styles.inputGroup}\u003e\r\n                                \u003cText style={styles.label}\u003eReason\u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    style={[styles.input, styles.textArea]}\r\n                                    placeholder=\"Enter reason for leave...\"\r\n                                    value={reason}\r\n                                    onChangeText={setReason}\r\n                                    multiline\r\n                                    numberOfLines={4}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cTouchableOpacity\r\n                                style={styles.submitButton}\r\n                                onPress={handleApplyLeave}\r\n                                disabled={applyLeaveMutation.isPending}\r\n                            \u003e\r\n                                {applyLeaveMutation.isPending ? (\r\n                                    \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                                ) : (\r\n                                    \u003cText style={styles.submitButtonText}\u003eSubmit Application\u003c/Text\u003e\r\n                                )}\r\n                            \u003c/TouchableOpacity\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { flex: 1, backgroundColor: \u0027#f5f5f5\u0027 },\r\n    header: { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, justifyContent: \u0027space-between\u0027, padding: 16, backgroundColor: \u0027#fff\u0027, elevation: 2 },\r\n    headerTitle: { fontSize: 18, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    backButton: { padding: 4 },\r\n    tabContainer: { flexDirection: \u0027row\u0027, backgroundColor: \u0027#fff\u0027, paddingHorizontal: 16, paddingBottom: 12, borderBottomWidth: 1, borderBottomColor: \u0027#eee\u0027 },\r\n    tab: { flex: 1, paddingVertical: 10, alignItems: \u0027center\u0027, borderBottomWidth: 2, borderBottomColor: \u0027transparent\u0027 },\r\n    activeTab: { borderBottomColor: \u0027#2F6CD4\u0027 },\r\n    tabText: { fontSize: 16, color: \u0027#666\u0027, fontWeight: \u0027500\u0027 },\r\n    activeTabText: { color: \u0027#2F6CD4\u0027, fontWeight: \u0027bold\u0027 },\r\n    loader: { marginTop: 20 },\r\n    listContent: { padding: 16, paddingBottom: 80 },\r\n    card: { backgroundColor: \u0027#fff\u0027, borderRadius: 12, padding: 16, marginBottom: 12, elevation: 2 },\r\n    cardHeader: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027flex-start\u0027, marginBottom: 8 },\r\n    studentName: { fontSize: 16, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    classInfo: { fontSize: 14, color: \u0027#666\u0027 },\r\n    dateContainer: { alignItems: \u0027flex-end\u0027 },\r\n    dateText: { fontSize: 14, color: \u0027#333\u0027, fontWeight: \u0027500\u0027 },\r\n    leaveTypeBadge: { fontSize: 12, color: \u0027#666\u0027, marginTop: 2, fontStyle: \u0027italic\u0027 },\r\n    statusBadge: { paddingHorizontal: 8, paddingVertical: 4, borderRadius: 12 },\r\n    statusText: { color: \u0027#fff\u0027, fontSize: 12, fontWeight: \u0027bold\u0027 },\r\n    reasonLabel: { fontSize: 14, color: \u0027#666\u0027, marginTop: 8, marginBottom: 2 },\r\n    reasonText: { fontSize: 14, color: \u0027#333\u0027, marginBottom: 12 },\r\n    actionButtons: { flexDirection: \u0027row\u0027, justifyContent: \u0027flex-end\u0027, marginTop: 8, borderTopWidth: 1, borderTopColor: \u0027#eee\u0027, paddingTop: 12 },\r\n    actionButton: { paddingHorizontal: 16, paddingVertical: 8, borderRadius: 20, marginLeft: 12 },\r\n    approveButton: { backgroundColor: \u0027#4CAF50\u0027 },\r\n    rejectButton: { backgroundColor: \u0027#F44336\u0027 },\r\n    actionButtonText: { color: \u0027#fff\u0027, fontWeight: \u0027600\u0027, fontSize: 14 },\r\n    emptyText: { textAlign: \u0027center\u0027, marginTop: 40, color: \u0027#666\u0027, fontSize: 16 },\r\n    fab: { position: \u0027absolute\u0027, bottom: 100, right: 20, backgroundColor: \u0027#2F6CD4\u0027, flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, paddingVertical: 12, paddingHorizontal: 20, borderRadius: 30, elevation: 4 },\r\n    fabText: { color: \u0027#fff\u0027, fontWeight: \u0027bold\u0027, marginLeft: 8 },\r\n    balanceCard: { flexDirection: \u0027row\u0027, backgroundColor: \u0027#fff\u0027, margin: 16, marginBottom: 0, padding: 16, borderRadius: 12, elevation: 2, justifyContent: \u0027space-around\u0027 },\r\n    balanceItem: { alignItems: \u0027center\u0027 },\r\n    balanceLabel: { fontSize: 12, color: \u0027#666\u0027, marginBottom: 4 },\r\n    balanceValue: { fontSize: 20, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027 },\r\n    balanceDivider: { width: 1, backgroundColor: \u0027#eee\u0027 },\r\n    modalContainer: { flex: 1, backgroundColor: \u0027rgba(0,0,0,0.5)\u0027, justifyContent: \u0027center\u0027, padding: 20 },\r\n    modalContent: { backgroundColor: \u0027#fff\u0027, borderRadius: 16, padding: 20, maxHeight: \u002790%\u0027 },\r\n    modalHeader: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027center\u0027, marginBottom: 20 },\r\n    modalTitle: { fontSize: 20, fontWeight: \u0027bold\u0027, color: \u0027#333\u0027, marginBottom: 10 },\r\n    label: { fontSize: 14, color: \u0027#666\u0027, marginBottom: 6, fontWeight: \u0027500\u0027, marginTop: 10 },\r\n    input: { backgroundColor: \u0027#f9f9f9\u0027, borderWidth: 1, borderColor: \u0027#ddd\u0027, borderRadius: 8, padding: 12, fontSize: 16 },\r\n    textArea: { height: 80, textAlignVertical: \u0027top\u0027 },\r\n    modalButtons: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, marginTop: 20 },\r\n    button: { flex: 1, padding: 14, borderRadius: 8, alignItems: \u0027center\u0027 },\r\n    cancelButton: { backgroundColor: \u0027#f5f5f5\u0027, marginRight: 10 },\r\n    cancelButtonText: { color: \u0027#666\u0027, fontWeight: \u0027600\u0027, fontSize: 16 },\r\n    submitButtonText: { color: \u0027#fff\u0027, fontWeight: \u0027600\u0027, fontSize: 16 },\r\n    inputGroup: { marginBottom: 20 },\r\n    row: { flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027, justifyContent: \u0027space-between\u0027, backgroundColor: \u0027#f9f9f9\u0027, padding: 12, borderRadius: 8, borderWidth: 1, borderColor: \u0027#ddd\u0027 },\r\n    valueText: { fontSize: 16, color: \u0027#333\u0027 },\r\n    slotContainer: { flexDirection: \u0027row\u0027, gap: 12 },\r\n    slotButton: { flex: 1, padding: 12, borderRadius: 8, borderWidth: 1, borderColor: \u0027#ddd\u0027, alignItems: \u0027center\u0027, backgroundColor: \u0027#f9f9f9\u0027 },\r\n    activeSlot: { borderColor: \u0027#2F6CD4\u0027, backgroundColor: \u0027#EDE7F6\u0027 },\r\n    slotText: { color: \u0027#666\u0027, fontWeight: \u0027500\u0027 },\r\n    activeSlotText: { color: \u0027#2F6CD4\u0027, fontWeight: \u0027bold\u0027 },\r\n    dateButton: { flexDirection: \u0027row\u0027, justifyContent: \u0027space-between\u0027, alignItems: \u0027center\u0027, backgroundColor: \u0027#f9f9f9\u0027, borderWidth: 1, borderColor: \u0027#ddd\u0027, borderRadius: 8, padding: 12 },\r\n    dateText: { fontSize: 16, color: \u0027#333\u0027 },\r\n    submitButton: { backgroundColor: \u0027#2F6CD4\u0027, padding: 16, borderRadius: 12, alignItems: \u0027center\u0027, marginTop: 10, marginBottom: 20 },\r\n    rejectionBox: { marginTop: 12, padding: 10, backgroundColor: \u0027#FFEBEE\u0027, borderRadius: 8, borderLeftWidth: 3, borderLeftColor: \u0027#F44336\u0027 },\r\n    rejectionTitle: { fontSize: 12, fontWeight: \u0027bold\u0027, color: \u0027#D32F2F\u0027, marginBottom: 4 },\r\n    rejectionText: { fontSize: 12, color: \u0027#D32F2F\u0027, marginBottom: 2 },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\marks-entry.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027MaterialIcons\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  13,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  13,
                                           "endColumn":  23
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  25,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  25,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    TextInput,\r\n    TouchableOpacity,\r\n    ActivityIndicator,\r\n    StyleSheet,\r\n    KeyboardAvoidingView,\r\n    Platform\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useLocalSearchParams, useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport { useApiQuery, useApiMutation } from \"../../hooks/useApi\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport AppHeader from \"../../components/Header\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\n\r\nexport default function MarksEntryScreen() {\r\n    const router = useRouter();\r\n    const params = useLocalSearchParams();\r\n    const { examId, examName, className, subjectName } = params;\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [marksData, setMarksData] = useState({});\r\n    const [saving, setSaving] = useState(false);\r\n\r\n    // Fetch Exam Details (to get total marks)\r\n    const { data: examDetails } = useApiQuery(\r\n        [\u0027examDetails\u0027, examId],\r\n        `${apiConfig.baseUrl}/exams/${examId}`,\r\n        { enabled: !!examId }\r\n    );\r\n\r\n    // Fetch Students in Class\r\n    // We need to fetch students of the class associated with the exam\r\n    // Assuming examDetails has class info or we use the classId from params if we passed it (we didn\u0027t pass classId explicitly but we can get it from examDetails)\r\n    const classId = examDetails?.class?._id || examDetails?.class;\r\n\r\n    const { data: students, isLoading: loadingStudents } = useApiQuery(\r\n        [\u0027classStudents\u0027, classId],\r\n        `${apiConfig.baseUrl}/classes/${classId}/students`,\r\n        { enabled: !!classId }\r\n    );\r\n\r\n    // Fetch Existing Marks\r\n    const { data: existingMarks, isLoading: loadingMarks } = useApiQuery(\r\n        [\u0027examMarks\u0027, examId],\r\n        `${apiConfig.baseUrl}/marks/exam/${examId}`,\r\n        { enabled: !!examId }\r\n    );\r\n\r\n    // Initialize marks data when students or existing marks load\r\n    useEffect(() =\u003e {\r\n        if (students \u0026\u0026 existingMarks) {\r\n            const initialData = {};\r\n            students.forEach(student =\u003e {\r\n                const markEntry = existingMarks.find(m =\u003e m.student._id === student._id || m.student === student._id);\r\n                initialData[student._id] = {\r\n                    marksObtained: markEntry ? String(markEntry.marksObtained) : \"\",\r\n                    remarks: markEntry ? markEntry.remarks : \"\"\r\n                };\r\n            });\r\n            setMarksData(initialData);\r\n        } else if (students) {\r\n            const initialData = {};\r\n            students.forEach(student =\u003e {\r\n                initialData[student._id] = {\r\n                    marksObtained: \"\",\r\n                    remarks: \"\"\r\n                };\r\n            });\r\n            setMarksData(initialData);\r\n        }\r\n    }, [students, existingMarks]);\r\n\r\n    const bulkMarksMutation = useApiMutation(`${apiConfig.baseUrl}/marks/bulk`, \u0027POST\u0027);\r\n\r\n    const handleMarksChange = (studentId, value) =\u003e {\r\n        // Validate input (allow empty or numbers)\r\n        if (value === \"\" || /^\\d*\\.?\\d*$/.test(value)) {\r\n            setMarksData(prev =\u003e ({\r\n                ...prev,\r\n                [studentId]: { ...prev[studentId], marksObtained: value }\r\n            }));\r\n        }\r\n    };\r\n\r\n    const handleSave = async () =\u003e {\r\n        setSaving(true);\r\n        try {\r\n            const payload = {\r\n                examId,\r\n                marksData: Object.entries(marksData)\r\n                    .filter(([_, data]) =\u003e data.marksObtained !== \"\") // Only send entries with marks\r\n                    .map(([studentId, data]) =\u003e ({\r\n                        studentId,\r\n                        marksObtained: parseFloat(data.marksObtained),\r\n                        remarks: data.remarks\r\n                    }))\r\n            };\r\n\r\n            await bulkMarksMutation.mutateAsync(payload);\r\n            showToast(\"Marks saved successfully\", \"success\");\r\n            router.back();\r\n        } catch (error) {\r\n            showToast(error.message || \"Failed to save marks\", \"error\");\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    const totalMarks = examDetails?.totalMarks || 0;\r\n\r\n    if (loadingStudents || loadingMarks) {\r\n        return (\r\n            \u003cView style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", backgroundColor: colors.background }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cAppHeader\r\n                title={`${examName} Marks`}\r\n                subtitle={`${className} - ${subjectName} (Max: ${totalMarks})`}\r\n            /\u003e\r\n\r\n            \u003cKeyboardAvoidingView\r\n                behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n                style={{ flex: 1 }}\r\n            \u003e\r\n                \u003cScrollView contentContainerStyle={{ padding: 16, paddingBottom: 100 }}\u003e\r\n                    \u003cView style={localStyles.headerRow}\u003e\r\n                        \u003cText style={[localStyles.headerText, { color: colors.textSecondary, flex: 2 }]}\u003eStudent\u003c/Text\u003e\r\n                        \u003cText style={[localStyles.headerText, { color: colors.textSecondary, flex: 1, textAlign: \"center\" }]}\u003eMarks\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {students?.map((student) =\u003e (\r\n                        \u003cView\r\n                            key={student._id}\r\n                            style={[localStyles.row, { backgroundColor: colors.cardBackground, borderColor: colors.borderColor }]}\r\n                        \u003e\r\n                            \u003cView style={{ flex: 2 }}\u003e\r\n                                \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Medium\", color: colors.textPrimary }}\u003e\r\n                                    {student.name}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                    Roll: {student.rollNumber || \"-\"}\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            \u003cView style={{ flex: 1, alignItems: \"center\" }}\u003e\r\n                                \u003cTextInput\r\n                                    style={[\r\n                                        localStyles.input,\r\n                                        {\r\n                                            color: colors.textPrimary,\r\n                                            borderColor: colors.borderColor,\r\n                                            backgroundColor: colors.background\r\n                                        }\r\n                                    ]}\r\n                                    keyboardType=\"numeric\"\r\n                                    maxLength={5}\r\n                                    value={marksData[student._id]?.marksObtained || \"\"}\r\n                                    onChangeText={(text) =\u003e handleMarksChange(student._id, text)}\r\n                                    placeholder=\"-\"\r\n                                    placeholderTextColor={colors.textSecondary}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    ))}\r\n                \u003c/ScrollView\u003e\r\n            \u003c/KeyboardAvoidingView\u003e\r\n\r\n            \u003cView style={[localStyles.footer, { backgroundColor: colors.cardBackground, borderTopColor: colors.borderColor }]}\u003e\r\n                \u003cTouchableOpacity\r\n                    style={[localStyles.saveButton, { backgroundColor: colors.primary, opacity: saving ? 0.7 : 1 }]}\r\n                    onPress={handleSave}\r\n                    disabled={saving}\r\n                \u003e\r\n                    {saving ? (\r\n                        \u003cActivityIndicator color=\"#fff\" /\u003e\r\n                    ) : (\r\n                        \u003cText style={localStyles.saveButtonText}\u003eSave Marks\u003c/Text\u003e\r\n                    )}\r\n                \u003c/TouchableOpacity\u003e\r\n            \u003c/View\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst localStyles = StyleSheet.create({\r\n    headerRow: {\r\n        flexDirection: \"row\",\r\n        paddingBottom: 8,\r\n        marginBottom: 8,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: \"#e0e0e0\"\r\n    },\r\n    headerText: {\r\n        fontSize: 12,\r\n        fontFamily: \"DMSans-Bold\",\r\n        textTransform: \"uppercase\"\r\n    },\r\n    row: {\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        padding: 12,\r\n        borderRadius: 12,\r\n        marginBottom: 8,\r\n        borderWidth: 1\r\n    },\r\n    input: {\r\n        width: 60,\r\n        height: 40,\r\n        borderWidth: 1,\r\n        borderRadius: 8,\r\n        textAlign: \"center\",\r\n        fontSize: 16,\r\n        fontFamily: \"DMSans-Bold\"\r\n    },\r\n    footer: {\r\n        position: \"absolute\",\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n        padding: 16,\r\n        borderTopWidth: 1,\r\n        elevation: 10\r\n    },\r\n    saveButton: {\r\n        paddingVertical: 14,\r\n        borderRadius: 12,\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n    },\r\n    saveButtonText: {\r\n        color: \"#fff\",\r\n        fontSize: 16,\r\n        fontFamily: \"DMSans-Bold\"\r\n    }\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\schedule.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  22,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  22,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  23,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  23,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  24,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  24,
                                           "endColumn":  22
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    RefreshControl,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter } from \"expo-router\";\r\nimport { useTheme } from \"../../theme\";\r\nimport apiConfig from \"../../config/apiConfig\";\r\nimport { useApiQuery } from \"../../hooks/useApi\";\r\nimport { useToast } from \"../../components/ToastProvider\";\r\nimport AppHeader from \"../../components/Header\";\r\n\r\nconst DAYS = [\u0027Monday\u0027, \u0027Tuesday\u0027, \u0027Wednesday\u0027, \u0027Thursday\u0027, \u0027Friday\u0027, \u0027Saturday\u0027];\r\n\r\nexport default function TeacherScheduleScreen() {\r\n    const router = useRouter();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n    const [selectedDay, setSelectedDay] = useState(\u0027Monday\u0027);\r\n    const [currentDay, setCurrentDay] = useState(\u0027\u0027);\r\n\r\n    useEffect(() =\u003e {\r\n        // Set current day\r\n        const days = [\u0027Sunday\u0027, \u0027Monday\u0027, \u0027Tuesday\u0027, \u0027Wednesday\u0027, \u0027Thursday\u0027, \u0027Friday\u0027, \u0027Saturday\u0027];\r\n        const today = days[new Date().getDay()];\r\n        if (DAYS.includes(today)) {\r\n            setSelectedDay(today);\r\n            setCurrentDay(today);\r\n        } else {\r\n            setSelectedDay(\u0027Monday\u0027);\r\n        }\r\n    }, []);\r\n\r\n    const { data: scheduleData, isLoading: loading, refetch } = useApiQuery(\r\n        [\u0027teacherSchedule\u0027],\r\n        `${apiConfig.baseUrl}/timetable/my-schedule`\r\n    );\r\n\r\n    // Process schedule data\r\n    const schedule = React.useMemo(() =\u003e {\r\n        if (!scheduleData) return {};\r\n\r\n        const scheduleMap = {};\r\n        DAYS.forEach(day =\u003e {\r\n            scheduleMap[day] = (scheduleData[day] || []).sort((a, b) =\u003e {\r\n                const timeA = a.startTime || \"\";\r\n                const timeB = b.startTime || \"\";\r\n                return timeA.localeCompare(timeB);\r\n            });\r\n        });\r\n        return scheduleMap;\r\n    }, [scheduleData]);\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader title=\"My Schedule\" subtitle=\"Teaching Timetable\" showBack /\u003e\r\n\r\n                    {/* Day Tabs */}\r\n                    \u003cView style={{ marginTop: 24 }}\u003e\r\n                        \u003cScrollView horizontal showsHorizontalScrollIndicator={false}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                                {DAYS.map((day) =\u003e (\r\n                                    \u003cPressable\r\n                                        key={day}\r\n                                        onPress={() =\u003e setSelectedDay(day)}\r\n                                        style={{\r\n                                            paddingHorizontal: 16,\r\n                                            paddingVertical: 8,\r\n                                            backgroundColor: selectedDay === day ? colors.primary : colors.cardBackground,\r\n                                            borderRadius: 12,\r\n                                            borderWidth: 1,\r\n                                            borderColor: selectedDay === day ? colors.primary : colors.textSecondary + \"20\"\r\n                                        }}\r\n                                    \u003e\r\n                                        \u003cText style={{\r\n                                            color: selectedDay === day ? \"#fff\" : colors.textPrimary,\r\n                                            fontFamily: selectedDay === day ? \"DMSans-Bold\" : \"DMSans-Medium\"\r\n                                        }}\u003e\r\n                                            {day.slice(0, 3)}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/Pressable\u003e\r\n                                ))}\r\n                            \u003c/View\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Schedule List */}\r\n                    \u003cView style={{ marginTop: 24 }}\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                {selectedDay}\r\n                            \u003c/Text\u003e\r\n                            {selectedDay === currentDay \u0026\u0026 (\r\n                                \u003cView style={{ backgroundColor: colors.success + \"20\", paddingHorizontal: 8, paddingVertical: 4, borderRadius: 4 }}\u003e\r\n                                    \u003cText style={{ fontSize: 12, color: colors.success, fontFamily: \"DMSans-Bold\" }}\u003eTODAY\u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            )}\r\n                        \u003c/View\u003e\r\n\r\n                        {(!schedule[selectedDay] || schedule[selectedDay].length === 0) ? (\r\n                            \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                                \u003cMaterialIcons name=\"free-breakfast\" size={48} color={colors.textSecondary} /\u003e\r\n                                \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16 }}\u003e\r\n                                    No classes scheduled\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        ) : (\r\n                            schedule[selectedDay].map((period, index) =\u003e (\r\n                                \u003cView\r\n                                    key={index}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 16,\r\n                                        padding: 16,\r\n                                        marginBottom: 12,\r\n                                        flexDirection: \"row\",\r\n                                        gap: 16,\r\n                                        shadowColor: \"#000\",\r\n                                        shadowOffset: { width: 0, height: 1 },\r\n                                        shadowOpacity: 0.05,\r\n                                        shadowRadius: 4,\r\n                                        elevation: 1,\r\n                                        borderLeftWidth: 4,\r\n                                        borderLeftColor: colors.secondary\r\n                                    }}\r\n                                \u003e\r\n                                    {/* Time Column */}\r\n                                    \u003cView style={{ alignItems: \"center\", justifyContent: \"center\", width: 60 }}\u003e\r\n                                        \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                            {period.startTime}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cView style={{ width: 1, height: 10, backgroundColor: colors.textSecondary + \"40\", marginVertical: 2 }} /\u003e\r\n                                        \u003cText style={{ fontSize: 12, color: colors.textSecondary }}\u003e\r\n                                            {period.endTime}\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n\r\n                                    {/* Divider */}\r\n                                    \u003cView style={{ width: 1, backgroundColor: colors.textSecondary + \"20\" }} /\u003e\r\n\r\n                                    {/* Details Column */}\r\n                                    \u003cView style={{ flex: 1, justifyContent: \"center\" }}\u003e\r\n                                        \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e\r\n                                            {period.className}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cText style={{ fontSize: 14, color: colors.primary, fontFamily: \"DMSans-Medium\", marginBottom: 4 }}\u003e\r\n                                            {period.subject?.name || \"Subject\"}\r\n                                        \u003c/Text\u003e\r\n\r\n                                        {period.roomNumber \u0026\u0026 (\r\n                                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 4 }}\u003e\r\n                                                \u003cMaterialIcons name=\"room\" size={14} color={colors.textSecondary} /\u003e\r\n                                                \u003cText style={{ fontSize: 13, color: colors.textSecondary }}\u003e\r\n                                                    Room {period.roomNumber}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n                                \u003c/View\u003e\r\n                            ))\r\n                        )}\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\subject\\create-exam.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useEffect\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  27,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  36
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  12,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  12,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  34,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  34,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    TextInput,\r\n    ActivityIndicator,\r\n    Modal,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\r\nimport { useTheme } from \"../../../theme\";\r\nimport apiConfig from \"../../../config/apiConfig\";\r\nimport { useToast } from \"../../../components/ToastProvider\";\r\nimport { useApiMutation, createApiMutationFn, useApiQuery } from \"../../../hooks/useApi\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport AppHeader from \"../../../components/Header\";\r\nimport DateTimePicker from \"@react-native-community/datetimepicker\";\r\n\r\nconst EXAM_TYPES = [\r\n    { type: \u0027FA1\u0027, label: \u0027Formative Assessment 1\u0027, color: \u0027#4CAF50\u0027, icon: \u0027assignment\u0027 },\r\n    { type: \u0027FA2\u0027, label: \u0027Formative Assessment 2\u0027, color: \u0027#2196F3\u0027, icon: \u0027assignment\u0027 },\r\n    { type: \u0027SA1\u0027, label: \u0027Summative Assessment 1\u0027, color: \u0027#FF9800\u0027, icon: \u0027assessment\u0027 },\r\n    { type: \u0027FA3\u0027, label: \u0027Formative Assessment 3\u0027, color: \u0027#9C27B0\u0027, icon: \u0027assignment\u0027 },\r\n    { type: \u0027FA4\u0027, label: \u0027Formative Assessment 4\u0027, color: \u0027#E91E63\u0027, icon: \u0027assignment\u0027 },\r\n    { type: \u0027SA2\u0027, label: \u0027Summative Assessment 2\u0027, color: \u0027#F44336\u0027, icon: \u0027assessment\u0027 },\r\n];\r\n\r\nexport default function InitializeExamScreen() {\r\n    const router = useRouter();\r\n    const params = useLocalSearchParams();\r\n    const { styles, colors } = useTheme();\r\n    const { showToast } = useToast();\r\n    const queryClient = useQueryClient();\r\n\r\n    const { subjectId, classId } = params;\r\n\r\n    const [showInitModal, setShowInitModal] = useState(false);\r\n    const [selectedType, setSelectedType] = useState(null);\r\n    const [totalMarks, setTotalMarks] = useState(\"\");\r\n    const [date, setDate] = useState(new Date());\r\n    const [showDatePicker, setShowDatePicker] = useState(false);\r\n    const [instructions, setInstructions] = useState(\"\");\r\n    const [duration, setDuration] = useState(\"\");\r\n\r\n    // Fetch exam status\r\n    const { data: examStatus, isLoading, refetch } = useApiQuery(\r\n        [\u0027examStatus\u0027, classId, subjectId],\r\n        `${apiConfig.baseUrl}/exams/standardized?classId=${classId}\u0026subjectId=${subjectId}`,\r\n        { enabled: !!classId \u0026\u0026 !!subjectId }\r\n    );\r\n\r\n    const createExamMutation = useApiMutation({\r\n        mutationFn: createApiMutationFn(`${apiConfig.baseUrl}/exams/standardized`, \u0027POST\u0027),\r\n        onSuccess: (exam) =\u003e {\r\n            showToast(`${selectedType} initialized successfully`, \"success\");\r\n            setShowInitModal(false);\r\n            resetForm();\r\n            refetch();\r\n            queryClient.invalidateQueries({ queryKey: [\u0027classExams\u0027, classId] });\r\n            // Navigate to marks entry screen\r\n            router.push({\r\n                pathname: \"/teacher/exam/enter-marks\",\r\n                params: { examId: exam._id }\r\n            });\r\n        },\r\n        onError: (error) =\u003e showToast(error.message || \"Failed to initialize exam\", \"error\")\r\n    });\r\n\r\n    const resetForm = () =\u003e {\r\n        setSelectedType(null);\r\n        setTotalMarks(\"\");\r\n        setDate(new Date());\r\n        setInstructions(\"\");\r\n        setDuration(\"\");\r\n    };\r\n\r\n    const handleInitializeExam = () =\u003e {\r\n        if (!totalMarks || isNaN(totalMarks) || parseFloat(totalMarks) \u003c= 0) {\r\n            showToast(\"Please enter valid total marks\", \"error\");\r\n            return;\r\n        }\r\n\r\n        createExamMutation.mutate({\r\n            type: selectedType,\r\n            classId,\r\n            subjectId,\r\n            totalMarks: parseFloat(totalMarks),\r\n            date: date.toISOString(),\r\n            instructions,\r\n            duration: duration ? parseInt(duration) : null\r\n        });\r\n    };\r\n\r\n    const openInitModal = (type) =\u003e {\r\n        setSelectedType(type);\r\n        setShowInitModal(true);\r\n    };\r\n\r\n    const onDateChange = (event, selectedDate) =\u003e {\r\n        setShowDatePicker(false);\r\n        if (selectedDate) {\r\n            setDate(selectedDate);\r\n        }\r\n    };\r\n\r\n    const getExamCardStatus = (type) =\u003e {\r\n        const status = examStatus?.find(e =\u003e e.type === type);\r\n        if (!status) return { initialized: false, marksEntered: false };\r\n        return {\r\n            initialized: status.exists,\r\n            marksEntered: status.marksEntered,\r\n            marksCount: status.marksCount || 0,\r\n            exam: status.exam\r\n        };\r\n    };\r\n\r\n    const handleExamCardPress = (type) =\u003e {\r\n        const status = getExamCardStatus(type);\r\n        if (status.initialized \u0026\u0026 status.exam) {\r\n            // Navigate to marks entry\r\n            router.push({\r\n                pathname: \"/teacher/exam/enter-marks\",\r\n                params: { examId: status.exam._id }\r\n            });\r\n        } else {\r\n            // Open initialization modal\r\n            openInitModal(type);\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \u0027center\u0027, alignItems: \u0027center\u0027 }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView contentContainerStyle={{ paddingBottom: 100 }}\u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title=\"Manage Assessments\"\r\n                        subtitle=\"Initialize and manage the 6 fixed assessments\"\r\n                        showBack\r\n                    /\u003e\r\n\r\n                    \u003cText style={{\r\n                        fontSize: 14,\r\n                        color: colors.textSecondary,\r\n                        marginTop: 20,\r\n                        marginBottom: 16,\r\n                        fontFamily: \"DMSans-Regular\"\r\n                    }}\u003e\r\n                        Tap on an assessment to initialize or enter marks\r\n                    \u003c/Text\u003e\r\n\r\n                    {/* Exam Cards */}\r\n                    \u003cView style={{ gap: 12 }}\u003e\r\n                        {EXAM_TYPES.map((examType) =\u003e {\r\n                            const status = getExamCardStatus(examType.type);\r\n                            return (\r\n                                \u003cPressable\r\n                                    key={examType.type}\r\n                                    onPress={() =\u003e handleExamCardPress(examType.type)}\r\n                                    style={({ pressed }) =\u003e ({\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 16,\r\n                                        padding: 18,\r\n                                        borderWidth: 2,\r\n                                        borderColor: status.initialized ? examType.color + \u002740\u0027 : colors.textSecondary + \u002720\u0027,\r\n                                        opacity: pressed ? 0.7 : 1,\r\n                                        elevation: status.initialized ? 3 : 1\r\n                                    })}\r\n                                \u003e\r\n                                    \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", justifyContent: \"space-between\" }}\u003e\r\n                                        \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", flex: 1 }}\u003e\r\n                                            \u003cView style={{\r\n                                                width: 48,\r\n                                                height: 48,\r\n                                                borderRadius: 12,\r\n                                                backgroundColor: examType.color + \u002720\u0027,\r\n                                                alignItems: \u0027center\u0027,\r\n                                                justifyContent: \u0027center\u0027,\r\n                                                marginRight: 12\r\n                                            }}\u003e\r\n                                                \u003cMaterialIcons name={examType.icon} size={24} color={examType.color} /\u003e\r\n                                            \u003c/View\u003e\r\n                                            \u003cView style={{ flex: 1 }}\u003e\r\n                                                \u003cText style={{\r\n                                                    fontSize: 18,\r\n                                                    fontFamily: \"DMSans-Bold\",\r\n                                                    color: colors.textPrimary\r\n                                                }}\u003e\r\n                                                    {examType.type}\r\n                                                \u003c/Text\u003e\r\n                                                \u003cText style={{\r\n                                                    fontSize: 13,\r\n                                                    color: colors.textSecondary,\r\n                                                    fontFamily: \"DMSans-Regular\"\r\n                                                }}\u003e\r\n                                                    {examType.label}\r\n                                                \u003c/Text\u003e\r\n                                                {status.initialized \u0026\u0026 (\r\n                                                    \u003cText style={{\r\n                                                        fontSize: 12,\r\n                                                        color: examType.color,\r\n                                                        fontFamily: \"DMSans-Medium\",\r\n                                                        marginTop: 4\r\n                                                    }}\u003e\r\n                                                        {status.marksEntered\r\n                                                            ? `âœ“ ${status.marksCount} marks entered`\r\n                                                            : \"Tap to enter marks\"}\r\n                                                    \u003c/Text\u003e\r\n                                                )}\r\n                                            \u003c/View\u003e\r\n                                        \u003c/View\u003e\r\n\r\n                                        {status.initialized ? (\r\n                                            \u003cMaterialIcons\r\n                                                name={status.marksEntered ? \"check-circle\" : \"edit\"}\r\n                                                size={28}\r\n                                                color={status.marksEntered ? colors.success : examType.color}\r\n                                            /\u003e\r\n                                        ) : (\r\n                                            \u003cMaterialIcons name=\"add-circle-outline\" size={28} color={colors.textSecondary} /\u003e\r\n                                        )}\r\n                                    \u003c/View\u003e\r\n                                \u003c/Pressable\u003e\r\n                            );\r\n                        })}\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Legend */}\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 12,\r\n                        padding: 16,\r\n                        marginTop: 24\r\n                    }}\u003e\r\n                        \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 12 }}\u003e\r\n                            Legend\r\n                        \u003c/Text\u003e\r\n                        \u003cView style={{ gap: 8 }}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\" }}\u003e\r\n                                \u003cMaterialIcons name=\"add-circle-outline\" size={20} color={colors.textSecondary} /\u003e\r\n                                \u003cText style={{ fontSize: 13, color: colors.textSecondary, marginLeft: 8, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Not initialized - Tap to set up\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\" }}\u003e\r\n                                \u003cMaterialIcons name=\"edit\" size={20} color={colors.primary} /\u003e\r\n                                \u003cText style={{ fontSize: 13, color: colors.textSecondary, marginLeft: 8, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Initialized - Tap to enter marks\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\" }}\u003e\r\n                                \u003cMaterialIcons name=\"check-circle\" size={20} color={colors.success} /\u003e\r\n                                \u003cText style={{ fontSize: 13, color: colors.textSecondary, marginLeft: 8, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Marks entered - Tap to edit\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n\r\n            {/* Initialize Exam Modal */}\r\n            \u003cModal\r\n                visible={showInitModal}\r\n                transparent={true}\r\n                animationType=\"slide\"\r\n                onRequestClose={() =\u003e {\r\n                    setShowInitModal(false);\r\n                    resetForm();\r\n                }}\r\n            \u003e\r\n                \u003cView style={{\r\n                    flex: 1,\r\n                    backgroundColor: \u0027rgba(0,0,0,0.5)\u0027,\r\n                    justifyContent: \u0027flex-end\u0027\r\n                }}\u003e\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.background,\r\n                        borderTopLeftRadius: 24,\r\n                        borderTopRightRadius: 24,\r\n                        padding: 24,\r\n                        maxHeight: \u002780%\u0027\r\n                    }}\u003e\r\n                        \u003cScrollView showsVerticalScrollIndicator={false}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 20 }}\u003e\r\n                                \u003cText style={{ fontSize: 20, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                    Initialize {selectedType}\r\n                                \u003c/Text\u003e\r\n                                \u003cPressable onPress={() =\u003e { setShowInitModal(false); resetForm(); }}\u003e\r\n                                    \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n                                \u003c/Pressable\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Total Marks */}\r\n                            \u003cView style={{ marginBottom: 16 }}\u003e\r\n                                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Medium\", color: colors.textSecondary, marginBottom: 8 }}\u003e\r\n                                    Total Marks *\r\n                                \u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    placeholder=\"100\"\r\n                                    placeholderTextColor={colors.textSecondary}\r\n                                    keyboardType=\"numeric\"\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        padding: 14,\r\n                                        borderRadius: 12,\r\n                                        color: colors.textPrimary,\r\n                                        fontSize: 16,\r\n                                        fontFamily: \"DMSans-Regular\",\r\n                                        borderWidth: 1,\r\n                                        borderColor: colors.textSecondary + \"20\"\r\n                                    }}\r\n                                    value={totalMarks}\r\n                                    onChangeText={setTotalMarks}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Date */}\r\n                            \u003cView style={{ marginBottom: 16 }}\u003e\r\n                                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Medium\", color: colors.textSecondary, marginBottom: 8 }}\u003e\r\n                                    Exam Date\r\n                                \u003c/Text\u003e\r\n                                \u003cPressable\r\n                                    onPress={() =\u003e setShowDatePicker(true)}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        padding: 14,\r\n                                        borderRadius: 12,\r\n                                        borderWidth: 1,\r\n                                        borderColor: colors.textSecondary + \"20\",\r\n                                        flexDirection: \"row\",\r\n                                        alignItems: \"center\",\r\n                                        justifyContent: \"space-between\"\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Regular\", color: colors.textPrimary }}\u003e\r\n                                        {date.toLocaleDateString(\u0027en-GB\u0027, { day: \u00272-digit\u0027, month: \u0027short\u0027, year: \u0027numeric\u0027 })}\r\n                                    \u003c/Text\u003e\r\n                                    \u003cMaterialIcons name=\"calendar-today\" size={20} color={colors.textSecondary} /\u003e\r\n                                \u003c/Pressable\u003e\r\n\r\n                                {showDatePicker \u0026\u0026 (\r\n                                    \u003cDateTimePicker\r\n                                        value={date}\r\n                                        mode=\"date\"\r\n                                        display=\"default\"\r\n                                        onChange={onDateChange}\r\n                                    /\u003e\r\n                                )}\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Duration */}\r\n                            \u003cView style={{ marginBottom: 16 }}\u003e\r\n                                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Medium\", color: colors.textSecondary, marginBottom: 8 }}\u003e\r\n                                    Duration (minutes)\r\n                                \u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    placeholder=\"90\"\r\n                                    placeholderTextColor={colors.textSecondary}\r\n                                    keyboardType=\"numeric\"\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        padding: 14,\r\n                                        borderRadius: 12,\r\n                                        color: colors.textPrimary,\r\n                                        fontSize: 16,\r\n                                        fontFamily: \"DMSans-Regular\",\r\n                                        borderWidth: 1,\r\n                                        borderColor: colors.textSecondary + \"20\"\r\n                                    }}\r\n                                    value={duration}\r\n                                    onChangeText={setDuration}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Instructions */}\r\n                            \u003cView style={{ marginBottom: 24 }}\u003e\r\n                                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Medium\", color: colors.textSecondary, marginBottom: 8 }}\u003e\r\n                                    Instructions (Optional)\r\n                                \u003c/Text\u003e\r\n                                \u003cTextInput\r\n                                    placeholder=\"Enter exam instructions...\"\r\n                                    placeholderTextColor={colors.textSecondary}\r\n                                    multiline\r\n                                    numberOfLines={3}\r\n                                    textAlignVertical=\"top\"\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        padding: 14,\r\n                                        borderRadius: 12,\r\n                                        color: colors.textPrimary,\r\n                                        fontSize: 16,\r\n                                        fontFamily: \"DMSans-Regular\",\r\n                                        borderWidth: 1,\r\n                                        borderColor: colors.textSecondary + \"20\",\r\n                                        minHeight: 80\r\n                                    }}\r\n                                    value={instructions}\r\n                                    onChangeText={setInstructions}\r\n                                /\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Initialize Button */}\r\n                            \u003cPressable\r\n                                onPress={handleInitializeExam}\r\n                                disabled={createExamMutation.isPending}\r\n                                style={({ pressed }) =\u003e ({\r\n                                    backgroundColor: colors.primary,\r\n                                    borderRadius: 12,\r\n                                    padding: 16,\r\n                                    flexDirection: \"row\",\r\n                                    alignItems: \"center\",\r\n                                    justifyContent: \"center\",\r\n                                    gap: 8,\r\n                                    opacity: pressed || createExamMutation.isPending ? 0.7 : 1\r\n                                })}\r\n                            \u003e\r\n                                {createExamMutation.isPending ? (\r\n                                    \u003cActivityIndicator size=\"small\" color=\"#fff\" /\u003e\r\n                                ) : (\r\n                                    \u003c\u003e\r\n                                        \u003cMaterialIcons name=\"check-circle\" size={24} color=\"#fff\" /\u003e\r\n                                        \u003cText style={{ fontSize: 17, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                            Initialize \u0026 Enter Marks\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/\u003e\r\n                                )}\r\n                            \u003c/Pressable\u003e\r\n                        \u003c/ScrollView\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/Modal\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\app\\teacher\\subject\\performance.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027BarChart\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  16,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  16,
                                           "endColumn":  18
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027width\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  18,
                                           "column":  9,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  18,
                                           "endColumn":  14
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027router\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  30,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  30,
                                           "endColumn":  17
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    RefreshControl,\r\n    ActivityIndicator,\r\n    Dimensions,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\r\nimport { useTheme } from \"../../../theme\";\r\nimport { useApiQuery } from \"../../../hooks/useApi\";\r\nimport AppHeader from \"../../../components/Header\";\r\nimport apiConfig from \"../../../config/apiConfig\";\r\nimport { BarChart } from \"react-native-chart-kit\";\r\n\r\nconst { width } = Dimensions.get(\u0027window\u0027);\r\n\r\nconst EXAM_COLORS = {\r\n    \u0027FA1\u0027: \u0027#4CAF50\u0027,\r\n    \u0027FA2\u0027: \u0027#2196F3\u0027,\r\n    \u0027SA1\u0027: \u0027#FF9800\u0027,\r\n    \u0027FA3\u0027: \u0027#9C27B0\u0027,\r\n    \u0027FA4\u0027: \u0027#E91E63\u0027,\r\n    \u0027SA2\u0027: \u0027#F44336\u0027\r\n};\r\n\r\nexport default function SubjectPerformanceScreen() {\r\n    const router = useRouter();\r\n    const params = useLocalSearchParams();\r\n    const { colors } = useTheme();\r\n    const { subjectId } = params;\r\n\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    // Fetch subject performance data\r\n    const { data: performanceData, isLoading, refetch } = useApiQuery(\r\n        [\u0027subjectPerformance\u0027, subjectId],\r\n        `${apiConfig.baseUrl}/exams/performance/subject/${subjectId}`,\r\n        { enabled: !!subjectId }\r\n    );\r\n\r\n    const onRefresh = async () =\u003e {\r\n        setRefreshing(true);\r\n        await refetch();\r\n        setRefreshing(false);\r\n    };\r\n\r\n    const getGradeColor = (percentage) =\u003e {\r\n        if (percentage \u003e= 90) return colors.success;\r\n        if (percentage \u003e= 75) return \u0027#2196F3\u0027;\r\n        if (percentage \u003e= 60) return \u0027#FF9800\u0027;\r\n        if (percentage \u003e= 40) return \u0027#FF5722\u0027;\r\n        return colors.error;\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \u0027center\u0027, alignItems: \u0027center\u0027 }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    if (!performanceData) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \u0027center\u0027, alignItems: \u0027center\u0027, padding: 20 }}\u003e\r\n                \u003cMaterialIcons name=\"info-outline\" size={64} color={colors.textSecondary} /\u003e\r\n                \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, textAlign: \u0027center\u0027 }}\u003e\r\n                    No performance data available\r\n                \u003c/Text\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    const { performance = [] } = performanceData;\r\n\r\n    // Calculate overall stats\r\n    const totalExamsWithData = performance.filter(p =\u003e p.overallAvgPercentage \u003e 0).length;\r\n    const overallAvg = totalExamsWithData \u003e 0\r\n        ? (performance.reduce((sum, p) =\u003e sum + p.overallAvgPercentage, 0) / totalExamsWithData).toFixed(1)\r\n        : 0;\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cAppHeader\r\n                        title=\"Subject Performance\"\r\n                        subtitle=\"Exam-wise analytics across all classes\"\r\n                        showBack\r\n                    /\u003e\r\n\r\n                    {/* Overall Subject Stats */}\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.primary,\r\n                        borderRadius: 20,\r\n                        padding: 24,\r\n                        marginTop: 20,\r\n                        elevation: 4\r\n                    }}\u003e\r\n                        \u003cText style={{ fontSize: 16, color: \"#fff\", opacity: 0.9, fontFamily: \"DMSans-Medium\", textAlign: \"center\" }}\u003e\r\n                            Overall Subject Average\r\n                        \u003c/Text\u003e\r\n                        \u003cText style={{ fontSize: 56, fontFamily: \"DMSans-Bold\", color: \"#fff\", marginTop: 8, textAlign: \"center\" }}\u003e\r\n                            {overallAvg}%\r\n                        \u003c/Text\u003e\r\n                        \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-Regular\", color: \"#fff\", marginTop: 4, textAlign: \"center\", opacity: 0.8 }}\u003e\r\n                            Across {totalExamsWithData} completed assessments\r\n                        \u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Exam-wise Performance */}\r\n                    \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginTop: 28, marginBottom: 12 }}\u003e\r\n                        Assessment Performance\r\n                    \u003c/Text\u003e\r\n\r\n                    {performance.map((exam) =\u003e (\r\n                        \u003cView\r\n                            key={exam.examType}\r\n                            style={{\r\n                                backgroundColor: colors.cardBackground,\r\n                                borderRadius: 16,\r\n                                padding: 18,\r\n                                marginBottom: 16,\r\n                                elevation: 2\r\n                            }}\r\n                        \u003e\r\n                            {/* Exam Header */}\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 16 }}\u003e\r\n                                \u003cView style={{\r\n                                    width: 48,\r\n                                    height: 48,\r\n                                    borderRadius: 12,\r\n                                    backgroundColor: EXAM_COLORS[exam.examType] + \u002720\u0027,\r\n                                    alignItems: \u0027center\u0027,\r\n                                    justifyContent: \u0027center\u0027,\r\n                                    marginRight: 12\r\n                                }}\u003e\r\n                                    \u003cText style={{ fontSize: 16, fontFamily: \"DMSans-Bold\", color: EXAM_COLORS[exam.examType] }}\u003e\r\n                                        {exam.examType}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                                \u003cView style={{ flex: 1 }}\u003e\r\n                                    \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary }}\u003e\r\n                                        {exam.examType === \u0027FA1\u0027 \u0026\u0026 \u0027Formative Assessment 1\u0027}\r\n                                        {exam.examType === \u0027FA2\u0027 \u0026\u0026 \u0027Formative Assessment 2\u0027}\r\n                                        {exam.examType === \u0027SA1\u0027 \u0026\u0026 \u0027Summative Assessment 1\u0027}\r\n                                        {exam.examType === \u0027FA3\u0027 \u0026\u0026 \u0027Formative Assessment 3\u0027}\r\n                                        {exam.examType === \u0027FA4\u0027 \u0026\u0026 \u0027Formative Assessment 4\u0027}\r\n                                        {exam.examType === \u0027SA2\u0027 \u0026\u0026 \u0027Summative Assessment 2\u0027}\r\n                                    \u003c/Text\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 20,\r\n                                        fontFamily: \"DMSans-Bold\",\r\n                                        color: getGradeColor(exam.overallAvgPercentage),\r\n                                        marginTop: 4\r\n                                    }}\u003e\r\n                                        {exam.overallAvgPercentage.toFixed(1)}% avg\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            \u003c/View\u003e\r\n\r\n                            {/* Class-wise Breakdown */}\r\n                            {exam.classwiseData \u0026\u0026 exam.classwiseData.length \u003e 0 \u0026\u0026 (\r\n                                \u003c\u003e\r\n                                    \u003cView style={{ height: 1, backgroundColor: colors.textSecondary + \u002720\u0027, marginBottom: 12 }} /\u003e\r\n                                    \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary, marginBottom: 12 }}\u003e\r\n                                        Class-wise Performance\r\n                                    \u003c/Text\u003e\r\n                                    {exam.classwiseData.map((classData, idx) =\u003e (\r\n                                        \u003cView\r\n                                            key={idx}\r\n                                            style={{\r\n                                                backgroundColor: colors.background,\r\n                                                borderRadius: 12,\r\n                                                padding: 12,\r\n                                                marginBottom: 8,\r\n                                                flexDirection: \"row\",\r\n                                                justifyContent: \"space-between\",\r\n                                                alignItems: \"center\"\r\n                                            }}\r\n                                        \u003e\r\n                                            \u003cView style={{ flex: 1 }}\u003e\r\n                                                \u003cText style={{ fontSize: 14, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary }}\u003e\r\n                                                    {classData.className}\r\n                                                \u003c/Text\u003e\r\n                                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                    {classData.studentsCount} student{classData.studentsCount !== 1 ? \u0027s\u0027 : \u0027\u0027}\r\n                                                \u003c/Text\u003e\r\n                                            \u003c/View\u003e\r\n                                            \u003cView style={{ alignItems: \"flex-end\" }}\u003e\r\n                                                \u003cText style={{\r\n                                                    fontSize: 18,\r\n                                                    fontFamily: \"DMSans-Bold\",\r\n                                                    color: getGradeColor(classData.avgPercentage)\r\n                                                }}\u003e\r\n                                                    {classData.avgPercentage}%\r\n                                                \u003c/Text\u003e\r\n                                                \u003cView style={{ flexDirection: \"row\", gap: 8, marginTop: 2 }}\u003e\r\n                                                    \u003cText style={{ fontSize: 10, color: colors.success, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                        H: {classData.highest}%\r\n                                                    \u003c/Text\u003e\r\n                                                    \u003cText style={{ fontSize: 10, color: colors.error, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                                        L: {classData.lowest}%\r\n                                                    \u003c/Text\u003e\r\n                                                \u003c/View\u003e\r\n                                            \u003c/View\u003e\r\n                                        \u003c/View\u003e\r\n                                    ))}\r\n                                \u003c/\u003e\r\n                            )}\r\n\r\n                            {(!exam.classwiseData || exam.classwiseData.length === 0) \u0026\u0026 (\r\n                                \u003cView style={{ alignItems: \"center\", paddingVertical: 20, opacity: 0.5 }}\u003e\r\n                                    \u003cMaterialIcons name=\"info-outline\" size={32} color={colors.textSecondary} /\u003e\r\n                                    \u003cText style={{ color: colors.textSecondary, marginTop: 8, fontSize: 12 }}\u003e\r\n                                        No data yet for this assessment\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            )}\r\n                        \u003c/View\u003e\r\n                    ))}\r\n\r\n                    {performance.length === 0 \u0026\u0026 (\r\n                        \u003cView style={{ alignItems: \"center\", marginTop: 40, opacity: 0.6 }}\u003e\r\n                            \u003cMaterialIcons name=\"assessment\" size={64} color={colors.textSecondary} /\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, marginTop: 16, fontSize: 16, textAlign: \u0027center\u0027 }}\u003e\r\n                                No exam data available yet.{\u0027\\n\u0027}Initialize exams to see performance.\r\n                            \u003c/Text\u003e\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\babel.config.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\AttendanceView.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Pressable\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  6,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  6,
                                           "endColumn":  14
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027MaterialIcons\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  11,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  11,
                                           "endColumn":  23
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027cellSize\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  17,
                                           "column":  7,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  17,
                                           "endColumn":  15
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  28,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  28,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  4,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useMemo } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    ScrollView,\r\n    Pressable,\r\n    ActivityIndicator,\r\n    RefreshControl,\r\n    Dimensions,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useTheme } from \"../theme\";\r\nimport Header from \"./Header\";\r\nimport ModernCalendar from \"./ModernCalendar\";\r\n\r\nconst { width } = Dimensions.get(\u0027window\u0027);\r\nconst cellSize = (width - 80) / 7; // 7 days in a week, accounting for padding\r\n\r\nexport default function AttendanceView({\r\n    attendanceHistory,\r\n    summary,\r\n    loading,\r\n    onRefresh,\r\n    refreshing,\r\n    title = \"My Attendance\",\r\n    subtitle = \"Track your attendance record\"\r\n}) {\r\n    const { styles, colors } = useTheme();\r\n    const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().split(\u0027T\u0027)[0]);\r\n\r\n    const getStatusColor = (status) =\u003e {\r\n        switch (status) {\r\n            case \u0027present\u0027: return colors.success;\r\n            case \u0027absent\u0027: return colors.error;\r\n            case \u0027late\u0027: return \u0027#FF9800\u0027;\r\n            case \u0027excused\u0027: return \u0027#2196F3\u0027;\r\n            default: return colors.textSecondary;\r\n        }\r\n    };\r\n\r\n    const markedDates = useMemo(() =\u003e {\r\n        const marks = {};\r\n        attendanceHistory.forEach(record =\u003e {\r\n            const dateStr = new Date(record.date).toISOString().split(\u0027T\u0027)[0];\r\n            const color = getStatusColor(record.status);\r\n            marks[dateStr] = {\r\n                customStyles: {\r\n                    container: {\r\n                        backgroundColor: color + \u002720\u0027,\r\n                        borderWidth: 1,\r\n                        borderColor: color,\r\n                        borderRadius: 8,\r\n                    },\r\n                    text: {\r\n                        color: color,\r\n                        fontFamily: \u0027DMSans-Bold\u0027,\r\n                    }\r\n                }\r\n            };\r\n        });\r\n        return marks;\r\n    }, [attendanceHistory, colors]);\r\n\r\n    if (loading) {\r\n        return (\r\n            \u003cView style={{ flex: 1, backgroundColor: colors.background, justifyContent: \"center\", alignItems: \"center\" }}\u003e\r\n                \u003cActivityIndicator size=\"large\" color={colors.primary} /\u003e\r\n            \u003c/View\u003e\r\n        );\r\n    }\r\n\r\n    return (\r\n        \u003cView style={{ flex: 1, backgroundColor: colors.background }}\u003e\r\n            \u003cScrollView\r\n                refreshControl={\u003cRefreshControl refreshing={refreshing} onRefresh={onRefresh} colors={[colors.primary]} /\u003e}\r\n                contentContainerStyle={{ paddingBottom: 100 }}\r\n            \u003e\r\n                \u003cView style={{ padding: 16, paddingTop: 24 }}\u003e\r\n                    \u003cHeader\r\n                        title={title}\r\n                        subtitle={subtitle}\r\n                    /\u003e\r\n\r\n                    {/* Overall Percentage - Big Display */}\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.primary,\r\n                        borderRadius: 20,\r\n                        padding: 24,\r\n                        marginTop: 20,\r\n                        alignItems: \"center\",\r\n                        elevation: 4\r\n                    }}\u003e\r\n                        \u003cText style={{ fontSize: 16, color: \"#fff\", opacity: 0.9, fontFamily: \"DMSans-Medium\" }}\u003e\r\n                            Overall Attendance\r\n                        \u003c/Text\u003e\r\n                        \u003cText style={{ fontSize: 64, fontFamily: \"DMSans-Bold\", color: \"#fff\", marginTop: 8 }}\u003e\r\n                            {summary?.percentage || 0}%\r\n                        \u003c/Text\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 24, marginTop: 16 }}\u003e\r\n                            \u003cView style={{ alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ fontSize: 28, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                    {summary?.present || 0}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: \"#fff\", opacity: 0.8, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Present\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ alignItems: \"center\" }}\u003e\r\n                                \u003cText style={{ fontSize: 28, fontFamily: \"DMSans-Bold\", color: \"#fff\" }}\u003e\r\n                                    {summary?.total || 0}\r\n                                \u003c/Text\u003e\r\n                                \u003cText style={{ fontSize: 12, color: \"#fff\", opacity: 0.8, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                    Total Days\r\n                                \u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Calendar View */}\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.cardBackground,\r\n                        borderRadius: 16,\r\n                        padding: 16,\r\n                        marginTop: 24,\r\n                        elevation: 2\r\n                    }}\u003e\r\n                        \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 4 }}\u003e\r\n                            Attendance Calendar\r\n                        \u003c/Text\u003e\r\n                        \u003cModernCalendar\r\n                            current={selectedMonth}\r\n                            markedDates={markedDates}\r\n                            onMonthChange={(month) =\u003e setSelectedMonth(month.dateString)}\r\n                            markingType={\u0027custom\u0027}\r\n                            theme={{\r\n                                calendarBackground: \u0027transparent\u0027,\r\n                            }}\r\n                        /\u003e\r\n\r\n                        {/* Legend */}\r\n                        \u003cView style={{ flexDirection: \"row\", flexWrap: \"wrap\", gap: 12, marginTop: 16, justifyContent: \"center\" }}\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                \u003cView style={{ width: 16, height: 16, borderRadius: 4, backgroundColor: colors.success + \"40\" }} /\u003e\r\n                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003ePresent\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                \u003cView style={{ width: 16, height: 16, borderRadius: 4, backgroundColor: colors.error + \"40\" }} /\u003e\r\n                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eAbsent\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                \u003cView style={{ width: 16, height: 16, borderRadius: 4, backgroundColor: \"#FF9800\" + \"40\" }} /\u003e\r\n                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eLate\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                            \u003cView style={{ flexDirection: \"row\", alignItems: \"center\", gap: 6 }}\u003e\r\n                                \u003cView style={{ width: 16, height: 16, borderRadius: 4, backgroundColor: \"#2196F3\" + \"40\" }} /\u003e\r\n                                \u003cText style={{ fontSize: 11, color: colors.textSecondary, fontFamily: \"DMSans-Medium\" }}\u003eExcused\u003c/Text\u003e\r\n                            \u003c/View\u003e\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Monthly Summary */}\r\n                    {summary?.monthlyBreakdown \u0026\u0026 summary.monthlyBreakdown.length \u003e 0 \u0026\u0026 (\r\n                        \u003cView style={{ marginTop: 24 }}\u003e\r\n                            \u003cText style={{ fontSize: 18, fontFamily: \"DMSans-Bold\", color: colors.textPrimary, marginBottom: 12 }}\u003e\r\n                                Monthly Summary\r\n                            \u003c/Text\u003e\r\n                            {summary.monthlyBreakdown.slice(0, 6).map((month) =\u003e (\r\n                                \u003cView\r\n                                    key={month.month}\r\n                                    style={{\r\n                                        backgroundColor: colors.cardBackground,\r\n                                        borderRadius: 12,\r\n                                        padding: 16,\r\n                                        marginBottom: 8,\r\n                                        flexDirection: \"row\",\r\n                                        justifyContent: \"space-between\",\r\n                                        alignItems: \"center\",\r\n                                        elevation: 1\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cView\u003e\r\n                                        \u003cText style={{ fontSize: 15, fontFamily: \"DMSans-SemiBold\", color: colors.textPrimary }}\u003e\r\n                                            {month.month}\r\n                                        \u003c/Text\u003e\r\n                                        \u003cText style={{ fontSize: 12, color: colors.textSecondary, marginTop: 2, fontFamily: \"DMSans-Regular\" }}\u003e\r\n                                            {month.present} / {month.total} days\r\n                                        \u003c/Text\u003e\r\n                                    \u003c/View\u003e\r\n                                    \u003cText style={{\r\n                                        fontSize: 20,\r\n                                        fontFamily: \"DMSans-Bold\",\r\n                                        color: parseFloat(month.percentage) \u003e= 75 ? colors.success : colors.error\r\n                                    }}\u003e\r\n                                        {month.percentage}%\r\n                                    \u003c/Text\u003e\r\n                                \u003c/View\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    )}\r\n                \u003c/View\u003e\r\n            \u003c/ScrollView\u003e\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\BottomNavigation.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "react/display-name",
                                           "severity":  2,
                                           "message":  "Component definition is missing display name",
                                           "line":  138,
                                           "column":  17,
                                           "nodeType":  "CallExpression",
                                           "messageId":  "noDisplayName",
                                           "endLine":  236,
                                           "endColumn":  3
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027mode\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  138,
                                           "column":  58,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  138,
                                           "endColumn":  62
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect, useMemo, useCallback, memo, useRef } from \"react\";\r\nimport { View, Text, Pressable, StyleSheet, Animated, Platform } from \"react-native\";\r\nimport { useRouter, usePathname } from \"expo-router\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport * as Haptics from \"expo-haptics\";\r\nimport { useTheme } from \"../theme\";\r\nimport { ROUTES } from \"../constants/routes\";\r\nimport AsyncStorage from \u0027@react-native-async-storage/async-storage\u0027;\r\n\r\nfunction BottomNavigation() {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const { colors, mode } = useTheme();\r\n  const [activeTab, setActiveTab] = useState(ROUTES.HOME);\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Load user only on mount - no need to reload on every pathname change\r\n  useEffect(() =\u003e {\r\n    const loadUser = async () =\u003e {\r\n      try {\r\n        const storedUser = await AsyncStorage.getItem(\u0027@auth_user\u0027);\r\n        if (storedUser) {\r\n          setUser(JSON.parse(storedUser));\r\n        } else {\r\n          setUser(null);\r\n        }\r\n      } catch (e) {\r\n        console.warn(\u0027Failed to load user\u0027, e);\r\n        setUser(null);\r\n      }\r\n    };\r\n    loadUser();\r\n  }, [pathname]); // Reload user when route changes (e.g. login/logout)\r\n\r\n  // Memoize navigation items to prevent recalculation on every render\r\n  const navigationItems = useMemo(() =\u003e [\r\n    {\r\n      route: ROUTES.HOME,\r\n      label: \"Home\",\r\n      icon: \"home\",\r\n    },\r\n    // Show My Class menu if user is a student\r\n    ...(user \u0026\u0026 user.role === \u0027student\u0027 ? [{\r\n      route: ROUTES.STUDENT_CLASS,\r\n      label: \"My Class\",\r\n      icon: \"school\",\r\n    }] : []),\r\n    // Show My Teach menu if user is a teacher\r\n    ...(user \u0026\u0026 (user.role === \u0027class teacher\u0027 || user.role === \u0027teacher\u0027 || user.role === \u0027staff\u0027) ? [{\r\n      route: ROUTES.TEACHER_CLASSES,\r\n      label: \"My Teach\",\r\n      icon: \"school\",\r\n    }] : []),\r\n    // Admin gets Admin tab first, then Classes tab\r\n    ...(user \u0026\u0026 (user.role === \u0027admin\u0027 || user.role === \u0027super admin\u0027) ? [{\r\n      route: ROUTES.ADMIN,\r\n      label: \"Admin\",\r\n      icon: \"admin-panel-settings\",\r\n    }, {\r\n      route: \"/admin/classes\",\r\n      label: \"Classes\",\r\n      icon: \"class\",\r\n    }] : []),\r\n    // Requests Tab - for logged-in students and teachers\r\n    ...(user \u0026\u0026 (user.role === \u0027student\u0027 || user.role === \u0027class teacher\u0027 || user.role === \u0027teacher\u0027 || user.role === \u0027staff\u0027 || user.role === \u0027admin\u0027 || user.role === \u0027super admin\u0027) ? [{\r\n      route: \"/requests\",\r\n      label: \"Attendance\",\r\n      icon: \"assignment\",\r\n    }] : []),\r\n\r\n    // Menu Tab\r\n    {\r\n      route: \"/menu\",\r\n      label: \"Menu\",\r\n      icon: \"grid-view\",\r\n    },\r\n  ], [user]);\r\n\r\n  useEffect(() =\u003e {\r\n    const matchingItem = navigationItems\r\n      .filter(item =\u003e item.route === \u0027/\u0027 ? pathname === \u0027/\u0027 : pathname.startsWith(item.route))\r\n      .sort((a, b) =\u003e b.route.length - a.route.length)[0];\r\n\r\n    if (matchingItem) {\r\n      setActiveTab(matchingItem.route);\r\n    }\r\n  }, [pathname, navigationItems]);\r\n\r\n  // Memoize handleTabPress to prevent creating new function on every render\r\n  const handleTabPress = useCallback((route) =\u003e {\r\n    // Haptic feedback for better UX\r\n    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light).catch(() =\u003e { });\r\n\r\n    if (pathname === route) return;\r\n\r\n    // Use requestAnimationFrame to ensure the UI update (ripple effect) happens\r\n    // before the heavy navigation work starts\r\n    requestAnimationFrame(() =\u003e {\r\n      setActiveTab(route);\r\n      // Use replace instead of push to prevent stack buildup and memory leaks\r\n      router.replace(route);\r\n    });\r\n  }, [pathname, router]);\r\n\r\n  // Glassmorphism background color\r\n  const glassBackground = mode === \u0027dark\u0027\r\n    ? \u0027rgba(30, 41, 59, 0.9)\u0027 // Darker slate\r\n    : \u0027rgba(255, 255, 255, 0.9)\u0027;\r\n\r\n  return (\r\n    \u003cView style={styles.wrapper}\u003e\r\n      \u003cView style={[\r\n        styles.container,\r\n        {\r\n          backgroundColor: glassBackground,\r\n          borderColor: mode === \u0027dark\u0027 ? \u0027rgba(255, 255, 255, 0.1)\u0027 : \u0027rgba(0, 0, 0, 0.05)\u0027,\r\n        }\r\n      ]}\u003e\r\n        {navigationItems.map((item) =\u003e {\r\n          const isActive = activeTab === item.route;\r\n          return (\r\n            \u003cTabItem\r\n              key={item.label}\r\n              item={item}\r\n              isActive={isActive}\r\n              onPress={() =\u003e handleTabPress(item.route)}\r\n              colors={colors}\r\n              mode={mode}\r\n            /\u003e\r\n          );\r\n        })}\r\n      \u003c/View\u003e\r\n    \u003c/View\u003e\r\n  );\r\n}\r\n\r\n// Separate TabItem component for better performance and animations\r\nconst TabItem = memo(({ item, isActive, onPress, colors, mode }) =\u003e {\r\n  const scaleAnim = useRef(new Animated.Value(1)).current;\r\n  const iconScaleAnim = useRef(new Animated.Value(1)).current;\r\n\r\n  // Animate on press\r\n  const handlePressIn = () =\u003e {\r\n    Animated.spring(scaleAnim, {\r\n      toValue: 0.9,\r\n      useNativeDriver: true,\r\n      tension: 300,\r\n      friction: 10,\r\n    }).start();\r\n  };\r\n\r\n  const handlePressOut = () =\u003e {\r\n    Animated.spring(scaleAnim, {\r\n      toValue: 1,\r\n      useNativeDriver: true,\r\n      tension: 300,\r\n      friction: 10,\r\n    }).start();\r\n  };\r\n\r\n  // Animate icon when active state changes\r\n  useEffect(() =\u003e {\r\n    Animated.sequence([\r\n      Animated.spring(iconScaleAnim, {\r\n        toValue: isActive ? 1.15 : 1,\r\n        useNativeDriver: true,\r\n        tension: 300,\r\n        friction: 8,\r\n      }),\r\n      Animated.spring(iconScaleAnim, {\r\n        toValue: 1,\r\n        useNativeDriver: true,\r\n        tension: 300,\r\n        friction: 8,\r\n      }),\r\n    ]).start();\r\n  }, [isActive]);\r\n\r\n  const activePillBackground = colors.primaryLight;\r\n\r\n  return (\r\n    \u003cAnimated.View style={{ transform: [{ scale: scaleAnim }] }}\u003e\r\n      \u003cPressable\r\n        onPress={onPress}\r\n        onPressIn={handlePressIn}\r\n        onPressOut={handlePressOut}\r\n        style={styles.tabItem}\r\n        hitSlop={{ top: 8, bottom: 8, left: 4, right: 4 }}\r\n      \u003e\r\n        {/* Active Pill Background */}\r\n        {isActive \u0026\u0026 (\r\n          \u003cView style={[\r\n            styles.activePill,\r\n            { backgroundColor: activePillBackground }\r\n          ]} /\u003e\r\n        )}\r\n\r\n        {/* Icon with glow effect */}\r\n        \u003cAnimated.View\r\n          style={[\r\n            styles.iconContainer,\r\n            isActive \u0026\u0026 {\r\n              shadowColor: colors.primary,\r\n              shadowOffset: { width: 0, height: 0 },\r\n              shadowOpacity: 0.4,\r\n              shadowRadius: 8,\r\n              elevation: 4,\r\n            },\r\n            { transform: [{ scale: iconScaleAnim }] }\r\n          ]}\r\n        \u003e\r\n          \u003cMaterialIcons\r\n            name={item.icon}\r\n            size={24}\r\n            color={isActive ? colors.primary : colors.textSecondary}\r\n          /\u003e\r\n        \u003c/Animated.View\u003e\r\n\r\n        {/* Label */}\r\n        \u003cText\r\n          style={[\r\n            styles.label,\r\n            {\r\n              color: isActive ? colors.primary : colors.textSecondary,\r\n              fontFamily: isActive ? \"DMSans-Bold\" : \"DMSans-Regular\",\r\n              opacity: isActive ? 1 : 0.7,\r\n            }\r\n          ]}\r\n          numberOfLines={1}\r\n        \u003e\r\n          {item.label}\r\n        \u003c/Text\u003e\r\n      \u003c/Pressable\u003e\r\n    \u003c/Animated.View\u003e\r\n  );\r\n});\r\n\r\n// Export memoized component to prevent unnecessary re-renders\r\nexport default memo(BottomNavigation);\r\n\r\nconst styles = StyleSheet.create({\r\n  wrapper: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    paddingHorizontal: 16,\r\n    paddingBottom: Platform.OS === \u0027ios\u0027 ? 24 : 20,\r\n  },\r\n  container: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-around\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 8,\r\n    borderRadius: 24,\r\n    borderWidth: 1,\r\n    // Enhanced shadow for floating effect\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 8 },\r\n    shadowOpacity: 0.15,\r\n    shadowRadius: 16,\r\n    elevation: 12,\r\n    // Backdrop blur simulation\r\n    overflow: \u0027hidden\u0027,\r\n  },\r\n  tabItem: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 4,\r\n    position: \"relative\",\r\n  },\r\n  activePill: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: -4,\r\n    right: -4,\r\n    bottom: 0,\r\n    borderRadius: 16,\r\n    zIndex: 0,\r\n  },\r\n  iconContainer: {\r\n    marginBottom: 4,\r\n    zIndex: 1,\r\n  },\r\n  label: {\r\n    fontSize: 10,\r\n    letterSpacing: 0.5,\r\n    textAlign: \u0027center\u0027,\r\n    zIndex: 1,\r\n  },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\ErrorBoundary.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  null,
                                           "fatal":  true,
                                           "severity":  2,
                                           "message":  "Parsing error: Unexpected token =",
                                           "line":  22,
                                           "column":  18,
                                           "nodeType":  null
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  1,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React from \u0027react\u0027;\r\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView } from \u0027react-native\u0027;\r\nimport { MaterialIcons } from \u0027@expo/vector-icons\u0027;\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null, errorInfo: null };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // You can also log the error to an error reporting service\r\n    console.error(\"Uncaught error:\", error, errorInfo);\r\n    this.setState({ errorInfo });\r\n  }\r\n\r\n  handleTryAgain = () =\u003e {\r\n    // Attempt to recover by resetting state\r\n    this.setState({ hasError: false, error: null, errorInfo: null });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return (\r\n        \u003cView style={styles.container}\u003e\r\n          \u003cView style={styles.content}\u003e\r\n            \u003cMaterialIcons name=\"error\" size={64} color=\"#FF6B6B\" /\u003e\r\n            \u003cText style={styles.title}\u003eOops! Something went wrong.\u003c/Text\u003e\r\n            \u003cText style={styles.subtitle}\u003e\r\n              We\u0027re sorry, but an unexpected error occurred. Please try again.\r\n            \u003c/Text\u003e\r\n            \r\n            \u003cTouchableOpacity style={styles.button} onPress={this.handleTryAgain}\u003e\r\n              \u003cText style={styles.buttonText}\u003eTry Again\u003c/Text\u003e\r\n            \u003c/TouchableOpacity\u003e\r\n\r\n            {/* Optional: Show error details in development */}\r\n            {__DEV__ \u0026\u0026 this.state.error \u0026\u0026 (\r\n              \u003cScrollView style={styles.debugBox}\u003e\r\n                \u003cText style={styles.debugText}\u003e{this.state.error.toString()}\u003c/Text\u003e\r\n              \u003c/ScrollView\u003e\r\n            )}\r\n          \u003c/View\u003e\r\n        \u003c/View\u003e\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \u0027#fff\u0027,\r\n    justifyContent: \u0027center\u0027,\r\n    alignItems: \u0027center\u0027,\r\n    padding: 20,\r\n  },\r\n  content: {\r\n    alignItems: \u0027center\u0027,\r\n    maxWidth: 400,\r\n    width: \u0027100%\u0027,\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: \u0027bold\u0027,\r\n    color: \u0027#333\u0027,\r\n    marginTop: 20,\r\n    marginBottom: 10,\r\n    textAlign: \u0027center\u0027,\r\n  },\r\n  subtitle: {\r\n    fontSize: 16,\r\n    color: \u0027#666\u0027,\r\n    textAlign: \u0027center\u0027,\r\n    marginBottom: 30,\r\n    lineHeight: 24,\r\n  },\r\n  button: {\r\n    backgroundColor: \u0027#4A90E2\u0027,\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 30,\r\n    borderRadius: 25,\r\n    elevation: 3,\r\n    shadowColor: \u0027#000\u0027,\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 4,\r\n  },\r\n  buttonText: {\r\n    color: \u0027#fff\u0027,\r\n    fontSize: 16,\r\n    fontWeight: \u0027600\u0027,\r\n  },\r\n  debugBox: {\r\n    marginTop: 30,\r\n    padding: 10,\r\n    backgroundColor: \u0027#f5f5f5\u0027,\r\n    borderRadius: 5,\r\n    width: \u0027100%\u0027,\r\n    maxHeight: 200,\r\n  },\r\n  debugText: {\r\n    color: \u0027#d63031\u0027,\r\n    fontFamily: \u0027monospace\u0027,\r\n    fontSize: 12,\r\n  },\r\n});\r\n\r\nexport default ErrorBoundary;\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\EventFormModal.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  4,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  4,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027apiConfig\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  7,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  7,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027apiFetch\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027setLoading\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  34,
                                           "column":  19,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  34,
                                           "endColumn":  29
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  38,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  38,
                                           "endColumn":  20
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  5,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { View, Text, TextInput, Modal, Pressable, StyleSheet } from \u0027react-native\u0027;\r\nimport { MaterialIcons } from \u0027@expo/vector-icons\u0027;\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useTheme } from \u0027../theme\u0027;\r\nimport { useToast } from \u0027./ToastProvider\u0027;\r\nimport apiConfig from \u0027../config/apiConfig\u0027;\r\nimport apiFetch from \u0027../utils/apiFetch\u0027;\r\n\r\n\r\n// Helper to format dates for display in Indian format (DD-MM-YYYY)\r\nconst formatIndianDate = (dateInput) =\u003e {\r\n  if (!dateInput) return \"\";\r\n  try {\r\n    // handle yyyy-mm-dd strings (selectedDate from calendar) by forcing midnight\r\n    const d =\r\n      typeof dateInput === \"string\" \u0026\u0026 /^\\d{4}-\\d{2}-\\d{2}$/.test(dateInput)\r\n        ? new Date(dateInput + \"T00:00:00\")\r\n        : new Date(dateInput);\r\n    if (isNaN(d)) return String(dateInput);\r\n    const day = String(d.getDate()).padStart(2, \"0\");\r\n    const month = String(d.getMonth() + 1).padStart(2, \"0\");\r\n    const year = d.getFullYear();\r\n    return `${day}-${month}-${year}`;\r\n  } catch (e) {\r\n    return String(dateInput);\r\n  }\r\n};\r\n\r\nexport default function EventFormModal({ isVisible, onClose, selectedDate, onSuccess, editItem = null }) {\r\n  const [title, setTitle] = useState(\u0027\u0027);\r\n  const [description, setDescription] = useState(\u0027\u0027);\r\n  const [isSchoolEvent, setIsSchoolEvent] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [touched, setTouched] = useState({});\r\n  const { colors, styles: globalStyles } = useTheme();\r\n  const { showToast } = useToast();\r\n\r\n  const isEditing = !!editItem;\r\n\r\n  useEffect(() =\u003e {\r\n    if (isVisible) {\r\n      if (isEditing \u0026\u0026 editItem) {\r\n        setTitle(editItem.title || \u0027\u0027);\r\n        setDescription(editItem.description || \u0027\u0027);\r\n        setIsSchoolEvent(editItem.isSchoolEvent !== undefined ? editItem.isSchoolEvent : false);\r\n      } else {\r\n        setTitle(\u0027\u0027);\r\n        setDescription(\u0027\u0027);\r\n        setIsSchoolEvent(false);\r\n      }\r\n      setErrors({});\r\n      setTouched({});\r\n    }\r\n  }, [isVisible, isEditing, editItem]);\r\n\r\n  const validateField = (name, value) =\u003e {\r\n    let error = \"\";\r\n    switch (name) {\r\n      case \"title\":\r\n        if (!value.trim()) error = \"Title is required\";\r\n        else if (value.trim().length \u003c 3) error = \"Title must be at least 3 characters\";\r\n        break;\r\n      case \"description\":\r\n        if (value.trim() \u0026\u0026 value.trim().length \u003c 10) error = \"Description must be at least 10 characters if provided\";\r\n        break;\r\n    }\r\n    return error;\r\n  };\r\n\r\n  const handleBlur = (field, value) =\u003e {\r\n    setTouched(prev =\u003e ({ ...prev, [field]: true }));\r\n    const error = validateField(field, value);\r\n    setErrors(prev =\u003e ({ ...prev, [field]: error }));\r\n  };\r\n\r\n  const handleChange = (field, value) =\u003e {\r\n    if (field === \u0027title\u0027) setTitle(value);\r\n    if (field === \u0027description\u0027) setDescription(value);\r\n\r\n    if (touched[field]) {\r\n      const error = validateField(field, value);\r\n      setErrors(prev =\u003e ({ ...prev, [field]: error }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = () =\u003e {\r\n    const titleError = validateField(\"title\", title);\r\n    const descriptionError = validateField(\"description\", description);\r\n\r\n    setErrors({\r\n      title: titleError,\r\n      description: descriptionError\r\n    });\r\n    setTouched({\r\n      title: true,\r\n      description: true\r\n    });\r\n\r\n    if (titleError || descriptionError) {\r\n      return;\r\n    }\r\n\r\n    // Pass data to parent component\r\n    onSuccess({\r\n      title: title.trim(),\r\n      date: isEditing ? editItem.date : selectedDate,\r\n      description: description.trim(),\r\n      isSchoolEvent: isSchoolEvent,\r\n      _id: editItem?._id // Pass ID if editing\r\n    });\r\n  };\r\n\r\n  return (\r\n    \u003cModal\r\n      visible={isVisible}\r\n      transparent\r\n      animationType=\"fade\"\r\n      onRequestClose={onClose}\r\n    \u003e\r\n      \u003cView style={styles.overlay}\u003e\r\n        \u003cView style={[styles.container, { backgroundColor: colors.cardBackground }]}\u003e\r\n          \u003cView style={styles.header}\u003e\r\n            \u003cText style={[globalStyles.title, { fontSize: 20, color: colors.textPrimary }]}\u003e\r\n              {isEditing ? \u0027Edit Event\u0027 : \u0027New Event\u0027}\r\n            \u003c/Text\u003e\r\n            \u003cPressable onPress={onClose} hitSlop={8}\u003e\r\n              \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n            \u003c/Pressable\u003e\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={styles.dateRow}\u003e\r\n            \u003cText style={[styles.dateLabel, { color: colors.textSecondary }]}\u003eDate:\u003c/Text\u003e\r\n            \u003cText style={[styles.dateValue, { color: colors.textPrimary }]}\u003e{isEditing ? formatIndianDate(editItem.date) : formatIndianDate(selectedDate)}\u003c/Text\u003e\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={{ marginBottom: 12 }}\u003e\r\n            \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 8, marginLeft: 4 }}\u003eTITLE\u003c/Text\u003e\r\n            \u003cTextInput\r\n              style={[globalStyles.input, {\r\n                backgroundColor: colors.cardBackground,\r\n                color: colors.textPrimary,\r\n                borderColor: errors.title \u0026\u0026 touched.title ? colors.error : colors.border,\r\n                borderWidth: 1\r\n              }]}\r\n              placeholder=\"Event title\"\r\n              placeholderTextColor={colors.textSecondary}\r\n              value={title}\r\n              onChangeText={(text) =\u003e handleChange(\u0027title\u0027, text)}\r\n              onBlur={() =\u003e handleBlur(\u0027title\u0027, title)}\r\n              maxLength={100}\r\n            /\u003e\r\n            {errors.title \u0026\u0026 touched.title \u0026\u0026 (\r\n              \u003cText style={{ color: colors.error, fontSize: 12, marginTop: 4, marginLeft: 4 }}\u003e{errors.title}\u003c/Text\u003e\r\n            )}\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={{ marginBottom: 12 }}\u003e\r\n            \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 8, marginLeft: 4 }}\u003eDESCRIPTION (OPTIONAL)\u003c/Text\u003e\r\n            \u003cTextInput\r\n              style={[globalStyles.input, {\r\n                backgroundColor: colors.cardBackground,\r\n                color: colors.textPrimary,\r\n                borderColor: errors.description \u0026\u0026 touched.description ? colors.error : colors.border,\r\n                borderWidth: 1,\r\n                minHeight: 100,\r\n                paddingTop: 12,\r\n              }]}\r\n              placeholder=\"Description (optional)\"\r\n              placeholderTextColor={colors.textSecondary}\r\n              value={description}\r\n              onChangeText={(text) =\u003e handleChange(\u0027description\u0027, text)}\r\n              onBlur={() =\u003e handleBlur(\u0027description\u0027, description)}\r\n              maxLength={500}\r\n              multiline\r\n            /\u003e\r\n            {errors.description \u0026\u0026 touched.description \u0026\u0026 (\r\n              \u003cText style={{ color: colors.error, fontSize: 12, marginTop: 4, marginLeft: 4 }}\u003e{errors.description}\u003c/Text\u003e\r\n            )}\r\n          \u003c/View\u003e\r\n\r\n          \u003cPressable\r\n            style={{ marginBottom: 16, flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027 }}\r\n            onPress={() =\u003e setIsSchoolEvent(!isSchoolEvent)}\r\n          \u003e\r\n            \u003cMaterialIcons\r\n              name={isSchoolEvent ? \"check-box\" : \"check-box-outline-blank\"}\r\n              size={24}\r\n              color={colors.primary}\r\n              style={{ marginRight: 8 }}\r\n            /\u003e\r\n            \u003cText style={[globalStyles.cardText, { color: colors.textPrimary }]}\u003eMark as School Event\u003c/Text\u003e\r\n          \u003c/Pressable\u003e\r\n\r\n          \u003cPressable\r\n            style={[globalStyles.buttonLarge, { width: \"100%\", backgroundColor: colors.primary }, loading \u0026\u0026 { opacity: 0.6 }]}\r\n            onPress={handleSubmit}\r\n            disabled={loading}\r\n          \u003e\r\n            \u003cText style={[globalStyles.buttonText, { color: colors.white }]}\u003e\r\n              {isEditing ? \u0027Update Event\u0027 : \u0027Create Event\u0027}\r\n            \u003c/Text\u003e\r\n          \u003c/Pressable\u003e\r\n        \u003c/View\u003e\r\n      \u003c/View\u003e\r\n    \u003c/Modal\u003e\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  overlay: {\r\n    flex: 1,\r\n    justifyContent: \u0027center\u0027,\r\n    alignItems: \u0027center\u0027,\r\n    backgroundColor: \u0027rgba(0,0,0,0.6)\u0027,\r\n    padding: 20,\r\n  },\r\n  container: {\r\n    width: \u0027100%\u0027,\r\n    maxWidth: 400,\r\n    padding: 24,\r\n    borderRadius: 20,\r\n    elevation: 8,\r\n    shadowColor: \u0027#000\u0027,\r\n    shadowOffset: { width: 0, height: 4 },\r\n    shadowOpacity: 0.3,\r\n    shadowRadius: 12,\r\n  },\r\n  header: {\r\n    flexDirection: \u0027row\u0027,\r\n    justifyContent: \u0027space-between\u0027,\r\n    alignItems: \u0027center\u0027,\r\n    marginBottom: 20,\r\n  },\r\n  dateRow: {\r\n    flexDirection: \u0027row\u0027,\r\n    alignItems: \u0027center\u0027,\r\n    marginBottom: 16,\r\n    padding: 12,\r\n    borderRadius: 12,\r\n    backgroundColor: \u0027rgba(0,0,0,0.03)\u0027,\r\n  },\r\n  dateLabel: {\r\n    fontSize: 14,\r\n    fontWeight: \u0027500\u0027,\r\n    marginRight: 8,\r\n  },\r\n  dateValue: {\r\n    fontSize: 14,\r\n    fontWeight: \u0027600\u0027,\r\n  },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\Header.jsx",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\ModernCalendar.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Text\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  16,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027StyleSheet\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  22,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  32
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Pressable\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  34,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  43
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useMemo } from \u0027react\u0027;\r\nimport { View, Text, StyleSheet, Pressable } from \u0027react-native\u0027;\r\nimport { Calendar } from \u0027react-native-calendars\u0027;\r\nimport { MaterialIcons } from \u0027@expo/vector-icons\u0027;\r\nimport { useTheme } from \u0027../theme\u0027;\r\n\r\nconst ModernCalendar = ({\r\n    current,\r\n    onDayPress,\r\n    markedDates,\r\n    onMonthChange,\r\n    dayComponent,\r\n    style,\r\n    markingType,\r\n    theme: customTheme,\r\n}) =\u003e {\r\n    const { colors, styles } = useTheme();\r\n\r\n    const defaultTheme = useMemo(() =\u003e ({\r\n        backgroundColor: colors.cardBackground,\r\n        calendarBackground: colors.cardBackground,\r\n        textSectionTitleColor: colors.textSecondary,\r\n        selectedDayBackgroundColor: colors.primary,\r\n        selectedDayTextColor: colors.white,\r\n        todayTextColor: colors.primary,\r\n        dayTextColor: colors.textPrimary,\r\n        textDisabledColor: colors.textSecondary + \u002750\u0027,\r\n        dotColor: colors.primary,\r\n        selectedDotColor: colors.white,\r\n        arrowColor: colors.primary,\r\n        monthTextColor: colors.textPrimary,\r\n        indicatorColor: colors.primary,\r\n        textDayFontFamily: \u0027DMSans-Medium\u0027,\r\n        textMonthFontFamily: \u0027DMSans-Bold\u0027,\r\n        textDayHeaderFontFamily: \u0027DMSans-Bold\u0027,\r\n        textDayFontSize: 14,\r\n        textMonthFontSize: 16,\r\n        textDayHeaderFontSize: 12,\r\n        \u0027stylesheet.calendar.header\u0027: {\r\n            header: {\r\n                flexDirection: \u0027row\u0027,\r\n                justifyContent: \u0027space-between\u0027,\r\n                paddingLeft: 10,\r\n                paddingRight: 10,\r\n                marginTop: 6,\r\n                marginBottom: 6,\r\n                alignItems: \u0027center\u0027,\r\n            },\r\n            monthText: {\r\n                fontSize: 18,\r\n                fontFamily: \u0027DMSans-Bold\u0027,\r\n                color: colors.textPrimary,\r\n                margin: 10,\r\n            },\r\n            arrow: {\r\n                padding: 10,\r\n            },\r\n        },\r\n        \u0027stylesheet.day.basic\u0027: {\r\n            base: {\r\n                width: 32,\r\n                height: 32,\r\n                alignItems: \u0027center\u0027,\r\n                justifyContent: \u0027center\u0027,\r\n            },\r\n        },\r\n    }), [colors]);\r\n\r\n    return (\r\n        \u003cView style={[styles.cardMinimal, { padding: 0, overflow: \u0027hidden\u0027 }, style]}\u003e\r\n            \u003cCalendar\r\n                current={current}\r\n                onDayPress={onDayPress}\r\n                markedDates={markedDates}\r\n                onMonthChange={onMonthChange}\r\n                dayComponent={dayComponent}\r\n                markingType={markingType}\r\n                theme={{ ...defaultTheme, ...customTheme }}\r\n                enableSwipeMonths={true}\r\n                hideExtraDays={false}\r\n                renderArrow={(direction) =\u003e (\r\n                    \u003cView style={{\r\n                        backgroundColor: colors.background,\r\n                        borderRadius: 8,\r\n                        padding: 4,\r\n                    }}\u003e\r\n                        \u003cMaterialIcons\r\n                            name={direction === \u0027left\u0027 ? \u0027chevron-left\u0027 : \u0027chevron-right\u0027}\r\n                            size={20}\r\n                            color={colors.textPrimary}\r\n                        /\u003e\r\n                    \u003c/View\u003e\r\n                )}\r\n            /\u003e\r\n        \u003c/View\u003e\r\n    );\r\n};\r\n\r\nexport default ModernCalendar;\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\ModernTimePicker.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Platform\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  2,
                                           "column":  40,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  2,
                                           "endColumn":  48
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { View, Text, Modal, Pressable, Platform, StyleSheet } from \u0027react-native\u0027;\r\nimport DateTimePicker from \u0027@react-native-community/datetimepicker\u0027;\r\nimport { useTheme } from \u0027../theme\u0027;\r\n\r\n/**\r\n * ModernTimePicker\r\n * A consistent, minimalist time picker that uses a modal with a spinner style on both platforms.\r\n * \r\n * @param {boolean} visible - Whether the picker is visible\r\n * @param {Function} onClose - Callback when closed/cancelled\r\n * @param {Function} onConfirm - Callback when time is selected (returns Date object)\r\n * @param {Date} value - Current/Initial time value\r\n * @param {string} title - Optional title for the header\r\n */\r\nexport default function ModernTimePicker({ visible, onClose, onConfirm, value, title = \"Select Time\" }) {\r\n    const { colors } = useTheme();\r\n    const [tempDate, setTempDate] = useState(value || new Date());\r\n\r\n    useEffect(() =\u003e {\r\n        if (visible \u0026\u0026 value) {\r\n            setTempDate(value);\r\n        }\r\n    }, [visible, value]);\r\n\r\n    const handleChange = (event, selectedDate) =\u003e {\r\n        if (selectedDate) {\r\n            setTempDate(selectedDate);\r\n        }\r\n    };\r\n\r\n    const handleConfirm = () =\u003e {\r\n        onConfirm(tempDate);\r\n        onClose();\r\n    };\r\n\r\n    if (!visible) return null;\r\n\r\n    return (\r\n        \u003cModal\r\n            animationType=\"fade\"\r\n            transparent={true}\r\n            visible={visible}\r\n            onRequestClose={onClose}\r\n        \u003e\r\n            \u003cPressable style={styles.overlay} onPress={onClose}\u003e\r\n                \u003cPressable style={[styles.container, { backgroundColor: colors.cardBackground }]} onPress={e =\u003e e.stopPropagation()}\u003e\r\n                    {/* Header */}\r\n                    \u003cView style={[styles.header, { borderBottomColor: colors.border }]}\u003e\r\n                        \u003cText style={[styles.title, { color: colors.textPrimary }]}\u003e{title}\u003c/Text\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Picker */}\r\n                    \u003cView style={styles.pickerContainer}\u003e\r\n                        \u003cDateTimePicker\r\n                            value={tempDate}\r\n                            mode=\"time\"\r\n                            display=\"spinner\"\r\n                            onChange={handleChange}\r\n                            textColor={colors.textPrimary}\r\n                            themeVariant={colors.dark ? \"dark\" : \"light\"}\r\n                            style={styles.picker}\r\n                        /\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    {/* Footer Actions */}\r\n                    \u003cView style={[styles.footer, { borderTopColor: colors.border }]}\u003e\r\n                        \u003cPressable onPress={onClose} style={[styles.button, styles.cancelButton]}\u003e\r\n                            \u003cText style={[styles.buttonText, { color: colors.textSecondary }]}\u003eCancel\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                        \u003cPressable onPress={handleConfirm} style={[styles.button, { backgroundColor: colors.primary }]}\u003e\r\n                            \u003cText style={[styles.buttonText, { color: \u0027#fff\u0027 }]}\u003eConfirm\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/Pressable\u003e\r\n            \u003c/Pressable\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    overlay: {\r\n        flex: 1,\r\n        backgroundColor: \u0027rgba(0, 0, 0, 0.5)\u0027,\r\n        justifyContent: \u0027center\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        padding: 20,\r\n    },\r\n    container: {\r\n        width: \u002790%\u0027,\r\n        maxWidth: 340,\r\n        borderRadius: 20,\r\n        overflow: \u0027hidden\u0027,\r\n        shadowColor: \"#000\",\r\n        shadowOffset: {\r\n            width: 0,\r\n            height: 2,\r\n        },\r\n        shadowOpacity: 0.25,\r\n        shadowRadius: 3.84,\r\n        elevation: 5,\r\n    },\r\n    header: {\r\n        padding: 16,\r\n        alignItems: \u0027center\u0027,\r\n        borderBottomWidth: 1,\r\n    },\r\n    title: {\r\n        fontSize: 18,\r\n        fontFamily: \u0027DMSans-Bold\u0027,\r\n    },\r\n    pickerContainer: {\r\n        paddingVertical: 10,\r\n        alignItems: \u0027center\u0027,\r\n        justifyContent: \u0027center\u0027,\r\n    },\r\n    picker: {\r\n        height: 180,\r\n        width: \u0027100%\u0027,\r\n    },\r\n    footer: {\r\n        flexDirection: \u0027row\u0027,\r\n        padding: 16,\r\n        gap: 12,\r\n        borderTopWidth: 1,\r\n    },\r\n    button: {\r\n        flex: 1,\r\n        paddingVertical: 12,\r\n        borderRadius: 12,\r\n        alignItems: \u0027center\u0027,\r\n        justifyContent: \u0027center\u0027,\r\n    },\r\n    cancelButton: {\r\n        backgroundColor: \u0027transparent\u0027,\r\n    },\r\n    buttonText: {\r\n        fontSize: 16,\r\n        fontFamily: \u0027DMSans-Bold\u0027,\r\n    }\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\NetworkStatusProvider.jsx",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\NewsFormModal.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027AsyncStorage\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  4,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  4,
                                           "endColumn":  20
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027apiConfig\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  7,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  7,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027apiFetch\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  8,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  16
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027setLoading\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  16,
                                           "column":  19,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  16,
                                           "endColumn":  29
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027showToast\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  20,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  20,
                                           "endColumn":  20
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  5,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useEffect } from \u0027react\u0027;\r\nimport { View, Text, TextInput, Modal, Pressable, StyleSheet } from \u0027react-native\u0027;\r\nimport { MaterialIcons } from \u0027@expo/vector-icons\u0027;\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useTheme } from \u0027../theme\u0027;\r\nimport { useToast } from \u0027./ToastProvider\u0027;\r\nimport apiConfig from \u0027../config/apiConfig\u0027;\r\nimport apiFetch from \u0027../utils/apiFetch\u0027;\r\n\r\n\r\nexport default function NewsFormModal({ isVisible, onClose, onSubmit, editItem = null }) {\r\n  const [title, setTitle] = useState(\u0027\u0027);\r\n  const [description, setDescription] = useState(\u0027\u0027);\r\n  const [url, setUrl] = useState(\u0027\u0027);\r\n  const [privateNews, setPrivateNews] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [touched, setTouched] = useState({});\r\n  const { colors, styles: globalStyles } = useTheme();\r\n  const { showToast } = useToast();\r\n\r\n  const isEditing = !!editItem;\r\n\r\n  useEffect(() =\u003e {\r\n    if (isVisible) {\r\n      if (isEditing \u0026\u0026 editItem) {\r\n        setTitle(editItem.title || \u0027\u0027);\r\n        setDescription(editItem.description || \u0027\u0027);\r\n        setUrl(editItem.url || \u0027\u0027);\r\n        setPrivateNews(editItem.privateNews !== undefined ? editItem.privateNews : true);\r\n      } else {\r\n        setTitle(\u0027\u0027);\r\n        setDescription(\u0027\u0027);\r\n        setUrl(\u0027\u0027);\r\n        setPrivateNews(true);\r\n      }\r\n      setErrors({});\r\n      setTouched({});\r\n    }\r\n  }, [isVisible, isEditing, editItem]);\r\n\r\n  const validateField = (name, value) =\u003e {\r\n    let error = \"\";\r\n    switch (name) {\r\n      case \"title\":\r\n        if (!value.trim()) error = \"Title is required\";\r\n        else if (value.trim().length \u003c 3) error = \"Title must be at least 3 characters\";\r\n        break;\r\n      case \"description\":\r\n        if (!value.trim()) error = \"Description is required\";\r\n        else if (value.trim().length \u003c 10) error = \"Description must be at least 10 characters\";\r\n        break;\r\n      case \"url\":\r\n        // No validation - accept any input\r\n        break;\r\n    }\r\n    return error;\r\n  };\r\n\r\n  const handleBlur = (field, value) =\u003e {\r\n    setTouched(prev =\u003e ({ ...prev, [field]: true }));\r\n    const error = validateField(field, value);\r\n    setErrors(prev =\u003e ({ ...prev, [field]: error }));\r\n  };\r\n\r\n  const handleChange = (field, value) =\u003e {\r\n    if (field === \u0027title\u0027) setTitle(value);\r\n    if (field === \u0027description\u0027) setDescription(value);\r\n    if (field === \u0027url\u0027) setUrl(value);\r\n\r\n    if (touched[field]) {\r\n      const error = validateField(field, value);\r\n      setErrors(prev =\u003e ({ ...prev, [field]: error }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = () =\u003e {\r\n    const titleError = validateField(\"title\", title);\r\n    const descriptionError = validateField(\"description\", description);\r\n    const urlError = validateField(\"url\", url);\r\n\r\n    setErrors({\r\n      title: titleError,\r\n      description: descriptionError,\r\n      url: urlError\r\n    });\r\n    setTouched({\r\n      title: true,\r\n      description: true,\r\n      url: true\r\n    });\r\n\r\n    if (titleError || descriptionError || urlError) {\r\n      return;\r\n    }\r\n\r\n    // Pass data to parent component\r\n    onSubmit({\r\n      title: title.trim(),\r\n      description: description.trim(),\r\n      url: url.trim() || undefined,\r\n      privateNews: privateNews,\r\n      _id: editItem?._id // Pass ID if editing\r\n    });\r\n  };\r\n\r\n  return (\r\n    \u003cModal\r\n      visible={isVisible}\r\n      transparent\r\n      animationType=\"fade\"\r\n      onRequestClose={onClose}\r\n    \u003e\r\n      \u003cView style={styles.overlay}\u003e\r\n        \u003cView style={[styles.container, { backgroundColor: colors.cardBackground }]}\u003e\r\n          \u003cView style={styles.header}\u003e\r\n            \u003cText style={[globalStyles.title, { fontSize: 20, color: colors.textPrimary }]}\u003e\r\n              {isEditing ? \u0027Edit News\u0027 : \u0027Add News\u0027}\r\n            \u003c/Text\u003e\r\n            \u003cPressable onPress={onClose} hitSlop={8}\u003e\r\n              \u003cMaterialIcons name=\"close\" size={24} color={colors.textSecondary} /\u003e\r\n            \u003c/Pressable\u003e\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={{ marginBottom: 12 }}\u003e\r\n            \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 8, marginLeft: 4 }}\u003eTITLE\u003c/Text\u003e\r\n            \u003cTextInput\r\n              style={[globalStyles.input, {\r\n                backgroundColor: colors.cardBackground,\r\n                color: colors.textPrimary,\r\n                borderColor: errors.title \u0026\u0026 touched.title ? colors.error : colors.border,\r\n                borderWidth: 1\r\n              }]}\r\n              placeholder=\"News title\"\r\n              placeholderTextColor={colors.textSecondary}\r\n              value={title}\r\n              onChangeText={(text) =\u003e handleChange(\u0027title\u0027, text)}\r\n              onBlur={() =\u003e handleBlur(\u0027title\u0027, title)}\r\n              maxLength={100}\r\n            /\u003e\r\n            {errors.title \u0026\u0026 touched.title \u0026\u0026 (\r\n              \u003cText style={{ color: colors.error, fontSize: 12, marginTop: 4, marginLeft: 4 }}\u003e{errors.title}\u003c/Text\u003e\r\n            )}\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={{ marginBottom: 12 }}\u003e\r\n            \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 8, marginLeft: 4 }}\u003eDESCRIPTION\u003c/Text\u003e\r\n            \u003cTextInput\r\n              style={[globalStyles.input, {\r\n                backgroundColor: colors.cardBackground,\r\n                color: colors.textPrimary,\r\n                borderColor: errors.description \u0026\u0026 touched.description ? colors.error : colors.border,\r\n                borderWidth: 1,\r\n                minHeight: 100,\r\n                paddingTop: 12,\r\n              }]}\r\n              placeholder=\"Description\"\r\n              placeholderTextColor={colors.textSecondary}\r\n              value={description}\r\n              onChangeText={(text) =\u003e handleChange(\u0027description\u0027, text)}\r\n              onBlur={() =\u003e handleBlur(\u0027description\u0027, description)}\r\n              multiline\r\n              numberOfLines={4}\r\n              maxLength={500}\r\n            /\u003e\r\n            {errors.description \u0026\u0026 touched.description \u0026\u0026 (\r\n              \u003cText style={{ color: colors.error, fontSize: 12, marginTop: 4, marginLeft: 4 }}\u003e{errors.description}\u003c/Text\u003e\r\n            )}\r\n          \u003c/View\u003e\r\n\r\n          \u003cView style={{ marginBottom: 16 }}\u003e\r\n            \u003cText style={{ fontSize: 13, fontWeight: \"600\", color: colors.textSecondary, marginBottom: 8, marginLeft: 4 }}\u003eURL (OPTIONAL)\u003c/Text\u003e\r\n            \u003cTextInput\r\n              style={[globalStyles.input, {\r\n                backgroundColor: colors.cardBackground,\r\n                color: colors.textPrimary,\r\n                borderColor: errors.url \u0026\u0026 touched.url ? colors.error : colors.border,\r\n                borderWidth: 1\r\n              }]}\r\n              placeholder=\"https://example.com\"\r\n              placeholderTextColor={colors.textSecondary}\r\n              value={url}\r\n              onChangeText={(text) =\u003e handleChange(\u0027url\u0027, text)}\r\n              onBlur={() =\u003e handleBlur(\u0027url\u0027, url)}\r\n              maxLength={200}\r\n              autoCapitalize=\"none\"\r\n              keyboardType=\"url\"\r\n            /\u003e\r\n            {errors.url \u0026\u0026 touched.url \u0026\u0026 (\r\n              \u003cText style={{ color: colors.error, fontSize: 12, marginTop: 4, marginLeft: 4 }}\u003e{errors.url}\u003c/Text\u003e\r\n            )}\r\n          \u003c/View\u003e\r\n\r\n          \u003cPressable\r\n            style={{ marginBottom: 16, flexDirection: \u0027row\u0027, alignItems: \u0027center\u0027 }}\r\n            onPress={() =\u003e setPrivateNews(!privateNews)}\r\n          \u003e\r\n            \u003cMaterialIcons\r\n              name={privateNews ? \"check-box\" : \"check-box-outline-blank\"}\r\n              size={24}\r\n              color={colors.primary}\r\n              style={{ marginRight: 8 }}\r\n            /\u003e\r\n            \u003cText style={[globalStyles.cardText, { color: colors.textPrimary }]}\u003ePrivate News\u003c/Text\u003e\r\n          \u003c/Pressable\u003e\r\n\r\n          \u003cPressable\r\n            style={[globalStyles.buttonLarge, { width: \"100%\", backgroundColor: colors.primary }, loading \u0026\u0026 { opacity: 0.6 }]}\r\n            onPress={handleSubmit}\r\n            disabled={loading}\r\n          \u003e\r\n            \u003cText style={[globalStyles.buttonText, { color: colors.white }]}\u003e\r\n              {isEditing ? \u0027Update News\u0027 : \u0027Create News\u0027}\r\n            \u003c/Text\u003e\r\n          \u003c/Pressable\u003e\r\n        \u003c/View\u003e\r\n      \u003c/View\u003e\r\n    \u003c/Modal\u003e\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  overlay: {\r\n    flex: 1,\r\n    justifyContent: \u0027center\u0027,\r\n    alignItems: \u0027center\u0027,\r\n    backgroundColor: \u0027rgba(0,0,0,0.6)\u0027,\r\n    padding: 20,\r\n  },\r\n  container: {\r\n    width: \u0027100%\u0027,\r\n    maxWidth: 400,\r\n    padding: 24,\r\n    borderRadius: 20,\r\n    elevation: 8,\r\n    shadowColor: \u0027#000\u0027,\r\n    shadowOffset: { width: 0, height: 4 },\r\n    shadowOpacity: 0.3,\r\n    shadowRadius: 12,\r\n  },\r\n  header: {\r\n    flexDirection: \u0027row\u0027,\r\n    justifyContent: \u0027space-between\u0027,\r\n    alignItems: \u0027center\u0027,\r\n    marginBottom: 20,\r\n  },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\PostContentModal.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027ScrollView\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  5,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  15
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027MaterialIcons\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  10,
                                           "column":  10,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  10,
                                           "endColumn":  23
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027styles\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  14,
                                           "column":  13,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  14,
                                           "endColumn":  19
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  3,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    Modal,\r\n    TextInput,\r\n    Pressable,\r\n    ScrollView,\r\n} from \"react-native\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { useTheme } from \"../theme\";\r\n\r\nexport default function PostContentModal({ visible, onClose, onSubmit }) {\r\n    const { styles, colors } = useTheme();\r\n    const [form, setForm] = useState({\r\n        title: \"\",\r\n        description: \"\",\r\n        type: \"note\", // note, homework, news\r\n    });\r\n\r\n    const handleSubmit = () =\u003e {\r\n        if (!form.title || !form.description) {\r\n            // Basic validation, parent can do more\r\n            return;\r\n        }\r\n        onSubmit(form);\r\n        // Reset form after submit (optional, depending on UX preference)\r\n        setForm({ title: \"\", description: \"\", type: \"note\" });\r\n    };\r\n\r\n    const getContentTypeColor = (type) =\u003e {\r\n        switch (type) {\r\n            case \"homework\": return colors.error;\r\n            case \"news\": return colors.primary;\r\n            default: return colors.secondary;\r\n        }\r\n    };\r\n\r\n    return (\r\n        \u003cModal visible={visible} animationType=\"slide\" transparent\u003e\r\n            \u003cView style={{ flex: 1, justifyContent: \"center\", backgroundColor: \"rgba(0,0,0,0.5)\", padding: 20 }}\u003e\r\n                \u003cView style={{ backgroundColor: colors.cardBackground, borderRadius: 16, padding: 24 }}\u003e\r\n                    \u003cText style={{ fontSize: 20, fontWeight: \"700\", color: colors.textPrimary, marginBottom: 16 }}\u003e\r\n                        Post Class Content\r\n                    \u003c/Text\u003e\r\n\r\n                    \u003cTextInput\r\n                        placeholder=\"Title (e.g. Math Homework)\"\r\n                        placeholderTextColor={colors.textSecondary}\r\n                        style={{\r\n                            backgroundColor: colors.background,\r\n                            padding: 12,\r\n                            borderRadius: 8,\r\n                            color: colors.textPrimary,\r\n                            marginBottom: 12\r\n                        }}\r\n                        value={form.title}\r\n                        onChangeText={(t) =\u003e setForm({ ...form, title: t })}\r\n                    /\u003e\r\n\r\n                    \u003cTextInput\r\n                        placeholder=\"Description\"\r\n                        placeholderTextColor={colors.textSecondary}\r\n                        multiline\r\n                        numberOfLines={4}\r\n                        style={{\r\n                            backgroundColor: colors.background,\r\n                            padding: 12,\r\n                            borderRadius: 8,\r\n                            color: colors.textPrimary,\r\n                            marginBottom: 12,\r\n                            height: 100,\r\n                            textAlignVertical: \"top\"\r\n                        }}\r\n                        value={form.description}\r\n                        onChangeText={(t) =\u003e setForm({ ...form, description: t })}\r\n                    /\u003e\r\n\r\n                    {/* Type Selection */}\r\n                    \u003cView style={{ marginBottom: 24 }}\u003e\r\n                        \u003cText style={{ color: colors.textSecondary, marginBottom: 8, fontSize: 12 }}\u003eCONTENT TYPE\u003c/Text\u003e\r\n                        \u003cView style={{ flexDirection: \"row\", gap: 8 }}\u003e\r\n                            {[\"note\", \"homework\", \"news\"].map(type =\u003e (\r\n                                \u003cPressable\r\n                                    key={type}\r\n                                    onPress={() =\u003e setForm({ ...form, type })}\r\n                                    style={{\r\n                                        paddingHorizontal: 12,\r\n                                        paddingVertical: 8,\r\n                                        backgroundColor: form.type === type ? getContentTypeColor(type) : colors.background,\r\n                                        borderRadius: 8,\r\n                                        borderWidth: 1,\r\n                                        borderColor: form.type === type ? getContentTypeColor(type) : colors.border\r\n                                    }}\r\n                                \u003e\r\n                                    \u003cText style={{ color: form.type === type ? \u0027#fff\u0027 : colors.textPrimary, textTransform: \"capitalize\", fontWeight: \"600\" }}\u003e\r\n                                        {type}\r\n                                    \u003c/Text\u003e\r\n                                \u003c/Pressable\u003e\r\n                            ))}\r\n                        \u003c/View\u003e\r\n                    \u003c/View\u003e\r\n\r\n                    \u003cView style={{ flexDirection: \"row\", justifyContent: \"flex-end\", gap: 12 }}\u003e\r\n                        \u003cPressable onPress={onClose} style={{ padding: 12 }}\u003e\r\n                            \u003cText style={{ color: colors.textSecondary, fontWeight: \"600\" }}\u003eCancel\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                        \u003cPressable\r\n                            onPress={handleSubmit}\r\n                            style={{ backgroundColor: colors.primary, paddingHorizontal: 20, paddingVertical: 12, borderRadius: 8 }}\r\n                        \u003e\r\n                            \u003cText style={{ color: \"#fff\", fontWeight: \"600\" }}\u003ePost\u003c/Text\u003e\r\n                        \u003c/Pressable\u003e\r\n                    \u003c/View\u003e\r\n                \u003c/View\u003e\r\n            \u003c/View\u003e\r\n        \u003c/Modal\u003e\r\n    );\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\SchoolPhotoCarousel.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "react/display-name",
                                           "severity":  2,
                                           "message":  "Component definition is missing display name",
                                           "line":  11,
                                           "column":  22,
                                           "nodeType":  "CallExpression",
                                           "messageId":  "noDisplayName",
                                           "endLine":  49,
                                           "endColumn":  3
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { useState, useRef, useCallback, useEffect } from \u0027react\u0027;\r\nimport { Image } from \u0027expo-image\u0027;\r\nimport { View, FlatList, Dimensions, StyleSheet, Animated, ActivityIndicator } from \u0027react-native\u0027;\r\nimport { useTheme } from \u0027../theme\u0027;\r\nimport { getGoogleDriveEmbedUrl } from \u0027../utils/googleDrive\u0027;\r\nimport { MaterialIcons } from \u0027@expo/vector-icons\u0027;\r\n\r\nconst { width: SCREEN_WIDTH } = Dimensions.get(\u0027window\u0027);\r\n\r\n// Carousel Item Component with Lazy Loading and Caching\r\nconst CarouselItem = React.memo(({ item, width, height }) =\u003e {\r\n    const { colors } = useTheme();\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(false);\r\n    const imageUrl = getGoogleDriveEmbedUrl(item);\r\n\r\n    if (!imageUrl) return null;\r\n\r\n    return (\r\n        \u003cView style={[styles.itemContainer, { width, height }]}\u003e\r\n            \u003cView style={[styles.imageContainer, { backgroundColor: colors.cardBackground }]}\u003e\r\n                {loading \u0026\u0026 (\r\n                    \u003cView style={styles.loadingContainer}\u003e\r\n                        \u003cActivityIndicator size=\"small\" color={colors.primary} /\u003e\r\n                    \u003c/View\u003e\r\n                )}\r\n                {error ? (\r\n                    \u003cView style={[styles.errorContainer, { backgroundColor: colors.cardBackground }]}\u003e\r\n                        \u003cMaterialIcons name=\"broken-image\" size={40} color={colors.textSecondary} /\u003e\r\n                    \u003c/View\u003e\r\n                ) : (\r\n                    \u003cImage\r\n                        source={imageUrl}\r\n                        style={styles.image}\r\n                        contentFit=\"cover\"\r\n                        transition={500}\r\n                        cachePolicy=\"memory-disk\"\r\n                        onLoadStart={() =\u003e setLoading(true)}\r\n                        onLoad={() =\u003e setLoading(false)}\r\n                        onError={() =\u003e {\r\n                            setLoading(false);\r\n                            setError(true);\r\n                        }}\r\n                    /\u003e\r\n                )}\r\n            \u003c/View\u003e\r\n        \u003c/View\u003e\r\n    );\r\n});\r\n\r\nexport default function SchoolPhotoCarousel({ photos }) {\r\n    const { colors } = useTheme();\r\n    const [activeIndex, setActiveIndex] = useState(0);\r\n    const scrollX = useRef(new Animated.Value(0)).current;\r\n    const flatListRef = useRef(null);\r\n\r\n    // Hooks MUST be called before any early return to avoid \"Rendered more hooks\" error\r\n    const handleViewableItemsChanged = useCallback(({ viewableItems }) =\u003e {\r\n        if (viewableItems.length \u003e 0) {\r\n            setActiveIndex(viewableItems[0].index || 0);\r\n        }\r\n    }, []);\r\n\r\n    const viewabilityConfig = useRef({\r\n        itemVisiblePercentThreshold: 50,\r\n    }).current;\r\n\r\n    // Auto-scroll logic\r\n    useEffect(() =\u003e {\r\n        if (!photos || photos.length \u003c= 1) return;\r\n\r\n        const interval = setInterval(() =\u003e {\r\n            if (flatListRef.current) {\r\n                let nextIndex = activeIndex + 1;\r\n                if (nextIndex \u003e= photos.length) {\r\n                    nextIndex = 0; // Loop back to start\r\n                }\r\n\r\n                flatListRef.current.scrollToIndex({\r\n                    index: nextIndex,\r\n                    animated: true,\r\n                });\r\n                // activeIndex will be updated by handleViewableItemsChanged\r\n            }\r\n        }, 3000); // Slower auto-scroll for better UX\r\n\r\n        return () =\u003e clearInterval(interval);\r\n    }, [activeIndex, photos]);\r\n\r\n    // If no photos, collapse gracefully\r\n    if (!photos || photos.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    // Calculate item width based on container padding (20px on each side = 40px total)\r\n    // We want the carousel to fill the available width\r\n    const ITEM_WIDTH = SCREEN_WIDTH - 40;\r\n    const ITEM_HEIGHT = ITEM_WIDTH * 0.5625; // 16:9 Aspect Ratio\r\n\r\n    return (\r\n        \u003cView style={styles.container}\u003e\r\n            \u003cFlatList\r\n                ref={flatListRef}\r\n                data={photos}\r\n                renderItem={({ item }) =\u003e (\r\n                    \u003cCarouselItem item={item} width={ITEM_WIDTH} height={ITEM_HEIGHT} /\u003e\r\n                )}\r\n                keyExtractor={(item, index) =\u003e `school-photo-${index}`}\r\n                horizontal\r\n                pagingEnabled\r\n                showsHorizontalScrollIndicator={false}\r\n                bounces={false}\r\n                onScroll={Animated.event(\r\n                    [{ nativeEvent: { contentOffset: { x: scrollX } } }],\r\n                    { useNativeDriver: false }\r\n                )}\r\n                onViewableItemsChanged={handleViewableItemsChanged}\r\n                viewabilityConfig={viewabilityConfig}\r\n                scrollEventThrottle={32}\r\n                decelerationRate=\"fast\"\r\n                snapToInterval={ITEM_WIDTH}\r\n                getItemLayout={(data, index) =\u003e ({\r\n                    length: ITEM_WIDTH,\r\n                    offset: ITEM_WIDTH * index,\r\n                    index,\r\n                })}\r\n            /\u003e\r\n\r\n            {/* Pagination Dots */}\r\n            {photos.length \u003e 1 \u0026\u0026 (\r\n                \u003cView style={styles.pagination}\u003e\r\n                    {photos.map((_, index) =\u003e {\r\n                        const inputRange = [\r\n                            (index - 1) * ITEM_WIDTH,\r\n                            index * ITEM_WIDTH,\r\n                            (index + 1) * ITEM_WIDTH,\r\n                        ];\r\n\r\n                        const dotWidth = scrollX.interpolate({\r\n                            inputRange,\r\n                            outputRange: [6, 20, 6],\r\n                            extrapolate: \u0027clamp\u0027,\r\n                        });\r\n\r\n                        const opacity = scrollX.interpolate({\r\n                            inputRange,\r\n                            outputRange: [0.3, 1, 0.3],\r\n                            extrapolate: \u0027clamp\u0027,\r\n                        });\r\n\r\n                        return (\r\n                            \u003cAnimated.View\r\n                                key={index}\r\n                                style={[\r\n                                    styles.dot,\r\n                                    {\r\n                                        width: dotWidth,\r\n                                        backgroundColor: colors.primary,\r\n                                        opacity,\r\n                                    },\r\n                                ]}\r\n                            /\u003e\r\n                        );\r\n                    })}\r\n                \u003c/View\u003e\r\n            )}\r\n        \u003c/View\u003e\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        marginBottom: 24,\r\n        borderRadius: 24,\r\n        overflow: \u0027hidden\u0027,\r\n        // Shadow for the whole carousel container\r\n        shadowColor: \"#000\",\r\n        shadowOffset: { width: 0, height: 10 },\r\n        shadowOpacity: 0.08,\r\n        shadowRadius: 20,\r\n        elevation: 6,\r\n        backgroundColor: \u0027transparent\u0027 // Let the card background show through\r\n    },\r\n    itemContainer: {\r\n        overflow: \u0027hidden\u0027,\r\n        borderRadius: 24,\r\n    },\r\n    imageContainer: {\r\n        flex: 1,\r\n        overflow: \u0027hidden\u0027,\r\n        borderRadius: 24,\r\n        justifyContent: \u0027center\u0027,\r\n        alignItems: \u0027center\u0027,\r\n    },\r\n    image: {\r\n        width: \u0027100%\u0027,\r\n        height: \u0027100%\u0027,\r\n    },\r\n    loadingContainer: {\r\n        ...StyleSheet.absoluteFillObject,\r\n        justifyContent: \u0027center\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        zIndex: 1,\r\n    },\r\n    errorContainer: {\r\n        ...StyleSheet.absoluteFillObject,\r\n        justifyContent: \u0027center\u0027,\r\n        alignItems: \u0027center\u0027,\r\n    },\r\n    pagination: {\r\n        flexDirection: \u0027row\u0027,\r\n        justifyContent: \u0027center\u0027,\r\n        alignItems: \u0027center\u0027,\r\n        marginTop: 12,\r\n    },\r\n    dot: {\r\n        height: 6,\r\n        borderRadius: 3,\r\n        marginHorizontal: 3,\r\n    },\r\n});\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\ThemeToggle.jsx",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\components\\ToastProvider.jsx",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027colors\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  21,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  21,
                                           "endColumn":  17
                                       },
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027onDismiss\u0027 is defined but never used. Allowed unused args must match /^_/u.",
                                           "line":  55,
                                           "column":  33,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  55,
                                           "endColumn":  42
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  2,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, { createContext, useContext, useState, useCallback } from \"react\";\nimport { StyleSheet, Text, View, Platform } from \"react-native\";\nimport { useTheme } from \"../theme\";\nimport Animated, {\n  SlideInUp,\n  SlideOutUp,\n  Layout\n} from \u0027react-native-reanimated\u0027;\nimport { Feather } from \u0027@expo/vector-icons\u0027;\nimport { useSafeAreaInsets } from \u0027react-native-safe-area-context\u0027;\nimport { BlurView } from \u0027expo-blur\u0027;\n\nconst ToastContext = createContext({ showToast: (_msg, _type) =\u003e { } });\n\nexport function useToast() {\n  return useContext(ToastContext);\n}\n\nexport function ToastProvider({ children }) {\n  const [toasts, setToasts] = useState([]);\n  const { colors } = useTheme();\n  const insets = useSafeAreaInsets();\n\n  const removeToast = useCallback((id) =\u003e {\n    setToasts((prev) =\u003e prev.filter((t) =\u003e t.id !== id));\n  }, []);\n\n  const showToast = useCallback((msg, type = \u0027info\u0027, duration = 3000) =\u003e {\n    const id = Date.now().toString();\n    setToasts((prev) =\u003e [...prev, { id, msg, type }]);\n\n    if (duration \u003e 0) {\n      setTimeout(() =\u003e {\n        removeToast(id);\n      }, duration);\n    }\n  }, [removeToast]);\n\n  return (\n    \u003cToastContext.Provider value={{ showToast }}\u003e\n      {children}\n      \u003cView style={[styles.container, { top: insets.top + 10 }]} pointerEvents=\"box-none\"\u003e\n        {toasts.map((toast) =\u003e (\n          \u003cToastItem\n            key={toast.id}\n            {...toast}\n            onDismiss={() =\u003e removeToast(toast.id)}\n          /\u003e\n        ))}\n      \u003c/View\u003e\n    \u003c/ToastContext.Provider\u003e\n  );\n}\n\nfunction ToastItem({ msg, type, onDismiss }) {\n  const getToastConfig = () =\u003e {\n    switch (type) {\n      case \u0027success\u0027:\n        return {\n          icon: \u0027check-circle\u0027,\n          accentColor: \u0027#10B981\u0027, // Green\n        };\n      case \u0027error\u0027:\n        return {\n          icon: \u0027alert-circle\u0027,\n          accentColor: \u0027#EF4444\u0027, // Red\n        };\n      case \u0027info\u0027:\n      default:\n        return {\n          icon: \u0027info\u0027,\n          accentColor: \u0027#3B82F6\u0027, // Blue\n        };\n    }\n  };\n\n  const config = getToastConfig();\n\n  return (\n    \u003cAnimated.View\n      entering={SlideInUp.springify().damping(20).stiffness(150)}\n      exiting={SlideOutUp.springify().damping(20).stiffness(150)}\n      layout={Layout.springify()}\n      style={styles.toastWrapper}\n    \u003e\n      {Platform.OS === \u0027ios\u0027 ? (\n        \u003cBlurView intensity={80} tint=\"light\" style={styles.blurContainer}\u003e\n          \u003cToastContent msg={msg} config={config} /\u003e\n        \u003c/BlurView\u003e\n      ) : (\n        \u003cView style={[styles.blurContainer, styles.androidBackground]}\u003e\n          \u003cToastContent msg={msg} config={config} /\u003e\n        \u003c/View\u003e\n      )}\n    \u003c/Animated.View\u003e\n  );\n}\n\nfunction ToastContent({ msg, config }) {\n  return (\n    \u003cView style={styles.contentContainer}\u003e\n      \u003cView style={[styles.iconContainer, { backgroundColor: config.accentColor + \u002715\u0027 }]}\u003e\n        \u003cFeather name={config.icon} size={18} color={config.accentColor} /\u003e\n      \u003c/View\u003e\n      \u003cText style={styles.text}\u003e{msg}\u003c/Text\u003e\n    \u003c/View\u003e\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    alignItems: \u0027center\u0027,\n    zIndex: 9999,\n  },\n  toastWrapper: {\n    width: \u002790%\u0027,\n    maxWidth: 400,\n    marginBottom: 10,\n    borderRadius: 16,\n    overflow: \u0027hidden\u0027,\n    // Shadow\n    shadowColor: \"#000\",\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 12,\n    elevation: 8,\n  },\n  blurContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 14,\n    flexDirection: \u0027row\u0027,\n    alignItems: \u0027center\u0027,\n  },\n  androidBackground: {\n    backgroundColor: \u0027rgba(255, 255, 255, 0.95)\u0027,\n    borderWidth: 1,\n    borderColor: \u0027rgba(0,0,0,0.05)\u0027,\n  },\n  contentContainer: {\n    flexDirection: \u0027row\u0027,\n    alignItems: \u0027center\u0027,\n    flex: 1,\n  },\n  iconContainer: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    justifyContent: \u0027center\u0027,\n    alignItems: \u0027center\u0027,\n    marginRight: 12,\n  },\n  text: {\n    fontSize: 14,\n    fontWeight: \u0027600\u0027,\n    fontFamily: \u0027DMSans-Medium\u0027,\n    color: \u0027#1F2937\u0027, // Dark gray\n    flex: 1,\n  },\n});\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\config\\apiConfig.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\constants\\basic-info.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\constants\\routes.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\context\\NavigationContext.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\hooks\\useApi.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\hooks\\useEvents.js",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027clearRefreshLock\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  10,
                                           "column":  3,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  10,
                                           "endColumn":  19
                                       },
                                       {
                                           "ruleId":  "no-empty",
                                           "severity":  2,
                                           "message":  "Empty block statement.",
                                           "line":  105,
                                           "column":  15,
                                           "nodeType":  "BlockStatement",
                                           "messageId":  "unexpected",
                                           "endLine":  106,
                                           "endColumn":  6,
                                           "suggestions":  [
                                                               {
                                                                   "messageId":  "suggestComment",
                                                                   "data":  {
                                                                                "type":  "block"
                                                                            },
                                                                   "fix":  {
                                                                               "range":  [
                                                                                             3093,
                                                                                             3099
                                                                                         ],
                                                                               "text":  " /* empty */ "
                                                                           },
                                                                   "desc":  "Add comment inside empty block statement."
                                                               }
                                                           ]
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  1,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import { useState, useEffect, useCallback, useRef } from \u0027react\u0027;\r\nimport AsyncStorage from \u0027@react-native-async-storage/async-storage\u0027;\r\nimport apiConfig from \u0027../config/apiConfig\u0027;\r\nimport {\r\n  getCachedData,\r\n  setCachedData,\r\n  isCacheStale,\r\n  isRefreshing,\r\n  setRefreshLock,\r\n  clearRefreshLock,\r\n  CACHE_KEYS,\r\n  CACHE_EXPIRY,\r\n  STALE_TIME\r\n} from \u0027../utils/cache\u0027;\r\nimport apiFetch from \u0027../utils/apiFetch\u0027;\r\nimport { useNetworkStatus } from \u0027../components/NetworkStatusProvider\u0027;\r\n\r\nexport default function useEvents() {\r\n  const [events, setEvents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const isMountedRef = useRef(true);\r\n\r\n  // Track current range for auto-refresh\r\n  const currentRangeRef = useRef({ start: null, end: null });\r\n\r\n  const { isConnected, registerOnlineCallback } = useNetworkStatus();\r\n\r\n  // Fetch events from API  \r\n  const fetchEventsFromAPI = useCallback(async (startDate, endDate, silent = false) =\u003e {\r\n    const token = await AsyncStorage.getItem(\u0027@auth_token\u0027);\r\n    const fetchOptions = { silent }; // Pass silent flag\r\n    if (token) {\r\n      fetchOptions.headers = { Authorization: `Bearer ${token}` };\r\n    }\r\n\r\n    const queryParts = [];\r\n    if (startDate) queryParts.push(`startDate=${encodeURIComponent(startDate)}`);\r\n    if (endDate) queryParts.push(`endDate=${encodeURIComponent(endDate)}`);\r\n    if (!startDate \u0026\u0026 !endDate) queryParts.push(\u0027limit=100\u0027);\r\n\r\n    const queryString = queryParts.length \u003e 0 ? `?${queryParts.join(\u0027\u0026\u0027)}` : \u0027\u0027;\r\n\r\n\r\n\r\n    const response = await apiFetch(\r\n      apiConfig.url(`${apiConfig.endpoints.events.list}${queryString}`),\r\n      fetchOptions\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    const eventsData = data.event || [];\r\n\r\n    if (!Array.isArray(eventsData)) {\r\n      throw new Error(\u0027Invalid events data structure from API\u0027);\r\n    }\r\n\r\n\r\n    return eventsData;\r\n  }, []);\r\n\r\n  // Fetch events with smart caching\r\n  const fetchEventsRange = useCallback(async (startDate, endDate, callback, silent = false) =\u003e {\r\n    const cacheKey = CACHE_KEYS.EVENTS;\r\n\r\n    // Update current range ref\r\n    currentRangeRef.current = { start: startDate, end: endDate };\r\n\r\n    // If offline, just return (we rely on cache which is already loaded)\r\n    if (!isConnected) {\r\n\r\n      if (callback) callback(null, 0);\r\n      return;\r\n    }\r\n\r\n    // Prevent duplicate fetches\r\n    if (isRefreshing(cacheKey)) {\r\n\r\n      if (callback) callback(null, 0);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setRefreshLock(cacheKey);\r\n\r\n      const eventsData = await fetchEventsFromAPI(startDate, endDate, silent);\r\n\r\n      if (isMountedRef.current) {\r\n        setEvents(eventsData);\r\n        setError(null);\r\n      }\r\n\r\n      await setCachedData(cacheKey, eventsData);\r\n\r\n\r\n      if (callback) callback(null, eventsData.length);\r\n    } catch (err) {\r\n\r\n      // Suppress network errors as requested\r\n      if (callback) callback(err);\r\n    } finally {\r\n    }\r\n  }, [fetchEventsFromAPI, isConnected]);\r\n\r\n  // Initial load with cache-first strategy\r\n  useEffect(() =\u003e {\r\n    let cancelled = false;\r\n\r\n    const loadEvents = async () =\u003e {\r\n      const cacheKey = CACHE_KEYS.EVENTS;\r\n\r\n      try {\r\n        // Step 1: Try to load from cache first\r\n        const cachedEvents = await getCachedData(cacheKey, CACHE_EXPIRY.EVENTS);\r\n\r\n        if (cachedEvents \u0026\u0026 cachedEvents.length \u003e 0 \u0026\u0026 !cancelled) {\r\n\r\n          setEvents(cachedEvents);\r\n          setLoading(false);\r\n\r\n          // Step 2: Check if cache is stale or if we should refresh\r\n          const isStale = await isCacheStale(cacheKey, STALE_TIME.EVENTS);\r\n\r\n          if (isStale \u0026\u0026 isConnected) {\r\n\r\n            // Refresh in background without showing loader\r\n            const now = new Date();\r\n            const startOfMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1).toISOString();\r\n            const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 2, 0).toISOString();\r\n            fetchEventsRange(startOfMonth, endOfMonth, null, true); // silent=true\r\n          }\r\n        } else {\r\n          // Step 3: No cache, fetch from API\r\n\r\n          const now = new Date();\r\n          const startOfMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1).toISOString();\r\n          const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 2, 0).toISOString();\r\n\r\n          await fetchEventsRange(startOfMonth, endOfMonth, null, true); // silent=true (prevent global loader)\r\n\r\n          if (!cancelled) {\r\n            setLoading(false);\r\n          }\r\n        }\r\n      } catch (err) {\r\n\r\n        if (!cancelled) {\r\n          // setError(err.message); // Suppress error\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadEvents();\r\n\r\n    return () =\u003e {\r\n      cancelled = true;\r\n    };\r\n  }, [fetchEventsRange, isConnected]);\r\n\r\n  // Register online callback for auto-refresh\r\n  useEffect(() =\u003e {\r\n    const unsubscribe = registerOnlineCallback(() =\u003e {\r\n\r\n      const { start, end } = currentRangeRef.current;\r\n      if (start \u0026\u0026 end) {\r\n        fetchEventsRange(start, end, null, true); // silent refresh\r\n      } else {\r\n        // Default range if none set\r\n        const now = new Date();\r\n        const startOfMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1).toISOString();\r\n        const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 2, 0).toISOString();\r\n        fetchEventsRange(startOfMonth, endOfMonth, null, true);\r\n      }\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [registerOnlineCallback, fetchEventsRange]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() =\u003e {\r\n    return () =\u003e {\r\n      isMountedRef.current = false;\r\n    };\r\n  }, []);\r\n\r\n  // Helper functions for CRUD operations\r\n  const addEvent = useCallback((newEvent) =\u003e {\r\n    const normalized = { ...newEvent };\r\n    if (!normalized._id \u0026\u0026 normalized.id) normalized._id = normalized.id;\r\n    // Handle various boolean formats\r\n    if (typeof normalized.isSchoolEvent === \u0027string\u0027) {\r\n      normalized.isSchoolEvent = normalized.isSchoolEvent === \u0027true\u0027;\r\n    } else {\r\n      normalized.isSchoolEvent = Boolean(normalized.isSchoolEvent);\r\n    }\r\n\r\n    setEvents(prev =\u003e {\r\n      const updated = [...prev, normalized];\r\n      // Update cache in background\r\n      setCachedData(CACHE_KEYS.EVENTS, updated);\r\n      return updated;\r\n    });\r\n  }, []);\r\n\r\n  const updateEvent = useCallback((updatedEvent) =\u003e {\r\n    const normalized = { ...updatedEvent };\r\n    if (!normalized._id \u0026\u0026 normalized.id) normalized._id = normalized.id;\r\n\r\n    setEvents(prev =\u003e {\r\n      const updated = prev.map(event =\u003e\r\n        event._id === normalized._id ? normalized : event\r\n      );\r\n      // Update cache in background\r\n      setCachedData(CACHE_KEYS.EVENTS, updated);\r\n      return updated;\r\n    });\r\n  }, []);\r\n\r\n  const removeEvent = useCallback((eventId) =\u003e {\r\n    setEvents(prev =\u003e {\r\n      const updated = prev.filter(event =\u003e event._id !== eventId);\r\n      // Update cache in background\r\n      setCachedData(CACHE_KEYS.EVENTS, updated);\r\n      return updated;\r\n    });\r\n  }, []);\r\n\r\n  return {\r\n    events,\r\n    loading,\r\n    error,\r\n    addEvent,\r\n    updateEvent,\r\n    removeEvent,\r\n    fetchEventsRange,\r\n    refreshEvents: useCallback(async (silent = true) =\u003e {\r\n      const { start, end } = currentRangeRef.current;\r\n      if (start \u0026\u0026 end) {\r\n        await fetchEventsRange(start, end, null, silent);\r\n      } else {\r\n        // Default to current month if no range set\r\n        const now = new Date();\r\n        const startOfMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1).toISOString();\r\n        const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 2, 0).toISOString();\r\n        await fetchEventsRange(startOfMonth, endOfMonth, null, silent);\r\n      }\r\n    }, [fetchEventsRange])\r\n  };\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\hooks\\useFade.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\hooks\\useSchoolInfo.js",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027useRef\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  1,
                                           "column":  31,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  1,
                                           "endColumn":  37
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import { useState, useEffect, useRef } from \u0027react\u0027;\r\nimport apiConfig from \u0027../config/apiConfig\u0027;\r\nimport apiFetch from \u0027../utils/apiFetch\u0027;\r\nimport { SCHOOL as FALLBACK_SCHOOL } from \u0027../constants/basic-info\u0027;\r\nimport { getCachedData, setCachedData, CACHE_KEYS, CACHE_EXPIRY } from \u0027../utils/cache\u0027;\r\nimport { useNetworkStatus } from \u0027../components/NetworkStatusProvider\u0027;\r\n\r\n// Global cache for school info to persist across component re-mounts\r\nlet globalSchoolInfo = null;\r\nlet globalLoading = true;\r\nlet globalError = null;\r\nlet isFetched = false;\r\n\r\nexport default function useSchoolInfo() {\r\n  const [schoolInfo, setSchoolInfo] = useState(globalSchoolInfo || FALLBACK_SCHOOL);\r\n  const [loading, setLoading] = useState(globalLoading);\r\n  const [error, setError] = useState(globalError);\r\n\r\n  const { isConnected, registerOnlineCallback } = useNetworkStatus();\r\n\r\n  useEffect(() =\u003e {\r\n    if (isFetched) {\r\n      // If already fetched, use cached data\r\n      setSchoolInfo(globalSchoolInfo);\r\n      setLoading(globalLoading);\r\n      setError(globalError);\r\n\r\n      // If we have data but it might be stale, try to refresh silently if connected\r\n      if (isConnected) {\r\n        fetchFreshSchoolInfo(true);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const fetchSchoolInfo = async () =\u003e {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        // Try to get cached data first\r\n        const cachedSchoolInfo = await getCachedData(CACHE_KEYS.SCHOOL_INFO, CACHE_EXPIRY.SCHOOL_INFO);\r\n        if (cachedSchoolInfo) {\r\n          globalSchoolInfo = cachedSchoolInfo;\r\n          setSchoolInfo(cachedSchoolInfo);\r\n          setLoading(false);\r\n          globalLoading = false;\r\n          isFetched = true;\r\n\r\n          // Fetch fresh data in background if connected\r\n          if (isConnected) {\r\n            fetchFreshSchoolInfo(true);\r\n          }\r\n          return;\r\n        }\r\n\r\n        // No cache, fetch from API if connected\r\n        if (isConnected) {\r\n          await fetchFreshSchoolInfo(true);\r\n        } else {\r\n          // Offline and no cache, use fallback\r\n\r\n          globalSchoolInfo = FALLBACK_SCHOOL;\r\n          setLoading(false);\r\n          globalLoading = false;\r\n          isFetched = true;\r\n        }\r\n      } catch (err) {\r\n\r\n        // setError(err.message); // Suppress error\r\n        // globalError = err.message;\r\n        // Keep the fallback data already set in state\r\n        globalSchoolInfo = FALLBACK_SCHOOL;\r\n        setLoading(false);\r\n        globalLoading = false;\r\n        isFetched = true;\r\n      }\r\n    };\r\n\r\n    fetchSchoolInfo();\r\n  }, [isConnected]);\r\n\r\n  const fetchFreshSchoolInfo = async (silent = false) =\u003e {\r\n    if (!isConnected) return;\r\n\r\n    try {\r\n\r\n      const response = await apiFetch(apiConfig.url(apiConfig.endpoints.schoolInfo.get), { silent });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success \u0026\u0026 result.data) {\r\n        // Transform the data to match the expected structure\r\n        const transformedData = {\r\n          name: result.data.name,\r\n          address: result.data.address,\r\n          phone: result.data.phone,\r\n          email: result.data.email,\r\n          mapUrl: result.data.mapUrl,\r\n          mapAppUrl: result.data.mapAppUrl,\r\n          mission: result.data.mission,\r\n          about: result.data.about,\r\n          socials: result.data.socials,\r\n          news: result.data.news || [],\r\n          photoUrl: result.data.photoUrl || []\r\n        };\r\n\r\n        globalSchoolInfo = transformedData;\r\n        setSchoolInfo(transformedData);\r\n\r\n        // Cache the fresh data\r\n        await setCachedData(CACHE_KEYS.SCHOOL_INFO, transformedData);\r\n      } else {\r\n        // If backend doesn\u0027t have data, keep fallback\r\n\r\n        if (!globalSchoolInfo) globalSchoolInfo = FALLBACK_SCHOOL;\r\n      }\r\n    } catch (err) {\r\n\r\n      // Don\u0027t override existing cached data if fetch fails\r\n      if (!globalSchoolInfo) {\r\n        // setError(err.message); // Suppress error\r\n        // globalError = err.message;\r\n        globalSchoolInfo = FALLBACK_SCHOOL;\r\n      }\r\n    }\r\n  };\r\n\r\n  // Register online callback\r\n  useEffect(() =\u003e {\r\n    const unsubscribe = registerOnlineCallback(() =\u003e {\r\n\r\n      fetchFreshSchoolInfo(true);\r\n    });\r\n    return unsubscribe;\r\n  }, [registerOnlineCallback]);\r\n\r\n  return { schoolInfo, loading, error, refresh: fetchFreshSchoolInfo };\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\theme.js",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027Platform\u0027 is defined but never used. Allowed unused vars must match /^_/u.",
                                           "line":  8,
                                           "column":  34,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  8,
                                           "endColumn":  42
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import React, {\r\n  createContext,\r\n  useContext,\r\n  useMemo,\r\n  useState,\r\n  useEffect,\r\n} from \"react\";\r\nimport { StyleSheet, Appearance, Platform } from \"react-native\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nconst FONTS = {\r\n  bold: \"DMSans-Bold\",\r\n  semiBold: \"DMSans-SemiBold\",\r\n  medium: \"DMSans-Medium\",\r\n  regular: \"DMSans-Regular\",\r\n};\r\n\r\n// Modern, Premium Color Palette\r\nconst lightColors = {\r\n  primary: \"#2F6CD4\", // Vibrant Blue (Inter-like)\r\n  secondary: \"#F97316\", // Modern Orange\r\n  background: \"#F8FAFC\", // Cool Gray 50\r\n  cardBackground: \"#FFFFFF\",\r\n  textPrimary: \"#0F172A\", // Slate 900\r\n  textSecondary: \"#64748B\", // Slate 500\r\n  border: \"#E2E8F0\", // Slate 200\r\n  shadow: \"#64748B\",\r\n  error: \"#EF4444\", // Red 500\r\n  white: \"#FFFFFF\",\r\n  roleSuperAdmin: \"#F43F5E\", // Rose 500\r\n  roleAdmin: \"#10B981\", // Emerald 500\r\n  roleStaff: \"#0EA5E9\", // Sky 500\r\n  roleClassTeacher: \"#8B5CF6\", // Violet 500\r\n  roleStudent: \"#F59E0B\", // Amber 500\r\n  success: \"#22C55E\", // Green 500\r\n  // Surface variants for pills/backgrounds\r\n  primaryLight: \"#EFF6FF\", // Blue 50\r\n  successLight: \"#F0FDF4\", // Green 50\r\n  errorLight: \"#FEF2F2\", // Red 50\r\n  warningLight: \"#FFFBEB\", // Amber 50\r\n};\r\n\r\nconst darkColors = {\r\n  primary: \"#3B82F6\", // Blue 500\r\n  secondary: \"#FB923C\", // Orange 400\r\n  background: \"#0F172A\", // Slate 900\r\n  cardBackground: \"#1E293B\", // Slate 800\r\n  textPrimary: \"#F1F5F9\", // Slate 100\r\n  textSecondary: \"#94A3B8\", // Slate 400\r\n  border: \"#334155\", // Slate 700\r\n  shadow: \"#000000\",\r\n  error: \"#F87171\", // Red 400\r\n  white: \"#FFFFFF\",\r\n  roleSuperAdmin: \"#FB7185\", // Rose 400\r\n  roleAdmin: \"#34D399\", // Emerald 400\r\n  roleStaff: \"#38BDF8\", // Sky 400\r\n  roleClassTeacher: \"#A78BFA\", // Violet 400\r\n  roleStudent: \"#FBBF24\", // Amber 400\r\n  success: \"#4ADE80\", // Green 400\r\n  // Surface variants\r\n  primaryLight: \"rgba(59, 130, 246, 0.15)\",\r\n  successLight: \"rgba(74, 222, 128, 0.15)\",\r\n  errorLight: \"rgba(248, 113, 113, 0.15)\",\r\n  warningLight: \"rgba(251, 191, 36, 0.15)\",\r\n};\r\n\r\nfunction createGlobalStyles(COLORS, mode) {\r\n  return StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: COLORS.background,\r\n      paddingHorizontal: 20, // Increased padding\r\n      paddingTop: 24,\r\n      paddingBottom: 32,\r\n    },\r\n    title: {\r\n      fontSize: 32, // Larger title\r\n      fontFamily: FONTS.bold,\r\n      color: COLORS.textPrimary, // Use textPrimary instead of primary for cleaner look\r\n      marginBottom: 24,\r\n      textAlign: \"left\", // Left align for modern feel\r\n      letterSpacing: -1,\r\n    },\r\n    headerTitle: {\r\n      fontSize: 24,\r\n      fontFamily: FONTS.bold,\r\n      color: COLORS.textPrimary,\r\n      letterSpacing: -0.5,\r\n      marginBottom: 4,\r\n    },\r\n    subHeader: {\r\n      fontSize: 16,\r\n      fontFamily: FONTS.regular,\r\n      color: COLORS.textSecondary,\r\n      marginBottom: 32,\r\n      lineHeight: 24,\r\n    },\r\n    label: {\r\n      fontSize: 13,\r\n      fontFamily: FONTS.semiBold,\r\n      color: COLORS.textSecondary,\r\n      textTransform: \"uppercase\",\r\n      letterSpacing: 0.5,\r\n      marginBottom: 8,\r\n    },\r\n    text: {\r\n      fontSize: 16,\r\n      fontFamily: FONTS.regular,\r\n      color: COLORS.textSecondary,\r\n      lineHeight: 26,\r\n      marginBottom: 12,\r\n    },\r\n    link: {\r\n      fontSize: 16,\r\n      fontFamily: FONTS.semiBold,\r\n      color: COLORS.primary,\r\n    },\r\n    iconLabel: {\r\n      marginTop: 6,\r\n      fontSize: 13,\r\n      fontFamily: FONTS.medium,\r\n      color: COLORS.textSecondary,\r\n    },\r\n    buttonText: {\r\n      fontSize: 16,\r\n      fontFamily: FONTS.semiBold,\r\n      color: COLORS.white,\r\n      textAlign: \"center\",\r\n      letterSpacing: 0.3,\r\n    },\r\n    errorText: {\r\n      fontSize: 14,\r\n      fontFamily: FONTS.medium,\r\n      color: COLORS.error,\r\n      marginTop: 8,\r\n    },\r\n    row: {\r\n      flexDirection: \"row\",\r\n      alignItems: \"center\",\r\n    },\r\n    fullWidth: {\r\n      width: \"100%\",\r\n    },\r\n    divider: {\r\n      height: 1,\r\n      backgroundColor: COLORS.border,\r\n      marginVertical: 24,\r\n    },\r\n    // Premium Card Style\r\n    card: {\r\n      backgroundColor: COLORS.cardBackground,\r\n      borderRadius: 24, // More rounded\r\n      padding: 24,\r\n      marginBottom: 20,\r\n      shadowColor: COLORS.shadow,\r\n      shadowOffset: { width: 0, height: 8 }, // Deeper shadow\r\n      shadowOpacity: mode === \u0027dark\u0027 ? 0.4 : 0.08,\r\n      shadowRadius: 16,\r\n      elevation: 6,\r\n      borderWidth: 1,\r\n      borderColor: mode === \u0027dark\u0027 ? \u0027rgba(255,255,255,0.05)\u0027 : \u0027rgba(0,0,0,0.02)\u0027,\r\n    },\r\n    // Legacy support for cardMinimal (aliased to card for consistency)\r\n    cardMinimal: {\r\n      backgroundColor: COLORS.cardBackground,\r\n      borderRadius: 20,\r\n      padding: 20,\r\n      marginBottom: 16,\r\n      shadowColor: COLORS.shadow,\r\n      shadowOffset: { width: 0, height: 4 },\r\n      shadowOpacity: mode === \u0027dark\u0027 ? 0.3 : 0.05,\r\n      shadowRadius: 12,\r\n      elevation: 3,\r\n      borderWidth: 1,\r\n      borderColor: mode === \u0027dark\u0027 ? \u0027rgba(255,255,255,0.05)\u0027 : \u0027rgba(0,0,0,0.02)\u0027,\r\n    },\r\n    // Glassmorphism Utility\r\n    glass: {\r\n      backgroundColor: mode === \u0027dark\u0027 ? \u0027rgba(30, 41, 59, 0.7)\u0027 : \u0027rgba(255, 255, 255, 0.7)\u0027,\r\n      borderColor: mode === \u0027dark\u0027 ? \u0027rgba(255, 255, 255, 0.1)\u0027 : \u0027rgba(255, 255, 255, 0.5)\u0027,\r\n      borderWidth: 1,\r\n    },\r\n    input: {\r\n      borderWidth: 1,\r\n      borderColor: COLORS.border,\r\n      borderRadius: 16, // More rounded\r\n      paddingVertical: 16,\r\n      paddingHorizontal: 20,\r\n      fontSize: 16,\r\n      fontFamily: FONTS.regular,\r\n      color: COLORS.textPrimary,\r\n      backgroundColor: mode === \u0027dark\u0027 ? \u0027rgba(255,255,255,0.03)\u0027 : \u0027#FFFFFF\u0027,\r\n    },\r\n    inputMinimal: {\r\n      backgroundColor: mode === \u0027dark\u0027 ? \u0027rgba(255,255,255,0.05)\u0027 : \u0027#F1F5F9\u0027,\r\n      borderRadius: 16,\r\n      paddingHorizontal: 20,\r\n      paddingVertical: 16,\r\n      fontSize: 16,\r\n      color: COLORS.textPrimary,\r\n      borderWidth: 0,\r\n    },\r\n    inputFocused: {\r\n      borderWidth: 2,\r\n      borderColor: COLORS.primary,\r\n      backgroundColor: COLORS.cardBackground,\r\n    },\r\n    inputError: {\r\n      borderWidth: 2,\r\n      borderColor: COLORS.error,\r\n    },\r\n    button: {\r\n      backgroundColor: COLORS.primary,\r\n      paddingVertical: 16,\r\n      paddingHorizontal: 24,\r\n      borderRadius: 16,\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      shadowColor: COLORS.primary,\r\n      shadowOffset: { width: 0, height: 8 },\r\n      shadowOpacity: 0.25,\r\n      shadowRadius: 16,\r\n      elevation: 6,\r\n    },\r\n    buttonSmall: {\r\n      backgroundColor: COLORS.primary,\r\n      paddingVertical: 10,\r\n      paddingHorizontal: 16,\r\n      borderRadius: 12,\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      minHeight: 40,\r\n    },\r\n    buttonIcon: {\r\n      padding: 12,\r\n      borderRadius: 16,\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      minWidth: 48,\r\n      minHeight: 48,\r\n      backgroundColor: COLORS.primaryLight,\r\n    },\r\n    buttonLarge: {\r\n      backgroundColor: COLORS.primary,\r\n      paddingVertical: 18,\r\n      paddingHorizontal: 32,\r\n      borderRadius: 20,\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      minHeight: 60,\r\n      shadowColor: COLORS.primary,\r\n      shadowOffset: { width: 0, height: 10 },\r\n      shadowOpacity: 0.3,\r\n      shadowRadius: 20,\r\n      elevation: 10,\r\n    },\r\n    buttonSecondary: {\r\n      backgroundColor: \u0027transparent\u0027,\r\n      borderWidth: 2,\r\n      borderColor: COLORS.border,\r\n      paddingVertical: 14,\r\n      paddingHorizontal: 20,\r\n      borderRadius: 16,\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n    },\r\n    fab: {\r\n      position: \"absolute\",\r\n      bottom: 100,\r\n      right: 24,\r\n      backgroundColor: COLORS.primary,\r\n      width: 64, // Slightly larger\r\n      height: 64,\r\n      borderRadius: 32,\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      shadowColor: COLORS.primary,\r\n      shadowOffset: { width: 0, height: 10 },\r\n      shadowOpacity: 0.35,\r\n      shadowRadius: 20,\r\n      elevation: 10,\r\n    },\r\n    backButton: {\r\n      flexDirection: \"row\",\r\n      alignItems: \u0027center\u0027,\r\n      padding: 8,\r\n      marginLeft: -8,\r\n    },\r\n    iconRow: {\r\n      flexDirection: \"row\",\r\n      alignItems: \"center\",\r\n      marginBottom: 12,\r\n      gap: 12,\r\n    },\r\n    heading: {\r\n      fontSize: 24,\r\n      fontFamily: FONTS.bold,\r\n      color: COLORS.primary,\r\n      textAlign: \"left\",\r\n      marginBottom: 16,\r\n      letterSpacing: -0.5,\r\n    },\r\n    cardText: {\r\n      fontSize: 16,\r\n      fontFamily: FONTS.regular,\r\n      color: COLORS.textPrimary,\r\n      lineHeight: 26,\r\n    },\r\n    cardGroup: {\r\n      marginBottom: 32,\r\n    },\r\n    safeArea: {\r\n      flex: 1,\r\n      backgroundColor: COLORS.background,\r\n    },\r\n    smallLeftMargin: {\r\n      marginLeft: 8,\r\n    },\r\n    contentPaddingBottom: {\r\n      paddingBottom: 120,\r\n    },\r\n    sectionTitle: {\r\n      fontSize: 20,\r\n      color: COLORS.textPrimary,\r\n      fontFamily: FONTS.bold,\r\n      marginBottom: 20,\r\n      letterSpacing: -0.5,\r\n    },\r\n    empty: {\r\n      fontSize: 16,\r\n      color: COLORS.textSecondary,\r\n      marginTop: 32,\r\n      textAlign: \"center\",\r\n      fontFamily: FONTS.medium,\r\n    },\r\n  });\r\n}\r\n\r\nconst ThemeContext = createContext(null);\r\n\r\nexport function ThemeProvider({ children }) {\r\n  const [mode, setMode] = useState(null); // null = not yet loaded\r\n  const [isHydrated, setIsHydrated] = useState(false);\r\n\r\n  // Load saved preference or system preference on mount\r\n  useEffect(() =\u003e {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const stored = await AsyncStorage.getItem(\"@theme_mode\");\r\n        if (mounted) {\r\n          if (stored === \"light\" || stored === \"dark\") {\r\n            setMode(stored);\r\n          } else if (stored === \"system\") {\r\n            // Use system preference\r\n            const sys = Appearance.getColorScheme();\r\n            setMode(sys === \"dark\" ? \"dark\" : \"light\");\r\n          } else {\r\n            // No stored preference, use system and set to \"system\" mode\r\n            const sys = Appearance.getColorScheme();\r\n            setMode(sys === \"dark\" ? \"dark\" : \"light\");\r\n          }\r\n        }\r\n      } catch (e) {\r\n        const sys = Appearance.getColorScheme();\r\n        if (mounted) setMode(sys === \"dark\" ? \"dark\" : \"light\");\r\n      } finally {\r\n        if (mounted) setIsHydrated(true);\r\n      }\r\n    }\r\n\r\n    load();\r\n\r\n    const sub = Appearance.addChangeListener(({ colorScheme }) =\u003e {\r\n      // If user hasn\u0027t chosen yet (no stored pref) or has chosen \"system\", update with system changes\r\n      AsyncStorage.getItem(\"@theme_mode\").then((stored) =\u003e {\r\n        if (!stored || stored === \"system\") {\r\n          setMode(colorScheme === \"dark\" ? \"dark\" : \"light\");\r\n        }\r\n      });\r\n    });\r\n\r\n    return () =\u003e {\r\n      mounted = false;\r\n      try {\r\n        sub \u0026\u0026 sub.remove \u0026\u0026 sub.remove();\r\n      } catch (e) {\r\n        // ignore remove errors during unmount, but log in dev\r\n        if (typeof console !== \"undefined\")\r\n          console.warn(\"Appearance listener remove failed\", e);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const colors = useMemo(\r\n    () =\u003e (mode === \"dark\" ? darkColors : lightColors),\r\n    [mode]\r\n  );\r\n\r\n  // Pass mode to createGlobalStyles to handle conditional styles\r\n  const styles = useMemo(() =\u003e createGlobalStyles(colors, mode), [colors, mode]);\r\n\r\n  // Gradient Constants\r\n  const gradients = useMemo(() =\u003e ({\r\n    primary: mode === \u0027dark\u0027\r\n      ? [colors.primary, \u0027#60A5FA\u0027] // Lighter blue for dark mode\r\n      : [colors.primary, \u0027#1D4ED8\u0027], // Darker blue for light mode\r\n    card: mode === \u0027dark\u0027\r\n      ? [colors.cardBackground, \u0027#1E293B\u0027]\r\n      : [colors.cardBackground, \u0027#F8FAFC\u0027],\r\n    success: [\u0027#22C55E\u0027, \u0027#16A34A\u0027],\r\n    error: [\u0027#EF4444\u0027, \u0027#DC2626\u0027],\r\n  }), [colors, mode]);\r\n\r\n  const setAndPersist = (newMode) =\u003e {\r\n    // Update state immediately for instant UI feedback\r\n    setMode(newMode);\r\n\r\n    // Persist to storage in the background\r\n    if (newMode === \"system\") {\r\n      AsyncStorage.removeItem(\"@theme_mode\").catch(() =\u003e {\r\n        // ignore persistence error\r\n      });\r\n    } else {\r\n      AsyncStorage.setItem(\"@theme_mode\", newMode).catch(() =\u003e {\r\n        // ignore persistence error\r\n      });\r\n    }\r\n  };\r\n\r\n  const toggle = () =\u003e setAndPersist(mode === \"dark\" ? \"light\" : \"dark\");\r\n\r\n  // While hydrating, render nothing to avoid flicker. Child components may expect useTheme to exist, so\r\n  // keep provider but return null for children until hydrated.\r\n  return (\r\n    \u003cThemeContext.Provider\r\n      value={{ mode: mode || \"light\", toggle, colors, styles, gradients }}\r\n    \u003e\r\n      {isHydrated ? children : null}\r\n    \u003c/ThemeContext.Provider\u003e\r\n  );\r\n}\r\n\r\nexport function useTheme() {\r\n  const ctx = useContext(ThemeContext);\r\n  if (!ctx) throw new Error(\"useTheme must be used within ThemeProvider\");\r\n  return ctx;\r\n}\r\n\r\nexport default ThemeContext;\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\utils\\apiFetch.js",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027silent\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  6,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  6,
                                           "endColumn":  17
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import AsyncStorage from \u0027@react-native-async-storage/async-storage\u0027;\r\n\r\n// Enhanced wrapper around fetch that:\r\n// 1. Automatically includes auth token if available\r\nexport default async function apiFetch(input, init = {}) {\r\n  const { silent = false, ...fetchInit } = init;\r\n\r\n  // Get auth token from storage\r\n  const token = await AsyncStorage.getItem(\u0027@auth_token\u0027);\r\n\r\n  // Merge headers with auth token if available\r\n  const headers = {\r\n    ...(fetchInit.headers || {}),\r\n  };\r\n\r\n  // Add Authorization header if token exists and not already set\r\n  if (token \u0026\u0026 !headers[\u0027Authorization\u0027] \u0026\u0026 !headers[\u0027authorization\u0027]) {\r\n    headers[\u0027Authorization\u0027] = `Bearer ${token}`;\r\n  }\r\n\r\n  // Make the fetch request with merged headers\r\n  const response = await fetch(input, {\r\n    ...fetchInit,\r\n    headers,\r\n  });\r\n\r\n  return response;\r\n}\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\utils\\cache.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\utils\\date.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\utils\\fcm.js",
                      "messages":  [
                                       {
                                           "ruleId":  "no-unused-vars",
                                           "severity":  1,
                                           "message":  "\u0027result\u0027 is assigned a value but never used. Allowed unused vars must match /^_/u.",
                                           "line":  99,
                                           "column":  11,
                                           "nodeType":  "Identifier",
                                           "messageId":  "unusedVar",
                                           "endLine":  99,
                                           "endColumn":  17
                                       }
                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  1,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "source":  "import * as Notifications from \u0027expo-notifications\u0027;\r\nimport { Platform } from \u0027react-native\u0027;\r\n\r\n/**\r\n * Get the FCM (Firebase Cloud Messaging) registration token using Expo Notifications\r\n * This works on both Android and iOS without requiring a rebuild\r\n * @returns {Promise\u003cstring\u003e} The FCM/Push token\r\n * @throws {Error} If the token cannot be retrieved\r\n */\r\nexport async function getFCMToken() {\r\n  try {\r\n    // Request permissions first\r\n    const { status: existingStatus } = await Notifications.getPermissionsAsync();\r\n    let finalStatus = existingStatus;\r\n\r\n    if (existingStatus !== \u0027granted\u0027) {\r\n      const { status } = await Notifications.requestPermissionsAsync();\r\n      finalStatus = status;\r\n    }\r\n\r\n    if (finalStatus !== \u0027granted\u0027) {\r\n      throw new Error(\u0027Permission to access notifications was denied\u0027);\r\n    }\r\n\r\n    // Get the device-specific push token (FCM on Android, APNs on iOS)\r\n    const devicePushToken = await Notifications.getDevicePushTokenAsync();\r\n\r\n    return devicePushToken.data; // This is the actual FCM token on Android\r\n  } catch (error) {\r\n    console.error(\u0027[FCM] Failed to get token:\u0027, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Get the FCM token and log it to console\r\n * Useful for development and debugging\r\n */\r\nexport async function logFCMToken() {\r\n  try {\r\n    const token = await getFCMToken();\r\n    return token;\r\n  } catch (error) {\r\n    console.error(\u0027Failed to retrieve FCM token:\u0027, error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Register FCM token with backend server\r\n * This allows the backend to send push notifications to this device\r\n * @param {string} token - The FCM token to register\r\n * @returns {Promise\u003cboolean\u003e} Success status\r\n */\r\nexport async function registerFCMTokenWithBackend(token) {\r\n  try {\r\n    const AsyncStorage = (await import(\u0027@react-native-async-storage/async-storage\u0027)).default;\r\n    const apiFetch = (await import(\u0027./apiFetch\u0027)).default;\r\n    const apiConfig = (await import(\u0027../config/apiConfig\u0027)).default;\r\n\r\n    const authToken = await AsyncStorage.getItem(\u0027@auth_token\u0027);\r\n    const storedUser = await AsyncStorage.getItem(\u0027@auth_user\u0027);\r\n\r\n    let userId = \u0027guest\u0027;\r\n    let isAuthenticated = false;\r\n\r\n    if (storedUser) {\r\n      try {\r\n        const user = JSON.parse(storedUser);\r\n        userId = user._id || user.id || \u0027guest\u0027;\r\n        isAuthenticated = !!authToken;\r\n      } catch (e) {\r\n        console.warn(\u0027[FCM] Failed to parse user data:\u0027, e);\r\n      }\r\n    }\r\n\r\n\r\n\r\n    const response = await apiFetch(apiConfig.url(apiConfig.endpoints.fcm.register), {\r\n      method: \u0027POST\u0027,\r\n      silent: true,\r\n      headers: {\r\n        \u0027Content-Type\u0027: \u0027application/json\u0027,\r\n        ...(authToken \u0026\u0026 { \u0027Authorization\u0027: `Bearer ${authToken}` })\r\n      },\r\n      body: JSON.stringify({\r\n        token,\r\n        userId,\r\n        platform: Platform.OS,\r\n        isAuthenticated\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() =\u003e ({}));\r\n      throw new Error(errorData.message || \u0027Failed to register FCM token\u0027);\r\n    }\r\n\r\n    const result = await response.json();\r\n\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\u0027[FCM] Failed to register token with backend:\u0027, error);\r\n    // Don\u0027t throw - failing to register token shouldn\u0027t break the app\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default {\r\n  getFCMToken,\r\n  logFCMToken,\r\n  registerFCMTokenWithBackend,\r\n};\r\n",
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\utils\\googleDrive.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  },
                  {
                      "filePath":  "C:\\Users\\LENOVO\\Desktop\\Avinash\\School\\Mobile app\\frontend\\utils\\queryClient.js",
                      "messages":  [

                                   ],
                      "suppressedMessages":  [

                                             ],
                      "errorCount":  0,
                      "fatalErrorCount":  0,
                      "warningCount":  0,
                      "fixableErrorCount":  0,
                      "fixableWarningCount":  0,
                      "usedDeprecatedRules":  [

                                              ]
                  }
              ],
    "Count":  78
}
